
######################################
#  Game Information                  #
######################################
game_information {
   game_name        = The Faeries of Haelstowne
   game_shortname = FOH
   written_by       = Christopher Merriner
   year_of_original = 2021
   year_of_release  = 2021
   short_synopsis   = Supernatural Adventure
   game_version     = 1.0.6
   uuid = 56293730-82bb-42f2-b2fa-5e3342770acd
   
   
}
######################################
#  Adventuron                        #
######################################
start_at = dining_room
start_theme = blackonyellow
loading_screen = loading_screen_png
######################################
#  Game Settings                     #
######################################

game_settings {
   rewind_enabled   = true
   dark_expression = is_dark
   enable_standard_all_behaviour = false
// experimental_auto_propogate_known = true
inventory_weight_limit_var = inventory_weight_limit
inventory_items_limit_var = inventory_item_limit
// experimental_new_scoping = false
exit_list_calculation = basic
default_location_graphic = default_location_graphic
}




######################################
#  On Startup                        #
######################################



on_startup {
 
  : create "edna_taplow" target = "hallway_2" ;
    : create "bunch_keys" target = "kitchen" ;   
  : ask_bool {
     var      = skip_intro
     question = Do you want to see the introduction?
    
       }
  
  : if (skip_intro) {
 : clear_screen;
 : print "\"Hailstone,\" announced the Chief, startling Detective Constable Arthur Mapple who had been staring idly through the grimy window at the great crowds of people choking up the narrow arteries of Stathings." ;
 : press_any_key ;
 : print "It was high summer, a few days before the middle of the year. After that, as Arthur's landlady would remind him with dour relish, the nights would start to draw in. But the holiday makers who thronged below cared nothing for that. It was a gloriously hot day, there was a carnival atmosphere, and jolly, railway-accessible Stathings-next-the-Sea was just the place to be." ;
 : press_any_key ;
 : print "Arthur blinked. \"Hailstone?\" It hardly seemed likely. He squinted up at the sky. \"Are you sure?\"\n\"No lad, not Hailstone. Haelstowne.\" He spelt it out for Arthur. \"Round Ashton way.\"\n\"Haelstowne...\" Something sparked in Arthur's memory at the mention of the name. \"Of course! The Haelstowne Faeries.\"" ;
 : press_any_key ;
 
 : print "It had been a few years before, at the height of the Cottingley mania, when a local vicar had come forward with his own faery photographs. They'd been picked up by the press and there had been a minor sensation before it all blew over and was forgotten about. Arthur, always interested in photography, had laughed when he saw the pictures. They were so patently cut-out figures. How could anyone believe in such things?" ;
 : press_any_key ;
 : print "\"That's it. A little job for you, Arthur. Their vicar's gone missing.\" Arthur raised his eyebrows. \"Not him. He's long gone. The new one. Reverend Jeremiah Peldash. I'd like you to pop over there and see what you can sniff out about it.\"" ;
 
 : press_any_key ;
: clear_screen;

 
 : print "\"But sir, surely they have their own...\"\n\"Local bobby's got nowhere with it so Regional Office are calling us in.\" He flicked his eyes heavenward, indicating unseen higher powers. \"I said I'd put my best man on it.\"\nArthur, in spite of himself, felt flattered." ;
 : press_any_key ;

 
 : print "\"When would you like me to go sir?\"\n\"No time like the present.\" The Chief tossed some notes onto his desk. \"You can pack your things and pop down there this afternoon. Bit of a drive, but I expect you'll enjoy that, in your little put-put.\" He enjoyed teasing Arthur about his beloved Austin Seven; it was good-natured and not a little tinged with jealousy." ;
 : press_any_key ;

 : print "\"Right sir.\" Arthur picked up the notes and prepared to leave.\n\"Oh, and one other thing,\" said the Chief as Arthur made for the door.\n\"Yes sir?\"\n\"They're a funny lot over in those parts. Superstitious. Someone's hiding something; don't let them pull the wool over your eyes.\"" ;
 : press_any_key ;

 : print "Arthur was intrigued, and more than a little glad to have some real detecting to do for once, besides escaping the seaside crowds. This job might prove to be interesting." ;
 : press_any_key ;

: clear_screen;

 : print "Arthur drove away from the coast until the hazy strip of blue disappeared behind the slopes of the Downs. Presently, he turned off the main road and began to descend through narrow country lanes folded between patchwork fields and sparse pockets of woodland.  He had entered the distinctive landscape of the Low Weald." ;
 : press_any_key ;
 : print "The Austin purred along happily and simply ate up the miles; before long Arthur saw the distant hump of the roundbarrow that he knew marked the southern boundary of the parish and a little beyond, the village of Nether Haelstowne." ;
 : press_any_key ;
 : print "He drove through, enjoying the gawping of the villagers (whom he assumed, rather condescendingly, weren't used to seeing such a fashionable motor vehicle) and sped onwards to The Vicarage, driving between its narrow gate posts at a little after three." ;
 : press_any_key ;
 : print "As he stopped the engine, he sensed the strange atmosphere of the place. It was the change of air, no doubt; it always smelled different inland. Mrs Taplow, The Vicarage housekeeper, greeted him a little warily and, having learned his business, showed him to his room. All was quiet and peaceful within." ;
 : press_any_key ;
 : print "Later on, reading the case notes in the absent Reverend's study, he wondered what could have happened to the man. Vicars didn't simply vanish into thin air. Kidnap? Murder? Desertion? Odder things had happened. And yet, he sensed that there was more to this affair. Something peculiar that he couldn't quite put his finger on..." ;
 : press_any_key ;
 : print "He finished his reading and retired early to bed, quite determined and quite confident that he could solve this little mystery in the morning." ;
 : press_any_key ;
: clear_screen;
   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^June 21st 1928";
        : pause "1500" ;
        : print "^c^(Daytime)";
        
   : pause "2000" ;
   
       : clear_screen;

 
       }

}


######################################
#  Booleans                          #
######################################

booleans {


plates : boolean;
   
housespellbroken : boolean;
   
cupboardopen : boolean;

draweropen : boolean;
 
breakfast_scene : boolean default="false";

flowersinvase : boolean default = "true" ;
   
matchboxopen : boolean;
  
lampempty: boolean;

light_on : boolean;

safelight : boolean;

nail_in_case : boolean;


is_dark : dynamic_boolean {(
      is_at "darkroom" &&
      !light_on&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"&&
      !blinder
      ||is_at "cellar_passage"&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"
      &&
      !blinder
      ||is_at "cellar_room"&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"
      &&
       !blinder
       ||is_at "coal_cellar"&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"
      && !blinder
       ||is_at "well"&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"
      &&
       !blinder
        ||is_at "pub_cellar"&&
      !is_present "holder_1"&&
      !is_present "safelight"&&
      !is_carried "match_1"
      &&
      !blinder
   )}

is_inaccessible_darkness_verb : dynamic_boolean {(
      (
         /* is movement command matches any system compass direction verb + all aliases */
         is_movement_command () ||
         verb_is "quit"         ||
         verb_is "save"         ||
         verb_is "load"         ||
         verb_is "inventory"    ||
         verb_is "turns"        ||
         verb_is "look"||
         verb_is "turn"|| verb_is "get"||
         verb_is "open"||
         verb_is "light"||
         verb_is "open"||
         verb_is "close"||
         verb_is "safelight"
      ) == false
   )}
   lampfull : boolean;
   
   lamplit : boolean;
   
   bottle_open : boolean;
   
   lamp_open: boolean;
   
   matchlit : boolean;

matchesinbox :boolean default = "true" ;

cameraopen : boolean;

tiny_man_photo : boolean;


allindish : boolean;

negatives : boolean;
prints: boolean;

cameraloaded : boolean;
filmended : boolean;

topwindowopen : boolean;

candleinholder : boolean;

thurgood_bike: boolean;

thurgood_car: boolean;


#PHOTO FLAGS start

photo_inside_vicarage: boolean;
photo_outside_vicarage: boolean;
photo_lanes: boolean;
photo_dmv: boolean;
photo_outside_church: boolean;
photo_inside_church: boolean;
photo_chapel_outside: boolean;
photo_road_village: boolean;
photo_around_village: boolean;
photo_wetland: boolean;
photo_garden: boolean;
photo_rockery: boolean;
photo_salter: boolean;
photo_pub: boolean;
photo_taplow: boolean;
photo_thurgood: boolean;
photo_farthing: boolean;
#PHOTO FLAGS end

#CONVERSATION FLAGS start

taplow_car : boolean;
taplow_ottoline : boolean;
taplow_rumour: boolean;
taplow_thurgood : boolean;


#CONVERSATION FLAGS end
faeries_car : boolean default = "true" ;

controls_set : boolean;

tried_engine : boolean;

seen_faeries : boolean;

rainstorm : boolean;

exposure : boolean;

cottagerouteclear : boolean ;

bikefixed : boolean;

onbike : boolean;

hasbike : boolean;

moved_tapestry: boolean;

dresserdraweropen : boolean;

cupboard_stuck : boolean default = "true" ;

flask_open: boolean;

developer_in_bottle : boolean default = "true";

fixer_in_flask : boolean default = "true" ;

photographed_faeries : boolean;

film_developer_washedoff : boolean;

film_fixer_washedoff : boolean;

print_developer_washedoff : boolean;

print_fixer_washedoff : boolean;

tap_on : boolean;

glass_in_frame : boolean default = "true" ;

packet_open : boolean;

negs_on_sheet : boolean;

glass_on_sheet : boolean;

negsandglass_on_sheet : boolean;

contact_sheet_prepped : boolean;

negs_hung : boolean;

prints_hung : boolean;

negs_dry : boolean ;

flowers_in_vase : boolean default = "true" ;

key_on_hook : boolean default = "true";

beside_steps : boolean;

vase_on_candle : boolean;

window_open : boolean;

baking_smell : boolean default = "true" ;

window_counter_on : boolean;

recess_way_clear : boolean;

seen_taplow_up : boolean;

seen_taplow_down : boolean;

peldash_door_unlocked : boolean;

cellar_door_unlocked : boolean;

nancy : boolean;

parson : boolean;

foursquare : boolean;

thraplington: boolean;

need_paper : boolean;

wardrobe_open : boolean;

wardrobe_drawer_open : boolean;

panel_pressed : boolean;

frame_open : boolean;

drywell : boolean;

snowfall : boolean;

goggles_on_hook : boolean;

coat_on_hook : boolean default = "true";

snow_dug : boolean;

shoes_in_fireplace : boolean;

holding_rope : boolean;

coffer_open : boolean;

hymn_books_in_coffer : boolean default = "true" ;

moved_coffer : boolean;

panel_cupboard_open : boolean;

key_in_cupboard : boolean default = "true" ;

chapel_door_locked : boolean default = "true";

cover_on: boolean default = "true";

rope_tied : boolean;

fence_post_fixed : boolean;

rope_down_well : boolean;

letter_opened : boolean;

ash_touched : boolean;

ash_follow : boolean;

asked_about_bird : boolean;

asked_about_portrait : boolean;

asked_about_ashtray : boolean;

ottoline_follow : boolean;

crow_flown : boolean;

clipper_1 : boolean;

clipper_2 : boolean;

clipper_3 : boolean ;

trunk_locked : boolean default = "true" ;
 
trunk_open : boolean;

nail_in_trunk : boolean default = "true" ;

chair_wedged : boolean;

sitting : boolean default = "true" ;

chair_on_table : boolean;

bung_in_bottle : boolean;

holding_hands: boolean;
something_is_blocking_the_spirits: boolean;

specs_in_case : boolean default = "true" ;

case_open : boolean;

case1_open : boolean;

blinder : boolean;

bell_instructions : boolean;

piano_open: boolean;

noticed_fox_carving : boolean;

casket_open: boolean;

taken_ashtray : boolean;

beer_tap_on : boolean default = "true" ;

beer_keg_open : boolean;

witch_bottle_open : boolean;

witch_bottle_empty : boolean;

gossip_in_bottle : boolean;

gossip_in_keg : boolean;

blood_in_keg : boolean;

has_read_ingredients : boolean;

sign_of_wind : boolean;

sign_of_eye : boolean;

sign_of_moon : boolean;

sign_of_sun : boolean;

endgame: boolean;

first_time : boolean;
 
daytime : boolean default = "true" ;

taplow_robes;
thurgood_robes;
salter_robes;
molly_robes;
ottoline_robes;
daisy_robes;
frank_robes;
drywell_robes;
taplow_glasses;
thurgood_glasses;
salter_glasses;
molly_glasses;
ottoline_glasses;
daisy_glasses;
frank_glasses;
drywell_glasses;
need_instructions : boolean;
envelope_open: boolean;

letter_in_envelope : boolean default = "true" ;

has_read_incantation : boolean;

chit_chat : boolean;

skip_intro : boolean;

areyousure : boolean;

rumble : boolean;

first_hint : boolean;

visited_end_of_drive : boolean;

special_place : boolean;

seen_ottoline_seance: boolean;

seen_depression : boolean;

shown_herbal : boolean;

shown_remnant : boolean;

}

######################################
#  Integers                          #
######################################
//CONTAINER CODE
integers {
burncounter : integer "3" ;
traptor : integer "1";
breakfastclearingcounter: integer "5";
cupboard_item_limit : integer "4";
drawer_1_item_limit : integer "4" ;
drawer_item_limit : integer "4" ;

dish_item_limit : integer "4" ;

sink_item_limit : integer "5" ;

bucket_item_limit : integer "4" ;

bottle_item_limit : integer "2" ;
flask_item_limit : integer "2" ;
framenumber : integer "0" ;
   
faerycounter : integer "0" ;
   
faerytreesinstance : integer "0" ;

nonwettable_things_in_dish: integer "0";
nonwettable_things_in_bucket: integer "0";
nonwettable_things_in_sink: integer "0";
nonwettable_things_in_bottle: integer "0";
nonwettable_things_in_flask: integer "0";


bucket_units : integer "0" ;

inventory_weight_limit : integer "100" ;

inventory_item_limit : integer "100" ;

taplow_window_counter : integer "0" ;

taplow_ask_counter : integer "0" ;

thurgood_ask_counter : integer "0" ;

salter_ask_counter : integer "0" ;

molly_ask_counter : integer "0" ;

jarbell_ask_counter : integer "0" ;

farthing_ask_counter : integer "0" ;

mrsfarthing_ask_counter : integer "0";

ottoline_ask_counter : integer "0" ;

drywell_ask_counter: integer "-1";

handy_counter : integer "0";

fixing_counter : integer "0" ;

games_counter : integer "4" ;

pub_brawl_counter : integer "0" ;

peldash_ghost_counter : integer "5" ;

bell_ringing : integer "0" ;

tea_counter : integer "0" ;
 
crow_directions : integer "0" ;

ottolines_irritation_counter : integer "0" ;

hack_counter : integer "0" ;

spacing_counter : integer "5" ;

chairs_available: integer "0" ;

fragments_in_mirror : integer "0" ; 

bleeding : integer "0" ;

reading : integer "0";

spell: integer "0";

countdown_horses : integer "7" ;

intro : integer "0" ;

countdown_to_endgame: integer "11";

fragments_counter : integer "0" ;

}

######################################
#  Strings                           #
######################################
//CONTAINER CODE
strings {
      
      drawer_1_description: string ;
      developingbox_description : string;
      cupboard_description: string;
      drawer_description: string;
      dish_description: string;
      sink_description: string;
      bucket_description: string;
      bottle_description: string;
      flask_description: string;
      emptying_description: string;
      matchbox_description: string "a matchbox" ;
      
      whats_in_the_keg : string "";
      ottoline_seance: string "";
      signs_got: string "";
      candleholder_description: string "a candle holder (empty)";
message_001 : dynamic_string {(lamplit ? "yes" : "no"+(is_dark ? "yes" : "no"))} ;

taplowtalk: string;
film_description: string "a roll of film";
sheet_description: string "a sheet of new, unexposed photo paper";
images_descriptionstring : string;
seance_check_string: string;
keys_description: string "a bunch of keys (hanging from the hook)";

goggles_description: string "a pair of goggles (hanging from the hook)";
// flowers_description: string "some dried flowers (in the vase)";
coat_description: string "a heavy woollen overcoat (hanging in the wardrobe)";
vase_description: string "a vase (containing a bouquet of dried flowers)";
vase1_description: string "a broken vase";
boots_description: string "a pair of stout boots";

gloves_description: string "a pair of knitted gloves" ;

robes_description: string "a set of robes";

nez_description: string "a pair of pinze-nez";


wardrobe_description: string "a wardrobe (closed)";

date_description: string "June 21st 1928 (Daytime)";

coffer_description: string "a coffer (closed)";

hymn_books_description: string "some hymn books (in the coffer)";

cupboard1_description: string "a cupboard, concealed within the panelling (closed)";

iron_key_description: string "a huge iron key (in the cupboard)";

rope_description : string "a piece of rope" ;

post_description: string "a fence post";

ashtray_description: string "an ashtray";

ottoline_description: string "Ottoline Elderfield";

crow_description: string "a huge black crow (in a cage)";

gardening_gauntlets_description: string "a pair of gardening gauntlets (inside the cold frame)";

nail_description: string "a horseshoe nail (in the trunk)" ;

chair1_description: string "a chair";

chair2_description: string "a chair";

chair3_description: string "a chair";

down_chair_location : string ;

round_table_description: string "a round table (in the middle of the room)";

spectacles_description: string "a pair of pince-nez";

case_description: string "a spectacles case (closed)";


rail_description: string "an iron rail" ;

book_description: string "a tattered book (in the small wooden casket)";

box_description: string "a small wooden casket (within the cavity)";

beer_keg_description: string "a beer keg (attached to the hose)";
keg_description: string "a beer keg";

date_stone_description: string "a date stone (set in the stone wall)" ;

DMV1 : dynamic_string {( (!endgame ? "This was a wide empty field of neatly mown grass that undulated irregularly across shallow humps and troughs - the signature of hidden structures beneath the sod. Arthur realised that this must be the site of the deserted medieval village of Haelstowne, its houses and streets long since buried. \n There was a palpable atmosphere of tranquillity tinged with sadness, as of places that have witnessed great human tragedies in the distant past. Arthur recognised the feeling from the civil war battlefield close to his childhood home, where he played as a boy.\n A path led north and south." : "This was the village, where the dung and cinder lined road through the square gave way to a surface of packed earth and stones. Amongst the crude wattle and daub dwellings was a shuttered building with a sign depicting a huge horseshoe that Arthur surmised was the village smithy, and the sound of penned cattle came from a little way off. There was a pervasive stench of ordure and charcoal.  \n A path led north and south."))};


DMV2 : dynamic_string {( (!endgame ? "Here, in the middle of the field, low mounds surrounded a large, flattish area bisected by a somewhat sunken track that Arthur surmised must once have been the village square.\n The atmosphere of peaceful sadness was particularly strong here, but with another current running beneath - something very powerful but very faint, like the last dying echoes of a far-off explosion.\nThe sunken track led north and south while smaller paths ran away west between irregular humps and east through a lychgate into the churchyard." : "Arthur stood in the square of the medieval village of Haelstowne. All around were clustered the single storey, timber framed wattle and daub dwellings of Haelstowne, most of them shuttered against the night. The air was heavy with a stench of smoke, dung and rotting vegetable matter and Arthur saw flickering lights behind the boards in many of the houses. Some of the braver villagers were out of doors but most stayed within their houses, fearful of what this night would bring.\nThe main village street ran north and south while lanes led east and west."))};

DMV3 : dynamic_string {( (!endgame ? "Arthur followed the track until it petered out into a meadow area of tall grass and wild flowers. A little way off was the edge of the village site and then farmland beyond. In the far distance Arthur spotted the dark hump of a tumulus rising from the surrounding fields and felt a distinct sense of foreboding as he gazed at it.\n The path led north and south while a track led east." : "Here, at the outer edge of the village, the ever present smell of ordure overpowered the other fragrance notes to become a prevailing stench. A stooped figure carrying something heavy passed Arthur at a little distance, and emptied his burden with a splashing sound into a dark pit with before shuffling away. Arthur, realised that he was watching the night soil men at work, covered his nose with his handkerchief and felt a little nauseous.\n The path led north and south while a track led east."))};

DMV4 : dynamic_string {( (!endgame ? "Here the earthworks were more prominent and clearly traced the outlines of vanished buildings. Arthur spied a large, unusually shaped depression in the earth a little way off.\nTracks led east and south. " : "Here a street of closely placed single storey hovels gave way to a larger building partly of stone, with an upper storey supported on timbers and projecting into the street: no doubt the residence of a wealthy merchant family, living cheek by jowl with their poorer neighbours.\nTracks led east and south. "))};
DMV5 : dynamic_string {( (!endgame ? "In this flattish area the grass was conspicuously longer than elsewhere, as though these particular ground conditions were especially conducive to its growth.\n A track led north. " : "Here one of the larger hovels served as an alehouse, as evidenced by its sign depicting a foaming flagon and bunch of hops for the benefit of an illiterate populace. Arthur noted what a perilously short distance away was the gaping mouth of the well and wondered how many villagers across the ages had made a drunken journey from the inn door to their final watery resting place.\n A track led north."))};
DMV6 : dynamic_string {( (!endgame ? "Arthur traversed a ridge and descended into a flat areas surrounded by low banks pockmarked by burrows and scattered with rabbit droppings\nA track led west." : "This was a small piece of common ground used to graze cattle, judging by the cropped grass and abundance of cowpats. A stockade separated it from the dwellings alongside.\nA track led west."))};

DMV_header : dynamic_string {( (!endgame ? "The Deserted Village" : "The Medieval Village"))};



peldash_description: string "The Reverend Jeremiah Peldash (on the ground)";

thripple : string "dripple" ;
woodpath_1: dynamic_string {(clipper_2 ? "Another way led west through recently clipped foliage." : ""
   )}
   woodpath_2: dynamic_string {(clipper_3 ? "Another way led north through recently clipped foliage." : ""
   )}
  wood_entrance: dynamic_string {(clipper_1 ? "Another way led northwest through recently clipped foliage." : ""
   )}
   drywell_description : string "" ;
glass_description: string "a pane of glass";
cold_frame_description: string "a cold frame (closed)";

hose_description: string "a beer hose (connected to a keg)";
}

######################################
#  Collections                       #
######################################
//CONTAINER CODE
collections {
development_box_objects : list;
cupboard_objects: list;
drawer_objects: list;
dish_objects: list;
sink_objects: list;
bucket_objects: list;
drawer_1_objects : list; 
bottle_objects: list;
flask_objects: list;
photos:list;
keg_objects: list;
seance_check : list;
ottoline_seance_entrance: list;
signs_wot_got: list;
   
}

######################################
#  Traits                            #
######################################
traits {
   
   too_big_for_container_t : trait;
   
   container_t : trait;
   
   wettable_t: trait;
   
   matchboxable_t : trait;
   
   liquid_t : trait;
   getunderable_t: trait;
   books_t : trait;
}
######################################
#  Barriers                          #
######################################

barriers {

 darkroom_door : block {
    location = darkroom
    message  = Arthur couldn't go that way.
    show_blocked_exit = false
    block_when_not = moved_tapestry
    
 }
 
 recess_path : block_path {
    from    = on_steps
    to      = recess
    block_when_not = recess_way_clear
    
 }
 peldash_door : block {
location = peldash_room
block_when_not = peldash_door_unlocked
message = Arthur tried the door and discovered it was locked.
show_blocked_exit = true
 }
  cellar_door : block {
location = cellar_passage
block_when_not = cellar_door_unlocked
message = Arthur tried the door and discovered it was locked.
show_blocked_exit = true
 }

 chapel_door : block {
 
    location = chapel
    message  = Arthur tried the door and discovered it was locked.
block_when = chapel_door_locked
    show_blocked_exit = true
 }
 well : block {
 
    location = well
 block_when_not_exists = hole
    
 }
 woodland_1 : block {

    location = wood_path_1
block_when_not = clipper_1
 }
 woodland_2 : block {
 
    location = wood_path_2
    block_when_not = clipper_2
 }
 
 woodland_3 : block {
 
    location = wood_path_3
    block_when_not = clipper_3
 }
 
 
 
}



######################################
#  Locations                         #
######################################

locations {

study : location "The study was a less formal space than the rather haughty drawing room across the hallway, with threadbare furnishings in a mixture of styles, chosen more for comfort than aesthetic appeal. There was a faded chaise-longue against one wall and a couple of dusty armchairs by the fireplace, whilst a writing desk was situated beneath a window that looked out on the lawn. Bookcases occupied most of the walls, with a large hanging tapestry covering the remainder. Arthur felt rather at home in there. \n{moved_tapestry? `There was a door to the south and another to the east.`:`There was a door to the south.`}" header = "The Study" ;

  darkroom : location "The darkroom was a claustrophobic cubby hole beneath the stairs. There was a stout wooden work bench against one wall with a small cupboard above while overhead lengths of twine spanned the room. There was a unique smell of old wood, chemicals and must. Judging by the dust, the place had not been used in some time. \nThere was a door to the west." header = "The Darkroom"  ;
  
outbuilding : location "The outbuilding was a small, shabby structure with a roof of cracked tiles, dirt-encrusted windows and a door that seemed to not quite fit in its frame. Nevertheless, it seemed weatherproof enough to serve as a place to store all kinds of clutter that was not fit to be kept in a house but was too useful to throw away, as well as Mr Thurgood's workshop. \nThere was a door to the east." header = "The Outbuilding"  ;
  
   drawing_room : location "The drawing room was mainly used for the receiving of visitors and as such it contained the best of the furniture and the most display-worthy of the knick-knacks that had accumulated over the years. A large window looked out over the driveway at the front of the house. \nThere was a door to the north."header = "The Drawing Room"  ;
   
   hallway_3 : location "The western end of the hallway led to the main entrance of The Vicarage. Here, the black and white tiles abutted ancient flagstones polished smooth by generations of feet crossing the threshold of The Vicarage. \nThere was a door to the west, the hallway was east and the kitchen lay to the north." header = "The West Hallway" ;

   hallway : location "The long, narrow hallway bisected The Vicarage from the back entrance at the east to the main door at the west. The floor was of regular black and white tile, but the undulating walls and uneven ceiling betrayed the many phases of rebuilding over the centuries. The main door was to the west and the back door to the east. \nDoors led north and south." header = "The Middle Hallway" ;
   
hallway_2 : location "The eastern part of the hallway led to the back entrance of The Vicarage, seldom used by visitors. Humbler than the west entrance, it had a cheerful aspect, as of places that welcome the morning sun. There were some framed paintings on the wall, rather faded from the light.  \n The back door was east and the hallway to the west. South was the dining room and a passage led north.\n{daytime? ` `:`Moonlight flooded in through the fanlight above the door and lit up the hallway.`}" header = "The East Hallway" ;
   

bottom_stairs : location "This short passageway ended at the foot of a flight of stairs which led to the upper floor. \nThe hallway was back to the south." header = "The Bottom of the Stairs" ;
   
top_stairs : location "Here, the top of the stairs intersected the landing. Light was provided by a window set into a recess high up in the northern wall opposite the staircase. \nThe landing led east and west and the stairs downwards to the ground floor. "header = "The Middle Landing" ; 


landing : location "Arthur made his way along the faded Turkish rug to the eastern end of the corridor. \nThe corridor led west and there was a door to the south." header = "The East Landing" ;

landing_2 : location "The landing was a run of uneven, creaking floorboards, polished to a lethally high sheen by a potent combination of Mrs Taplow's sweat and elbow grease. A heavily faded Turkish rug of unguessable antiquity provided a safe means of traversing the glass smooth corridor. \nThe corridor led east and there was a door to the south." header = "The West Landing" ;
   
   recess : location "The recess was a cramped space cut into the thickness of The Vicarage walls. There was a stone ledge below and a low curved roof above, forming a short tunnel that terminated in a window to the north through which Arthur could see the lawn at the back of the house. \nThe landing was down below." header = "The Recess" ;
   
bedroom_1 : location "This was the guest room that was Arthur's for the duration of his stay. Plainly furnished with bed and washstand, and decorated with wallpaper that might have been fashionable a century ago, it was nevertheless comfortable and served its purpose well enough. \nThere was a door to the north." header = "The Guest Bedroom" ;
   
dining_room: location "The dining room was a scarred remnant of the oldest vicarage, variously modified, maltreated and improved by successive owners over the centuries. The walls were crooked, the ceiling beams did not run parallel, and the ghosts of earlier doorways and windows were still visible behind the plasterwork as though there had been doubt about their place in the scheme of things before setting them in their current positions. \nThere was a door to the north." header = "The Dining Room";
   
kitchen : location "The kitchen was a warm, busy space looking out on the path that ran along the west side of The Vicarage. The plain whitewashed walls held residues and aromas from centuries of cooking and had been privy to all the usual intrigues, plots and scandals that hatched in the average kitchen. There was a venerable old range set into an enormous alcove where once the fire would have roared and various pots, pans and utensils hung upon the walls. A heavily scarred tombstone-thick slab of oak served as the kitchen table and general worksurface.\n There were doors to the north and south."header = "The Kitchen";

scullery : location "The scullery was a gloomy little room with a sloping roof, where most of the dirty work of the household, such as the dishwashing and laundry, was carried out. A huge porcelain sink took up one wall and an old dresser was set against the other. Most of the remaining space was occupied by a fearsome-looking mangle that squatted in the middle of the room and bared its rollers in silent menace. \nA door to the east led outside and another downwards; the hallway was to the south." header = "The Scullery"  ;
   
   cellar_passage : location "The cellar passage was a narrow, brick lined corridor that lead into darkness. It was very cold down there. The walls were crusted with salt and blind white spiders scuttled in cobwebbed corners. Arthur couldn't help but shiver. \nThe passage led eastwards and the stairs upwards to the scullery." header = "The Cellar Passage" ;
   
   cellar_room : location "The passage led to the main cellar chamber, a large, fusty-smelling room that served as a cold store as well as a final resting place for miscellaneous items that, for various reasons, could no longer lay claim to a place in the house above. On wooden shelves were cheeses and cured meats wrapped in linen, and at the rear of the room was a set of racking holding innumerable bottles, some of them so crusted with grime that they might have been trawled from an ancient shipwreck. This, presumably, was the reason why the cellar was kept locked. \nThere was a passage to the west and an entrance to the south." header = "The Cellar Room" ;
   
   coal_cellar : location "The coal cellar was as plain and functional as a room set aside for the storing of dirty black stuff should be. Arthur saw bare brick walls and a heap of coal glinting in the flickering light. \nAn entrance led north to the cellar room." header = "The Coal Cellar" ;
   
   outside_east : location "From the east side of The Vicarage there was a fine view of the peculiar sagging-loaf profile of the ancient building. The walls appeared to lean in all directions while the exposed timbers bulged beneath the burden of an enormous thatched roof. \nThe back door was west and the path led north and south." header = "The Stony Path";
   
   outside_west : location "The west wall of The Vicarage was the fascinating architectural history of the ancient building laid bare for all to see. A patchwork of late medieval stonework and timbers, with sporadic incursions of brickwork, showed clearly the successive phases of building; it was plain to see where the ungainly wing that now housed the kitchen and scullery had been rather haphazardly grafted onto the side of the original building. \nThe main door was east and the path led north and south." header = "The Stony Path" ;
    path : location "Here the stony path led westwards along the back of The Vicarage and southwards towards the back door."  header = "The Stony Path";
   
    path_2 : location "The stony path continued east-west along the back of The Vicarage. The garden was to the north."  header = "The Stony Path";
   
   path_3 : location "Here the stony path led east along the back of The Vicarage or turned northwards along the side of the scullery, which could be entered by a door to the west."  header = "The Stony Path";
   
   path_4 : location "The stony path ran northwards past the scullery and southwards to the west door of the house."  header = "The Stony Path";
   
   path_5 : location "Here the path ran eastwards along the back of the scullery and southwards along the west side of the house."  header = "The Stony Path";
   
   path_6 : location "Here the path ran southwards along the eastern wall of the scullery or westwards along its northern wall." header = "The Stony Path";
   
   path_7 : location "Here the path led east to the driveway at the front of the house or north towards the main door."  header = "The Stony Path";
  
  path_8 : location "Here the driveway terminated in a large circular patch of gravel beneath the drawing room window.\n A stony path led east and west, and the driveway led south towards The Vicarage gates."  header = "The Driveway";

path_9 : location "Here the path led west towards the driveway and north towards the back door."  header = "The Stony Path";

car_1 : location "The interior of the Austin Seven was, to Arthur, a becalming refuge of soft leather and polished wood to which he could retreat from the nasty world outside. The driver's seat was deliciously supple and springy, and the wheel cool and firm against his palms. The dials on the polished walnut dashboard stared unblinkingly at him and the controls waited in patient array, ready to perform his bidding. There was a wonderful scent of leather and engine oil. Arthur felt absolutely at home in his castle." header = "In the Car" ;

garden : location "The nearer part of the garden was an informal arrangement of carefully tended flower beds around a neatly kept lawn, the overall effect being quite decorative and a little rambling, in the country-cottage style. \nA track led south to the stony path and north further into the garden." header = "The Garden";


garden_3 : location "This was the old kitchen garden that had once been more extensive and surrounded by a wall, long since demolished. Here rows of vegetables grew alongside raspberry canes and fragrant herbs, providing abundant fresh produce for The Vicarage's small household.\n The path led south and east, while a track led northeast." header = "The Garden";

garden_4 : location "From here, there was a splendid view of the whole shambolic pile of The Vicarage. With its crooked roofline, small, deep-set windows and heavy overburden of thatch, it appeared to squint peevishly at Arthur from across the lawn. \nThe path ran east and west, and there was a potting shed to the north. At the edge of the lawn was a sundial."header = "The Garden";

potting_shed : location "The potting shed was an example of jerry building at its finest: each wall seemed to have started life as part of some other structure, the roof was a dangerous construction of corrugated iron and asbestos and the two large windows at the front were of different shapes and sizes. The whole leaned alarmingly to one side but somehow it contrived to stay upright. There was a unique and powerful stench of creosote and compost that quite took the breath away. \n There was a door to the south.  " header = "The Potting Shed";

garden_5 : location "This part of the garden was a tangled mass of foliage that seemed to be growing in all directions at once. Great fleshy shoots twisted and writhed together as though trying to strangle the life out of one another; barbed stems of rose and bramble fought their way upwards as they thrust towards the light. There was fruit everywhere: damsons, apples and pears hung alongside great clumps of blackberries. Arthur almost fancied he could hear the vegetation grow as it creaked and seethed in the breeze. \nThe track led southwest or north." header = "The Garden";

outside_Thurgoods : location "This small yard served a useful purpose in keeping the outbuilding at a decent distance from Gardener's Cottage; aside from that it was, thought Arthur, a rather unremarkable place. \n A path led south and the outbuilding was to the west."header = "Garden Cottage yard";

rockery : location "The rockery was a low tumbled mound of large moss-covered stones, between which sprouted dwarf trees and shrubs. The branches of surrounding trees formed a leafy roof through which the light filtered, casting a gloomy green shadow over all.\n A path led west and there was a way up the rockery between the stones." header = "The Lower Rockery";

top_rockery : location "Here a little more sunshine broke through the canopy, scattering light across the rocks beneath. The shrubs grew rather more thickly up here, around the little stand of rhododendron trees that crowned the summit.\n A rough path between the stones threaded its way down the rockery."header = "The Upper Rockery";

in_trees : location "Arthur was amongst the shadows beneath the rhododendron trees, looking out onto the rockery. {photographed_faeries? ` `:`There was a strange, expectant atmosphere as of things waiting to happen.`} \nThere was a way out to the top of the rockery." header = "Beneath the Trees"; 
 
 drive : location "This was the end of the driveway, where a pair of venerable iron gates hung crookedly from thick sandstone pillars and failed to quite meet across the too-narrow entrance that had brought Arthur out in a cold sweat when negotiating his beloved Austin Seven through it on arrival. There was a gap at the side of the gate through which one could pass on foot.\nThe driveway led north to The Vicarage, whilst the path to the lane was south."header = "The Upper Driveway";
 
 lane_1 : location "The lanes of Old Haelstowne were barely more than narrow tracks of beaten earth worn hollow by centuries of footfall, with little concession to such modern aberrations as the motor car. Unruly hedgerows encroached on all sides, on fine summer days alive with the sound of birdsong and at night heavy with the fragrance of honeysuckle.\n The Vicarage gateway was to the north, east was the road to the Nether Haelstowne and west the lane ambled into the distance. " header = "The Lanes";
 
 lane_2 : location "The lane meandered away in an unhurried manner, like the tipsy traveller whose wandering step may well have determined its course many centuries before.\n The lane led east and west." header = "The Lanes";
  
 lane_3 : location "Here the east-west lane met a footpath running southwards." header = "The Lanes";
 
 
 lane_4 : location "Here the narrow lane was bounded by tall hedges, above the tops of which to the southeast Arthur saw a chimney pot. It seemed a house must lie in that direction.\n The lane led east or northwest."header = "The Lanes";
 
 lane_5 : location "The lane here felt less used that the stretch closer to The Vicarage and the church. Loose stones and potholes abounded and tenacious weeds had taken root and prospered under the lighter traffic.\n The way led west or southeast." header = "The Lanes";
 
 lane_6: location "The lane wended its way nonchalantly through the rural parish of Haelstowne. \n It continued north and east. "header = "The Lanes";
 
 lane_7: location "Here the hedgerows petered out and Arthur found himself before a wooden fence surrounding a small garden and a house that looked as ancient and lopsided as The Vicarage itself. Carved into the gate were the words 'Nevernear Cottage'. Over in the distance to the northeast, Arthur saw the silhouette of a patch of woodland atop a small hill.\nThe garden path was to the north, the lane to the south and the way to the wood was northeast. "header = "The Lanes";
 
 garden_path : location "The borders alongside the garden path showed signs of having been tended until fairly recently, but were now becoming derelict with a few seasons of wild growth. Among the long grass of the lawn, Arthur spotted a rusty lawnmower of the hand-push variety with a short strip of mangled grass behind, that looked like a fitful attempt at mowing that had been aborted before it had really started. \n The path led north to the front door and south to the lane beyond the garden gate." header = "The Garden Path";
 
nevernear_cottage : location "Nevernear Cottage had been built in an earlier era when the average stature of the working man was less than in the present day and was never expected to increase. Arthur had to duck carefully through two very low doorways before entering the cosy living room with its exposed beams, stone fireplace and little leaded windows that peeped out through the great thickness of the walls. \n The front door was to the south." header = "Nevernear Cottage";
 
 road_1: location "At this point the lane began to mean business as it widened and changed into a properly surfaced road leading down the steep hill into Nether Haelstowne. \nThe road led east while west was the lane."header = "The Main Road";
 
 road_2 : location "Here the road widened and the hedges were clipped back for the benefit of the motor vehicles that had changed the nature of such thoroughfares forever. Where once the route would have resounded with the ring of horses' hooves, the rumble of carriage wheels and the voices of those travelling on foot, there was now only the regular chatter and cough of motor vehicles and the occasional, brave cyclist.  \n The road forked here, with the main route running east-west and a back road heading off southeast." header = "The Main Road";
 
 road_3 : location "This was where Nether Haelstowne began in a fitful scatter of isolated dwellings on the outskirts of the village. \n The way ran east into the village square and west back up the main road."  header = "The Main Road" ;
 
 backroad_1: location "The backroad was less used and more unkempt than the main road from which it branched. The overgrown hedges were full of flowers and the verges frothed with daisies and cow parsley.\n The road ran southeast and northwest." header = "The Back Road";  
 
 backroad_2 : location "Here the hedges gave way onto a more open area and the road made a sharp turn before it headed into the village. \nThe road ran north into Nether Haelstowne or northwest along a back road, while a track led south." header = "The Back Road";
 
 backroad_3 : location "This was the backroad leading into the slightly more affluent part of Nether Haelstowne, populated by those genteel enough to prefer a life away from the vulgarity of the main road that served the other side of the village.\n The road led north into the village and south towards a more open area. " header = "The Back Road";  
 
 vet_lane_1 : location "This stretch of Tithe Street was lined with some fine examples of black and white tudor architecture that had somehow survived the ravages of the passing centuries. \nThe street led east and west." header = "Tithe Street";
 
 outside_vet : location "Arthur stood outside a squat stone building that bore an inscribed brass plaque reading 'Miss Marjorie Drywell BVSc, MA, PhD (Cantab). Veterinary Surgeon'.\nThe street led east and west, while south was the entrance to the surgery." header = "Tithe Street";
 
 vet_lane_2: location "The residences along this part of the road were a clashing mixture of styles that showed signs of much modification over the years, as though the architect had tried to correct some original disharmony but had only succeeded in making matters worse.\n The street led westwards or turned a corner and headed north. "header = "Tithe Street";
 
link_road: location "This nonedescript passage linked the residential roads to the north and south. " header = "Addle Passage";  
 
 poacher_road_1 : location "Rows of small terraced cottages faced each other across the narrow throughfare of Ginnel Street,  mostly inhabited by families that had occupied the same few square feet for generations.\n The Street led east and west" header= "Ginnel Street";
 
 outside_poachers : location "The cobbled way outside number 23 had little to distinguish it from any other part of Ginnel Street. \n The street led east and west, while the door to number 23 was to the north. " header = "Outside Number 23";
 
 poacher_road_2 : location "Here the terraces gave way as Ginnel Street met the passage heading in the other direction.\n The street ran west and the passage headed south."header = "Ginnel Street";
 
 square : location "The centre of the village was marked by a stone cross in the centre of the green, from which the main arteries of the small settlement radiated.\n Streets ran off the north, south, east, west and northeast. " header = "The Village Square";
 
 outside_pub : location "The cobbles along this short stretch of road had been worn smooth by five hundred years' worth of thirsty folk making their daily pilgrimage to the public house at the end of the street. The Myrour Inn itself was an unsafe-looking structure with a jettied upper floor that projected out alarmingly over the street whilst the lower portion skulked beneath. A battered wooden sign swung from chains above the open door. Arthur could hear voices within. \n The square was to the southwest and the entrance to the pub was north." header = "Outside the Pub";
 
 pub : location "The Myrour, like many a village inn, had dug in its heels and refused to budge when each new century threatened to drag it forward in the name of progress. Consequently, the interior had changed little since the 1600s. The floor was of rough planks strewn with sawdust and the roof was studded with dangerously low beams. The furniture was of the crudest construction and the ineffectual, spitting gas light that had replaced the tallow of old was the only concession to relative modernity. The air was thick with the stench of ale and things less savoury, mingled with the yells and curses of customers.\nThe way out was to the south and north led behind the bar. "header = "The Myrour Inn";
 
  behind_the_bar : location "The narrow gap behind the bar was a dark and mysterious place where the secret workings of the pub were laid bare. Behind the varnished wooden facade were the pipes and hoses of the beer pumps, the swill bucket where used beer mugs were made yet more filthy before being filled anew with ale and a number of jars containing things barely edible, pickled in vinegar.\nThe other side of the bar was south, and a door led downwards."header = "Behind the Bar"  ;

 pub_cellar : location "The pub cellar was a very dark and very cold void separated from the establishment above by a marvellous barrel-vaulted ceiling that really was something to look at, although no one ever did. The environment was perfect for the long-term storage of ale, or so it was supposed since no barrel of ale had ever lingered for long enough to test the theory.\n There was an entrance to the north."header = "The Pub Cellar" ;
 pub_cellar_passage : location "The low and narrow cellar passage seemed to have been hewed out of the very bedrock. \nThe way led south into darkness, or up to the bar."header = "The Pub Cellar Passage";
 
 chemist : location "The interior of the chemist's shop was gloomily clad in dark wood and draped in the weirdly coloured shadows of the jars in the window display. On either side were shelves stacked with medicinal and other products while straight ahead was a counter behind which, in the darkest recesses of the shop, a white-haired man in a white apron smiled placidly like an amiable ghost. \n There was a door to the west."header = "Inside the Chemist's" ; 
 outside_chemist : location "Arthur stood outside a rather grand shopfront in that distinctively showy turn of the century style that now, three decades later, seemed rather passé. One window displayed oversized glass jars filled with coloured liquids and pre-packaged ointments and pills pyrimidally arranged, while the other was taken up by advertisements for medicines and, Arthur noticed, photographic products. The upper pane of each bore the words 'Pharmacy' in gold letters and crowning the whole was a sign reading 'A. Salter, Dispensing Chemist'" header = "Outside the Chemist's";
 
 vet : location "The veterinary surgery was a chaotic place filled with the mewing, yelping and squawking of creatures that in a state of nature would never have found themselves in such proximity. Grotesquely detailed anatomical diagrams took pride of place on the walls and various brass instruments of ominous appearance were deposited about the place. The pervading fragrance was of carbolic soap and dogs. \n There was a door to the north." header = "The Veterinary Surgery" ;
 
 pump : location "The square may have been the place where all roads met, but everyone knew that the pump was the real centre of the village. Here rich and poor, well-to-do and down-at-heel mingled together, all equal in their pursuit of that most vital of life's necessities: gossip. \n Streets led off to the north, south and east." header ="At the Village Pump";
 
 poachers_house : location "23 Ginnel Street was the humble abode of the Farthings, who didn't own much in the way of worldly goods but made the best of what they had. It was neat and tidy, if a little plain and barely furnished. \n The front door was south and there was another doorway to the east." header = "23 Ginnel Street"  ;
 
 poachers_scullery : location "This was the small scullery and general washroom at the back of the house. There was a stone sink with a bucket beneath, beside which was a cloth and a brick-sized bar of soap. The rest of the room was taken up with a great tin tub where people and laundry alike where made clean." header = "The Scullery at 23" ;
 
 wetland : location "This wide expanse of waterlogged ground seemed a gloomy place, even in the brilliance of a midsummer day. Short, scratchy turf around the perimeter soon gave way to tall grasses and reeds, beneath which the peaty waters displayed a sombre inversion of the summer sky. There was a strange absence of birdsong and Arthur had the oddest impressions of a mist clinging to everything although he could see quite clearly that no mist was there. \nA timber trackway ran southeast across the boggy landscape, while a path led north back to the road." header = "The Wetland" ;
 
 sweet_track_1 : location "This ancient trackway was constructed from huge split timbers driven deep into the boggy ground on top of which smaller logs and planks were fixed, forming a platform a few feet above the black waters of the wetland. \nNorthwest was the broad sweep of the entrance to the wetland, while the timber track headed south. "header = "The Trackway"  ;
sweet_track_bridge : location "This part of the track bridged a wide, watery channel that ran across the breadth of the wetland, dividing it in two. Arthur looked ahead and had a strong impression that there was something there across the bridge that could not be seen, as though he was looking at a mirror reflecting the world from which he had come and hiding that which lay beyond.\n The track led south over the bridge and north in the direction of the road."header = "The Trackway Bridge"  ;
 
 sweet_track_2 : location "The track continued across a wetland subtly different from that at the other side of the bridge. The light here was dimmer, the grasses taller, the water wider. The foghorn boom of bitterns mingled with churr of reed warblers and the call of the cuckoo as dragonflies zipped crazily amongst the reeds. Everything seemed hazy and indistinct as though the world were not quite in focus.\n The way led north back towards the bridge, or east onto dry land. " header = "The Trackway" ;
 
 faery_zone_1 : location "Arthur was on a spit of land extending into the surrounding wetland. The air was thick with woodsmoke, the smell of animals and the chatter of voices. A little way off was a small cluster of crudely made thatched dwellings.\n A track led south and west." header = "Across the Bridge"  ;
 
 faery_zone_2 : location "This was a little settlement of half a dozen small dwellings nestled close together. The buildings were little more than low, windowless huts with thatched roofs that extended all the way to the ground. A little way off were some penned-in pigs and closer to were a pair of shaggy horses tethered to a post, munching grass nonchalantly.\n A track led north and there was a hut to the west. "header = "Across the Bridge"  ; 
 
 faery_hut : location "Arthur found himself within the cramped interior of one of the huts. The light from the doorway revealed a central hearth ringed with stones, a wooden bench and some hanging animal skins that curtained off an area to the side that Arthur supposed must be the sleeping place. There were some crudely made pottery cooking vessels near the hearth and something at the back of the hut that might have been a loom. Everything else was shrouded in darkness. Arthur noted the lack of a chimney or any other ventilation besides the door and wondered what on earth it must be like when the fire was lit. \nThe way out was to the east."header = "Inside the Hut"  ;
 
 maze_1 : location "Keeping the chimney in sight, Arthur followed the lane in the rough direction of the house that he knew must be somewhere near by. After several minutes it seemed that he had come no closer, for the chimney seemed just as far away. He had the mad impression that it was retreating from him in lockstep with every move he made towards it - but of course, that was impossible. \n The lane led north and east."header = "The Lanes"  ;
 
maze_2 : location "Resolute, Arthur continued to follow the lane in the direction of the elusive chimney pot. Tall hedgerows blocked his view on either side until, after some twenty minutes, he came across a section that was threadbare enough for him to peer through. He saw another hedge a little way beyond with the mysterious chimney poking over the top, but dash it - it seemed not an inch closer than when he'd first spotted it!\n The lane led north, south, east and west."  header = "The Lanes" ;

maze_3 : location "Arthur continued to walk the lane while the far-off chimney pot beckoned. It flickered in and out of view, flirting with him through the gaps between hedges as he doggedly trudged up the uneven road. But however far he walked, he never seemed to get any closer.\n The lane led north, east, south and west." header = "The Lanes";

maze_4 : location "Wearily, Arthur continued along the lane in pursuit of the chimney pot sailing merrily above the top of the hedges. He passed a thicket of dog rose and an old milestone set into the side of the road reading 'Haelstowne 6 miles, Calderhall 5½ miles'. \n Twenty minutes later, he passed another dog rose hedge and an identical milestone. Glancing up, he saw the chimney pot no nearer and no further away than before and felt dizzy with the thought that, despite his aching legs and weary feet, he hadn't moved at all.\nThe lane led northeast, south and west. "header = "The Lanes";
 
footpath_1: location "The footpath led between unkempt hedgerows on either side, fragrant with wild flowers and alive with small creatures. {daytime? `Arthur noticed many birds flitting in and out of the hedge just here. `}\nThe footpath led north back to the lanes and continued to the south." header = "The Footpath";
 
 footpath_2: location "Here the footpath narrowed and entered a gloomy tunnel where opposing hedges joined tendrils high overhead, like drunken lovers attempting an awkward embrace.\nThe footpath continued to the north and led south to the old village site."header = "The Footpath";
 
 DMV_1: location "{DMV1}" header = "{DMV_header}";
 
 DMV_2: location"{DMV2}" header = "{DMV_header}";
 DMV_3: location "{DMV3}" header = "{DMV_header}";;
 
 DMV_4: location "{DMV4}" header = "{DMV_header}";
 
DMV_5: location "{DMV5}" header = "{DMV_header}";
DMV_6: location "{DMV6}" header = "{DMV_header}";


chapel_lane: location "Here the grasses and wildflowers of the meadow thinned and eventually disappeared as the track led into the shade of a wooded area.\nThe track led north and southwest." header = "Chapel Lane" ;

chapel_lane_1: location "Within a clearing in this wooded area was a small red-brick building. Arthur surmised, from its simple facade and plain, unstained gothic windows that it was some sort of non-conformist chapel built, as such places often were, within spitting distance of the established church nearby. \nThe chapel door was west, while a footpath led northeast. "header = "Chapel Clearing" ;

chapel: location "The inside of the chapel was as unfussy as the exterior. Unadorned whitewashed walls rose to a simple beamed roof, while seating was provided by plain wooden benches. Dust and cobwebs were everywhere.  " header = "The Chapel" ;
 
 Churchyard: location "The churchyard was enclosed by a low stone wall. Through the lychgate, a gravel path led to the 13th century church of St Wilfrid's, Haelstowne. \nThe lychgate was west and the entrance to the church was east. There were graveyards to the north and south."  header = "The Churchyard" ;
 
 bell_loft : location "The bell loft was a dark chamber with a thick timber floor and oak-panelled walls that rose into shadows, the roof being some indeterminate distance above. Built into the stone throat of the church tower itself, here every breath and footfall was echoed and amplified. The aperture through which Arthur had ascended was a short distance away; through it could be seen the stone floor of the church, a sickening distance below. Somewhere high above Arthur's head was suspended many tonnes of bronze.\n The only way seemed to be down." header = "The Bell Loft";
 
 
porch : location "The porch was an Elizabethan tile and timber construction grafted onto the original fabric of the church and serving as a rudimentary shelter from the wind and rain. There were stone benches at either side and a badly weathered noticeboard with a few damp and faded notices pinned to it.\nThe churchyard was west and the entrance to the church east." header = "The Porch" ;


graveyard_1 : location "There were still a few crumbling headstones visible in this part of the graveyard, like broken teeth poking through the long grass, but most of the older graves were now no more than forgotten memories slumbering away the centuries in this quiet place. Arthur noticed a depression in the earth a little way off." header = "The North Graveyard" ;

graveyard_2 : location "Arthur wandered amongst lonely tombstones. Some little effort had been made to keep the place tidy, but still it had the air of solemn neglect common to country graveyards. The grass grew long and ivy spilled in a great black tide from the trunk of an ancient yew tree, smothering a ruined sepulchre beneath."header = "The South Graveyard" ;

church : location "Arthur stood at the western end of the church. The interior of St Wilfrid's had survived the Victorian mania for architectural restoration that had marred many others; it remained for the most part marvellously, lopsidedly unimproved. Its thick masonry was pierced at intervals by irregularly placed windows that illuminated the medieval woodwork and tombstone-clad floor with haphazard shafts of light. The very walls, witness as they had been to all the joys and tragedies of human existence, seemed to exude a focused, hushed calm.\n The bell tower was directly above and nearby was the nave with its rows of pews on either side. The way out was west and further to the east was the chancel."header = "Inside St Wilfrid's";


church_1 : location "Here, beyond a medieval rood screen painted with images of saints, the chancel of the ancient church was dominated by the monumental tombs of the Molyneux family. High up in the west wall was an unusual stained glass triptych window through which light streamed and shattered into coloured shards across the stonework below, lending a peculiarly lifelike appearance to the effigies slumbering there.\n To the west was the nave." header = "The Chancel";

on_steps : location "Arthur enjoyed the view from the top of the steps, musing at the difference a vertical displacement of a mere three feet could make to one's perspective." header = "On the Steps";

peldash_room : location "Peldash's bedroom was an impersonal place with little to distinguish it from the guest room along the landing. The bed, wash stand and unfashionable wallpaper were almost identical, with the only notable feature being the large wardrobe that dominated the room. It seemed that Peldash only frequented the room to attend to those tedious necessities such as washing one's face, removing one's clothing and falling unconscious, that could not decently be carried out elsewhere. \n There was a door to the north."  header = "The Reverend's Room" ;  

north_of_pump : location "This short stretch of road between the village pump and Ginnel Street had the neglected air of a place that existed only because of necessity but held no real interest to anyone. For all anyone knew it may have been stuffed with hidden treasures, but nobody ever lingered there long enough to find out.\n The road led south and east." header = "North of The Pump" ;

well : location "The slimy walls of the well were within reach on either side, but Arthur felt revulsion at the thought of touching them. He dangled in the middle of a dank stone pipe, surrounded by a rank odour of decay, and wished very much that he was elsewhere. A little way below him glimmered the inky surface of the stagnant well water.\n The only way was up."header = "Down the Well";

road_to_wood : location "The lane narrowed significantly and became more treacherous as it headed towards the wood. Potholes and loose stones lay in wait for the unwary cyclist and motor vehicles would have no chance at all. \n The lane led southwest in the direction of Nevernear Cottage, or north towards the wood." header = "The Road to the Wood";

road_to_wood_1 : location "The lane continued on its difficult and debris-strewn course, leading northeast or south."header = "The Road to the Wood";

road_to_wood_2: location "Here the lane broadened out a little as it approached the wood so that travellers now had a choice of potholes to navigate rather than being trammelled along one narrow channel.\n The entrance to the wood was east, and the lane led back to the southwest."header = "The Road to the Wood";

wood_entrance : location "Here at the entrance to the wood a thick stand of tall trees seethed and creaked in the wind, like a great dark wave threatening to crash down on the unwary trespasser. Everything seemed restless and alive. \nA path to the northeast led into the wood, while the road was back to the west. {wood_entrance}" header = "The Entrance to the Wood";

wood_path_1: location "The woodland rapidly became more dense as Arthur strayed off the beaten track. A path had been newly clipped through the foliage to the southeast. {woodpath_1}" header = "The Path Through the Wood";

wood_path_2: location "Arthur was deep within the wood. A path had been newly clipped through the foliage to the east. {woodpath_2}" header = "The Path Through the Wood";;

wood_path_3: location "Arthur was deep within the wood. A path had been newly clipped through the foliage to the south." header = "The Path Through the Wood";


wood_path_4: location "The track led for a little way through increasingly dense woodland before dividing. \nOne path led east and the other headed south. The way back was to the southwest." header = "The Path Through the Wood";

wood_path_5: location "Here the woodland track turned to the north, with the way back to the west."header = "The Path Through the Wood";

grove : location "The path emerged into a small clearing surrounded by clumps of twisted trees growing close together. Arthur realised they were abandoned coppice stools grown wild over many centuries. Each shoot had grown to the stature of a mature tree, thrusting upwards from their stools like gnarled fingers reaching for the heavens. Arthur counted the stools and reckoned three each of oak, ash and beech. There was an uncanny silence in that place. \nThe path led north." header = "The Grove";
clearing  : location "This little gap in the woods had been deliberately kept clear to allow access to a hut situated discreetly amongst the brambles.\nThe path was to the south and the hut to the north. " header = "The Clearing";

hut : location "The inside of the hut was very dark, there being only one small, dirty window looking out onto the clearing and another facing into a thicket of brambles. The permanent residents here were the spiders, whose constant industry had embroidered the roof with an unbroken blanket of silk. \nThere was a door to the south." header = "The Poacher's Hut";

on_the_table : location "Arthur stood on the drawing room table and enjoyed the novelty of being that little bit closer to the ceiling." header = "On the Table";

on_chair : location "Arthur stood awkwardly on the chair and confirmed what he had always suspected: that chairs were made for bottoms and not for feet." header = "On the Chair";

on_monument: location "Arthur perched at the top of the monument on a little ledge thick with dust, spider droppings and the dried husks of insects. Below were the terraces of scrolled marble up which he had climbed with some difficulty, even being forced to step upon the stone nose of the late Lady Catherine Molyneux during a particularly perilous stage in his ascent; no amount of apologies would ever seem enough. Arthur looked up and saw that the triptych window was now quite near to him. \nThe way led down to the chancel. " header = "Up the Monument";

}


######################################
#  Connections                       #
######################################

connections {

   from, direction, to = [
      study, east, darkroom
   study, south, hallway, 
   hallway, south, drawing_room
   hallway, west, hallway_3
   kitchen, north, scullery
hallway, east, hallway_2
hallway_2, south, dining_room
scullery, down, cellar_passage,
cellar_passage, east, cellar_room, 
cellar_room, south, coal_cellar,
scullery, east, path_3, 
path_3, east, path_2, 
path_2, east, path, 
path, south, outside_east, 
hallway_2, east, outside_east, 
hallway_3, north, kitchen, 
hallway_3, west, outside_west, 
outside_west, north, path_4, 
path_4, north, path_5, 
path_5, east, path_6, 
path_6, south, path_3, 
hallway_2, north, bottom_stairs, 
outside_west, south, path_7
path_7, east, path_8
path_8, east, path_9
path_9,north, outside_east,
path_2, north, garden
garden, north, garden_3,
garden_3, east, garden_4,
garden_4, north, potting_shed, 
garden_3, northeast, garden_5, 
garden_4, east, rockery, 
path_8, south, drive, 
drive, south, lane_1, 
lane_1, west, lane_2,
lane_1, east, road_1,
road_1, east, road_2
road_2, east, road_3,
road_2, southeast, backroad_1, 
road_3, east, square, 
backroad_1, southeast, backroad_2,
backroad_2, north, backroad_3,
backroad_2, south, wetland,
wetland, southeast, sweet_track_1, 
sweet_track_1, south, sweet_track_bridge, 
sweet_track_bridge, south, sweet_track_2, 
sweet_track_2, east, faery_zone_1, 
faery_zone_1, south, faery_zone_2, 
faery_zone_2, west, faery_hut, 
backroad_3, north, square, 
square, northeast, outside_pub,
square, north, pump
pump, north, north_of_pump, 
pump, east, vet_lane_1, 
vet_lane_1, east, outside_vet, 
outside_vet, east, vet_lane_2,
vet_lane_2, north, link_road, 
link_road, north, poacher_road_2, 
poacher_road_2, west, outside_poachers,
outside_poachers, west, poacher_road_1,
poacher_road_1, west, north_of_pump, 
outside_pub, north, pub, 
outside_vet, south, vet,
outside_poachers, north, poachers_house, 
pub, north, behind_the_bar,
behind_the_bar, down, pub_cellar_passage, 
pub_cellar_passage, south, pub_cellar,
square, east, outside_chemist,
outside_chemist, east, chemist
lane_2, west, lane_3, 
lane_3, south, footpath_1,
footpath_1, south, footpath_2, 
footpath_2, south, DMV_1, 
DMV_1, south, DMV_2, 
DMV_2, south, DMV_3, 
DMV_3, east, DMV_6,
DMV_2, east, Churchyard, 
DMV_2, west, DMV_4,
DMV_3, south, chapel_lane, 
chapel_lane, southwest, chapel_lane_1,
chapel_lane_1, west, chapel,
Churchyard, east, porch,
Churchyard, north, graveyard_1, 
Churchyard, south, graveyard_2, 
porch, east, church,
church, east, church_1,
on_monument, down_oneway, church_1
lane_3, west, lane_4
lane_4, northwest, lane_5
lane_5, west, lane_6
lane_6, north, lane_7
lane_7, northeast, road_to_wood, 
road_to_wood, north, road_to_wood_1, 
road_to_wood_1, northeast, road_to_wood_2, 
road_to_wood_2, east, wood_entrance,
wood_entrance, northwest, wood_path_1, 
wood_path_1, west, wood_path_2,
wood_path_2, north, wood_path_3,
wood_entrance, northeast, wood_path_4,
wood_path_4, east, wood_path_5,
wood_path_5, north, clearing,
clearing, north, hut
wood_path_4, south, grove,
lane_7, north, garden_path
maze_1, east, maze_2
maze_1,north, maze_2
maze_2, east, maze_3,
maze_2, north, maze_3,
maze_3, east, maze_4,
maze_3, north, maze_4
maze_4, northeast_oneway, lane_4
garden_5, north, outside_Thurgoods, 
outside_Thurgoods, west, outbuilding, 
landing, south, bedroom_1
bottom_stairs, up, top_stairs, 
top_stairs, east, landing
on_steps, up, recess, 
landing_2, east, top_stairs, 
landing_2, south, peldash_room, 
poachers_house, east, poachers_scullery, 
DMV_4, south, DMV_5
DMV_5, down, well, 
   ]
   
}

zones {

 zone_inside_vicarage : zone {
      locations = [ bedroom_1,bottom_stairs,car_1,cellar_passage,cellar_room,darkroom,dining_room,drawing_room,hallway,hallway_2,hallway_3,kitchen,landing,scullery,study,top_stairs, recess, on_steps, coal_cellar, on_the_table, on_chair, peldash_room]
   }
  
   zone_inside_elsewhere : zone {
   locations = [poachers_house, vet, pub, chemist]
   
   }

   zone_window : zone {
      locations = [ poachers_house, poachers_scullery, car_1, path_8, vet, pub,  hut, nevernear_cottage]
   }
   
   zone_vicarage_window: zone {
      locations  = [ bedroom_1,dining_room,peldash_room,kitchen,scullery,study, drawing_room,recess ]
   }
   
   zone_garden : zone {
      locations  = [ garden, garden_3, garden_4, garden_5]
   }
 
   zone_rockery : zone {
          locations  = [ rockery, top_rockery, in_trees ]
   }
   zone_outside_vicarage : zone {
      locations  = [ outside_east, outside_west, path, path_2, path_3, path_4, path_5, path_6, path_7,path_8, path_9, outside_Thurgoods, drive]
   }
    zone_lanes: zone {
       locations  = [ lane_1, lane_2, lane_3, lane_4, maze_1, maze_2, maze_3, maze_4, footpath_1, footpath_2 ]
      
    }
    zone_dmv : zone {
        locations  = [ DMV_1, DMV_2, DMV_3, DMV_4, DMV_5, DMV_6]
    }
    zone_chapel_outside : zone {
       locations  = [ chapel_lane, chapel_lane_1 ]
    }
  
    
    
    zone_church_outside : zone {
         locations  = [ Churchyard,  graveyard_1, graveyard_2 ]
    }
 
  
   
  
   zone_road_zone : zone {
      locations  = [ lane_1, lane_2, lane_3,lane_4, lane_5, maze_1, maze_2, maze_3, maze_4, lane_6,lane_7, vet_lane_1,vet_lane_2,pump, outside_chemist, outside_pub, outside_vet, poacher_road_1, poacher_road_2, outside_poachers, square, link_road, road_1, road_2, road_3,backroad_1,backroad_2,backroad_3, north_of_pump]

   }
   zone_road_to_village : zone {
locations  = [ road_1, road_2, road_3, backroad_1,backroad_2, backroad_3 ]
   }
   
    zone_road_to_wood : zone {
locations  = [ road_to_wood, road_to_wood_1, road_to_wood_2 ]
   }
   zone_wood : zone {
      locations  = [ wood_entrance,wood_path_1, wood_path_2, wood_path_3, wood_path_4, wood_path_5, grove, clearing ]
   }
   
   
   zone_village_outside : zone {
      locations  = [ square,pump, north_of_pump, outside_poachers, outside_vet, outside_chemist, link_road,poacher_road_1, poacher_road_2, vet_lane_1, vet_lane_2 ]
   }
 zone_dark : zone {
    locations  = [ cellar_passage, cellar_room, coal_cellar, pub_cellar,pub_cellar_passage, well, darkroom ]
 }
 zone_wetland : zone {
    locations  = [wetland, sweet_track_1, sweet_track_2, sweet_track_bridge, faery_zone_1, faery_zone_2,faery_hut]
 }
 
}
######################################
#  Objects                           #
######################################

objects {


 hose : scenery "{hose_description}" msg= "It was a length of rubber hose that emerged from a hole close to the magnificent barrel-vaulted ceiling and ran down the wall to which it was securely fastened, only the final portion being free to connect to a barrel or keg."at = "pub_cellar" ;
 
corner: scenery "corner" msg = "It was simply the corner of the base of the wardrobe. Arthur noticed that the varnished wood was a little more worn just in that spot, as though from frequent touching." listed = "false"cant_get_message = "If he was equipped with a small saw then, Arthur mused, he might be able to detach and carry off the corner of the wardrobe base - but he wondered why on earth he should think of doing that." ;


spiders: scenery "spiders" at ="hut" msg = "They scuttled discomfortingly, as spiders were wont to do." listed =  "false" ;

blanket: scenery "blanket" at= "hut" msg ="It was a gossamer blanket of finest spider silk, floating like a whisper against the rotting timber of the roof." listed="false";
ceiling: scenery "ceiling" at = "pub_cellar" msg = "It was the finest example of a 15th century single-arch English barrel vault to be found in the country. The occasional architectural historian, having intuited that such a structure must underlie the rather precarious construction above and indeed be responsible for its staying upright, had found their way down there to gawp and scribble in their notebooks, but for the most part it remained an undiscovered secret." listed = "false" ;
bucket_1: scenery "swill bucket" at= "behind_the_bar" msg= "It was a battered tin bucket, full of a murky liquid upon which floated an unwholesome-looking scum.";

jars_1: scenery "jars" at = "behind_the_bar" msg= "There were filled with brown liquid and stuffed with tortured-looking, fleshy things pressed against the glass like specimens in an anatomist's larder. Only the demented or the thoroughy intoxicated would consent to eat such things, thought Arthur.";

pipes: scenery "pipes" msg="They were the mysterious entrails of the delivery system by which beer was drawn up from the depths of the cellar to be dispensed from the taps above." at = "behind_the_bar"listed="false";
dwellings : scenery "dwellings"msg = "They were low triangular huts, with heavy thatching that reached almost to the ground."listed = "false"  at="faery_zone_2" ;
pigs: scenery "pigs" msg = "One pig looked very much like another to Arthur." at= "faery_zone_2" listed = "false" ;
stones: scenery "stones" msg = "They were just ordinary and unremarkable stones." at= "faery_hut" listed = "false" ;

animal_skins: scenery "skins" msg="They were cured animal hides that had been hung up like curtains." at= "faery_hut" listed="false";
horses: scenery "horses" msg= "They were great, shaggy beasts that only paused for a fleeting moment to observe Arthur before returning to their grazing with that air of nonchalant resignation that horses have." listed="false" at = "faery_zone_2";
reeds: scenery "reeds" msg="They grew tall and rustled as they swayed in the breeze with a sound disconcertingly like whispering." listed ="false" at= "sweet_track_2";

dragonfly: scenery "dragonflies" msg ="They zipped hither and thither, their iridescent bodies glittering like jewels."listed = "false"  at = "sweet_track_2" ; 

hearth: scenery "hearth" msg = "It was simply a patch of the beaten earth floor that had been ringed with stones to contain a fire."listed = "false" at = "faery_hut" cant_get_message = "That seemed like a silly thing to try to take." ;

bench_2: scenery "bench" msg= "It was a simple wooden bench, crude but functional." at = "faery_hut" listed="false";
vessels: scenery "vessels" msg = "They where wheel made, but rather thick and ungainly. No doubt they served their purpose well enough."listed = "false"at= "faery_hut" ;
loom: scenery "loom" msg = "It was a timber frame to the top of which were tied strands of wool. Clay weights attached to the end of each strand ensured that they hung down straight." listed="false" at = "faery_hut"  ;
clay_weight: scenery "weight" msg= "They were lumps of clay with holes in the middle to enable them to be threaded." listed="false" at = "faery_hut" cant_get_message = "Arthur had an intuition he shouldn't waste time bothering with that." ;

sign: scenery "sign" msg= "It was worn and weatherbeaten to the point of obscurity having evidently not seen a paintbrush for a couple of centuries, but nevertheless one could just make out the lettering 'Myrour' above and 'Inn' below, and between a depiction of some sort of orb or disc, with jagged lined across it as though fractured." cant_get_message = "Even if it had been within reach, Arthur wouldn't have seen the point of meddling with the pub sign."listed = "false"  at = "outside_pub" ;

inn: scenery "inn" msg = "It was an appropriately drunken-looking structure that looked as though it was ready to topple down into the street at any moment." cant_get_message = "Arthur dismissed that silly though from his mind."  listed = "false"at = "outside_pub"  ;
beams:scenery "beams" msg= "They were treacle-dark timbers, the exposed skeleton of the ancient cottage."listed = "false" at = "nevernear_cottage" ;

gossip: scenery "gossip" msg ="The stuff was invisible but pervasive; one knew that it was there even if one had no idea where it was coming from or heading to."listed = "false" at = "pump" cant_get_message = "Arthur wasn't sure how to catch the stuff - but he felt sure there must be a way." ;

window_2: scenery "window" msg ="They were so small that it seemed improbable they could admit sufficient light. And yet, somehow, the interior of Nevernear Cottage contrived to be a bright and cheerful place."at= "nevernear_cottage" listed="false"cant_get_message = "Arthur had an intuition he shouldn't waste time bothering with that.";

fireplace: scenery "fireplace" msg = "It was a perfectly ordinary and unremarkable fireplace." listed="false" at ="nevernear_cottage"cant_get_message = "Arthur had an intuition he shouldn't waste time bothering with that.";

birds : scenery "birds"msg = "{daytime? `There were a multitude of them, flitting hither and thither in and out of the hedgerow. Arthur, somewhat lacking in ornithological skills, identified them confidently as small brown birds.`:`Arthur saw no birds. He imagined they were fast asleep with their heads tucked beneath their wings, somewhere safely out of sight.`}"  at = "footpath_1" listed="false"cant_get_message = "Arthur had an intuition he shouldn't waste time bothering with that.";

tombstone_1: scenery "tombstone" listed="false" at = "church" msg = "They marked the final resting places of those wealthier and more important members of the congregation who in life had occupied that stratum between the unwashed masses who ended up in the common graveyard outside and the Molyneux's, whose funerary monument took up most of the chancel to the east. Their hoped for earthly immortality had lasted, at most, for a century or two before passage of feet had effaced their names forever. " ;

floor : scenery "tombstones" msg = "It was paved with ancient tombstones."listed = "false" at = "church"  ;


tombstone : scenery "tombstone"listed = "false" at = "graveyard_1"  msg = "The gravestones were all heavily weathered and smothered with lichen. Arthur could hardly make out the inscriptions on any of them." ;
gravestone : scenery "tombstone"listed = "false" at = "graveyard_2"  msg = "The gravestones were all heavily weathered and smothered with lichen. Arthur could hardly make out the inscriptions on any of them." ;

fanlight: scenery "fanlight" at = "hallway_2"msg = "It was a lunette window set above the door, designed to let natural light into the otherwise windowless hallway." listed = "false" ;

flowerbeds : scenery "flowebeds" listed = "false" at = "garden" msg = "They were a battlefield on which the awesome forces of nature were pitted against Mr Thurgood's trowel and secateurs. ";

canes : scenery "raspberry canes" listed = "false"msg = "They were full of raspberries, ripening in the midsummer sun."at = "garden_3" ;
raspberries : scenery "raspberries" listed = "false" msg = "They looked soft and delicious." at = "garden_3" ;
herbs : scenery "herbs" listed = "false" at = "garden_3" msg = "Sage, thyme and rosemary filled the air with their heavy scent." ;

vegetables: scenery "vegetables" listed = "false" msg = "Monstrously large marrows lolled on the ground while pea pods swayed above and the tendrils of leeks poked through the soil like slender green flames." at = "garden_3";

leeks: scenery "leek" listed = "false" at = "garden_3";
marrow: scenery "marrow" listed = "false" at = "garden_3";
pea: scenery "pea" listed = "false" at = "garden_3";

spider : scenery "spider"at = "cellar_passage"  msg = "They were spindly, creeping things bleached white by the darkness." cant_get_message = "Arthur felt it was best to leave them alone." listed = "false" ;

cobweb : scenery "cobwebs"at = "cellar_passage" listed = "false" msg = "They were hammocks of spider silk, spanning the angle between wall and ceiling." ;
bottles: scenery "bottles" at = "cellar_room" msg = "They were dirt-encrusted wine bottles of heaven knows what vintage, as dusty and undisturbed-seeming as artefacts from a pharaoh's tomb."listed = "false" ;

fireback : scenery "fireback" at = "study"msg = "It was an unremarkable cast iron fireback with a relief of a couple of lumpen lions wrestling half-heartedly above a rosette."  listed = "false" ;

trees: scenery "trees" at = "grove" msg = "They were the shoots from abandoned coppice stools, grown to the size of mature trees. Arthur counted the coppice stools and saw that there were three each of oak, ash and beech." listed = "false" ;

stools: scenery "trees" at = "grove" msg = "They were abandoned coppice stools, from which had sprouted shoots that had grown to the size of mature trees. Arthur counted the coppice stools and saw that there were three each of oak, ash and beech." listed = "false" ;

gardeners_cottage: scenery "Gardener's Cottage"msg = "It was a pretty little cottage of red brick with a tiled roof and roses climbing up the wall."cant_get_message = "It seemed silly to try to take an entire cottage." at = "outside_Thurgoods" listed = "false"  ;

information_board : scenery "an information board" msg = "It was an inscribed sheet of copper mounted on a stout timber lectern." cant_get_message = "If he needed the information for future reference then Arthur thought he had better memorize it rather than pick up the information board and carry it around with him."  at = "wetland" ;

rood_screen : scenery "rood screen" msg = "It was a wooden screen across the chancel arch. The upper part was a fine openwork of trefoil arches, while the dado was a series of oak panels on which were painted images of saints, looking suitably beatific - or so they had, before the Puritans got to them and erased not only the smiles off their faces but their faces altogether. Only one had survived to gaze sorrowfully and, it appeared, a little smugly across the defaced remnants of his fellows."at = "church_1" listed = "false"  ;

the_pump : scenery "the pump" at = "pump" listed = "false" msg = "It was a sturdy iron post with a handle and a spout that had been dispensing water and occasional cholera to the good people of the village for hundreds of years." ;
stone_fox : scenery "a stone fox" listed = "true" msg = "It was a carved stone fox, curled up at the feet of Geoffrey Molyneux. Its narrow, pointed muzzle rested on its paws and its ears were pricked, resting but alert. Its head was slightly cocked, giving it a questioning look." ;


panelling : scenery "the panelling" listed = "false" msg = "The panelling, like the whole of the loft, was of a later date than the rest of the church but still several hundred years old. It was a plain design in dark oak and covered the entirety of the walls." at = "bell_loft" ;
panelling_1 : scenery "the panelling (revealed by moving the coffer)" listed = "true" msg = "The panelling, like the whole of the loft, was of a later date than the rest of the church but still several hundred years old. It was a plain design in dark oak and covered the entirety of the walls." ;

fence : scenery "a fence" listed = "true" msg = "It was a line of posts with rails nailed between some of them, very much a work in progress. Judging by the state of the timber and the absence of any signs of recent activity, the work had been left off some time ago. The workers had probably nipped off to the local pub for a swift midday pint a couple of weeks ago and hadn't yet emerged." at = "wetland" ;
tiles : scenery "tiles" listed = "false" msg = "They were just plain black and white tiles."  at = "hallway" cant_get_message = "Arthur didn't see the point in trying to lift the floor tiles." ;

tiles_1 : scenery "tiles" listed = "false" msg = "They were just plain black and white tiles."  at = "hallway_3" cant_get_message = "Arthur didn't see the point in trying to lift the floor tiles." ;

flagstones : scenery "flagstones" listed = "false"  msg = "They were ancient flagstones, worn smooth by the passage of feet." at = "hallway_3"cant_get_message = "Arthur didn't think it was necessary to pick them up and carry them around with him."  ;

furniture : scenery "furniture" at = "drawing_room" listed = "false"msg = "It was worthy, if a little dull and dusty - as befitted a country vicarage."  ;

knick : scenery "knick-knacks" listed = "false" at = "drawing_room" msg = "They were ornaments and trinkets - things that had no other use than to occupy a space that otherwise would contain nothing." ;

pots : scenery "pots" listed = "false" at = "kitchen" msg = "They were blackened and battle-hardened things, thick with the baked-on residue of ages." cant_get_message = "Arthur felt that he had better things to do than to steal Mrs Taplow's kitchen utensils." ;
milestone : scenery "a milestone" listed = "false"at = "maze_4" msg = "It was a lump of sandstone, embedded in the ground as a distance marker between destinations." cant_get_message = "That seemed like a singularly cumbersome and pointless thing for Arthur to carry around with him." ;

chapel_1: scenery "the chapel" listed = "false" at = "chapel_lane_1" msg = "It was a rather plain, red-brick building with a few, muted gothic flourishes." ;
burrows : scenery "burrows" msg = "They were just ordinary rabbit burrows as far as Arthur could tell." listed = "false"at = "DMV_6" ;
droppings: scenery "droppings" msg = "The little brown pellets were everywhere." listed = "false" cant_get_message = "Arthur couldn't think of any earthly reason why he would need to carry around a pocketful of rabbit droppings."at = "DMV_6"  ;

shelves_1 : scenery "shelves" msg = "It was just ordinary shop shelving." listed = "false" at = "chemist"  ;


jars: scenery "jars" listed = "false"msg = "They were large apothecary jars, intended more for display than for practical use. They contained various colourful liquids." at = "chemist" ;

counter: scenery "counter" listed = "false" msg="The shop counter was a singularly unremarkable example of its type." at = "chemist"  ;


lawnmower: scenery "a lawnmower" listed = "true" msg = "It was a Spitney Scimitar petrol mower, disembowelled. Its mechanical entrails surrounded Mr Thurgood."cant_get_message = "In its current state it was no use to man nor beast and Arthur didn't have a clue how to fix it. He decided to leave it alone." at = "garden" ;
kitchen_table: scenery "the kitchen table" listed = "false" msg="It was unmistakably, immutably and indomitably the kitchen table." at = "kitchen" ;
range: scenery "the range" listed = "false" msg ="It was the great slab of iron on which all of The Vicarage's meals were cooked and baking done." at = "kitchen" ;
bench_1: scenery "bench" listed = "false" msg ="They were simple slabs of sandstone, guaranteed to chill the behind to an uncomfortable degree if occupied for more than a few moments. It was rare to find anyone sitting there." at = "porch" ;

notice_1: scenery "notices" listed = "false" msg ="There were various parish notices. Arthur browsed them casually and learned of a planning application for a new lamppost to be sited in the lane, a sale of crocheted pincushions in aid of church funds by the Haelstowne and West Marchings Crafter's Guild, and an impending fancy ferret competition to be judged by none other than Rev.J.Peldash. All vital to the workings of ordinary village life no doubt but, Arthur judged, of not much relevance to the task at hand." at = "porch" ;

noticeboard: scenery "a noticeboard" at= "porch"msg = "It was a tatty wooden frame around a slab of cork, fastened to the wall." ;
tools_1 : scenery "some tools" at = "outbuilding" msg = "They were the sorts of tools that one might expect to find in a handyman's workshop at a country vicarage."  ;

turkish_rug : scenery "a rug" listed = "false" msg = "It pattern had faded and it had been worn paper thin by the constant passage of feet and yet it refused to bow to the inevitable and allow itself to become full of holes. Miraculously, it remained intact." at = "landing" cant_get_message = "Arthur considered rolling up the rug and taking it with him but then imagined what Mrs Taplow might say the next time she came up to polish the woodwork, and decided against it."  ;

turkish_rug_1 : scenery "a rug" listed = "false" msg = "It pattern had faded and it had been worn paper thin by the constant passage of feet and yet it refused to bow to the inevitable and allow itself to become full of holes. Miraculously, it remained intact." at = "landing_2"  cant_get_message = "Arthur considered rolling up the rug and taking it with him but then imagined what Mrs Taplow might say the next time she came up to polish the woodwork, and decided against it.";
turkish_rug_3 : scenery "a rug" listed = "false" msg = "It pattern had faded and it had been worn paper thin by the constant passage of feet and yet it refused to bow to the inevitable and allow itself to become full of holes. Miraculously, it remained intact." at = "top_stairs"  cant_get_message = "Arthur considered rolling up the rug and taking it with him but then imagined what Mrs Taplow might say the next time she came up to polish the woodwork, and decided against it.";
washstand: scenery "a washstand"listed = "false"msg = "It was a simple wooden stand with a hole cut in it for a basin. A ewer was alongside."at = "bedroom_1" ;

washstand_1: scenery "a washstand"listed = "false"msg = "It was a simple wooden stand with a hole cut in it for a basin. A ewer was alongside."at = "peldash_room" ;

shelves: scenery "wooden shelves" at = "cellar_room" listed = "false" msg = "They were simple wooden shelves, attached to the wall." cant_get_message = "Arthur thought about rolling up his sleeves and wrenching the shelves off the wall, but decided against it." ;


cheese: scenery "cheeses" at = "cellar_room" listed = "false" msg = "They were wheels of hard cheese, wrapped in muslin. They smelt as only old cheese can smell." cant_get_message = "Arthur felt that he could find better fare elsewhere." ;

meat: scenery "meat" at = "cellar_room" listed = "false" msg = "There were several hams, wrapped in muslin. Arthur wondered how it was possible for one small household to consume so much of it and concluded that the absent Reverend Peldash must have had an insatiable appetite for ham sandwiches. Arthur wasn't sure what light that shed on the rest of his character, but he determined to remember it in case it seemed a pertinent thing to mention at the inquest." cant_get_message = "Arthur didn't feel a present need to provision himself with ham." ;

racking : scenery "racking" at = "cellar_room"listed = "false" msg = "It was rather mundane timber racking, designed to hold bottles."cant_get_message = "Arthur thought that was best left where it was."  ;

basin: scenery "a basin" listed="false" msg = "It was a plain porcelain basin, for washing purposes." cant_get_message = "Arthur didn't see the point in taking the basin with him. It was more useful where it was."at = "bedroom_1";

basin_1: scenery "a basin" listed="false" msg = "It was a plain porcelain basin, for washing purposes." cant_get_message = "Arthur didn't see the point in taking the basin with him. It was more useful where it was."at = "peldash_room";

ewer: scenery "a ewer" listed="false" msg = "It was a large porcelain jug decorated with a simple flower design. There was a little water in it."cant_get_message = "Arthur didn't see the point in taking that with him. He had an intuition that it wasn't really important."at = "bedroom_1" ;

ewer_1: scenery "a ewer" listed="false" msg = "It was a large porcelain jug decorated with a simple flower design. There was a little water in it."cant_get_message = "Arthur didn't see the point in taking that with him. He had an intuition that it wasn't really important."at = "peldash_room" ;

scissors: object "a pair of scissors" msg = "It was a perfectly ordinary pair of scissors whose complete reliability over long decades of use had always been taken for granted." at= "drawer" ;
packet: object "a packet of photographic paper" ;
sheet: object "{sheet_description}";

peg: object "a peg" msg = "It was just an ordinary wooden clothes peg."at = "drawer" ;

lines: scenery "drying lines" msg = "They were lengths of twine spanning the length of the darkroom, evidently intended as a place to hang newly processed photographic materials to dry."at = "darkroom" cant_get_message = "Arthur felt they were best left where they were." ;
photographs:  object "some photographs";

drawer: scenery "{drawer_description}"msg = "It was a plain wooden drawer, rudely made in keeping with the rest of the dresser." container_type="bag" traits = [container_t];

sink : scenery "{sink_description}" at = "scullery" msg = "The sink was a huge, heavy china edifice, like something carved from dinosaur ivory. Every day unspeakable acts were enacted within its cavernous depths in the cause of making the crockery clean. Above it was a single tap." container_type="bag"cant_get_message = "Arthur wasn't sure why he would need to carry that huge, heavy thing around with him." ;

stopper: object "a cork stopper" msg= "It was a cork stopper, for sealing a flask.";

water_1 : scenery "water" msg = "In accordance with convention, it was wet." { traits = [liquid_t] } ; //bucket

water_2 : scenery "water" msg = "In accordance with convention, it was wet." { traits = [liquid_t] }  ;//dish

water_3 : scenery "water" msg = "In accordance with convention, it was wet." { traits = [liquid_t] }  ;//bottle
water_4 : scenery "water" msg = "In accordance with convention, it was wet." { traits = [liquid_t] }  ;//flask

bench : scenery "a bench" at = "darkroom"{ traits = [getunderable_t] } ;

tap: scenery "a tap" at = "scullery" listed = "false" msg="It was massive and uncompromisingly functional, in the manner of scullery taps. \n The tap was off." cant_get_message = "Arthur stiffled a sudden compulsion to rip it off the wall." ; 

mangle : scenery "the mangle" msg = "It was a set of heavy wooden rollers set within an iron frame and supported on curved metal struts, making it look like an enormous bandy-legged bullfrog. One fed it wet clothes, turned the handle and waited for it to regurgitate them, limp, lifeless and slightly damp, out of the other side." listed = "false" at = "scullery"  ;

chaise : scenery "a chaise longue" at = "study" listed = "false" msg = "The chaise recalled better days when it had been the favoured reclining place of dreaming poets. The story of how it had ended up a dusty relic in a country vicar's study was an epic that waited to be told." ;

scones : scenery "some scones" msg = "They were fluffy, fruited marvels of the domestic bakers art." plural = "true" ;

shovel : object "a shovel" msg = "It knew its place in life and aspired to nothing greater." ;

coal_heap: scenery "a heap of coal"at = "coal_cellar" cant_get_message = "Arthur had an intuition that the heap of coal wasn't particularly important." ;

lightswitch: scenery "a light switch" msg = "It was an unremarkable lump of bakelite, whose sole purpose was to effect the turning on and off of the electric light.";

lightswitch_1: scenery "a light switch" msg = "It was an unremarkable lump of bakelite, whose sole purpose was to effect the turning on and off of the electric light.";

desk : scenery "a desk" msg = "It was a sturdy walnut writing desk of early Victorian date. Its green leather top was stained with the ink of ages." at = "study" listed = "false" ;

armchairs : scenery "armchairs" at = "study" msg = "They were of the variety popular in many London clubs, high-backed and low seated such that gentlemen of a certain age, once seated, were obliged to stay so more or less permanently." listed = "false" ;


ashes: scenery "ashes in the fireplace" msg="Judging by the lack of cinders in the grate and taking account of the time of year, Arthur, with his detective's eyes, thought they looked more like evidence of a deliberate attempt to destroy something than an effort to keep warm.\n He poked through them and saw that they were the remains of burned paper and cardboard, including one or more photographs." ;
dresser: scenery "the dresser" at = "scullery"  ;

developer: scenery "developer"at = "bottle"  msg = "It was a colourless fluid." { traits = [liquid_t] }  ;

fixer: scenery "fixer" at = "flask" msg = "It was a colourless fluid." { traits = [liquid_t] } ;


cupboard : scenery "{cupboard_description}" msg =  "It was a simple, wooden cupboard attached to the wall above the workbench." at = "darkroom" traits = [container_t] listed = "true" container_type="bag" ;

plate_glass: object "{glass_description}" msg = "It was a rectangular pane of glass."; 

car : scenery "his car" at = "path_8" ;
 
film : object "{film_description}" at = "cupboard" ; 

reel: object "an empty film reel" msg = "It was a metal film reel, now empty." ;
box_brownie: object "a Box Brownie camera";

practical: object "Practical Techniques in Modern Photography" msg = "It was an old volume, bound in heavy paper and bearing the scars of frequent use, entitled 'Practical Techniques in Modern Photography'. Its spine was cracked, its pages creased and dog-eared and the cover carried innumerable stains. Like all really useful books, its infirmities were proof of its indispensibility." { traits = [books_t] } ;

weight : object "a porcelain weight" msg = "It was a rectangular lump of white porcelain with a stubby foot at either corner, rather like a miniature table. It bore the legend \"Haresnape & Ball's 'Economic' Patented Developing Weight\"."  { traits = [wettable_t] } ;

cutlery : scenery "some cutlery" at = "drawer" cant_get_message = "Arthur did not think it was worth the bother of carrying a lot of clanking cutlery around with him."  ;

instructions : object "a sheet of instructions" msg = "It was a sheet of instructions for the Haresnape & Ball 'Economic' Patented Film Development System.";
bouquet_flowers: object "a bouquet of dried flowers" msg = "It was a wildflower bouquet. Arthur was no botanist, but he recognised daisies, cornflowers and dog rose, bundled together with feathery stems of grass and a little lavender. They were very brittle and crumbled into flakes at Arthur's touch, releasing a musty scent."; 

breakfast_things: scenery "the breakfast things" at = "dining_room" msg = "There were the remains of a kipper, a boiled egg and some toast and marmalade, on well-used willow pattern crockery, alongside the coffee pot and salt and pepper pots.";

window : scenery "the window" at = "drawing_room" listed = "false" ;

window_1: scenery "the window" at = "recess";

paintings : scenery "picture" listed = "false" at = "hallway_2" cant_get_message = "Arthur thought that the paintings were best left where they were."  ;

vase : object "{vase_description}"  at = "drawing_room"   ;

vase_1: object "{vase1_description}" msg = "It was the upper part of a broken vase: a tall, red glass cylinder that tapered towards the point where the base once attached."  ;

fireplace_1 : scenery "the fireplace" at = "bedroom_1" listed = "false" ;

bed : scenery "the bed" at = "bedroom_1" msg = "It was a heavy iron bedstead that complained noisily each time anyone got into or out of it. Constructed in such a way as to leave a space beneath just large enough to accommodate one's nightmare imaginings, Arthur had slept not entirely soundly in it during his stay in The Vicarage so far." listed = "false" { traits = [getunderable_t] };

bed_1: scenery "a bed" at =  "peldash_room" msg = "The Reverend Peldash's bed had little to distinguish it from Arthur's own. It had the same heavy iron frame and discomforting void beneath. It was crisply and neatly made up and had that indefinable but distinctive quality that beds that have not been slept in for some time tend to have. ";

bookshelves : scenery "bookshelves (on which were many books)" at = "study" listed = "false" msg = "They were unobstrusively built into the walls of the study."  ;

hook : scenery "a hook" at = "kitchen" cant_get_message = "It was embedded into the very fabric of the wall, not the sort of thing that one might take without a great deal of work with a hammer and chisel." ; 


villages: object "'Villages of the Low Weald (Vol I)', by R.K.A. Shaple" msg = "It was an unremarkable looking, cloth-bound volume with the title in gilt letters. The frontispiece was a charming pen and ink landscape of the South Downs. This was the revised edition, of 1902." { traits = [books_t] };
spirits: object "'The Spirits of Andredesweald', by Revd N.H. Aspergill"  msg = "This small volume showed signs of heavy use. The boards were worn and faded and the spine had split. The title page read:\n The Spirits of Andredsweald\nBeing a record of most divers and remarkable superstitions and legends concerning sprites, elves &c. held by the simple habitants of the Weald, as told to one who lived amongst them. \nNathaniel Aspergill, Vicar of the Parish of St Michael, Lownesbury, in the county of Sussex\n 1816." { traits = [books_t] } ; 

tapestry : scenery "a tapestry" ;


matchbox: object "{matchbox_description}" msg = "It was a box of Pollock and Harshaw's 'Invincibles'. They promised to strike anywhere, and burn with a flame superior to that of their rivals. {matchboxopen? `It was open.`:`It was closed.`}" ;

// bottle: object "a glass bottle" msg = "It was a glass bottle with a screw top, containing a colourless liquid." ;

bottle: object  "{bottle_description}"  at = "cupboard" container_type="bag"msg = "It was a brown glass bottle, labelled 'Bunshaw's Exceptional Developing Fluid'." traits = [container_t];

flask: object "{flask_description}"  at = "cupboard" container_type="bag" traits = [container_t] msg = "It was a narrow glass flask. A hand-written label gummed to the front proclaimed it to be 'fixer'." ;

candle : object "a stub of candle" msg = "It was an unremarkable candle stub."at = "outbuilding"  ;

screw_cap : object "a screwcap" msg = "It was a metal screwcap, for closing a bottle." ; ;

holder: object "{candleholder_description}" at = "recess"  ;

holder_1: object "a candle holder (with candle, lit)";
match : object "a match" msg = "It was just an ordinary, unused match." { traits = [matchboxable_t] };


match_1: object "a burning match" msg = "It was just an ordinary lit match.";


base : object "a vase base" msg = "It was a saucer-shaped chunk of red glass, formerly the base of a vase.";

customers : scenery "customers" at = "pub"  msg = "It was a motley assortment of all trades and professions, young and old, rich and poor, vulgar and well-bred, thrown together hugger-mugger within the great leveller that was the village pub. Most seemed pretty well-oiled or well on the way to being so. Amongst the throng, Arthur spotted the occasional drinker whose unusually pale skin and curiously archaic clothing made them stand out from the rest. Those ones seemed the best oiled of all." ;

steps : object "a set of steps" msg = "It was a set of folding wooden library steps, for the reaching of books on high shelves. They were portable if a little cumbersome to carry around." at = "study" weight="9";


joseph_jarbell : scenery "Joseph Jarbell" at = "pub" 
msg = "Mr Jarbell was the publican of the Myrour Inn. A stout fellow occupying an indeterminate late middle age, he was white haired and ruddy skinned and wore a perpetual expression of surprise as if he had never expected to find himself in the life he was living. " ;

molly: scenery "Molly" at = "pub" msg = "Molly was the Myrour's recently acquired barmaid. A strikingly pale-skinned young woman in her early 20s, there was something in her manner that made her seem far older than her years. She oversaw the bar with a proprietorial air; that, and the slightly fearful glances that Mr Jarbell sometimes gave her, made it clear who was really in charge.";


crates: scenery "wooden crates" at = "cellar_room" ;

equipment: scenery "some old photographic equipment"cant_get_message = "Arthur picked through it, but none of it seemed worth taking." ; 

knife : object "a fish knife" msg = "It was a fine silver fish knife, probably once part of an expensive set. It must have fallen on hard times to find itself amongst the riff-raff of the cutlery drawer."{ traits = [matchboxable_t] } ;

knife_1: object "an unusual knife" msg = "It was a small knife with a gleaming, razor-sharp blade and an ebony handle inlaid with strange symbols in silver." ;

plates: scenery "a selection of plates";

leaflet: scenery "a printed leaflet" listed = "false" at = "cellar_room" ;


seedlings: scenery "potted seedlings" at ="potting_shed" ;


dish: object "{dish_description}" msg="It was a rectangular porcelain dish with four dimples in square formation in the base and one corner moulded into a spout. The moniker 'Haresnape and Balls' was emblazoned on the base. " traits = [container_t] container_type="bag" ;


tiny_man: scenery "a tiny man" msg = "It was a man in miniature, a diminutive figure clad in a curiously old-fashioned outfit of belted tunic and hose, shapeless leather shoes and a low-crowned felt hat. It had delicate features and piercing eyes that constantly darted back and forth, as though ever alert for danger. Arthur was entranced by its beauty, but there was something in its sharp, bright features that struck a chord of fear in him. ";

little_people: scenery "little people" msg = "They were little people, men and women of the same stature and the same delicate features as the little man that Arthur had first seen. They were similarly dressed, the men in tunic and hose, the women in long dresses and pointed caps, some with veils. Each was clutching a musical instrument - there were pipes, drums, flutes and harps, exquisite in miniature, each no bigger than a grass seed.";

bicycle : scenery "a bicycle" ;

rail : object "{rail_description}"msg = "It was a long, slender iron rail that had once served as a decorative fixture on a funerary monument."  ;

bucket: object "{bucket_description}" msg = "It was a simple metal pail." at = "scullery" container_type="bag" { traits = [wettable_t] };

frame: scenery "{cold_frame_description}"  at = "garden_3" ;

bunch_keys : object "{keys_description}" msg = "It was a hoop of age-burnished iron, holding keys of various shapes and sizes." ;

#CHARACTERS start

edna_taplow : scenery "Edna Taplow" at = "kitchen"msg = "She was one of those people that one could only imagine coming into the world exactly as she was now: a seventy-year-old widow of forty years with a frame like a sparrow, sharp eyes and grey hair tied up in a bun. It was impossible to picture a different, younger Mrs Taplow."  ;

thurgood : scenery "Sidney Thurgood" at = "garden" msg = "He was a stocky fellow with a face like a crumpled bed sheet. He wore a perpetually downcast expression and was never to be seen without his cap." ;

ottoline_elderfield : scenery "{ottoline_description}" msg = "She was tall and slender with pale skin and dark hair that she kept wrapped up in a silk turban. She was rather difficult to age: at first glance, Arthur would placed her in her late 20s, a few years older than he. But there was something world-weary in her eyes that made her seem much older. " ;

jeremiah_peldash : scenery "{peldash_description}" ;

mr_salter: scenery "Mr Salter" at ="chemist" msg = "Mr Salter was a scion of the Salter dynasty of druggists, pill-makers and purveyors of poison who had owned the village chemist shop since time immemorial. He was a rotund, jolly fellow with a fulsome moustache and a permanent expression of mild amusement which he imagined was reassuring but was actually rather disconcerting for his customers." ;


safelight: object "a safelight" msg = "It was an improvised safelight, made by placing the body of a broken red glass vase over a lit candle. The candle burned brightly if unsteadily within, casting a wavering ruby glow.";

scone : object "a scone" msg = "It was the archetype of delicious, fluffy home-baked scones. It looked, appropriately, good enough to eat." ;

frank_farthing : scenery "Frank Farthing" msg = "Frank Farthing was a hollow-cheeked fellow with a heavily-lined face, grey complexion and thinning hair which he kept carefully combed-over and greased down in memory of some earlier epoch when he had been popular with the ladies." ;

wardrobe : scenery "{wardrobe_description}" at = "peldash_room" ;

clothes : scenery "clothes (hanging in the wardrobe)" ;

drawer_1: scenery "{drawer_1_description}" msg = "It was a concealed drawer in the base of the wardrobe, fronted by a carved panel." container_type="bag" traits = [container_t];


robes: object "{robes_description}" at = "drawer_1" wearable = "true" msg = "They were beautifully made from a very heavy, very stiff black silk. They were embroidered all over with strange symbols in silver thread and studded with thousands of tiny coloured jewels. They seemed in excellent condition, but from the style Arthur felt sure that they must be very old." ;
chalice: object "a chalice" at = "drawer_1"msg = "It was a plain silver chalice with barely anything in the way of embellishment or decoration." ;

daisy_farthing: scenery "Mrs Farthing" at="poachers_house" msg = "She seemed very young - barely twenty - and was quite timid." ;

trunk_key: object "a small iron key"msg = "It was a rather unremarkable key." ;

garden_fork: object "a garden fork" at ="potting_shed"msg = "It was an ordinary garden fork. The wooden handle was split and the tines were out of true, but it had life in it yet." ;
goggles: object "{goggles_description}"msg = "The lenses were of thick glass set in brass frames and sewn into a robust strip of leather. There was a buckle arrangement to fasten them around the wearer's head. "  wearable = "true" ;
boots: object "{boots_description}" wearable = "true" msg = "They were a pair of stiff leather boots that looked as though they had been salvaged from a museum display. They were at least two sizes too large for Arthur."  ;
gloves: object "{gloves_description}" wearable = "true" msg = "They were hand-knitted in dark green wool, perhaps by Mrs Taplow or a kindly parishioner.";
overcoat: object "{coat_description}" wearable = "true" msg = "It was warm and wooly - just the thing for a freezing, snowy June evening. It had a couple of large pockets.";
// handkerchief: object "a handkerchief" msg = "It was that most essential of gentlemen's accessories: a large silk handkerchief."at = "bedroom_1" ;
// handkerchief_1: object "a bloodstained handerchief" msg ="It was that most essential of gentlemen's accessories: a large silk handkerchief. It was stained with blood."; 
bandage: object "a bandage" msg= "It was a gauze bandage, designed to stop wounds bleeding.";

horseshoe_nail : object "{nail_description}" msg = "It was a slender piece of black iron with a sharp point and square head. There was something unsettling about it, as though it was not quite of this world." ;

hedgehog: scenery "a hedgehog" msg = "It was like a brown boulder, covered in spines and with a stumpy little leg on each corner. A pair of beady black eyes peered myopically down the length of its snout." cant_get_message = "Arthur was familiar enough with hedgehogs to know never to pick them up unless they were in dire need of assistance." ;

shears: object "a pair of shears" msg = "They were an old and faithful pair of shears that Mr Thurgood kept sharp and well-oiled."  ;

pint: object "a pint of ale" msg = "It was a pint of cloudy liquid in a grimy china mug." ;

pint_jug: object "an empty pint jug"msg = "It was a heavily-used china mug with a chunky handle of the sort still popular in older establishments where they had not yet been supplanted by the modern fad for glass."   ;


horseshoe: object "an iron horseshoe" msg = "It was a perfectly ordinary horseshoe." ;

shoes: object "an old pair of shoes" msg = "They were a very small, grimy, crumpled pair of old shoes that could only have belonged to a child." ;

holly: object "a sprig of holly" msg = "It was an ordinary holly sprig, berryless at this time of the year." ;

dagger: object "a dagger" msg = "It was a small, sharp metal blade with a hilt decorated with an inlaid design of Celtic style. It seemed that Peldash used it for a letter opener - but he felt sure that was not its original use. It looked terribly old." ;

bell_rope: object "bell ropes" at = "church" msg = "They were long ropes dangling from holes in the wooden ceiling high above. The main part of the ropes were out of reach, but there were long ribbons of tough fabric attached to the ends that hung down within reach." ;


rope: object "{rope_description}" at = "bell_loft" msg = "It was a length of rope, probably an old bell rope that had worn sufficiently to be replaced."  ;

coffer: scenery 
"{coffer_description}" at = "bell_loft" msg="It was an enormous timber strongbox the size of a coffin and reinforced with strips of iron.";

ernest_snapeshuttle: scenery "Ernest Snapeshuttle" msg = "He was a gnomish person of short stature and jolly appearance. He wore a flat cap from beneath which a few tufts of white hair protruded and peered out at the world through a pair of tiny round spectacles." ;

hymn_books : object "{hymn_books_description}" msg = "They were conventional hymnals of various dates, though none less than 50 years old." ;

cupboard_1 : scenery "{cupboard1_description}" msg = "It was a small cupboard concealed within the wooden panelling." ;

tools: scenery "some tools (in the cupboard)" msg = "There were a variety of tools, handsomely made and burnished with long use. Most of them were unfamiliar to Arthur, but he suspected that they were specialist campanological tools for the tuning and maintenance of the bells. Presumably they were rather valuable, which would account for them being so well hidden." ;

iron_key: object "{iron_key_description}" msg = "It was an overlarge iron key of the sort that opens large, heavy doors." ;
motor_tricycle: scenery "a motor tricycle"msg = "It was an extraordinary thing with high seats and three very large spoked wheels. It was steered by a handle set atop a horizontal wheel while a long lever operated the brake. It would have looked more at home in a museum than on the open road."cant_get_message = "Arthur would have dearly loved to borrow Miss Drywell's three-wheeler and take it for a spin, but to do so without her permission hardly seemed fitting behaviour for a police officer."  ;

fence_post: object "{post_description}"msg = "It was as ordinary as a fence post can be." ;

lump_hammer: object "a lump hammer"  msg = "It had a short wooden handle and a very heavy lump of metal for a head." ;

wooden_cover: object "a heavy wooden cover" msg = "It was a large circular disc made from thick planks of wood, with an iron ring set into the centre." ;

hole : scenery "a hole in the ground" msg = "It was simply a hole in the ground." ;

waterlogged_thing: object "a waterlogged thing" msg = "It was a glistening dark lump floating in the water. Arthur couldn't quite make out what it was." ;


hook_pole: object "a pole with a hook on the end" msg = "It was a long wooden pole with a hook set into the end, useful for opening high windows amongst other things." ;

herbal: object "Ada Elderfield's Herbal" msg = "It was a compendium of herbal remedies, practical medicine and folklore that had served to cure many an ailment over the centuries. Looking closely, Arthur could see that some section of the book were differentiated from others by the colour and texture of the pages as though it had been stitched together from different volumes. Most of the pages were of paper, but the last were on parchment and all of it was hand-written, some in very old, faded ink and some in pencil. Many of the pages were water damaged from being thrown into the well."  { traits = [books_t] };

broken_dagger: object "a broken dagger" msg = "It was a small, sharp metal blade with a hilt decorated with an inlaid design of Celtic style. It looked terribly old and had been broken in two - an act of vandalism for which Arthur felt terribly ashamed." ;

ash: scenery "Ash"at = "faery_hut"  ;
envelope: object "an envelope" msg = "It was an ordinary envelope." ;

letter: object "a letter" msg = "It was a ordinary letter, on the cream-coloured business paper familiar with from the police station." ;

crow: scenery "{crow_description}" at = "nevernear_cottage"msg = "It was an enormous black crow with beautiful, blue-black feathers, hunched atop a perch within an iron cage. It observed Arthur silently, with inscrutable black eyes." ;

cage : scenery "a cage" at = "nevernear_cottage" msg = "It was a large cage of wrought irons strips, hanging by a chain anchored to the ceiling beam. It looked very heavy."  ;

portrait : scenery "a portrait"at = "nevernear_cottage"  msg = "It was a portrait in oils in a heavy gilded frame, cracked and darkened by age so that much of the background detail was lost, but the subject was still clear enough. It depicted a young man with an unruly mass of red hair pulled back from a high forehead. The brows were arched, the nose was long and the mouth thin; there was the barest trace of a smile on the narrow lips. But it was the eyes that drew one's attention: they were a startling, piercing green and seemed to scrutinise and judge all they looked upon. He wore a high-collared garment covered in strange symbols and beside him was a bright, disc-shaped object. It was an arresting image."  ;

ashtray: object "an ashtray"msg = "It was a bronze bowl with a narrow rim around which were inscribed strange symobols. It had evidently been used as an ashtray for some time to judge by the stub marks in the base, but Arthur had an inkling that its original purpose was a less mundane one." ;

ottolines_bike: object "Ottoline's bicycle";

bramble_bush: scenery "a huge, spiky bramble bush" msg= "It was an aggressive mass of thick, fleshy stems covered in razor sharp thorns, growing in the gap between two mature trees. The foliage was so green and fresh-looking that one could almost imagine the whole growth had sprung up overnight. " at = "wood_path_3" cant_get_message = "Arthur didn't fancy trying to gather up the huge, spiky bush."  ;

athame: object "an athame" msg= "It was a small knife with a gleaming, razor-sharp blade and an ebony handle inlaid with strange symbols in silver.";

gardening_gauntlets: object "{gardening_gauntlets_description}" msg = "They were a pair of leather gardening gauntlets, rather stiff and unwieldy but excellent protection against spiky plants like rose bushes. " wearable = "true"  ;

sacking: object "a heap of old sacking" msg = "It was a heap of old sacking material, threadbare and musty" at= "hut";

lead_shot: scenery "a box of lead shot" msg= "It was a lidless wooden box filled with lead shot." cant_get_message = "Arthur tried to get the box of shot, but it was far too heavy to carry around so he decided to leave it where it was." at = "hut" ;

snare: object "a snare" msg = "It was a poacher's snare: a length of wire looped back on itself to form a noose, designed for the catching of rabbits." at = "hut" ;

trunk : scenery "a metal trunk" msg = "It was a battered tin trunk." cant_get_message = "It was rather too cumbersome and heavy for Arthur to take." ;

clutter: scenery "a lot of clutter (in the trunk)" msg = "There was wire and bits of wood and shotgun pellets and in fact all sorts of things related to the poacher's art. None of it was of much use or interest to Arthur.";

mistletoe: scenery "mistletoe" msg = "There were several clump of mistletoe, hanging like green cannonballs amongst the branches of their host trees." ;

mistletoe_sprig: object "a sprig of mistletoe" msg = "It was a sprig of mistletoe, berryless at this time of year but unmistakable from the shape of the leaves." ;

toadstool : object "a toadstool" msg = "Mycology was not Arthur's strong suit, but nevertheless he knew a toadstool when he saw one." ;

stump: scenery "a rotting tree stump" at = "clearing";

table: scenery "the dining table" at = "dining_room" msg = "It was an oval table made of walnut with a scalloped edge, neither very fancy nor very common but slightly unusual. One suspected it had enjoyed another life, long since forgotten, before being pressed into its current service as The Vicarage dining table." { traits = [getunderable_t] };

chair_1: object "a chair" at = "drawing_room"  weight="8" msg = "It was a very plain and ordinary chair of the sort that one might spend hours sitting upon and then walk away from and be unable to describe a single thing about even if one's life depended on it. That was often the way with chairs. "{ traits = [getunderable_t] } ;

chair_2: object "a chair" weight="8" msg = "It was a very plain and ordinary chair of the sort that one might spend hours sitting upon and then walk away from and be unable to describe a single thing about even if one's life depended on it. That was often the way with chairs. " { traits = [getunderable_t] };

chair_3: object "a chair" weight="8"at = "study" msg = "It was a very plain and ordinary chair of the sort that one might spend hours sitting upon and then walk away from and be unable to describe a single thing about even if one's life depended on it. That was often the way with chairs.  " { traits = [getunderable_t] };

chair_4: object "a chair (wedged under the door handle)"msg = "It was a very plain and ordinary chair of the sort that one might spend hours sitting upon and then walk away from and be unable to describe a single thing about even if one's life depended on it. That was often the way with chairs.  "{ traits = [getunderable_t] } ;


round_table: scenery "{round_table_description}" at = "drawing_room" msg = "It was a round mahogany table of extremely robust construction that one would do well to shelter beneath in the event of an earthquake or a Zeppelin raid. Its surface was a little worn by the many thousands of games of patience it had witnessed in its time. Arthur thought what fun it might be to get on it." { traits = [getunderable_t] };

witch_bottle: object "a large glass bottle" msg = "It was a large bottle of thick, greenish glass." ;

bung: object "a rubber bung"msg = "It was as ordinary as a rubber bung can be." ;

something: object "a thing (on top of the pelmet, over the window)" msg = "It was something that had been put on top of the pelmet, above the window. Arthur could only see a small part of it and couldn't quite make out what it was." ;

paperback : object "a paperback book" at = "peldash_room" msg = "It was a cheaply printed volume with a flimsy paper cover, entitled 'The Dean of Misslefell', by M. Prince-Davis. Arthur had never heard of it, or its author."  { traits = [books_t] };

altar : object "a ceremonial altar" at = "chapel"  msg = "It was a simple table, covered with a red cloth." ;

paten: object "a gleaming golden paten (on the altar)" at = "chapel"msg = "It was a golden disc inscribed with a design of intersecting triangles. It beckoned to Arthur like an outstretched palm, almost as if asking for something to be placed upon it." ;

candles: object "a pair of candles, in holders (on the altar)" at ="chapel" msg = "They were long, slender candles of green wax, in silver candle holders." ;

horseshoe_nail_1: object "a horseshoe nail (glowing brightly with an unearthly light)" msg = "It was the faery horseshoe nail found by Frank Farthing. It glowed with a cold and unearthly light." ;

pince_nez: object "{nez_description}" wearable = "true" msg = "They were a tiny, round, gold framed pair of spectacles designed to pinch the nose. Arthur fancied that he might look quite dapper, if a little affected, wearing these." ;

spectacles_case: object "{case_description}" at= "peldash_room" msg = "It was a small metal case finished in brown leather." ;

spectacles_case_1: object "{case_description}" msg = "It was a small metal case finished in brown leather.";

marjorie_drywell: scenery "  {drywell_description}" at = "vet"msg = "She was a slim, tough-looking woman with sandy, grey-speckled hair tied back from her rather hard face. " ;

injured_rabbit: object "an injured rabbit" msg = "It was the rabbit that Arthur had seen earlier on the old village site. It had been set upon and was in a bad way." ;

rabbit: scenery "a rabbit" msg = "It seemed like a perfectly ordinary rabbit, although it did look at Arthur is an unnervingly knowing way." cant_get_message = "Arthur had better things to do that carry a happy rabbit around." ;

fragment_1: object "a fragment of mirror"msg = "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;//rabbit

fragment_2: scenery "a fragment of mirror" cant_get_message = "Arthur tried to, but the fragment was set into the mosaic."msg = "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;

fragment_5: object "a fragment of mirror"msg = "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old.";//mosaic

fragment_3: object "a fragment of mirror"msg = "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;//stained glass

fragment_4: object "a fragment of mirror"msg = "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ; //pub


sundial: scenery "a sundial" at = "garden_4"   listed = "false" ;


earth: scenery "a pile of earth";

screwdriver: object "a screwdriver" msg = "It was as unpretty and functional as such things ought to be. Only poor workmen had fancy screwdrivers." ;

// chisel: object "a chisel" msg = "It was a well used but still keen chisel that had lost a couple of inches to repeat resharpenings over the years." ;
cardboard_box: object "a cardboard box (containing an injured rabbit)" msg = "It was an ordinary cardboard box, within which was the injured rabbit." ;

pew: scenery "ordinary oak pews" at = "church" msg = "They were plain oak pews of medieval date, designed to inflict the maximum discomfort upon members of the congregation and thereby safeguard against the onset of sleep during lengthy sermons."  ;

pew_1: scenery "the Molyneux family pews"  msg = "They were the private pews of the Molyneux family, wealthy landowners and patrons of the church for centuries." ;

monument:scenery "funerary monuments" at = "church_1"cant_get_message = "Arthur didn't feel up to the task of picking up and carrying off an entire monument." ;

carvings: scenery "carvings (on the Molyneux family pew)";

fox: scenery "a fox";

triptych: scenery "a triptych of stained glass"
at= "church_1" cant_get_message = "That hardly seemed like something that Arthur could pick up and carry around with him." ;

piano: scenery "a piano" at = "pub" msg = "It was a battered old upright piano, hammered over many decades into that unique tuning that only pub pianos have. It had a hinged lid that gave access the innards." ;
tuning_hammer: object "a tuning hammer" msg = "It was a little hammer with a wooden handle and rubber head, designed for sounding piano wires during the tuning process." ;

cavity: scenery "a cavity in the monument" msg = "It was a cavity deliberately built into the monument." ;

casket: object "{box_description}" msg = "It was a very simple, small wooden casket." ;

remnant: object "a tattered remnant of a book" msg = "It was a tattered remnant of a book. It was hand written in crabbed scrawl on thick parchment pages curled and discoloured with great age."  { traits = [books_t] };

bones:  scenery "some bones" msg = "They were the disarticulated bones of an animal the size of a smallish dog. The skull was long and slender, the brow rather flat. Arthur realised that the remains were most probably those of a fox. " cant_get_message = "Arthur didn't think it would be proper to take the bones from their resting place. He decided to leave them alone." ;

grimoire: object "the Grimoire" msg = "It was Richard Travais' grimoire, reconstructed from its two separate halves." { traits = [books_t] } ;

mirror: object "Richard Travais's mirror";

keg: object "{keg_description}" msg = "It was a small wooden barrel, designed for the storing of ale. There was a tiny tap on its side." ;

keg_1: scenery "{beer_keg_description}" at = "pub_cellar" msg = "It was a small wooden barrel, for the storing of ale. There was a tiny tap on its side.";

rack: scenery "a keg rack" at = "pub_cellar" msg = "It was a hefty wooden rack with scooped edges, in which were resting horizontally several small beer kegs. There were two levels: the upper level held a number of kegs side by side and the lower level was designed to hold a single keg. The two levels were connected by a shallow slope. Arthur guessed that the arrangement allowed for an empty keg to be disconnected and removed and a fresh one rolled into place and reconnected with maximum speed, so as to not interrupt the vital flow of ale to the taps up above.";


barrels: scenery "beer barrels"at = "pub_cellar" msg = "They were large wooden beer barrels of the sort that had now been supplanted by smaller and easier to manage kegs." cant_get_message = "Arthur tried to, but they were just too heavy to pick up and carry." ; 

stone_wall: scenery "the stone wall" msg= "It was a wall of large stones, roughly dressed and mortared together: the very fabric of the Myrour Inn." cant_get_message = "Arthur's capacity for carrying things was quite prodigious, but even he baulked at the idea of picking up an entire wall and carrying it around with him." ;
date_stone: scenery "{date_stone_description}" msg = "It was in one of the earliest courses to be laid and was carved with the initials VF and the date, 1430." cant_get_message = "Arthur tried to take the stone, but it was set in the stone wall." ;
hole_wall: scenery "a hole in the wall"msg = "It was a hole in the wall where the date stone had once been." ;

gossiping_villagers: scenery "gossiping villagers" msg= "There were various idle folk, sharing other people's trusted confidences with one another in loud whispers. Arthur spotted some curious characters amongst them wearing old-fashioned clothes and with a strange, not-quite-substantial quality about them."cant_get_message = "Arthur had enough on his hands already without scooping up the residents and walking around with them."at = "pump"  ;

twig: object "a hazel twig" msg = "It was a simple hazel twig, seemingy quite unremarkable." ;

crumbs: object "some crumbs"msg = "They were the only trace left of Mrs Taplow's stolen scone." ;

lid: object "a wooden lid" msg = "It was a wooden circle that formerly sealed the end of a beer keg";

weather_vane: object "the weather vane (atop the church steeple)";
//church

binoculars: object "a pair of binoculars" msg ="They were a much handled pair of British-made binoculars from the famous Whitley and Strawbarrow binocular company whose confidence in their product was such that they claimed purchasers would never need to buy another. And so it proved, for having achieved market saturation, their sales slumped and they went rapidly out of business.\n They were chunky and leather-coated, with a strap for hanging them around the neck." at = "study" wearable = "true"  ;

altar_cloth: scenery "an altar cloth (on the altar)" at = "chapel" msg = "Arthur felt that was best left where it was." ;

ashes_1: scenery "a pile of ashes" msg = "They were just ashes." cant_get_message = "There seemed no reason to pick up the ashes and carry them around." ;


poachers_hut: scenery "the poacher's hut"at = "clearing" msg = "It was a ramshackle timber construction that had occupied the same spot within the bramble bush for so long that it was no longer clear where the bush ended and the hut began." cant_get_message = "Arthur decided against trying to pick up the entire structure."listed = "false"  ;

notice : scenery "a notice" msg = "It was a printed notice stuck to the wall. It seemed to have been cut from a publication of some sort."cant_get_message = "Arthur didn't think it was worth the effort of peeling it off the wall and carrying it around with him. Besides, it seemed most apposite where it was."at = "darkroom"   ;

}
######################################
#  On Tick                           #
######################################

on_tick {

: if (intro<2) {
: print "(Type THEME to change paper and ink colours.)" ;

   : print "(Type HINT for a clue at any time.)" ;
     : print "(Type STUCK for explicit help if you really are stuck - but beware of spoilers!)" ;

   : increment "intro" ;
   
}


: if (is_present "witch_bottle") {
: if (witch_bottle_open) {
   : if (gossip_in_bottle) {
      : if (chance (25)) {
         : print "Arthur felt something insubstantial rush from the neck of the bottle and away past him." ;
         : set_false "gossip_in_bottle" ;
      }
   }
   }
}

: if (is_at "pump") {
: if (is_present "witch_bottle") {
  : if (chance (25)) {
: if (is_beside "witch_bottle") {
   : if (witch_bottle_open) {
   : if (witch_bottle_empty) {
      : if (!gossip_in_bottle) {
         : print "Arthur sensed something as intangible as a breath of air rush past him and as he turned, he saw the witch bottle rock slightly." ;
         : set_true "gossip_in_bottle" ;
            }
      : else {
         : print "Arthur saw the witch bottle rock slightly and felt something intangible rush away past him." ;
         : set_false "gossip_in_bottle" ;
         
      }
            
   }
   : else {
      : print "Arthur felt something invisible rush past him and saw the bottle rock slightly - and then whatever it was seemed to rush away again." ;
      
   }
   
}
: else {
   : print "Arthur felt something invisible rush past him, like a breath of wind, and saw the bottle rock as though something had collided with its closed end." ;
}
      }
      
      : else {
         : print "Arthur felt something like a gust of air rush invisibly towards him, before veering away." ;
      }
}
      
   }
   
}

: if (bleeding>0) {
   : print "Arthur was bleeding a little from a small cut on his finger." ;
   : increment "bleeding" ;
   : if (bleeding==5) {
      : print "The bleeding eased and then stopped altogether." ;
      : set_integer var = "bleeding"  value = "0" ;
      
   }
   
}

: if (bell_ringing==1) {
: print "Arthur pulled the tail rope and watched as the sally descended, travelling past him and down towards the floor." ;
: print "Arthur heard the bell go 'dong'.";
: increment "bell_ringing" ;

: done ;

}
: if (bell_ringing==2) {
   : print "The sally came back up, drawing level with Arthur. He grabbed it and pulled once more." ;
   : print "Arthur heard the bell go 'dong'";
   : increment "bell_ringing" ;
   : done ;
   
}
: if (bell_ringing==3) {
   : print "The sally descended towards the floor again.";
   : increment "bell_ringing" ;
   : done ;
   
}
 : if (bell_ringing==4) {
   : print "The sally ascended, drawing level with Arthur once more." ;
   : increment "bell_ringing" ;
   : done ;
   
}

: if (bell_ringing==5) {
   : print "The sally shot upwards past Arthur and disappeared through the wide hole in the wooden ceiling. Arthur kept hold of the tail as the rope ascended.";
   : set_integer var = "bell_ringing"  value = "1" ;
   
   : done ;
   
}






: if (is_at "darkroom"&&!is_dark) {
   : if (has_not_created "lightswitch") {
      : create "lightswitch" ;
      
   }
   
}

: if (handy_counter>0&&handy_counter<10) {
   : increment "handy_counter" ;
   }
   : if (fixing_counter>0&&fixing_counter<5) {
      : increment "fixing_counter" ;
      
   }
   
   : if (is_at "outbuilding"&&is_present "thurgood") {
   : if (fixing_counter==0) {
: set_integer var = "fixing_counter"  value = "1" ;
   }

: if (fixing_counter==1) {
   : print "Mr Thurgood was there, tinkering with the bicycle. He looked up and nodded briefly as Arthur entered.\"Be done in a jiffy Mr Mapple, just got to get this old chain off first...\" He swore loudly as the wrench he was using slipped and bashed his knuckles. " ;
}
 
 : if (fixing_counter==3) {
    : print "Mr Thurgood, having finally overcome the reluctance of the shiny new chain to allow itself to be fitted to the grimy old bicycle, stepped back and wiped his brow. He then turned his attention to buckled wheel. With a little pressure applied to the rim the wheel became tolerably straight. Mr Thurgood turned it on its axle, grunted in satisfaction and began to reattach it to the frame.";
 }
 : if (fixing_counter==5) {
   : print "Mr Thurgood tightened a final bolt and then stood back in evident satisfaction. \"Good as new, Mr Mapple.\" he said, wiping his hands on an oily rag. He gave a final nod to Arthur and left the outbuilding." ;
   : create "bicycle";
   : create "thurgood"target = "potting_shed"  ;
 : set_integer var = "handy_counter"  value = "0" ;
  : set_true "bikefixed" ;
  
 }
 
 
}
   

: if (handy_counter==10) {
   : if (is_at "path_8") {
      : print "Arthur heard footsteps on the gravel and a moment later, Mr Thurgood appeared from around the side of the house, wheeling the bicycle alongside him.\n\"There you are Mr Mapple,\" he said, rather gruffly, \"as good as new.\"\n Arthur looked at the rusted frame and the cracked seat and thought that was overstating the case a little, but he was certainly pleased that, with a new chain and a unbuckled wheel, it appeared to be in working order. He made to thank Mr Thurgood, but the gardener had already turned his back and was trudging away up the path." ;
      : create "bicycle" ;
      : set_true "bikefixed" ;
      : set_integer var = "handy_counter"  value = "0" ;
       : create "thurgood" target = "potting_shed" ;
       
}
      
      
   }
   



: if (taplow_window_counter==18) {
: create "edna_taplow" target = "kitchen";
     : set_false "window_open" ;
     : set_integer var = "taplow_window_counter"  value = "-1" ;
   : if (is_at "recess") {
   : clear_screen;
   
      : print "The wind seemed suddenly to accept defeat and give up the battle for possession of the window. Mrs Taplow grabbed it and swung it shut, locking it firmly in place with the iron handle.\n\"I'll thank you, Mr Mapple, not to go opening windows where it's not warranted!\" she said sharply, before tucking a loose strand of grey hair back into place and shuffling past Arthur. She disappeared back over the ledge and out of sight. He felt suitably chastened as he heard her descending the stairs on her way back to the kitchen." ;
 : press_any_key ;
 : redescribe;
 
   }
   : else_if (is_at "top_stairs"||is_at "landing") {
      : print "Arthur hear the sound of the window being shut and locked in place at last, and a moment later observed Mrs Taplow making her way down from the recess. She paused to tuck a loose grey forelock back into place and shot Arthur a withering glance.\n\"I'll thank you, Mr Mapple, not to go opening windows where it's not warranted!\" she said sharply, before descending the stairs. Arthur felt suitably chastened.  " ;
       : press_any_key ;
        : redescribe;
   }
   : else_if (is_at "on_steps") {
         : print "Arthur hear the sound of the window being shut and locked in place at last, and a moment later saw Mrs Taplow appear on the ledge above his head. He quickly hopped off the steps and watched from the top of the stairs as she descended from the recess. She paused to tuck a loose grey forelock back into place and shot Arthur a withering glance.\n\"I'll thank you, Mr Mapple, not to go opening windows where it's not warranted!\" she said sharply, before descending the stairs. Arthur felt suitably chastened. " ;
         : goto "top_stairs" ;
          : press_any_key ;
           : redescribe;

      
   }
   
   : else_if (is_at "bottom_stairs"||is_at "hallway_2"||is_at "hallway"||is_at "hallway_3") {
          : print "From up above, Arthur hear the sound of the window being shut and locked in place at last and a few moments later, footsteps descending the stairs. \n Mrs Taplow appeared, pausing as she saw Arthur hovering guiltily nearby.\n\"I'll thank you, Mr Mapple, not to go opening windows where it's not warranted!\" she said sharply, pushing a loose grey forelock back into place. With a final withering glance, she turned on her heel and hurried off in the direction of the kitchen. Arthur felt suitably chastened." ;
           : press_any_key ;
            : redescribe;
   }
   : else_if (is_at "kitchen") {
      : print "Arthur felt his heart skip a beat as he heard unmistakable footsteps in the hallway and, a moment later, Mrs Taplow entered the kitchen. She stopped short when she saw him hovering guiltily, smoothed her apron pointedly and pushed a loose grey forelock back into place. \n\"I'll thank you, Mr Mapple, not to go opening windows where it's not warranted!\" she said tartly, giving him a final withering glance before carrying on with her work." ;
       : press_any_key ;
        : redescribe;
   }

}
: if (traptor==1) {
: if (is_at "kitchen") {
: if (baking_smell) {
: print "A delicious smell of baking filled the air." ;

: if (taplow_window_counter==-1&&!drywell) {
      : print "Mrs Taplow gave a little yelp and rushed over to the range. She grabbed a cloth, opened the great iron door of the oven, and reached into the Hadean depths to withdraw a tray of scones which she deposited with a crash on the stove top.";
      : press_any_key ;
      : clear_screen;
      
      :print "\"There!\" she said, gesturing at the tray, \"Ruined! Whatever will Miss Drywell have for her tea now, I should like to know?\"\n Arthur was nonplussed: the scones looked perfectly fine to his untrained eye. He considered offering to consume them himself, or asking who Miss Drywell was, before deciding that the wisest course of action would be to keep his mouth shut." ;
  : set_false "baking_smell" ;
  : create "scones" target = "kitchen" ;
  : press_any_key ;
  : redescribe;
  
  }

   }
   }
}

      

//film developing
: if (is_at "darkroom") {
: if (parent_of "weight"=="dish"&&parent_of "developer"=="dish"&&parent_of "film"=="dish"&&film_description=="a strip of undeveloped film") {
: if (!is_carried "instructions") {
: if (!need_instructions) {
    : print "Arthur felt that he had everything ready to develop the film, but then hesitated, suddenly unsure of himself. What exactly was the process that he needed to follow? He would have felt a lot more confident if he had some proper instructions about what to do." ;
   : set_true "need_instructions" ;
}
   :done;
}

: set_string var = "film_description"  text = "a strip of film negatives (unfixed, unwashed)";

: create "dish" ;
: press_any_key ;
: clear_screen;

   : print "Arthur had everything prepared. He smoothed out the crumpled sheet of instructions and read them through again carefully. Then, rolling up his sleeves, he arranged things on the bench and prepared to take his best shot at the mysterious process of film developing.";
   : press_any_key ;
   
   :print "He arranged the film beneath the weight so that it was trapped within the fluid-filled dish but still able to move back and forth and then, taking hold of either end, he see-sawed the strip through the developer. After several minutes, images began to appear on the film, as if by magic. Arthur see-sawed for the recommended time and then removed the film from the dish and peered at it in the unsteady glow of the improvised safelight." ;
 : press_any_key ;
: if (faerycounter==-1) {
: clear_screen;
   : append "Arthur sensed a sudden intangible shift, as though the light had subtly changed. He looked around. Nothing was visibly different but the air felt suddenly charged, the shadows cast by the wavering candle flame seemed vividly alive and Arthur had a strong sense of presence. Something caught his eye: a movement, it seemed within the very surface of the film strip itself. Impossible. But still he held it up to the light and peered at it closely. There was nothing to be seen but a series of negative images, barely discernible in the red light.";
   : press_any_key ;
   
     : print "Things seemed to settle. The moment had passed, but the feeling of presence still lingered, like a background hum nagging at his senses. Arthur did his best to shrug it off and carry on.  " ;
     : press_any_key ;
     : redescribe;
     
}
: else {
   : redescribe;
   
}

   


}
//film fixing
: else_if (parent_of "weight"=="dish"&&parent_of "fixer"=="dish"&&parent_of "film"=="dish"&&film_description=="a strip of film negatives (unfixed, washed)") {
: print "Arranging things on the bench once more, Arthur placed the cellulose strip beneath the weight in the dish and see-sawed it through the fixing fluid, permanently imprinting the images on the film." ;
: set_string var = "film_description"  text = "a strip of film negatives (fixed, unwashed)" ;
: create "dish" ;

}

//contact prints developing
: if (parent_of "developer"=="dish"&&parent_of "sheet"=="dish"&&sheet_description=="a sheet of exposed, undeveloped photo paper") {
: if (parent_of "weight"=="dish") {
   : print "He saw that having the weight in the dish would be something of an encumbrance when trying to process the photo paper, so he took it out and left it on the bench." ;
   : create "weight" ;
}
: set_string var = "sheet_description"  text = "a sheet of contact prints (unfixed, unwashed)";
: create "dish" ;
: create "sheet" target = "dish" ;

: press_any_key ;
: clear_screen;

: print "Arthur swished the sheet of photographic paper back and forth through the dish of developer and after a few moments images began to appear on the sheet." ;
: press_any_key ;

: if (faerycounter==-1) {
: clear_screen;

   : append "Arthur felt a sudden violent change in the atmosphere, like air rushing in to fill a vacuum. Whatever invisible bubble it was that had sealed off The Vicarage from the outside world shattered, the sense of neutrality and calm evaporated, and the air was suddenly prickling and alive with things unseen. Arthur looked at the images on the contact sheet and saw things moving, impossibly but undeniably, beneath the photographic emulsion. He felt the dead hand of terror close around his heart, every hair stood upright and for a few moments he remained rooted to the spot. And then, thankfully, the fear abated, the charge in the atmosphere faded and the pressure lessened as though an equilibrium has been reached. Arthur, clammy with cold sweat, looked around the place and knew that whatever it was that he had done, he would no longer ever be alone in The Vicarage. ";
    : press_any_key ;
    : redescribe;
    
     
  
   
}
: else {
   : print "The sheet appeared to be completely blank." ;
   
}

}
//contact sheet fixing
: else_if (parent_of "fixer"=="dish"&&parent_of "sheet"=="dish"&&sheet_description=="a sheet of contact prints (unfixed, washed)") {
: if (parent_of "weight"=="dish") {
   : print "Arthur saw that having the weight in the dish would be something of an encumbrance when trying to process the photo paper, so he took it out and left it on the bench." ;
   : create "weight" ;
   
}
: print "Arthur swished the sheet in the fluid, permanently fixing the images." ;
: set_string var = "sheet_description"  text = "a sheet of contact prints (fixed, unwashed)" ;
: create "dish" ;

}



: if (negs_on_sheet&&glass_on_sheet&&!contact_sheet_prepped) {
   : print "Arthur looked with satisfaction at the arrangement of photo paper, negatives and plate glass on the bench before him. He had everything ready to make a contact print." ;
   : set_true "contact_sheet_prepped" ;
   
}

}





      : if (matchlit) {
      : decrement "burncounter" ;
   }
   : if (burncounter==0) {
      : print "The match burned down to Arthur's fingers; hastily he shook it out and discarded the burnt match." ;
      : destroy "match_1" ;
      : set_false "matchlit" ;
      : set_integer var = "burncounter"  value = "3" ;
      : press_any_key ;
      : redescribe;
      
   }
   #MOVEMENT ROUTINES
   
   #FAERY WAITING start
   
   : if (faerycounter>0) {
      : increment "faerycounter" ;
      
   }
   
   : if (is_at "in_trees"&&is_present "tiny_man") {
   : if (faerycounter==3) {
   

   : if (faerytreesinstance==0) {
      : print "The little figure darted back and forth, floating rather than flying, for Arthur saw no Cottingley-style wings. He tried hard to keep it in focus, but found that he couldn't for more than a few moments before it became fuzzy and indistinct as though not quite solid.\n Arthur tried to recall what it was that he had eaten for breakfast that might account for this hallucination." ;
      }
   : else_if (faerytreesinstance==1) {
      : print "The little man seemed wary, glancing about him as he floated across the rockery. He turned his gaze towards the shadows beneath the trees and Arthur felt piercing eyes slide across him like a blade against the flesh. The creature stared for a moment longer and its mouth twisted into the faintest smile. Arthur was gripped with cold fear.";
   }
   : else_if (faerytreesinstance==2) {
      : print "The little man twisted and turned his way across the rockery in a curious dance, never quite touching the ground. Then suddenly it leapt up into the air, quite close to Arthur, and he had a clear impression of a face that remained with him forever after. For within those tiny, delicate features so beautiful and so perfectly formed, there was a cruelty so cold and so inhuman that it chilled Arthur to his very soul." ;
      
   }
      : else_if (faerytreesinstance==3) {
      : print "The little man darted hither and thither like a restless insect in front of Arthur, who had a strong impression that it knew it was being observed. A cruel smile was fixed on its face and its eyes shone like splinters of glass as it performed its strange dance before him." ;
      
   }
   
   
   }
   : if (faerycounter==5) {
      : print "The little man drew a tiny horn from inside his tunic, put it to his lips and blew. There was no sound - perhaps, reasoned Arthur, it was too high for human ears to detect - and presently a whole chattering company of little people appeared, floating like dandelion seeds around the hornblower.";
             : create "little_people" ;
       
       
   }
   : if (faerycounter==7) {
      : print "The rest of the little people drew forth instruments and began to play. Arthur strained to hear but could detect no sound, except perhaps for a faint whisper of voices, as high and thin as the breeze that stirred the tops of the trees. The whole company laughed and played and danced before him in a silent tableau. Arthur noticed a curious quality of flatness about them as though they were figures in a painting or cut from paper. He fancied that if he had the courage to try and touch them, his hand would pass straight through." ;
      
   }
   
   : if (faerycounter==9) {
      : print "Arthur watched, entranced by the scene before him and intoxicated by the scent of the rhododendrons. The perfume began to irritate his sinuses and before he could stop himself, he sneezed loudly.\n Instantly the little people stopped playing and tiny heads snapped towards him bearing expressions of such hostility that Arthur felt cold fear wash over him. And then, in an instant, they had vanished as if they never were. Arthur emerged from his hiding place and looked around the rockery in bewilderment. There was nothing and nobody there." ;
      : set_integer var = "faerycounter"  value = "0" ;
      : destroy "little_people" ;
 : destroy "tiny_man" ;
 
   : goto "top_rockery" ;
   : press_any_key ;
   : redescribe;
   
   }
   
   }
   
   #FAERY WAITING end
   
   #INTERRUPTIONS start
   
   : if (traptor==4) {
       : if (spacing_counter<4) {
      : decrement "spacing_counter" ;
   }
   : if (spacing_counter==0) {
    : set_integer var = "spacing_counter"  value = "3" ;
   : if (is_at "drawing_room") {

   : if (is_present "chair_4") {
      : if (chance (30)) {
         : print "There was a knock at the door rapidly followed by the rattling of the door handle and the unmistakable sound of Mrs Taplow huffing and puffing in the corridor outside, but to no avail. The chair wedged beneath the handle proved an effective barrier to entry. " ;
     
      }
       : done ;
   }
   
   : if (chance (75)) {
  
    : print "There was a knock at the door and, without waiting for an answer, the door opened and Mrs Taplow entered the room." ;
   : increment "hack_counter" ;
    : if (hack_counter==7) {
    : if (ottolines_irritation_counter<2) {
       : increment "ottolines_irritation_counter" ;
       
    }
    
    : set_integer var = "hack_counter"  value = "1" ;
    }
 
    
    
    : cycle predictable_order = "false"  key = "interruptions" {
               : print "\"Begging your pardon, Mr Mapple, but I was wondering if Miss Elderfield would be needing to be accompanied home after your business is finished? I can ask Sidney to...\"\n\"No thank you, Mrs Taplow,\" said Ottoline firmly. \"Ms Elderfield is quite capable of finding her own way home. And I really have no idea when Mr Mapple and I will be finished with one another.\"\nMrs Taplow pursed her lips and left the room." ;
               : print "\"I expect you'll be wanting some tea, Mr Mapple,\" said Mrs Taplow, as a statement of fact. \"Shall I serve it in here, or in the dining room?\"\n\"No thank you Mrs Taplow,\" replied Arthur, \"we're quite alright as we are thank you. Now, if you wouldn't mind, we do have some things to discuss in private...\"\nAffronted, Mrs Taplow bustled out of the room." ;
               : print "\"Just so you know, Mr Mapple, I'll be locking the front door at 9 o'clock as always. So you'll need to let Miss Elderfield out at the east door when she's ready to leave.\" Mrs Taplow threw a pointed glance at Ottoline before leaving the room." ;
               : print "\"I just thought you might need one of these old windows open, Mr Mapple, it being such a hot evening and the pair of you shut up in here talking. So I'd best do that for you, as they do have a way of...\"\n\"No, Mrs Taplow, no need - we're quite fine as we are, thank you,\" said Arthur, firmly. Mrs Taplow let out a small 'hrmph' and left the room." ;
               : print "\"I thought you might be needing some more candles, Mr Mapple, seeing as how you seem to be so fond of that old candle holder and there's only that stub left in it.\"\n\"Not right now, Mrs Taplow. And now, if you wouldn't mind? Ms Elderfield and I have things to discuss.\"\nMrs Taplow nodded curtly and left the room." ;
               : print "\"Mr Thurgood says there may be snow again tomorrow, Mr Mapple. In June! Did you ever hear the like of it? I thought I'd best tell you in case you'll be needing to go down to the village...\"\n\"Thank you Mrs Taplow, that's very helpful to know. And now...\" Arthur ushered her out of the room as firmly as he could manage, and shut the door after her." ;
            
            }
            : if (ottolines_irritation_counter==0) {
   : cycle predictable_order = "false"  key = "ottoline's_response_1st"  {
      : print "\"That housekeeper should know her place,\" said Ottoline, icily." ;
               : print "\"I expect she'll be back before too long,\" said Ottoline, resignedly." ;
               : print "\"Does that woman have no concept of knocking?\" asked Ottoline in exasperation." ;
               : print "\"Whatever next?\" asked Ottoline, dryly." ;
               : print "\"I really think a little privacy isn't too much to expect,\" said Ottoline." ;
               : print "\"For heaven sake!\" said Ottoline, \"Whatever does she think we'll get up to in here that she can't leave us alone for five minutes?\"" ;
      }
   }
   : if (ottolines_irritation_counter==1) {
    : cycle predictable_order = "false"  key = "ottoline's_response_2nd"  {
      : print "\"Must we be constantly interrupted?\" ssked Ottoline, pointedly." ;
               : print "\"Really Arthur, this is too much!\" cried Ottoline." ;
               : print "\"Can't that woman leave us alone?\" asked Ottoline." ;
               : print "\"However do you put up with it?\" asked Ottoline. \"I'm sure she would drive me perfectly mad in an instant!\"" ;
               : print "\"Can't we lock that door?\" asked Ottoline in exasperation." ;
               : print "\"How many more times?\" cried Ottoline." ;
   }
   }
      : if (ottolines_irritation_counter==2) {
       : cycle predictable_order = "false"  key = "ottoline's_response_3rd"  {
      : print "\"Has that woman really nothing better to do than so spy on us?\" said an annoyed Ottoline." ;
               : print "\"This really is beyond the pale!\" cried Ottoline." ;
               : print "\"At this rate, we shall never get started!\" said Ottoline, her exasperation evident." ;
               : print "\"This is really too much!\" cried Ottoline. " ;
               : print "\"If that woman interrupts us many more times then I shall simply have to give up!\" said Ottoline." ;
               : print "\"One more time and we shall have to call the whole evening off!\" said Ottoline." ;
      }
   }
   : press_any_key ;
   : redescribe;
   
         }
         }
  }
   }
   
   #INTERRUPTIONS end
    
    : if (spell==15) {
    : clear_screen;
    
  : print "Arthur heard the distant sound of hoofbeats and knew that the faery ride was abroad." ;
  ;
  
    : increment "spell" ;
    : press_any_key ;
      : redescribe;
      
      
    }
    
     : if (spell==14) {
       : increment "spell" ;
    }
   : if (spell==13) {
   : increment "spell" ;
   
     : print "Arthur felt a strong intuition, as direct and clear as a voice in his head, that told him whatever was destined to happen would happen within the old village of Haelstowne.";
   : if (is_present "ottoline_elderfield") {
      : print "\"We must go to the village,\" Arthur told Ottoline. \"I don't know why, just a feeling I suppose.\"\n\"Yes\" said Ottoline, \"I feel it too.\"";
   }
    }
  
    

   
   : if (traptor==6) {
   : if (endgame) {
   : if (countdown_to_endgame>0) {
      : decrement "countdown_to_endgame" ;
   }
   : else_if (countdown_to_endgame==0) {
      : decrement "countdown_horses" ;
   : decrement "countdown_to_endgame" ;
   }
   
: if (countdown_horses>0&&countdown_horses<7) {
     : decrement "countdown_horses" ; 
}
: if (countdown_horses==-1) {
   : print "Arthur heard the same mysterious voice saying to him urgently, \"Take him! Hold him! Do not let him go!\"" ;
   : decrement "countdown_horses" ;
   
}

: if (countdown_horses==5) {
: print "Arthur heard the distant sound of horses' hooves." ;
}
: if (countdown_horses==4) {
: print "The sound of horses grew nearer, and with it the harsh cries of the riders, urging their beasts onwards." ;
}
: if (countdown_horses==3) {
: print "The horses were close now, the sound of hooves and horse metal and the screeching of the riders as they bore down upon the square. Most of the villagers, grim-faced, stood their ground but a few fled indoors." ;
}
: if (countdown_horses==2) {
: print "Arthur saw the ride as it approached the edge of the village - a heaving mass of black and white, the faery riders atop their mounts, as they rose on towards the square. " ;
}
: if (countdown_horses==1) {
: print "The ride approached the square. The horses were being driven ever harder, their wild eyes and foaming mouths a terror to behold, and the faces of their faery riders were full of spite and malice. And most hideous of all, spindle-thin and milk-white upon her midnight-black stallion, claw-like hands gripping the reins with beringed fingers and her pinched face a mask of fury, was the Faery Queen herself. " ;
}
: if (countdown_horses==0) {
: if (!is_at "DMV_2") {
   : print "Arthur, with a feeling that the place was at the centre of events, ran back to the village square." ;
   : goto "DMV_2" ;
   : create "ottoline_elderfield" ;
   : press_any_key ;
   : redescribe;
   
}
: if (!first_time) {
   : print "The remaining villagers fled as the faery ride entered the square - and it was then that Arthur saw in the midst of them, looking very small and frightened on the back of his milk-white steed, the Reverend Jeremiah Peldash. Time seemed to slow and then stop altogether; Arthur was suspended in a perpetual moment. And then he heard a voice. \"Now!\" It said, \"It must be now.\"" ;
   : set_true "first_time" ;
}
: else {
   : print "The faery ride bore down upon them, frozen, it seemed, in a perpetual moment. \"Now!\" said the voice, \"It must be now\"" ;
   
}

   
   : if (chance (70)) {
      : execute_one_at_random {
         : print "\"Arthur!\" cried Ottoline, \"Do something! We must stop the ride, it's our only chance!\"" ;
          : print "\"We must stop them!\" cried Ottoline, desperately. \"Try something, anything!\"" ;
           : print "\"How can we stop them?\" cried Ottoline. \"The horses! We must startle the horses to make them stop!\"" ;
            : print "\"Quickly, Arthur!\" cried Ottoline, \"Distract the horses! Frighten them! It's the only way we'll stop the ride!\"" ;
      }
      
   }
   
}
: if (countdown_horses<0&&countdown_horses>-3) {
   : execute_one_at_random {
      : print "The horses reared and wheeled in terror." ;
       : print "Villagers scattered in fear." ;
        : print "The wild-eyed horses thrashed, foam on their lips." ;
         : print "The square was a confusion of thrashing forms and terror-stricken screams as the horses kicked and reared and the villagers ran to avoid being trodden underfoot." ;
          : print "The horses thrashed, their faery riders struggling to control them." ;
   }
   
}

}
   : if (is_at "grove"&&spell==12) {
   : increment "spell" ;
   : press_any_key ;
   : clear_screen;
   
      : print "As Arthur recited the final words, a powerful wind sprang up from nowhere and began to ravage the trees, sending leaves and debris whirling all around. The wind grew more powerful and presently Arthur found himself in the eye of a mighty storm, centred on the grove. Above the roar of the wind, he heard a tumult of voices, high and inhuman, shrieking in fear and rage and growing ever closer as though drawn against their will. From between the trees came faeries, kicking and screaming, clinging on wherever they could to try and resist the invisible force pulling them towards the grove. Arthur cried out in terror as the first of them appeared, hurtling towards him before being sucked into the keg; presently, the grove was filled with hundreds of faeries, rushing onwards to meet the same fate." ;
      : press_any_key ;
      
      : print "The wind grew yet stronger, the tortured cries louder as the faeries were drawn back into their own world. Arthur could stand it no longer; he closed his eyes and clapped his hands over his ears, praying that it would stop. And abruptly, it did. The wind disappeared as quicky as it had come, silence rang clear as a bell and then quite suddenly the keg burst into flame, along with the hazel twig. They blazed brightly for a few moments and then the fire was gone, and all that remained amongst the leaves and litter of the grove was a small pile of ash.   " ;
      
      : press_any_key ;
     : clear_screen;
     
      
      : print "The spell had worked; the faeries has been banished. Arthur could sense the absence where they had been. But he knew that it was not over. He had not sealed the way. The Faery Queen and her retinue still held a bridgehead into his world and had the Reverend Peldash hostage. If they traded his life as they intended then their master would ensure the way remained open and the faeries would return. Arthur knew that he must at all costs prevent that.";
      : destroy "keg" ;
      : destroy "twig" ;
      : create "ashes_1" ;
      : destroy "wooden_cover" ;
      : create "hole"target = "DMV_5"  ;
      : if (post_description=="a fence post (stuck in the ground, with a piece of rope tied around it)") {
         : destroy "fence_post" ;
      }
      : press_any_key ;
      : clear_screen;
      : redescribe;
   
      }
   : else_if (is_at "zone_dmv") {
   : if (!endgame) {
    : if (spell>11) {
    : if (is_present "ottoline_elderfield"&&is_carried "mirror"&&is_worn "robes"&&is_carried "spectacles_case_1") {
       : set_true "endgame" ;
  : press_any_key ;
       : clear_screen;
       
       : print "Arthur experienced a sudden, rushing sensation that passed in an instant, leaving him weak and giddy but still on his feet. He looked around and saw Ottoline close by him, looking pale and shaken." ;
       : press_any_key ;
       
       :print "\"Arthur,\" she said, \"What happened?\"\n\"I'm not sure,\" he replied, feeling the dizziness subside. \"But whatever it was, I think we must have arrived.\"\n\"Arrived? Where?\" Ottoline, a little dazed, was looking round at unfamiliar surroundings.\n \"Old Haelstowne, but as it was - five hundred years ago.\" ";
       : if (hasbike) {
          : print "Arthur threw aside his bicycle." ;
          : set_false "hasbike" ;
          : create "bicycle" ;
       }
         : if (ottoline_description=="Ottoline Elderfield (with her bicycle)") {
             : print "Ottoline threw aside her bicycle." ;
             : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
             : create "ottolines_bike" ;
             
          }
       : press_any_key ;
       : redescribe;
       }
       }
           
   }
   : else_if (spell==18) {
   : if (is_at "DMV_2") {
   : if (chance (70)) {
      : print "Again Arthur heard a voice, so close it might have been in his mind. \"Quickly!\" it urged, \"Use what you have to turn her power back upon her! We must not fail, this time...\"" ;
   }
   
      : cycle predictable_order = "true"  key = "transforming"  {
         : if (true) {
           : print "The Reverend Peldash writhed in Ottoline's arms as he began to transform - into a newt!" ;
           : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a newt)" ;
           : print "Ottoline cried out in terror. \"Hold him!\" shouted Arthur, \"For pity's sake, you must hold on!\"" ;
           
           }
           : if (true) {
                 : print "The Reverend Peldash thrashed in Ottoline's arms as he began to transform - into a snake!" ;
                 : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a snake)" ;
                 : print "\"Arthur!\" screamed Ottoline. \n\"Hold him, Ottoline, hold him!\" he yelled desperately." ;
           
           }
           : if (true) {
                : print "The Reverend Peldash transformed in Ottoline's arms and presently he transformed - into a bear!" ;
                : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a bear)" ;
                : print "\"My god, Arthur!\" cried Ottoline,\"I can't hold onto him like this!\"\n\"You must Ottoline,\" yelled Arthur, \"just a little longer!\" " ;
           
           }
            : if (true) {
                   : print "The Reverend Peldash turned in Ottoline's arms as he transformed into - a lion!" ;
                   : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a lion)" ;
                   : print "\"Arthur!\" yelled Ottoline as she held the roaring lion in her arms,\"For god's sake, help me! I can't hold onto this!\"\n\"You have to Ottoline! Please, for all our sakes - hold on!\""  ;
           
           }
            : if (true) {
                 : print "The Reverend Peldash twisted and spun in Ottoline's arms and began to transform - into a red hot band of iron!";
                 : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a red hot band of iron)" ;
                 : print "Ottoline screamed and made to drop the band, but Arthur yelled to her,\"Ottoline, it's not real! It can't burn you! You must hold on, at all costs. Hold on!\"" ;
           
           }
            : if (true) {
               : print "The Reverend Peldash seemed to melt and flow in Ottoline's arms as he began to tranform - into a burning coal!";
               : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (transformed into a burning coal)" ;
               : print "Ottoline cried out and almost flung it away from her when Arthur called to her, \"Hold onto it Ottoline! It won't burn you! It's an illusion! For god's sake, hold on to it for it is really Reverend Peldash!\"" ;
           
           }
            : if (true) {
                   
            : print "The Reverend Peldash twisted and writhed in Ottoline's arms until presently he transformed into - a naked vicar!";
            : set_string var = "peldash_description"  text = "The Reverend Jeremiah Peldash (naked)" ;
            : print "Ottoline's alarm was greatest of all when she suddenly found herself embracing an entirely naked Reverend Jeremiah Peldash, \"Arthur!\" she cried, \"What should I...how can I...\"\n\"Just hold on Ottoline! It's an illusion! Reverend Peldash is really fully clothed, remember that!\" Ottoline looked down at the pale and skinny form of the naked Reverend Peldash and wished his clothes back on very hard." ;
           
           }
        }
      
      }
 
      
   }
   
    }
    }
}

######################################
#  On Pre_Describe                       #
######################################

on_pre_describe {
//CONTAINER CODE

   
   : if (is_present "cupboard") {
      : gosub "update_cupboard_description" ;
   }
    : if (is_present "drawer") {
      : gosub "update_drawer_description" ;
   }
     : if (is_present "dish") {
      : gosub "update_dish_description" ;
   }
      : if (is_present "bucket") {
      : gosub "update_bucket_description" ;
   }
      : if (is_present "sink") {
      : gosub "update_sink_description" ;
   }
    : if (is_present "drawer_1") {
          : gosub "update_drawer_1_description" ;
      }
: if (is_present "bottle") {
          : gosub "update_bottle_description" ;
      }
   : if (is_present "flask") {
          : gosub "update_flask_description" ;
      }
      
      
     : if (ottoline_follow) {
   : if (is_just_entered ()) {
      : create "ottoline_elderfield" ;
      : if (traptor==3) {
         : if (!crow_flown) {
            : create "crow" ;
         }
      }

   }
}
   : if (ash_follow) {
    : if (is_just_entered ()) {
      : create "ash" ;
   } 
   }
  
  : if (is_present "spectacles_case_1"&&case1_open) {
     : set_true "blinder" ;
  }
  : else {

     : set_false "blinder" ;
     
  }
  : if (is_at "Churchyard"||is_at "graveyard_1"||is_at "graveyard_2") {
     : if (!has_not_created "weather_vane") {
        : create "weather_vane" ;
        
     }
     
  }
   : if (is_at "lane_1"&&is_present "ottoline_elderfield"&&!ottoline_follow||is_at "lane_7"&&is_present "ottoline_elderfield"&&!ottoline_follow) {
      : set_true "ottoline_follow" ;
      
   }
   : if (is_at "vet") {
      : if (is_just_entered () ) {
 : execute_one_at_random {
        : set_string var = "drywell_description"  text = "Marjorie Drywell, attending to the rear end of a rather surprised looking poodle" ;
              : set_string var = "drywell_description"  text = "Marjorie Drywell, inserting a small spoon into the ears of a disconsolate cat" ;
                : set_string var = "drywell_description"  text = "Marjorie Drywell, pressing a stethoscope to the shell of a tortoise" ;
                  : set_string var = "drywell_description"  text = "Marjorie Drywell, clipping the nails of a shaggy sheepdog" ;
      }
         }
      }
      }
   
   
   



######################################
#  On Describe                       #
######################################

   
on_describe {



: if (spell<12) {
: gosub "ambient_faeries" ;
}



             

: if (sitting) {
   : print "Arthur was sitting on a chair." ;
   
}
: if (housespellbroken) {
 : if (is_at "zone_inside_vicarage") {
    : gosub "house_spell_broken" ;
    
 }
 
}
: if (is_worn "pince_nez") {
   : if (is_present "edna_taplow"&&!taplow_glasses&&!is_at "study") {
      : print "Mrs Taplow made plain her opinion of Arthur's natty new eyewear without speaking a word." ;
      : set_true "taplow_glasses" ;
      
   }
      : if (is_present"thurgood"&&!taplow_glasses) {
      : print "Mr Thurgood grunted and mumbled something under his breath when he saw Arthur approach wearing his newly acquired eyewear." ;
      : set_true "thurgood_glasses" ;
      
   }
    : if (is_present "ottoline_elderfield"&&!ottoline_glasses) {
      : print "Ottoline smiled faintly and looked aside as she noticed saw Arthur wearing his newly acquired pince-nez." ;
      : set_true "ottoline_glasses" ;
      
   }
   : if (is_present "mr_salter"&&!salter_glasses) {
      : print "Mr Salter looked curiously at Arthur's eccentric eyewear." ;
      : set_true "salter_glasses" ;
      
   }
     : if (is_present "molly"&&!molly_glasses) {
      : print "\"If you don't mind me saying so , Mr Mapple\" said Molly with little smile,\"I think those fancy eye-glasses of yours suit you!\"\n Arthur coloured a little and mumbled something incomprehensible." ;
      : set_true "molly_glasses" ;
      
   }
     : if (is_present "marjorie_drywell"&&!drywell_glasses) {
       : print "\"My dear fellow, I should change your prescription if I were you,\" said Miss Drywell, as she saw Arthur squinting through his pince-nez." ;
       : set_true "drywell_glasses" ;
       
   }
        : if (is_present "frank_farthing"&&!frank_glasses) {
      : print "Frank looked blearily at Arthur and couldn't quite make out what he was wearing on his nose." ;
      : set_true "frank_glasses" ;
      
   }
        : if (is_present "daisy_farthing"&&!daisy_glasses){
      : print "Daisy looked at Arthur with a respect she reserved for important personages and scholars, such as Arthur's newly-acquired pince-nez suggested him to be." ;
      : set_true "daisy_glasses";
      

}
}
: if (is_worn "robes") {
   : if (is_present "edna_taplow"&&!taplow_robes&&!is_at "study") {
      : print "Mrs Taplow looked askance at Arthur's remarkable outfit and pursed her lips, wondering at what was considered fashionable amongst town-folk these days." ;
      : set_true "taplow_robes" ;
      
   }
      : if (is_present "thurgood"&&!thurgood_robes) {
      : print "Mr Thurgood saw Arthur in his incredible robes and produced a mumbled expletive beneath his breath." ;
      : set_true "thurgood_robes" ;
      
   }
    : if (is_present "ottoline_elderfield"&&!ottoline_robes) {
      : print "\"For heaven's sake Arthur, what on earth are you doing in that incredible get-up?\" exclaimed Ottoline when she saw Arthur dressed in his remarkable robes." ;
      : set_true "ottoline_robes" ;
   
      
   }
   : if (is_present "mr_salter"&&!salter_robes) {
      : print "Mr Salter noted Arthur's robes with a distinct widening of the eyes, but made no other comment." ;
      : set_true "salter_robes" ;
      
   }
     : if (is_present "molly"&&!molly_robes) {
      : print "\"I like a man as isn't afraid to dress how he wants to,\" purred Molly, eyeing up Arthur in his fantastic robes. He couldn't help but blush." ;
      : set_true "molly_robes" ;
      
   }
   
 
    : if (is_present "marjorie_drywell"&&!drywell_robes) {
       : print "\"My dear man, what on earth are you wearing?\" uttered Miss Drywell frankly, as she saw Arthur in his fabulous robes." ;
       : set_true "drywell_robes" ;
       
   }
     : if (is_present "frank_farthing"&&!frank_robes) {
      : print "Frank saw Arthur standing there in his fabulous robes and was prepared to admit that he might have had a little too much to drink." ;
      : set_true "frank_robes" ;
      
   }
        : if (is_present "daisy_farthing"&&!daisy_robes) {
      : print "Daisy gazed in awe at Arthur's fabulous robes. She'd never met a detective in uniform before." ;
      : set_true "daisy_robes" ;
      
   }
}


: if (is_at "on_steps"&&parent_of "steps"=="top_stairs") {
   : print "The ledge of the window recess was just a little above him. He could reach it by going up." ;
   
}

: if (is_at "pub"&&pub_brawl_counter<2) {
: print "The several sorts of games in progress were the cause of much liveliness and, despite the earliness of the hour, everyone appeared to be quite drunk. " ;

}

: if (is_at "poachers_house") {
   : if (is_first_entered ()) {
      : print "Frank mumbled something incoherent and staggered across the room, colliding with a door frame before managing to find his way through into the room beyond. Mrs Farthing looked at Arthur in embarrassment. He did his best to look sympathetic." ;
      : create "frank_farthing" target = "poachers_scullery" ;
      
   }
   
}
: if (is_at "poachers_scullery") {
   : if (is_first_entered ()) {
   : if (is_present "frank_farthing") {
      : print "Frank stripped to the waist and began to wash himself in the sink." ;
         }
   }
   
}


: if (is_at "outside_chemist") {
   :if (is_present "edna_taplow") {
: print "Mrs Taplow emerged from the Chemist's clutching her shopping bag. \"Good day to you, Mr Mapple,\" she said briefly, before scurrying away." ;


: destroy "edna_taplow" ;
: press_any_key ;
: redescribe;

}
}


: if (is_at "pump") {
   :if (is_present "edna_taplow") {
: print "Mrs Taplow was there, conversing in whispers with some of the villages. The group broke up abruptly when Arthur arrived. \"Good day to you, Mrs Taplow,\" he said cheerfully.\n\"Mr Mapple,\" acknowledged the housekeeper, giving him a rather pointed look. She paused to exchange a final, whispered word with one of her companions, picked up her shopping basket and left the square. Arthur had the uncomfortable feeling that he had been the subject of discussion just before he arrived." ;
: destroy "edna_taplow" ;
: press_any_key ;
: redescribe;
}
: if (is_just_entered()||chance (65)) {
   : execute_one_at_random {
      : print "The air seemed thick with rumour and gossip." ;
      : print "Arthur fancied that he could almost see rumours flying past him." ;
      : print "Idle gossip filled the air." ;
      : print "Arthur could almost see the tittle-tattle flying past him." ;
      : print "The very atmosphere seemed heavy with gossip and idle talk." ;
      
   }
   
}



}
: if (is_at "square") {
   :if (is_present "edna_taplow") {
: print "Mrs Taplow was there, with her shopping basket. \"Good day,\" greeted Arthur.\n\"Good day Mr Mapple,\" replied the housekeeper. \"I do hope you're getting on with your enquiries.\"\n\"I am making progress, Mrs Taplow - but these things take a little time.\"\n Mrs Taplow made an indistinct noise and scuttled out of the square" ;
: destroy "edna_taplow" ;
: press_any_key ;
: redescribe;

}
: if (pub_brawl_counter>0) {
   : if (has_not_created "frank_farthing") {
   : press_any_key ;
   
   :clear_screen;
   : print "Arthur saw someone stagger into the square from the direction of the pub. He was a scuffy looking man with patched trousers and battered boots, clearly inebriated and bleeding from the face. It looked like he'd been in a fight and come off worst." ;
   : create "frank_farthing" ;
   : set_integer var = "pub_brawl_counter"  value = "8" ;
   : press_any_key ;
   : redescribe;
   
   }
   
}

}

: if (is_at "vet") {
   : if (drywell_ask_counter==0) {
    : if (is_first_entered ()) {
    : press_any_key ;
    : clear_screen;
    
          : print "\"Good day\", said Arthur brightly to Miss Drywell's back, \"I'm Arthur Mapple.\"\n\"Are you indeed?\" said Miss Drywell irritably, as she carried on with her work. \"Well, whoever you are and whatever it is, you'll have to wait your turn. As you can see, I am very busy.\" She called to a timid looking girl hovering nearby, \"Florence! Fetch the larger syringe, quickly please. This is going to be a sticky one...\"\nArthur cleared his throat. \"I wonder, Miss Drywell, if I might just have a few moments of your time...\"\n\"Good grief man!\" Miss Drywell stopped what she was doing, drew herself up to her not inconsiderable height and waved a surgical spatula angrily at him, \"Have I not made myself clear...Oh.\" She frowned as she recognised him. \"It's you. Mapple. The detective. I should have known.\"\nArthur was a little taken aback. \"Well yes. You see, Miss Drywell, I...\"\n\"Yes, yes Mr Mapple. Edna has told me all about you. It's lucky that I don't listen to gossip, but even if I did I still wouldn't have the time to answer any of your questions.  So, I'm very much afraid that if you don't have a sick animal that needs my immediate attention, you don't have a search warrant to show me and you're not planning to arrest me on the spot then I shall have to ask you to leave.\"\nBeneath Miss Drywell's steely gaze, Arthur saw no choice but to obey. Meekly, he left the surgery." ;
          : press_any_key ;
          : goto "outside_vet" ;
          : redescribe;
          
   }
    : else {
       : if (chance (75)) {
          : execute_one_at_random {
             : print "Arthur stood behind the hunched figure of Miss Drywell and once more cleared his throat in his inimitable manner. \"Go away Mr Mapple,\" said Miss Drywell without bothering to turn around. \"I remain, as before, terribly busy!\"" ;
             : print "Arthur tried again. \"Miss Drywell, I really do think that if I could just...\"\n\"Heavens above man, did you not hear what I said the first time?\" she snapped, while pulling on a pair of rubber gloves and reaching for the scissors, \"I have glands to express, ears to dewax and an enema to administer. Now, unless you are competent to assist me with any of that, I suggest you leave my surgery at once!\" Arthur concluded that now was not a good time." ;
             : print "\"You again!\" cried Miss Drywell in exasperation, as she spotted Arthur hovering at her elbow. \"Is this really how policemen behave these days? Will you please leave me in peace to get on with my work!" ;
          }
          
       }
       
    }
   }
   : else_if (is_just_entered () &&drywell_ask_counter==1) {
      : print "Miss Drywell spotted Arthur as he came througn the door.\n\"Back again, Mr Mapple?\" she noted, with a raied eyebrow. \"We really can't keep you away today, can we? Have you decided you'd like to ask me your questions after all?\"" ;
      
   }
   : else_if (is_just_entered () &&drywell_ask_counter==2) {
      : print "Miss Drywell, busy once more with another animal patient, nodded to Arthur as he came through the door.\n\"Back already?\" she observed. \"Did you find anything of interest in the church?\"" ;
      
   }
   
    
}


: if (is_at "zone_wood"||is_at "zone_road_to_wood") {
  : if (crow_description=="a huge black crow (soaring directly above)"&&!is_present "crow") {
  : print "Arthur saw a huge black crow, soaring high over the wood." ;
  
}
   
}

: if (is_at "grove") {
   : print "Arthur sensed a weighty stillness there, as of great forces held in perfect balance." ;
   : if (is_present "ottoline_elderfield"&&!special_place) {
      : print "\"This is a special place,\" said Ottoline enigmatically. Arthur felt it too.";
      : set_true "special_place" ;
   }
   
}


: if (is_at "chapel") {
: if (is_just_entered () ) {
   : print "The atmosphere was charged with invisible energy. Arthur felt an immense power bearing down on him from every side. There was a powerful sensation of being watched." ;
   : if (is_carried "horseshoe_nail") {
      : print "Arthur felt a tingling sensation, like an electric charge, somewhere about his person. He realised that it was coming from his jacket pocket and, feeling around inside, his fingers closed around the horseshoe nail. It vibrated faintly beneath his touch." ;
         
}

   }
   
}


: if (traptor==3&&is_present "ottoline_elderfield") {
: if (is_beside "knife_1"){
   : print "Ottoline picked up the knife that Arthur had so carelessly dropped.\"Yes, I was going to ask you about that,\" he said. \"It is a rather unusual knife. I wonder how it ended up in that bramble bush?\"\n" ;
 
   : press_any_key ;
   : clear_screen;
   : gosub "end_of_traptor_3" ;
   
}
   : else_if (is_carried "knife_1") {
   : if (chance (75)) {
      : execute_one_at_random {
         : print "\"I say Arthur - whatever is it that you have there?\" asked Ottoline, looking at the unusual knife." ;
         : print "\"Was that the thing that you found in the bush Arthur? I'd like to take a look at it.\" Ottoline was looking curiously at the unusual knife." ;
         : print "\"Gosh, that does look interesting, \"said Ottoline, looking at the unusual knife that Arthur held. \"Would you mind? I should awfully like to take a look at it.\"" ;
      }
        }
   
   }
   
}







:if (is_at "wood_entrance"){
: if (is_present "ottoline_elderfield") {
   : if (ottoline_description=="Ottoline Elderfield (on her bicycle)") {
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
      : redescribe;
   }
   
 : if (is_present "crow"&&!crow_flown) {
    : print "With a deafening 'craaak!' the huge black crow flapped its enormous wings and leapt into the air." ;
    : set_string var = "crow_description"  text = "a huge black crow (soaring directly above)" ;
    : set_true "crow_flown" ;
   : press_any_key ;
   : redescribe;
   
 }
   
}

}

   
   
: if (is_at "faery_hut") {
: if (is_first_entered ()) {
: print "Arthur was embarrassed to stumble upon a young couple embracing, but he had no time to apologise before one of them leapt up, snarled something in tongue that he did not understand, and fled past him out of the hut. The one that remained seemed helplesly distraught. Arthur approached, to explain himself and try to help, but they paid him no attention as though he was invisible. Arthur noticed a peculiar quality about them, a haziness that made them seem not quite real." ;
: press_any_key ;
: redescribe;

   }
}



// : if (ottoline_follow) {
//    : if (is_just_entered ()) {
//       : print "Ottoline accompanied Arthur" ;
//       }
// }


: if (ash_follow) {
    : if (is_just_entered ()) {
      : print "Ash accompanied Arthur." ;
   }
   : if (is_at "pub") {
: if (is_present "ash") {
: clear_screen;

  : print "Arthur entered the pub with Ash and Mr Jarbell seemed suddenly to come to life. With a cry, he rushed forward to embrace them both. Ash fell, sobbing, into his arms and Mr Jarbell wept also;  Arthur extricated himself before he became quite wet with their tears and watched the reunion from a respectful distance, feeling a lump forming in his throat. \n\"Mr Mapple,\" said Jarbell, haltingly, \"I don't know how I can...\"\n" ;
: press_any_key ;
: print "He was interrupted by a piercing shriek from the other side of the pub. Arthur turned to see Molly glaring at them from behind the bar, her face ugly with rage. She tore off her apron, lifted the hatch and raced across the pub with her hands raised like talons and her lips pulled back into a snarl. Arthur, just a little too far away and a little too slow to grab her, did the only thing he could under the circumstances: he stuck his foot into her path and tripped her up. " ;
  : press_any_key ;
: print " Molly became airborne, flying across the room whilst spitting terrible execrations in her wake. Mr Jarbell and Ash ducked as she passed fully over their heads while Arthur wondered how he had managed to trip her so spectacularly. She flew towards the wall and for a sickening moment Arthur anticipated the sound of her striking it - but instead she passed straight through and disappeared, her curses fading with her. \nThere was a hush for a few moments before the regulars, most of whom had seen worse things in their time, returned to their drinks and banter." ;
   : destroy "molly" ;
   : set_integer var = "jarbell_ask_counter"  value = "4" ;
   : set_false "ash_follow" ;
 : press_any_key ;
 : redescribe;
}
}
}
: else_if (is_present "ash") {
   : if (is_at "faery_hut") {
   : if (chance (50)) {
      : print "Ash wandered dreamily past Arthur and out of the hut." ;
      : create "ash" target = "faery_zone_2"  ;
      : press_any_key ;
      : redescribe;
   }
   }
   : else_if (is_at "faery_zone_2") {
: execute_one_at_random {
: if (true) {
   : print "Ash wandered dreamily to the north." ;
   : create "ash" target = "faery_zone_1";
   : press_any_key ;
   : redescribe;
   
}

: if (true) {
      : print "Ash wandered dreamily to the west." ;
   : create "ash" target = "faery_hut";
   : press_any_key ;
   : redescribe;
   
}
: if (true) {
}
 }
   }
     : else_if (is_at "faery_zone_1") {
: execute_one_at_random {
: if (true) {
   : print "Ash wandered dreamily to the west." ;
   : create "ash" target = "sweet_track_2";
   : press_any_key ;
   : redescribe;
   
}
: if (true) {
      : print "Ash wandered dreamily to the south." ;
   : create "ash" target = "faery_zone_2";
   : press_any_key ;
   : redescribe;
   
}
: if (true) {
}
 }
   } 
        : else_if (is_at "sweet_track_2") {
 : if (chance (50)) {
    : print "Ash wandered dreamily to the east." ;
    : create "ash" target = "faery_zone_1" ;
    : press_any_key ;
    : redescribe;
    
 }
}
}







: if (is_at "road_2") {
   : if (is_first_entered ()) {
   : clear_screen;
   
      :print "Arthur rode along the road to Nether Haelstowne, enjoying the unique, exhilarating sense of freedom that only cycling can bring. The weather was glorious, the birds were singing, the air was thick with the scents of high summer and for one brief moment Arthur felt entirely happy and carefree.";
      : press_any_key ;
      : print "Three seconds later, the world turned upside down." ;
       : press_any_key ;
      : print "Arthur awoke and opened his eyes, unable to see anything until a dark shape blotted out the sun. With a bit of a struggle, he bought into focus the face that was looking down at him.\n\"Oh, so you're not dead.\" " ;
       : press_any_key ;
      : print "The voice was somewhat brusque. \"Thank heavens. That would have been all I needed!\"\nArthur struggled upright and found that he was at the bottom of a shallow and thankfully dry ditch at the side of the road. He spotted his bicycle a little distance away, and vividly recalled the split second when they had parted company and he had found himself flying through empty air before blackness fell. He sat upright, rubbed his head and then tentatively tried to stand, discovering with gratitude that he could still do so." ;
       : press_any_key ;
      : print "\"Nothing broken, I see,\" continued the owner of the voice. \"You were lucky Mr...\"\n\"Mapple,\" said Arthur, brushing dirt from his trousers. He discovered his shoulder to be a little stiff, but other than that he seemed relatively unscathed. \"Arthur Mapple.\"\n" ;
       : press_any_key ;
       : clear_screen;
       
      : print "\"Ottoline Elderfield,\" replied the stranger, holding out her hand. She was a tall, striking woman with rather sharp features and dark hair wrapped up in a silk turban. She wore pantaloons and a jacket and blouse in a style that Arthur, having little experience of such things, assumed was rather fashionable. Disorientated, he made to shake her hand and was a little surprised to find himself yanked unceremoniously out of the ditch and onto the road.";
      
       : press_any_key ;
      : print "\"I must say, Mr Mapple, that you ought to take more care on these roads. Heaven knows what you were daydreaming about back there, but you seemed completely unaware until I was practically on top of you!\" Arthur saw that she was standing alongside her own bicycle." ;
       : press_any_key ;
      : print "Arthur noticed the entrance to the side road and inferred that must have been where the collision happened. It occurred to him that she was the one who should have been looking where she was going, but he remained silent on the matter.\n\"You're not local,\" observed Ottoline. \"Are you on holiday around here?\"\n\"No,\" said Arthur, retrieving his bicycle from the ditch and noting with relief that it seemed undamaged. \"I'm here on business.\"\n\"Oh? What sort of business?\"\nArthur hesitated for a moment beneath her enquiring gaze. \"I'm...well. I'm a policeman.\"\n" ;
       : press_any_key ;
       : clear_screen;
       
      : print "\"Oh!\" said Ottoline, a cloud crossing her face. \"A policeman. Here to ask questions, no doubt.\"\n\"Amongst other things,\" Arthur replied vaguely, wondering why Ms Elderfield seemed to find the idea unpalatable. \"In fact,\" he said, venturing to be direct with her, \"I might begin by asking you some questions?\"\n\"If you must, Mr Mapple, if you must.\" She seemed suddenly impatient to get away and, mounting her bicycle, appeared ready to set off - but instead, surprised Arthur still more by turning from him and shouting into the empty road, \"Crackers!\"" ;
       : press_any_key ;
      : print "Arthur, nonplussed, barely had time to wonder which one of them that might be a commentary upon when he was startled by a huge black bird that appeared from nowhere and swept down to land neatly on the handlebars of Ms Elderfield's bicycle. She turned to him as the creature settled down and began to preen its feathers." ;
       : press_any_key ;
      : print "\"You can come and find me anytime, Mr Mapple.\"\n\"In the village?\" he asked.\n\"No,\" she replied. \"The other direction. Beyond the old village. Nevernear Cottage. That is where I shall be.\" She gave him a faint smile. \"I'm afraid it is rather difficult to find, Mr Mapple - even for a policeman.\"\nAnd with that, she cycled off up the road with the crow perching on her handlebars.\n" ;
       : press_any_key ;
      : redescribe;
     
      
   }
   
}

:if (snowfall) {
: if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed" ) {
}
: else {
: if (traptor==1) {
: if (is_at "car_1") {
   : print "Snowflakes fell silently against the windscreen." ;
   : done ;
   
}

     :print "Snowflakes drifted down serenely from a clear blue June sky.";
}
: if (traptor==2) {
: if (is_at "car_1") {
   : print "Thick snow clogged the windscreen." ;
   : done ;
   
}

   : print "Fat, fluffy snowflakes whirled out of the darkness and were dashed about by a freezing wind." ;
   
}


}

}

: if (is_at "path_8") {
: if (traptor==1) {
   : if (faerycounter==-1&&!drywell) {
   : press_any_key ;
   : clear_screen;
   
       : print "As Arthur set foot on the drive he heard the tooting of a horn and barely had time to leap out of the way before a motorized tricycle rocketed up the drive and stopped in a great cloud of sputtering smoke alongside the Austin Seven. It was an extraordinary thing with high seats and three very large spoked wheels. It was steered by a handle set atop a horizontal wheel, while a long lever operated the brake. It would have looked more at home in a museum than on the open road.\nThe driver, a woman in leather gloves and goggles, shouted above the considerable noise of the engine, \"You there!\"" ;
    : press_any_key ;
     : print "Arthur, rather surprised, glanced quickly behind him to see who it was this extraordinary person was addressing and seeing no one, concluded it must be himself. He pointed questioningly at his own person and made to speak before the driver cut him off abruptly.\n\"Yes, you. Is this your vehicle?\" she gestured impatiently at Arthur’s beloved car. \nFinding his voice at last, Arthur began to reply, \"Yes, I…\"\n\"Well, I’d move it if I were you. It is rather in the way and I use this driveway on most days. I'm afraid I shan’t be held responsible for any damage caused, Mr…\"\n\"Mapple,\"  supplied Arthur." ;
     : press_any_key ;
      : print "\"What’s that?\" she shouted tetchily. If anything, the engine seemed to get louder the longer it idled. \"Napple? Very well. Now, where is Edna? She knows I can’t be kept waiting…Aha!\" Arthur spotted Mrs Taplow hurrying along the stony path towards them, wearing her own pair of driving goggle and clutching a shopping basket. \"Hurry along dear,\" said the strange woman, \"we mustn’t dawdle. I have a dropsical dachshund to see to first thing, and I’m already running behind.\"." ;
     : press_any_key ;
     : clear_screen;
     
     : print "\nArthur had though Mrs Taplow the sort to be never daunted by anything and yet she seemed almost cowed as she stowed her shopping basket in the rear of the extraordinary vehicle and hopped up meekly into the passenger seat." ;
     : press_any_key ;
     : print "The driver turned to Arthur and offered a stiff smile. \"Well then Mr Napple, I’m afraid I can’t stay around here chatting. I hope you’ll have a more restful day than I shall be having.\" And with that, she released the brake lever,  turned the vehicle around and roared away down the drive, taking the narrow gateway at reckless speed before hurtling out into the lane beyond and out of sight. \nArthur was left with a taste of petrol fumes in his mouth and smoke in his eyes, wondering if it was still legal to drive such a thing." ;
     : if (baking_smell) {
    
        : set_false "baking_smell" ;
     }
     : if (has_not_created "scones") {
        : create "scones" target = "kitchen" ;
     }
     : if (window_open) {
        : set_false "window_open" ;
     }
     
      : set_true "drywell" ;
      : create "motor_tricycle" target = "outside_vet" ;
      : press_any_key ;
      : create "edna_taplow" target = "pump" ;
      
      : redescribe;
      
      }
   }
      : else_if (!is_exists "breakfast_things"&&!drywell) {
      : if (traptor==3) {
      : press_any_key ;
      : clear_screen;
      
         : print "As Arthur set foot on the drive he heard the familiar tooting of a horn and watched as the motor tricycle, driven by the same extraordinary woman,  raced up the drive and skidded to a halt before him, wincing as he heard the unmistakable sound of loose gravel striking the body of his precious Austin Seven. The driver pulled the brake lever and turned to Arthur as the engine idled at incredible volume." ;
: press_any_key ;
: print "\"Oh, it's you again!\" she hollered at him. \"Still haven't moved your vehicle, I see? Well, you can't say I haven't warned you, Mr Shapple.\"\nArthur, roused to something approaching assertiveness by this effrontery, said firmly, \"Mr Mapple, if you please Madam.\"" ;
: press_any_key ;
: print "\"What?\" said the driver crossly. \"What's that you say? Apple?\"\n\"Mapple!\" cried Arthur, practically shouting to be heard over the rattling of the engine.\n\"Apple, apple? I suppose it's some sort of word game. That's all very well Mr Shapple, but I'm afraid I simply don't have the time to play games even if you do. I have a surgery to run. Now - where is Edna?\"" ;
: press_any_key ;
: print "As if on cue, a begoggled Mrs Taplow scurried around the side of the house, clutching her shopping basket and hopped up into the passenger seat of the three-wheeler. The driver released the brake lever and swung the tricycle around, pausing briefly to bestow upon Arthur a stiff smile.\n\"Good day to you Mr Shapple. I hope you enjoy you games.\" And with that, the engine roared and the vehicle raced down the drive, though the narrow gate, and out into the lane where it disappeared in the direction of the village." ;
: create "edna_taplow" target = "outside_chemist" ;
      }
      
      :else_if (traptor==5){
      : press_any_key ;
      : clear_screen;
      
      : print "As Arthur walked along the path at the front of the house he heard the sound of a horn and braced himself as the three-wheeled tricycle rocketed up the driveway in a cloud of dust and gravel. It skidded to a halt beneath the drawing room window." ;
: press_any_key ;
: print "\"Good day, Mr Hepple,\" shouted the driver over the deafening noise of the engine. \"I see you still insist on parking your car in the way. Never mind, I'm rather used to it being there now.\"\nArthur, quite determined to gain the initiative this time, shouted back at her, \"I wonder if I might ask you a few questions, erm, Miss...\" he faltered as he realised he wasn't entirely sure of her name." ;
: press_any_key ;
: print "\"Yonder, what?\" she snapped at him with evident impatience. \"Do speak up man, or I'm afraid I shall never hear you.\"\nArthur took a deep breath and yelled at the top of his voice, \"I wonder if I might...\"\n\"Never mind,\" said the driver, cutting him off, \"here comes Edna now. Hurry along dear! I do have a schedule to keep, you know.\"" ;
: press_any_key ;
: print "Mrs Taplow, with goggles and shopping basket, looked a little flustered as she scuttled along the path and leapt up into the passenger seat of the three-wheeler.\nThe driver released the brake lever and swung the extraordinary vehicle around.\n\"No doubt it would be most pleasant to stay here and chat, Mr Hepple,\" she gifted him a stiff smile before continuing, \"but I'm afraid I simply don't have the time.\" And with that the engine roared and the three-wheeler leapt away down the driveway, through the narrow gateway and out of sight." ;
       : create "edna_taplow" target = "square";
      }
      : set_true "drywell" ;
      : create "motor_tricycle" target = "outside_vet" ;
      : press_any_key ;
      : redescribe;
      
      }
      
   }
   : if (is_at "pub_cellar_passage") {
   : if (beer_keg_description!="a beer keg (attached to the hose)"||!beer_tap_on) {
   : if (is_present "joseph_jarbell") {
      : if (is_carried "keg") {
             : print "Mr Jarbell came down the steps from the bar and saw Arthur with the keg. \"No need to trouble yourself with that, Mr Mapple, though it's kind of you to try and change the keg. Those old pipes and valves is a bit temperamental. Best leave it to the expert.\"";
             
             : if (is_carried "lid") {
                : print "Jarbell spotted the lid that Arthur was carrying.\n\"Oh, I see - lid's come off has it? They don't make them like the used to. Still - it's soon mended.\" He took the lid off Arthur and, with a deft twist, fitted it back onto the end of the keg, hammering it home with one of his great fists. \"There now. Good as new.\"" ;
                : destroy "lid" ;
                : set_false "beer_keg_open" ;
                
             }
             :print "He took the keg and went into the cellar.";
             
             : destroy "keg" ;
          : create "joseph_jarbell" target="pub_cellar" ;
          
            : press_any_key ;
            : redescribe;
      }
      : else_if (is_carried "lid") {
      :print "Mr Jarbell came down the steps from the bar and saw Arthur in the passage, holding the lid of the keg. \"Oh, hello Mr Mapple,\" he said, \"lid's come off a keg has it? They don't make them like the used to. Still - it's soon mended.\" He took the lid off Arthur and went into the cellar." ;
    : create "lid" target = "pub_cellar" ;
      
          : create "joseph_jarbell" target="pub_cellar" ;
            : press_any_key ;
            : redescribe;
      }
       : else {
             : print "Mr Jarbell came down the steps from the bar and saw Arthur \"Oh, hello Mr Mapple. Still looking for Reverend Peldash? You're not likely to find him down here! Keg needs changing though, so if I could just get by...\" He manoeuvred himself past Arthur in the narrow passage and went into the cellar." ;
          : create "joseph_jarbell" target="pub_cellar" ;
            : press_any_key ;
            : redescribe;
      }
   }
   }
}
: if (is_at "pub_cellar") {
   : if (is_present "joseph_jarbell") {
   : if (!is_present "lid") {
      : print "Mr Jarbell was there, replacing the keg on the bottom rack. He reconnected the hose and turned on the tap before nodding to Arthur and leaving the cellar." ;
      : set_string var = "beer_keg_description"  text = "a beer keg (attached to the hose)" ;
          
          : create "keg_1"target = "pub_cellar"  ;
          : set_true "beer_tap_on" ;
          
      : create "joseph_jarbell" target = "pub" ;
      : press_any_key ;
      : redescribe;
   }
      : print "Mr Jarbell was there, fitting the lid back onto the end of the keg. \"They don't make them like they used to!\" he said cheerfully, hammering the wooden disc into place with one of his great fists.\n" ;
      : print "He put the keg back on the bottom rack, reconnected the hose and turned on the tap before nodding to Arthur and leaving the cellar." ;
      : destroy "lid" ;
   : set_false "beer_keg_open" ;
:destroy "keg";
    : set_string var = "beer_keg_description"  text = "a beer keg (attached to the hose)" ;
          
          : create "keg_1"target = "pub_cellar"  ;
          : set_true "beer_tap_on" ;
          
      : create "joseph_jarbell" target = "pub" ;
   : press_any_key ;
   : redescribe;
   }
 
     
  
   
}


: if (is_present "frank_farthing") {
: if (is_at "pump") {
   : print "Frank Farthing staggered north." ;
   : create "frank_farthing" target = "north_of_pump" ;
   : press_any_key ;
: redescribe;
}
: if (is_at "north_of_pump") {
   : print "Frank Farthing staggered east." ;
   : create "frank_farthing" target = "poacher_road_1" ;
   : press_any_key ;
: redescribe;
}
: if (is_at "poacher_road_1") {
   : print "Frank Farthing staggered east." ;
   : create "frank_farthing" target = "outside_poachers" ;
   : press_any_key ;
: redescribe;
}
 : if (is_at "outside_poachers") {
 
    : print "Frank Farthing was on his hands and knees, crawling up the doorstep. Arthur hoped it was his own." ;
    : if (!is_present "frank_farthing") {
    : create "frank_farthing" ;
      }
 }
 

}
: if (is_at "lane_1") {
: if (pub_brawl_counter>0&&pub_brawl_counter<8) {
: if (has_not_created "bandage") {


: create "frank_farthing" target = "square" ;
: set_integer var = "pub_brawl_counter"  value = "8" ;
     
}
}
}

: if (is_at "pub"||is_at "behind_the_bar") {
: if (pub_brawl_counter>0&&pub_brawl_counter<7) {
: increment "pub_brawl_counter" ;
 ;
   }
}
: if (is_at"pub"||is_at "behind_the_bar") {
: if (pub_brawl_counter==3||pub_brawl_counter==5) {
   : execute_one_at_random {
      : print "Arthur ducked and a beer mug sailed over his head." ;
   : print "There was a sound of smashing glass and a great deal of shouting." ;
   : print "Fists flew and there was a thud as someone hit the dusty floor." ;
   : print "A table was overturned and a chair flew through the air." ;
        
   }
   
}

: if (pub_brawl_counter==2) {
   : print "There was a sudden commotion at the other side of the pub as a scuffle broke out around one of the tables. Before long others joined in, tables were kicked over, beer mugs and fists were flying and a full on fight had broken out." ;
   
}
: else_if (pub_brawl_counter==4) {
   : print "The brawl continued as more and more of the punters joined the fray, egged on by their friends who were either brawling themselves or else standing on the side-lines yelling encouragement and generally enjoying themselves. In particular, Arthur noticed some odd-looking customers in curiously old-fashioned clothing drinking and grinning at the mayhem being played out before them.\n Arthur made a few fitful attempts to intervene, but the forces involved were too great - it seemed that the only thing to do was to wait for the fight to run its course. That certainly seemed to be the view of Mr Jarbell, who stood helplessly behind the bar, looking rather frightened." ;
   
}
: else_if (pub_brawl_counter==6) {
   : print "The fight continued until, at last, one of the participants was ejected from the heart of the scrum and, bleeding profusely, staggered out of the door. It seemed that he must have been the original catalyst for the fight because, once he was gone, most of the participants seemed to lose interest. The pub settled quickly, furniture was righted, fresh pints were drawn and all seemed as amiable as before." ;
   : create "frank_farthing" target = "square" ;

   }
     : else_if (pub_brawl_counter==7||pub_brawl_counter==8) {
     : if (is_just_entered () ) {
      : print "The games had been put away, blood wiped off the bar and fresh sawdust scattered on the floor. A subdued post-brawl atmosphere permeated the tavern." ;
      : set_integer var = "pub_brawl_counter"  value = "9" ;
      : done ;
   }
   }
}

   : if (is_at "porch"&&is_present "ernest_snapeshuttle") {
   : if (is_present "ottoline_elderfield") {
       : print "Ernest Snapwell was in the porch, pinning up a notice.\n\"I heard you having a go at those bells, Mr Mapple. Not bad for a beginner! Not bad at all.\" He smiled amiably while Arthur looked rather sheepish.\n With a doff of his cap, Mr Snapewell wished them both a good day then wandered away down the path and through the lychgate." ;
   }
   : else {
 : print "Ernest Snapwell was in the porch, pinning up a notice.\n\"I heard you having a go at those bells, Mr Mapple. Not bad for a beginner! Not bad at all.\" He smiled amiably while Arthur looked rather sheepish.\n With a doff of his cap, Mr Snapewell wished Arthur a good day then wandered away down the path and through the lychgate." ;
   }
 : destroy "ernest_snapeshuttle" ;
 
 : press_any_key ;
 : redescribe;
  }

#TRAPTOR 1 start
: if (traptor==1) {
: if (is_at "lane_1"&&is_exists "lawnmower") {
   : destroy "lawnmower" ;
   : create "thurgood"target = "path_2"  ;
   
}

: if (is_at "road_2") {
: if (!snowfall) {
   : if (!has_not_created "packet") {
      : print "Arthur stopped suddenly as he found himself engulfed in little white flakes. He thought at first it must be blossom, late though it was in the year, but then he felt the coldness against his cheek. Glancing up at the clear blue sky his mouth fell open as his mind wrestled with the impossible fact that it was now snowing profusely on a dazzlingly hot June day." ;
       : set_true "snowfall" ;
       : press_any_key ;
       
   }
   
}


   
}
: if (is_at "hallway_2") {
   : if (is_present "edna_taplow"&&is_exists "breakfast_things") {
      : print "Arthur almost ran into Mrs Taplow as he stepped into the hallway. \"Good morning,\" he said as she scurried past him and disappeared into the dining room." ;
      : create "edna_taplow" target = "dining_room" ;
      : press_any_key ;
      : redescribe;
      
   }
   
}

: if (is_at "dining_room"&&is_present"edna_taplow") {
   : print "Mrs Taplow was there with her tray, gathering up the breakfast things. She spotted Arthur as he entered. \"I trust everything was to your satisfaction, Mr Mapple?\"\n\"Oh yes, thank you Mrs Taplow,\" replied Arthur with automatic politeness, as he would have had she served him nails and cinders for breakfast. Mrs Taplow nodded and left with the breakfast things." ;
   : create "edna_taplow" target = "kitchen" ;
   : destroy "breakfast_things" ;
   
   : press_any_key ;
   : redescribe;
   
}



}
#TRAPTOR 1 end

#TRAPTOR 2 start

: if (traptor==2) {

: if (peldash_ghost_counter>0) {
   : decrement "peldash_ghost_counter" ;
   
}
: if (peldash_ghost_counter==0) {
: clear_screen;

   : print "Arthur shivered and broke out into goosepimples as the temperature suddenly plummeted several degrees; a visible miasma thickened before his eyes and something began to take form. Terrified, he backed away as a luminous figure appeared, seeming to float from out of the very wall. He opened his mouth to shriek, but no words would come – and then surprise supplanted fear as he recognised the face of the apparition before him. It was none other than the Reverend Jeremiah Peldash, his eyes closed and his face peaceful as though asleep. The ghost lingered for a moment, before crossing in front of Arthur and disappearing through the opposite wall. Arthur, filmed in a cold sweat, took a moment to recover his nerves before pressing on." ;
   : press_any_key ;
   : set_integer var = "peldash_ghost_counter"  value = "-1" ;
   : redescribe;
   
}


   : if (is_at "zone_inside_vicarage"||is_at "outbuilding"||is_at "potting_shed" ) {
   }
   : else {
      : print "Everything was smothered in a crisp, white blanket of snow." ;
      
   }
   : if (is_at "garden_5"&&has_not_created "hedgehog") {
      : if (chance (50)) {
         : print "Arthur thought he heard a faint rustling or scuffling nearby. He stayed still and listened carefully - and after a few moments he heard the sound once more. It seemed to be coming from within the foliage." ;
         
      }
      }
       : if (is_at "drive") {
          : if (!visited_end_of_drive) {
             : set_true "visited_end_of_drive";
          }
          
       }
       
      : if (is_present "hedgehog") {
         : if (is_at "lane_2") {
            : print "Arthur was startled to see the hedgehog again, labouring atop the deep snow in the lane. Or at least, he assumed it was the same hedgehog - hedgehogs all looked very much alike to Arthur's untrained eye.\nThe little creature eyed him up for a moment and then turned and shuffled away to the west." ;
            : create "hedgehog" target = "lane_3" ;
            : press_any_key ;
            : redescribe;
         }
           : if (is_at "lane_3") {
            : print "Arthur saw the hedgehog again, making its way west with remarkable speed." ;
            : create "hedgehog" target = "lane_4" ;
            : press_any_key ;
            : redescribe;
    
         }
           : if (is_at "lane_4") {
            : print "Arthur saw the hedgehog again, a little in front. It seemed almost to wait for him to catch up before it trundled off northwest, tunnelling its way through a high snow drift and disappearing from view." ;
    
            : create "hedgehog" target = "lane_5" ;
            
            #REMOVE VITAL STUFF FROM MAZE start
: if (parent_of "gardening_gauntlets"=="maze_1"||parent_of "gardening_gauntlets"=="maze_2"||parent_of "gardening_gauntlets"=="maze_3"||parent_of "gardening_gauntlets"=="maze_4") {
   : create "gardening_gauntlets" target = "lane_5"  ;
}
: if (parent_of "fragment_5"=="maze_1"||parent_of "fragment_5"=="maze_2"||parent_of "fragment_5"=="maze_3"||parent_of "fragment_5"=="maze_4") {
   : create "fragment_5" target = "lane_5"  ;
}
: if (parent_of "fragment_3"=="maze_1"||parent_of "fragment_3"=="maze_2"||parent_of "fragment_3"=="maze_3"||parent_of "fragment_3"=="maze_4") {
   : create "fragment_3" target = "lane_5"  ;
}
: if (parent_of "fragment_4"=="maze_1"||parent_of "fragment_4"=="maze_2"||parent_of "fragment_4"=="maze_3"||parent_of "fragment_4"=="maze_4") {
   : create "fragment_4" target = "lane_5"  ;
}


: if (parent_of "rail"=="maze_1"||parent_of "rail"=="maze_2"||parent_of "rail"=="maze_3"||parent_of "rail"=="maze_4") {
   : create "rail" target = "lane_5"  ;
   
}: if (parent_of "trunk_key"=="maze_1"||parent_of "trunk_key"=="maze_2"||parent_of "trunk_key"=="maze_3"||parent_of "trunk_key"=="maze_4") {
   : create "trunk_key" target = "lane_5"  ;
   
}: if (parent_of "mistletoe_sprig"=="maze_1"||parent_of "mistletoe_sprig"=="maze_2"||parent_of "mistletoe_sprig"=="maze_3"||parent_of "mistletoe_sprig"=="maze_4") {
   : create "mistletoe_sprig" target = "lane_5"  ;
   
}: if (parent_of "scone"=="maze_1"||parent_of "scone"=="maze_2"||parent_of "scone"=="maze_3"||parent_of "scone"=="maze_4") {
   : create "scone" target = "lane_5"  ;
   
}: if (parent_of "crumbs"=="maze_1"||parent_of "crumbs"=="maze_2"||parent_of "crumbs"=="maze_3"||parent_of "crumbs"=="maze_4") {
   : create "crumbs" target = "lane_5"  ;
}

: if (parent_of "screwdriver"=="maze_1"||parent_of "screwdriver"=="maze_2"||parent_of "screwdriver"=="maze_3"||parent_of "screwdriver"=="maze_4") {
   : create "screwdriver" target = "lane_5"  ;
   
}: if (parent_of "shears"=="maze_1"||parent_of "shears"=="maze_2"||parent_of "shears"=="maze_3"||parent_of "shears"=="maze_4") {
   : create "shears" target = "lane_5"  ;
   
}: if (parent_of "tuning_hammer"=="maze_1"||parent_of "tuning_hammer"=="maze_2"||parent_of "tuning_hammer"=="maze_3"||parent_of "tuning_hammer"=="maze_4") {
   : create "tuning_hammer" target = "lane_5"  ;
}: if (parent_of "lump_hammer"=="maze_1"||parent_of "lump_hammer"=="maze_2"||parent_of "lump_hammer"=="maze_3"||parent_of "lump_hammer"=="maze_4") {
   : create "lump_hammer" target = "lane_5"  ;
}: if (parent_of "knife"=="maze_1"||parent_of "knife"=="maze_2"||parent_of "knife"=="maze_3"||parent_of "knife"=="maze_4") {
   : create "knife" target = "lane_5"  ;
}: if (parent_of "fence_post"=="maze_1"||parent_of "fence_post"=="maze_2"||parent_of "fence_post"=="maze_3"||parent_of "fence_post"=="maze_4") {
   : create "fence_post" target = "lane_5"  ;
}: if (parent_of "twig"=="maze_1"||parent_of "twig"=="maze_2"||parent_of "twig"=="maze_3"||parent_of "twig"=="maze_4") {
   : create "twig" target = "lane_5"  ;
}: if (parent_of "spectacles_case"=="maze_1"||parent_of "spectacles_case"=="maze_2"||parent_of "spectacles_case"=="maze_3"||parent_of "spectacles_case"=="maze_4") {
   : create "spectacles_case" target = "lane_5"  ;
}
: if (parent_of "robes"=="maze_1"||parent_of "robes"=="maze_2"||parent_of "robes"=="maze_3"||parent_of "robes"=="maze_4") {
   : create "robes" target = "lane_5"  ;
}

#REMOVE VITAL STUFF FROM MAZE end

    
            : set_true "cottagerouteclear" ;
            : press_any_key ;
            : redescribe;
         }
              : if (is_at "lane_5") {
                 : print "Arthur was pleased to see the hedgehog again, waiting for him on the other side of the snowdrift. It was beginning to feel like an old friend.\nThe hedgehog shuffled off to the west." ;
                 : create "hedgehog" target = "lane_6" ;
                 : press_any_key ;
                 : redescribe;
                 
              }
                      : if (is_at "lane_6") {
                    : print "Arthur spotted the hedgehog ambling northwards up the snowy lane." ;
                 : create "hedgehog" target = "lane_7" ;
                 : press_any_key ;
                 : redescribe;
                 
              }           
               
                      : if (is_at "lane_7") {
                    : print "Arthur saw the hedgehog a little way ahead. It waited for him to approach and then surprised him by scuttling under the gate and up the garden path to the door or Nevernear Cottage. It shuffled around on the doorstep for a few moments, making sufficient noise for the occupant to hear, for presently the door opened and there, outlined in a rectangle of yellow light, was Ms Ottoline Elderfield.\nArthur was not quite visible and not quite hidden where he was. He hesitated, wondering if he should make his presence known and try to explain what on earth he was doing lurking in the vicinity of the cottage in the dead of night, or if he should avoid attracting attention. Before he had made up his mind Ms Elderfield, having deposited a plate with a little food for the hedgehog, retreated within and closed the door. " ;
           : destroy "hedgehog" ;
                 : press_any_key ;
                 : redescribe;
                 
              }     
               
      }
      : if (is_at "lane_3"&&!is_exists "hedgehog"&&!has_not_created "hedgehog") {
      : clear_screen;
      
         : print "Arthur trudged back towards The Vicarage." ;
         : press_any_key ;
         : print "The snow had stopped falling. Thickly it lay, erasing the familiar landscape to a uniform blank nothingness and deadening his footsteps; he walked through a silent world feeling as if he were the only creature alive. " ;
         : press_any_key ;
         : print "And then out of nowhere came the sound of horses, terrifyingly close. He threw himself into the shelter of a hedge as suddenly they appeared, thundering down the lane - wild-eyed, midnight black beasts straining every sinew under the blows of the spindly, ghastly-pale creatures upon their backs." ;
         : press_any_key ;
         : print "They crossed in front of Arthur, galloped down the footpath to the old village site and were gone. " ;
         : press_any_key ;
         : clear_screen;
         
         : print "Arthur, shaken, crawled from his hiding place and hurried back to the relative sanctuary of The Vicarage." ;
         : press_any_key ;
         
          : print "Once inside, he shut and bolted the door. Nowhere seemed safe. He returned the things he had borrowed to where they belonged and then returned to bed, cold and tired and unable to sleep for a long time. Eventually exhaustion overtook him and he drifted off into a fitful, unrestful doze, his thoughts full of nameless fears." ;
          : press_any_key ;
            : clear_screen;
          : gosub "end_of_traptor_2" ;
          
      }
      
   


}

#TRAPTOR 2 end

#TRAPTOR 3 start

: if (traptor==3) {
   

: if (!is_at "zone_wood"&&!is_at "zone_road_to_wood"&&!is_at "zone_road_to_village"&&!is_at "zone_wetland"&&!is_at "zone_village_outside"&&!is_at "pub"&&!is_at "pub_cellar"&&!is_at "pub_cellar_passage"&&!is_at "poachers_house"&&!is_at "poachers_scullery"&&!is_at "vet"&&!is_at "zone_wetland") {
   
: if (parent_of "ernest_snapeshuttle"=="church") {
   : if (chance (20)) {
      : print "Arthur heard the ringing of church bells." ;
}

   }
   
   
}



: if (is_at "outside_pub"&&is_present "thurgood") {
   : print "Arthur spotted Mr Thurgood emerging from the Myrour and looking a little worse for wear. He staggered past Arthur, seeming not to recognise him. Arthur was thankful to avoid an awkward encounter." ;
   : create "thurgood" target = "rockery"  ;
   
}


: if (is_at "study") {
   : if (is_present "edna_taplow") {
   : print "Arthur was surprised to see the lower half of Mrs Taplow standing in the fireplace, her upper half hidden within the depths of the chimney. Feeling that he should alert her to his presence, he coughed politely. In a flurry of soot, Mrs Taplow emerged, miraculously unbesmirched.\n\"Oh Mr Mapple,\" she said, a little hurriedly. \"You might have told me you was there. Just checking the flue. This fire weren't drawing properly the last time the Reverend lit it.\"\n She tidied her hair a little and left the room." ;
   : set_false "housespellbroken" ;
   : destroy "edna_taplow" ;
   : create "horseshoe"target = "dining_room"  ;
   : press_any_key ;
    : redescribe;
    
   }
   
}
: if (is_at "hallway"&&!shoes_in_fireplace&&!drywell) {
   : if (is_carried "shoes") {
      : print "\"Wherever did you find those, Mr Mapple?\" asked Mrs Taplow, seeing Arthur clutching the childrens' shoes. \"I've been looking for them all over.\" She took the shoes off Arthur." ;
   }
   : print "Mrs Taplow hurried into the study." ;
   : create "edna_taplow" target = "study"  ;
   : set_true "shoes_in_fireplace" ;
   : destroy "shoes" ;
   : press_any_key ;
   : redescribe;
   
}

: if (is_at "dining_room") {
   : if (is_present "horseshoe"&&is_present "breakfast_things") {
      : print "Mrs Taplow was there, clearing the breakfast things. She finished loading her tray and, with a curt nod to Arthur, left the room." ;
      : create "holly" target = "bedroom_1" ;
 : create "edna_taplow"target = "scullery"; 
      
      : destroy "breakfast_things" ;
      : press_any_key ;
      : redescribe;
      
   }
   : if (is_present "edna_taplow") {
      : print "Arthur saw Mrs Taplow place a horseshoe carefully on the window ledge." ;
      : create "edna_taplow"target = "scullery"; 
      
      : set_false "housespellbroken" ;
      
      : press_any_key ;
      : redescribe;
      
   }
   
   
}
: if (is_at "hallway_2"&&is_carried "horseshoe"&&!drywell) {
      : print "Mrs Taplow was in the hallway. \n\"Good heavens, Mr Mapple - whyever are you carrying that around? It belongs in the dining room\".\n She took the horseshoe off Arthur and disappeared into the dining room. " ;
   : create "edna_taplow" target = "dining_room"  ;
: create "horseshoe" target = "dining_room" ;
   : press_any_key ;
   : redescribe;
   
}
: if (is_at "bedroom_1"&&is_present "edna_taplow") {
   : print "Mrs " ;
   : create "edna_taplow" target = "scullery" ;
   
   : press_any_key ;
   : redescribe;
}

: if (is_at "landing"&&is_carried "holly"&&!drywell) {
: if (parent_of "edna_taplow"=="scullery") {

      : print "Mrs Taplow was on the landing. \"That bit of holly fell down, did it Mr Mapple? You won't mind if I put it back up for you. I always think it brightens up the place. \" She took the holly sprig and disappeared into the guest room." ;
   : create "edna_taplow" target = "bedroom_1"  ;
: create "holly" target = "bedroom_1" ;
: set_false "housespellbroken" ;

   : press_any_key ;
   : redescribe;
      
}

}
: if (is_at "scullery") {
: if (is_present "edna_taplow") {
: if (is_just_entered () ) {
   : print "Mrs Taplow was there, doing something over the sink. Arthur saw she had a large glass bottle containing yellowish liquid that she was dropping small items into. It was most curious." ;
   
}


}
}

: if (is_present "ernest_snapeshuttle") {
   : if (is_at "church") {
 : press_any_key ;
 : clear_screen;
         : print "Arthur entered the church just as the bells fell silent. A group of ringers were there, chattering away happily to one another; they wished him good day and filed past him out of the church leaving behind an affable little man in a flat cap and spectacles to tidy away. ";
         : press_any_key ;
         : print "He greeted Arthur.\n\"Hello Sir. I'm afraid there's no ringing today, if you were hoping to join in.\"\n\"Oh no,\" said Arthur, \"I just came for a look around the church. My name is Mapple, by the way. Arthur Mapple.\"\n\"Ernest Snapeshuttle,\" said the little man. " ;
         : press_any_key ;
         : print "\"You must be the detective. Here to find out about the Reverend, is it? That's what they're saying in the village. A terrible business that is, terrible.\" He looked sombre for a moment. \"Still,\" he continued brightly, \"vicar or no vicar, these bells have got to be rung!\"\n" ;
         : press_any_key ;
         : print "\"You know,\" said Arthur, looking wistfully up at the ropes disappearing into the bell loft high above, \"that's something I've always fancied having a go at.\"" ;
          : press_any_key ;
          : clear_screen;
           :print "\"Well,\" said Mr Snapeshuttle, \"let me show you, since I'm in no hurry. I'll catch up with the others later; they'll be in the Myrour for a good while. Now,\" he pointed to a colourful, fluffy section of the rope a little out of reach above, \"that there part of the rope is called the 'sally'. And this here bit at the end,\" he showed Arthur the long ribbon of material attached to end of the rope, \"is called the 'tail'. And you starts her ringing like this...\"\n" ;
          : press_any_key ;
         : print "Ernest Snapeshuttle pulled the tail and the rope descended, the sally travelling down to the floor. From far above Arthur heard the bell dong.\n\"And then, you grabs hold of the sally on its way up and you pulls again...\" Mr Snapeshuttle demonstrated and then let go. The rope travelled down and then shot back up out of reach. \"And you keeps hold of the tail rope, see? So you can pull the rope down again...\" He did so and the bell donged again.\n\"I see!\" cried Arthur in delight, suddenly awash with campanological fervour." ;
          : press_any_key ;
         : print "\"And there you have it Mr Mapple,\" said Mr Snapeshuttle, bringing the bell to rest. \"That's all there is to it. You may try if you wish; I wouldn't let any ordinary Tom, Dick or Harry at these bells but seeing as how you're an officer of the law, I can't think there'd be any harm in it. Only...\" and he fixed Arthur with a serious look, \"take care not to grab the sally when it goes up, otherwise it will take you with it. Some terrible accidents we've had over the years with folks that didn't heed that advice. Never panic, Mr Mapple. That's the thing!\"" ;
          : press_any_key ;
         : print "Mr Snapeshuttle gathered the last of his things together, said goodbye to Arthur, and left the church." ;
          : press_any_key ;
         : clear_screen;
         
        
         : set_true "bell_instructions" ;
         
      : destroy "ernest_snapeshuttle" ;
   
      : redescribe;
}

     




   
}

: if (is_at "nevernear_cottage") {
   : if (tea_counter>0&&tea_counter<6) {
      : increment "tea_counter" ;
      
   }
   : if (is_first_entered ()) {
   : print "\"I expect you'd like some tea, Mr Mapple? That is what one offers to visitors, after all. That much I do know, though I have to say that you're only the second I've had in the six months that I've been here.\"\nArthur felt a little dazed. \"I'm sorry,\" he said, uncertainly.\n\"Oh dear me no,\" she replied with a little smile. \"It suits me entirely. Anyway, you just wait here for a moment, would you, and I'll find the tea things.\" She left Arthur alone in the living room. " ;

      : increment "tea_counter" ;
      : done ;
      
      
   }
   : if (tea_counter==6&&has_not_created "ashtray") {
      : print "Ottoline returned with the tea things.\n\"I hope you don’t take sugar,\" she said, matter-of-factly, \"because I don’t, so I don’t keep any in the house. I don’t have many visitors. Anyway – let’s not stand on ceremony shall we? I’ll pour.\" And so she did.\nThey drank silently for a moment, each considering their opening move, before Ms Elderfield put her cup down and said frankly, \"So, you’ve seen them.\"\n\"Them?\" enquired Arthur, self consciously wiping a little tea from his moustache.\nOttoline sighed. \"I think I'd like a cigarette. Will you have one?\"\n\"No, thank you Ms Elderfield.\n\"Suit yourself.\" Ottoline fitted a cigarette into a holder, produced an unusual-looking ashtray and lit up. Arthur watched, mesmerised, as the smoke coil upwards and disappeared amongst the shadows of the ceiling beams. Nevernear Cottage was such a peaceful place." ;
      : create "ottoline_elderfield" ;
      
      : create "ashtray" ;
      
   }
   }
   : if (is_at "garden_path"&&is_present "ottoline_elderfield") {
   : print "Ottoline waited impatiently as Arthur dithered on her doorstep." ;

}
}

#TRAPTOR 3 end

#TRAPTOR 4 start


: if (traptor==4) {
   : if (is_at "drawing_room"&&!light_on) {
   : if (is_present "holder_1") {
      : print "The walls of the room seemed to ripple unsettlingly in the light of the wavering candle flame." ;
      
   }
   : else {
         : print "The room was shrouded in darkness." ;
   }
   
   
   }
   
: if (housespellbroken) {
 : if (is_at "zone_inside_vicarage") {
    : gosub "house_spell_broken" ;
    
 }
 }
        : if (tea_counter>0&&tea_counter<9) {
      : increment "tea_counter" ;
      }
   : if (is_at "zone_inside_vicarage") {
: if (tea_counter==5) {
   : print "Arthur heard a knock at the door." ;
   : increment "tea_counter" ;
   
}
: if (tea_counter==8) {
 : if (is_at "hallway"||is_at "hallway_2"||is_at "hallway_3") {
    : print "Mrs Taplow emerged from the kitchen and opened the door to reveal Ottoline on the doorstep, wearing an elegant, floor-length black coat and a deep blue sequined dress with headscarf to match. Mrs Taplow admitted her, rather stiffly, and showed her to the drawing room as instructed.\n\"Good evening, Mr Mapple,\" she said, evidently deciding that a little formality was wise, in the presence of Mrs Taplow. \"Good evening, Ms Elderfield. Please do go through - I'll be with you in just a moment.\"\nOttoline nodded and went into the drawing room, while Mrs Taplow returned to the kitchen." ;
    : set_true "seen_ottoline_seance" ;
    
      : press_any_key ;
    
 }
 : else_if (is_at "drawing_room") {
 
    : print "There was a brief knock on the door. A moment later, it opened and Ottoline stepped into the room. She was wearing an elegant, floor-length black coat and a deep blue sequined dress with a headscarf to match. Arthur thought she looked rather captivating.\n\"Good evening, Mr Mapple,\" she said, evidently deciding that a little formality was wise, in the presence of Mrs Taplow.\n \"Good evening, Ms Elderfield,\" replied Arthur, \"How kind of you to call.\" He turned to the housekeeper. \"Thank you, Mrs Taplow. that will be all.\" Mrs Taplow looked disapprovingly at both of them before leaving the room."  ;
     : set_true "seen_ottoline_seance" ;
: if (sitting) {
   : print "Arthur stood up." ;
   : set_false "sitting"; 
   : set_false "holding_hands" ;
   
   :gosub "chair_creation";
}
: press_any_key ;

 }
  : else_if (is_at "scullery") {
     : print "Mrs Taplow left the scullery to answer the door, and a moment later Arthur hear Ottoline being admitted to The Vicarage. After a short time, she returned. \"Ms Elderfield is waiting for you in the drawing room,\" said Mrs Taplow, sounding rather disapproving." ;
     : press_any_key ;
     
  }
    : else_if (is_at "kitchen") {
     : print "Mrs Taplow appeared from the scullery and crossed the kitchen on her way to answer the door. A moment later Arthur hear Ottoline being admitted to The Vicarage. After a short time, Mrs Taplow returned. \"Ms Elderfield is waiting for you in the drawing room,\" she said, sounding rather disapproving. She went back to the scullery." ;
     : press_any_key ;
     
  }
  
   : set_integer var = "tea_counter"  value = "0" ;
       : create "ottoline_elderfield" target = "drawing_room"   ;
 
  
    : redescribe;
}

  : if (is_at "drawing_room"&&is_present "ottoline_elderfield") {

  : if (ottoline_ask_counter==3) {
  : if (!seen_ottoline_seance) {
     : print "Arthur entered the drawing room to find Ottoline waiting for him, wearing an elegant, floor-length black coat and a deep blue sequined dress with headscarf to match. He paused for just a moment, a little taken aback by her striking appearance. She smiled.\n\"Hello Arthur.\" " ;

  }
  
     : print "Arthur was unsure of what came next. \"How should we begin?\" asked Arthur. \"I'm afraid I haven't had very much experience of, um, spiritual matters.\" In truth he'd always been rather sceptical and had refused the services of mediums in police matters. But present circumstance had forced a sudden re-evaluation of his beliefs. Whatever was happening in Haelstowne was inexplicable by ordinary means.\n\"Don't worry, Arthur - I assure you it's all quite straightforward. However, there is a little preparation to do.\"" ;

      : clear "ottoline_seance_entrance";
      : set_string var = "ottoline_seance"  text = "" ;
       : if (!light_on) {
        : collection_push { collection = "ottoline_seance_entrance" text = "we shall need the light to be off - electrical lighting disrupts ethereal vibrations and makes it impossible for contact to be made (I see that you've turned it off already - well done)" }
     }
    : else {
      : collection_push { collection = "ottoline_seance_entrance" text = "we shall need the light to be off (electrical lighting disrupts ethereal vibrations and makes it impossible for contact to be made)" }
    }
     : if (is_present "holder_1") {
        : collection_push { collection = "ottoline_seance_entrance" text = "we need a lighted candle (I see that we have one already - that is good; we shall need a little light to find the way)" }
     }
    : else {
      : collection_push { collection = "ottoline_seance_entrance" text = "we need a lighted candle (to find the way)," }
    }
    
        : collection_push { collection = "ottoline_seance_entrance" text = "most importantly of all, we must have no interruptions. To have any hope of success we must be undisturbed" }
 
     
     : print_list_verbose  "ottoline_seance_entrance"
         lead_in       = "Ottoline continued, \"We must make sure of the following: "
         final_part    = ".\""
         final_sep     = " and " 
         append_to_var = "ottoline_seance"
     
    
      ;

: print {(ottoline_seance)} ;


     //beezle
   //  : if (!light_on) {
   //     : append "\"I see that you've turned the light off already. Very good, Mr Mapple - we shall need the room in darkness.\"" ;
   //  }
   //  : else {
   //     : append "\"We shall need the light to be off, Mr Mapple - electrical lighting disrupts ethereal vibrations and makes it impossible for contact to be made.\"" ;
       
   //  }
   //    : if (is_present "holder_1") {
   //     : append "\"I see that we have a lit candle already. Very good, Mr Mapple - we shall need a little light to find the way." ;
   //  }
   //  : else {
   //     : append "\"We shall need a lighted candle, Arthur, to find the way.\"" ;
       
   //  }
   //  : print "\"Most importantly of all, we must have no interruptions. To have any hope of success we must be undisturbed. " 1;
     
     : increment "ottoline_ask_counter" ;
   : set_integer var = "spacing_counter"  value = "3" ;
   
     
     : press_any_key ;
     : redescribe;
     
       }
       
       : if (housespellbroken&&ottoline_ask_counter==6) {
          : print "Ottoline looked at the table and shook her head, \"We'll need that table to be in the middle of the room, Arthur.\" Together, they moved it back to its original position." ;
         
         
          : increment "ottoline_ask_counter" ;
          : set_string var = "round_table_description"  text = "a round table (in the middle of the room)" ;
          : press_any_key ;
          : redescribe;
          
       }
       
       : if (sitting&&ottoline_description=="Ottoline Elderfield (sitting on a chair)"&&is_beside"holder_1"&&holding_hands&&round_table_description=="a round table (in the middle of the room)"&&!light_on) {
       : if (has_not_created "witch_bottle") {
       : if (!something_is_blocking_the_spirits) {
          : clear_screen;
          
         : print "Ottoline glanced about as though searching for something, then closed her eyes and was still for a few moments. \n\"It's no good!\" she said at last. \"There's something here blocking the path to the other side. I simply can't get through!\"\n Arthur looked around but saw nothing out of the ordinary. \"What sort of thing?\" he asked. \n\"Oh, I don't know,\" she said, a little snappily. \"Some sort of apotropaic emblem or device - the sort of thing one uses to ward off evil spirits. The trouble is, such things don't distinguish between the good and the bad. I'm afraid we shall have to find and remove it, whatever it is, before we have a chance of contacting the other side.\"\n\"Where is it?\" said Arthur. \"In the house?\"\n\"Certainly. I can sense it is very close to us. It must be in this very room!\"" ;
          : set_true "something_is_blocking_the_spirits" ;
          
          : press_any_key ;
          : redescribe;
          
      
       }
       
        
       }
     
         : else_if (is_present "chair_4") {
         : clear_screen;
         
            : print "Ottoline produced the athame and laid it on the table.\n\"Now, close your eyes,\" she said, \"and concentrate. Peldash is near. We must concentrate on the athame and use that to bring him to us. Concentrate, Mr Mapple, and whatever you do, do not break the circle!\"\nArthur closed his eyes.";
            
            : press_any_key ;
            : print "\"Are you there?\" Ottoline intoned, slowly. \"Reverend Peldash? We know you are near. Come to us. Do not be afraid. Come to us, Reverend Peldash.\"\nThere was a far off rumble of thunder and it began to rain. The candle flame flickered wildly. Arthur, eyes shut, concentrated on the image of the athame. " ;
            : press_any_key ;
            : print "There was a long moment of silence, and then a sudden icy breeze that made him shudder as it passed by. And then, from the other side of the table, came a pleasant voice. " ;
            : press_any_key ;
            : print "\"Pardon me for dropping in on you like this,\" it said. \"I hope I haven't put you to any trouble.\"" ;
            : press_any_key ;
            : clear_screen;
            
            : print "Arthur opened his eyes and beheld across the table from him, looking quite solid and real, none other than the Reverend Jeremiah Peldash. He smiled pleasantly.";
            : press_any_key ;
            : print "\"Ms Elderfield! What an unexpected pleasure.\"\n\"Reverend Peldash,\" said Ottoline, coolly.\n\"And this gentleman must be?\"\n\"Arthur Mapple,\" said Arthur. \"Detective Constable.\"\n\"Ah, I see,\" said Peldash. \"I take it you are here on my account?\" \nPeldash's form wavered a little; suddenly the Reverend seemed a little less solid.\n\"Arthur, we haven't much time!\" said Ottoline." ;
            : press_any_key ;
            : print "\"Reverend Peldash,\" said Arthur hurriedly, \"I'm afraid that I must ask you this, although it seems a little indelicate. How...how did you die?\"\n\"Die?\" exclaimed Peldash. \"Why, my dear fellow, I'm not dead! At least, not yet.\" He chuckled, mirthlessly." ;
            : press_any_key ;
            : clear_screen;
            
            : print "\"But then, how...\" Arthur was perplexed.\n\"Just an astral projection - a sort of ghost of the living. A parlour trick I've developed over the years. But I am a prisoner, in that other place.\"" ;
            : press_any_key ;
            : print "\"I expect Aunt Ada's herbal had something to do with that,\" said Ottoline. Peldash looked abashed.\n \"I'm afraid it did. I am terribly ashamed to say that I...borrowed that, after she passed away.\"\n\"I knew it!\" cried Ottoline, indignantly." ;
            : press_any_key ;
   
            
            :print "\"Reverend Peldash,\" cut in Arthur quickly, \"perhaps you could tell us from the beginning?\"\n\"Oh very well, \" Peldash sighed. \"It may surprise you to know Mr Mapple, that I have always dabbled a little in the occult. It's more common that you may think, amongst the clergy. Dealing with the supernatural every day as we do, we sometimes branch out a little - but we try to be discreet about it when we do. I'd heard of the Haelstowne faery pictures and knew a little about the legends surrounding the place before I took over the parish from my predecessor. When I arrived, I investigated further and found many of the things I had supposed were merely products of an overactive imagination were substantially true - and naturally, I myself began to dabble.\"\n\"Naturally,\" observed Ottoline dryly.";
            : press_any_key ;
            : clear_screen;
            : print "Peldash continued. \"I made a circle in the old chapel and, after many failed attempts, succeeded in conjuring an elemental - a faery. Oh, I learned much from that spirit, but it promised me even greater knowledge if I would but perform a certain rite, in Calderhall Wood, where the barrier between worlds is most fragile,  during Beltane. And I, like other greedy and foolish men before me, thought nothing of the danger and agreed. Your Great Aunt had showed me the herbal once and I suspected how its contents could be put to use. So, I took it and learned the rites both of summoning, and of banishing - for I was not so reckless as to take no precautions at all. Then I went to the wood and performed the ceremony.\"\n\"And then,\" said Ottoline, \"all hell broke loose?\"" ;
            : press_any_key ;
          : print "\"Ahem. Quite.\" Peldash looked apologetic. \"I knew at once that I had been fooled. The gates of that other world opened. The Dark One came through and in his wake the faeries. I tried the spell of banishing, but it didn't work! I was a fool to not notice before, but the rite in the book was incomplete. I ran from the wood and cycled back to The Vicarage, feeling as though all of Satan's hounds were at my heels. I burned the faery photographs taken by my predecessor - such images are a lodestone that draws them, you see - and cast the most powerful spell of protection that I knew around the house. But then I realised that the book itself would draw them to me, so I took it and left the house, thinking to put it in the chapel. I had almost reached there when I heard the rider coming and in panic I ran, back across the old village, past the well where, I'm very much ashamed to say, I threw your aunt's book...\" Ottoline gasped in horror, \"...but I was too late. The rider took me. And now, well - here I am.\"" ;
          : press_any_key ;
          : clear_screen;
          
           : print "\"Reverend Peldash,\" said Arthur, \"we must rescue you!\"\nPeldash laughed softly. \"Oh, I'm afraid you can't. I am doomed. Perhaps you have heard of the faery tithe, paid to the devil himself? By his grace are faeries allowed to stay in our world, and the payment they make for this beneficence? Why, a human soul.\"" ;
            : press_any_key ;
          : print "Peldash's form faded and his voice became faint. \"Listen...\" he said, \"there is but one hope...cast the spell of banishment. But still that will not be enough, unless the way is closed. The Faery Queen and her entourage must ride three times, and the third time I will ride amongst them...from Calderhall, to...the Devil's Settle...to deliver me up to him. Find me...pull me down from my horse...hold me tight...she will transform me, but fear not. That is the only chance. If you fail, my sacrifice will mean the way will stay open and in another seven years another soul shall be their demand. Please, I beg you, do not let it happen...help me...save me...and beware...beware the Faery Queen...\"" ;
            : press_any_key ;
          : print "At that very moment, the door handle rattled once more and the chair beneath gave up its struggle against the detemination of Mrs Taplow to enter the room. It fell to the floor with a thud and the housekeeper entered. She stopped short as she saw the scene before her, raised a hand to her heart and let out a piercing scream. " ;
          : press_any_key ;
           : print "The ghostly frame of Peldash swirled and disintegrated into nothing, like dust disturbed by the slamming of a door. Ottoline, unruffled, let go of Arthur's hand, sighed and lit a cigarette." ;
           : print "\"Mrs Taplow - what excellent timing. I think we will have that tea now, if you wouldn't mind?\"" ;
           : print "White faced and mouthing silently, the housekeeper left the room - shutting the door behind her." ;
    : press_any_key ;
    : clear_screen;
            : gosub "end_of_traptor_4";
       
         }
            : else {
          : cycle predictable_order = "false"  key = "Ottoline closed her eyes and fell silent. Arthur watched the shadows fidget in the unsteady light of the candle flame and waited for something to happen."  {
             : print "\"Is there anybody there?\" Asked Ottoline quietly." ;
              : print "\"Gve us a sign if you are there...\" said Ottoline." ;
               : print "\"I'm trying to make contact, Arthur,\" whispered Ottoline, \"But it is hard to concentrate.\"" ;
                : print "\"They are here!\" cried Ottoline.\n \"Where?\" asked Arthur, a little alarmed. \"Very close,\" she whispered. \"They just need a little more encouragement before they will come through.\"" ;
                 : print "\"They want to come,\" said Ottoline, \"But oh, my concentration! It's so difficult with these constant interruptions.\"" ;
          }
          
       }   
       }


 
       
 
}

   
}
}

#TRAPTOR 4 end

#TRAPTOR 5 start
:if (traptor==5){ 
: if (is_at "hallway_2"&&is_present "edna_taplow") {
: print "Mrs Taplow was there. She acknowledged Arthur with the briefest nod and scurried past him into the dining room." ;
: create "edna_taplow" target = "dining_room" ;
: press_any_key ;
: redescribe;

}

: if (is_at "dining_room"&&is_present "edna_taplow") {
     : print "Mrs Taplow was gathering the breakfast things. She filled her tray and left the room, without a word to Arthur. He wondered if he'd offended the old housekeeper, or if perhaps she'd heard something about him at the village pump. He wouldn't be surprised to find himself the subject of gossip." ;
 : destroy "edna_taplow" ;
   : destroy "breakfast_things" ;
   : press_any_key ;
   : redescribe;
}

 : if (is_at "DMV_1") {
    : if (is_present "rabbit") {
       : print "Arthur saw a bright-eyed rabbit. It stood on its hind legs and looked at him for a moment, before bopping off to the south." ;
       : press_any_key ;
       : create "rabbit"target =  "DMV_2"  ;
    }
 }
 : if (is_at "DMV_2") {
    : if (is_present "rabbit") {
       : print "Arthur saw the rabbit again. It paused for a moment and the hopped off to the south." ;
       : press_any_key ;
       : create "rabbit"target =  "DMV_3"  ;
    }
 }
 : if (is_at "DMV_3") {
    : if (is_present "rabbit") {
       : print "The rabbit was there again. It watched him for a moment and the hopped off to the east." ;
       : press_any_key ;
       : create "rabbit"target =  "DMV_6"  ;
    }
    : else_if (!rumble) {
       : print "Arthur felt the ground tremble as though an earthquake were happening. Birds flew screeching from the trees and animals bolted into their burrows or fled into the undergrowth; a slate dislodged itself from the roof of St Wilfrid's and shattered onto a tombstone below. A few second later there was a deafening clap of thunder that left Arthur's ears ringing. He looked over towards the settle and saw a deep black cloud hanging over it and the top of it glimmering as if on fire. It must have been a trick of the light, Arthur told himself." ;
       : set_true "rumble" ;
       
    }
    
 }
: if (is_at "DMV_6") {
   : if (is_present "rabbit") {
      : print "Arthur saw the rabbit. It fixed him for a moment with its bright and beady stare before disappearing into a burrow. There was a flurry of movement inside the entrance, and soil an stones were kicked outside. Before long, a small pile of earth had formed." ;
     : destroy "rabbit"  ;
      : create "earth" ;
      : press_any_key ;
      : redescribe;
      
   }
  
   
}
 :if (is_at "lane_6"&&has_not_created "injured_rabbit"&&is_exists "earth"){
   : print "Arthur came upon a group of youths shouting and jeering at something on the ground. He couldn't quite see what it was, but the cruelty in their voices was unmistakable. He advanced boldly and asked them their business. The group broke apart and scattered as he approached, laughing. He noticed their curiously old-fashioned clothing and a not quite substantial quality about them; as they scattered they seemed to simply evaporate into the shadows of the bright summer day.\nOn the dusty ground where they had been, Arthur saw a small creature. He knelt down and found it was a rabbit - the same one, he was sure, that has seen earlier at the old village site. It seemed badly injured. Arthur, disgusted and angry, wondered what on earth he could do to help the poor thing." ;
   : create "injured_rabbit" ;
   : press_any_key ;
   : redescribe;
   
   }
   : if (is_at "garden_path") {
   : if (is_present "ottoline_elderfield") {
         : if (ottoline_ask_counter==8) {
            : print "Ottoline waited impatiently on the doorstep." ;
      }
   }
   }
     : if (is_at "church") {
     : if (is_present "ernest_snapeshuttle") {
     : if (!bell_instructions) {
          : if (ottoline_follow) {
      : print "Arthur saw an affable-looking little man in a flat cap opening windows with a hook on a long pole.n\"Good day to you both,\" he said." ;
      : press_any_key ;
      : clear_screen;
          : print "" ;
   }
    : else {
        : print "Arthur saw an affable-looking little man in a flat cap opening windows with a hook on a long pole.\n\"Good day sir,\" he said." ;
                : press_any_key ;
      : clear_screen;
  
        
 
      
    }
         : print "\"I'm afraid you've just missed the ringing if you were hoping to join in.\"\n\"Oh no,\" said Arthur, \"I just came for a look around the church. My name is Mapple, by the way. Arthur Mapple.\"\n\"Ernest Snapeshuttle,\" said the little man. " ;
         : press_any_key ;
         : print "\"You must be the detective. Here to find out about the Reverend, is it? That's what they're saying in the village. A terrible business that is, terrible.\" He looked sombre for a moment. \"Still,\" he continued brightly, \"vicar or no vicar, these bells have got to be rung!\"\n" ;
         : press_any_key ;
         : print "\"You know,\" said Arthur, looking wistfully up at the ropes disappearing into the bell loft high above, \"that's something I've always fancied having a go at.\"" ;
          : press_any_key ;
          : clear_screen;
           :print "\"Well,\" said Mr Snapeshuttle, \"let me show you, since I'm in no hurry. Now,\" he pointed to a colourful, fluffy section of the rope a little out of reach above, \"that there part of the rope is called the 'sally'. And this here bit at the end,\" he showed Arthur the long ribbon of material attached to end of the rope, \"is called the 'tail'. And you starts her ringing like this...\"\n" ;
          : press_any_key ;
         : print "Ernest Snapeshuttle pulled the tail and the rope descended, the sally travelling down to the floor. From far above Arthur heard the bell dong.\n\"And then, you grabs hold of the sally on its way up and you pulls again...\" Mr Snapeshuttle demonstrated and then let go. The rope travelled down and then shot back up out of reach. \"And you keeps hold of the tail rope, see? So you can pull the rope down again...\" He did so and the bell donged again.\n\"I see!\" Arthur was delighted and awash with campanological fervour." ;
          : press_any_key ;
         : print "\"And there you have it Mr Mapple,\" said Mr Snapeshuttle, bringing the bell to rest. \"That's all there is to it. You may try if you wish; I wouldn't let any ordinary Tom, Dick or Harry at these bells but seeing as how you're an officer of the law, I can't think there'd be any harm in it. Only...\" and he fixed Arthur with a serious look, \"take care not to grab the sally when it goes up when it goes up, otherwise it will take you with it. Some terrible accidents we've had over the years with folks that didn't heed that advice. Never panic, Mr Mapple. That's the thing!\"" ;
          : press_any_key ;
         : print "Mr Snapeshuttle gathered the last of his things together, said goodbye to Arthur, and left the church." ;

               : set_true "bell_instructions" ;
      }
   : else_if (ottoline_follow) {
      : print "Ernest Snapeshuttle was there, opening windows with a hook on a long pole.\n\"Good day to you Mr Mapple, Ms Elderfield,\" he said." ;
   }
   : else {
     : print "Ernest Snapeshuttle was there, opening windows with a hook on a long pole.\n\"Good day to you Mr Mapple,\" he said." ;
   }
   : create "hook_pole" target = "church" ;
   : destroy "ernest_snapeshuttle" ;
   : press_any_key ;
   : redescribe;
     }
   }
   : if (is_at "lane_4") {
      : if (drywell_ask_counter==2&&!ottoline_follow) {
   : print "Arthur encountered Ottoline riding her bicycle along the lane.\n\"Oh Arthur - did you manage to get that poor thing to the vet's?\"\nArthur looked away and mumbled a reply. Seeing he was upset, she quickly changed the subject. \"I was about to have a picnic on the village site. It really is such a tranquil spot. Why don't you come along with me? You could do with a little peace and quiet, I think.\"\n\"Thank you,\" said Arthur.\"I should like that very much.\"" ;
   : increment "drywell_ask_counter" ;
   : destroy "motor_tricycle" ;
   
   : if (onbike) {
      : set_false "onbike" ;
      : set_true "hasbike" ;
      
   }
   
   : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
   : create "ottoline_elderfield" ;
   : set_true "ottoline_follow" ;
   
      }
      
   }
   : if (is_at "DMV_3"&&is_present "ottoline_elderfield"&&!ottoline_follow) {
      : print "Ottoline was there, picnicking amongst the meadow flowers.\n\"Arthur, you're back. Let me just gather my things and I'll come with you.\"" ;
      : destroy "ottolines_bike" ;
    : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
      : set_true "ottoline_follow" ;
    : press_any_key ;
    : redescribe;
      
   }
   : if (is_at "lane_3"&&is_present "ottoline_elderfield"&&!has_not_created "grimoire") {
    : print "Ottoline mounted her bicycle and turned to Arthur. \"I'm sorry, Arthur, but I must leave you for a while. Things to do, I'm afraid. I hope you can manage on your own?\"\n\"Of course,\" said Arthur, thinking how strange it was that his life should so quickly have become entwined with that of this rather odd woman.\n\"You'll come for me, later?\"\nArthur was temporarily nonplussed. \"Come for you? Of yes. Yes of course.\" He knew he would, for whatever unspoken, shared knowledge existed between them dictated that they would meet again, as events ran their course. It seemed inevitable. Ottoline smiled and, with a wave of farewell, cycled away up the lane. " ;
    : set_false "ottoline_follow" ;
: create "ottoline_elderfield"target = "poachers_scullery"  ;

      : press_any_key ;
      : redescribe;
      
   }
   
   : if (is_at "Churchyard") {
      : if (is_present "ottolines_bike") {
         : print "Ottoline took her bicycle." ;
         : destroy "ottolines_bike" ;
         : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
         
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   : if (is_at "church"){
      : if (bell_ringing>0&&bell_ringing<9) {
         : if (bell_ringing!=2) {
         : if (chance (50)) {
            
         }
         
            : execute_one_at_random {
               : print "\"Are you quite sure you know what you're doing Arthur?\" said Ottoline, sceptically." ;
               : print "\"For heaven's sake, be careful!\" Ottoline seemed genuinely afraid for his safety." ;
               : print "\"Are you really sure that you ought to be doing that?\" asked Ottoline disapprovingly." ;
               : print "\"I can't help thinking this seems awfully reckless, Arthur,\" said Ottoline, looking rather worried." ;
            }
            
         }
         
      }
      : if (previous_location ()=="bell_loft"&&is_present "ottoline_elderfield") {
         : print "\"Arthur! Thank heavens you're alright!\" said Ottoline, evidently relieved to see him return unscathed from the bell loft." ;
         : set_true "ottoline_follow" ;
         
      }
      
   }
   : if (is_at "bell_loft") {
      : if (parent_of "ottoline_elderfield"=="church") {
         : if (chance(50)) {
            : print "Arthur could hear Ottoline calling frantically to him from below." ;
            
         }
         
      }
      
   }
   : if (is_at "Churchyard"&&is_present "ottoline_elderfield") {
      : if (has_not_created "fox") {
         : create "fox" ;
         : print "As they approached the door of the church, Ottoline stopped suddenly and grabbed Arthur by the arm.\"Look!\", she whispered.\n Arthur followed her gaze and saw, by a tombstone in the northern graveyard, a fox. It sat quite motionless and watched them both with twinkling eyes for a long moment before it stood up and, with a final look and a twitch of its bushy white-tipped tail, sauntered away and disappeared amongst the long grass. " ; 
         : destroy "fox" ;
         : press_any_key ;
         : redescribe;
        
         
      }
      
   }
   : if (is_at "DMV_5"&&is_present "ottoline_elderfield") {
      : if (previous_location ()=="well") {
         : print "\"What did you find down there?\" asked Ottoline, as Arthur emerged from the well." ;
      }
      : if (!ottoline_follow) {
         : set_true "ottoline_follow" ;
         
      }
      
   }
   : if (is_at "chapel") {
      : if (is_present "ottoline_elderfield") {
         : if (is_just_entered () ) {
            : execute_one_at_random {
               : print "\"There's trememdous power in this place,\" said Ottoline, \"Can't you feel it?\"" ;
                 : print "\"I sense great power here, Arthur,\" said Ottoline. \"We must take care\"" ;
       : print "\"There's something in here,\" said Ottoline. \"Something powerful and dangerous.\"" ;
            }
            
         }
         
      }
      
   }
   
   : if (count("keg_objects")==5&&!has_not_created "grimoire"&&!has_not_created "twig"&&!has_not_created "spectacles_case_1"&&fragments_in_mirror==4) {
   : clear_screen;
   : print "Arthur felt as though a veil had been lifted, or the sun had emerged from behind a cloud. In a moment of clarity he knew, with absolute certainty, that all was prepared. What had seemed impossible was now possible: the banishing of the faeries to their own domain and the rescue of the Reverend Jeremiah Peldash. " ;
: press_any_key ;
: print "Arthur took stock of all that he had aqcuired to help him in this most perilous of tasks. The ancient robes with their fabulous and mysterious symbols, the grimoire containing the spell of banishment, the strange mixture that he had brewed within the keg. " ;
: press_any_key ;
: print "The mirror forged by Richard Travais, cunning man of Old Haelstowne, its surface whole once more; he looked into its inscrutable depth, hoping to glimpse the future, but saw nothing but darkness. The humble hazel twig, imbued, it seemed, with its own subtle magic. And the faery horseshoe nail, charged with the strange power from the altar within the old chapel - a power that Arthur hoped to turn back upon them." ;
: press_any_key ;
: clear_screen;
: print "Whatever was destined to happen must happen that night. There was no more for him to do now than to wait. " ;
: press_any_key ;
: print "Arthur spent some time retracing his steps and gathering all the things he thought he would need before returning to The Vicarage - a place of sanctuary amidst the tumult and confusion of Haelstownes past and present, facing one another across a gulf of five hundred years and anxiously awaiting their fates on that same midsummer eve." ;

: press_any_key ;
: gosub "end_of_traptor_5" ;


}
   
   
   }



#TRAPTOR 5 end

#TRAPTOR 6 start
//treacle
: if (traptor==6) {


   : if (is_at "hallway") {
      : if (is_present "edna_taplow") {
         : print "Mrs Taplow was in the hallway. She glanced at Arthur fearfully.\"Mr Mapple. Will you be going out this evening? Only I was thinking to lock the doors a little earlier; you'd best take your key.\"\n\"Thank you Mrs Taplow, I shall.\" He thought it unwise to ask the reason." ;
         : destroy "edna_taplow" ;
          : press_any_key ;
          : redescribe;
          
      }
      
   }
   : if (is_at "wood_path_3") {
   : if (spell<12) {
      : print "Arthur sensed a presence nearby and felt the hairs on the back of his neck prickle." ;
      : if (is_present "ottoline_elderfield") {
         : print "Ottoline gasped. \"Arthur! We're very close to it here.\"\n\"But what is it?\" asked Arthur. \"I'm not sure but I think...the crossing-over point between our world and theirs. Yes - that must be it." ;
   }
      }
      : else {
      //treacle
               : print "Arthur sensed an emptiness where power had departed; the silence rang as clear as a bell." ;
      : if (is_present "ottoline_elderfield") {
         : print "\"They've gone,\" said Ottoline. \"But not forever. I can sense them waiting to return.\"\n\"We must make it forever,\" said Arthur." ;
      }
   }
   }
   : if (!is_at "zone_wood"&&!is_at "zone_road_to_wood") {
      : if (spell<12) {
: if (is_present "ottoline_elderfield") {
   : if (chance (45)) {
      : execute_one_at_random {
         : print "\"Arthur, we're in the wrong place,\" said Ottoline. \"Whatever we're supposed to do, we need to be at Calderhall. It's calling to us.\"" ;
             : print "Ottoline looked anxious. \"Arthur... I'm sure that whatever it is that needs to be done, it needs to happen at Calderhall.\"" ;
                 : print "\"Calderhall wood is calling to us Arthur,\" said Ottoline. \"Can't you hear it?\"" ;
                     : print "\"I'm not sure why Arthur, but I am certain that we need to be at the wood.\"" ;
      }
   }
}
      }
   }
   : if (spell>15) {
      : if (is_at "zone_wood"||is_at "zone_road_to_wood"||is_at "zone_lanes"||is_at "zone_chapel_outside") {
: if (is_present "ottoline_elderfield") {
   : if (chance (15)) {
      : execute_one_at_random {
         : print "\"The old village Arthur! That's where we need to be. I can sense it!\" Ottoline's intuitions were usually correct." ;
             : print "Ottoline looked anxious. \"Arthur, I'm sure that whatever will happen, it will happen in the village. Shouldn't we go there?" ;
                 : print "\"We should go to the old village, Arthur,\"said Ottoline. \"I'm sure that's where we need to be!\"" ;
                     : print "\"The old village Arthur! We should go there!\" Ottoline seemed quite sure of her intuitions." ;
      }
        }
   }
}
 
      
   }
   
 : if (is_at "grove") {
    : if (spell>0&&spell<4) {
       : print "A restless breeze tossed the tops of the trees and made branches creak; the air seemed filled with whispers. " ;
       
    }
     : if (spell>3&&spell<7) {
       : print "A strengthening wind seethed amongst the leaves; the shadows between the trees seemed to thicken and the air became charged." ;
       
    }
     : if (spell>6&&spell<10) {
       : print "The wind was so strong that Arthur has trouble keeping on his feet. Branches and debris blew all around and the air was full of the sound of inhuman voices." ;
       
    }
     : if (spell>9&&spell<13) {
       : print "The wind roared and Arthur crouched low to avoid being blown off his feet. Leaves, twigs and other debris whirled madly about the grove, branches fell and the tortured sound of trees toppling resounded throughout the wood. The air was filled with dreadful shrieks and screams." ;
       
    }
 }
 : if (spell>12) {
    : if (is_at "zone_wood") {
       : print "A debris of twigs and leaves was everywhere, and uprooted trees lay like fallen giants throughout the wood." ;
       
    }
    
 }
 : if (is_at "zone_dmv") {
 : if (spell==16) {
  : increment "spell" ;
 }
 
   : if (spell>11&&!endgame) {
  
   : if (is_present "ottoline_elderfield") {
         : print "Arthur and Ottoline looked around in amazement, scarcely able to believe their eyes. For all around - pale and indistinct, running and rippling like water - were unfamiliar streets and houses, and unfamiliar folk amongst them. The buildings and inhabitants of Old Haelstowne, brought to life once more in a ghostlit tableau." ;
   }
   : else {
        : print "Arthur looked around in amazement, scarcely able to believe his eyes. For all around - pale and indistinct, running and rippling like water - were unfamilar streets and houses, and unfamiliar folk amongst them. The buildings and inhabitants of Old Haelstowne, brought to life once more in a ghostlit tableau." ;
   }
   
 

}
// : else {
//    : print "Groups of fearful villagers huddled in the square." ;
   
// }

 : if (!endgame) {
    : if (spell>11) {
        : if (is_present "ottoline_elderfield") {
      
   : if (chance (30)) {  
    : if (is_at "zone_dmv") {
       : print "\"It feel as though there is a barrier,\" said Ottoline. \"Something that we must pass through. But we're not ready. Something is missing, Arthur. What can it be?\"" ;
    }
//     : else {
//  : execute_one_at_random {
//        : print "\"The square,\" said Ottoline. That's where it happened. We must go to the square.\"" ;
//        : print "\"Something happened, in the square,\" said Ottoline. \"It's happening again. I can feel it. We must go back there Arthur!\"" ;
//        : print "\"The square is calling us,\" said Ottoline. \"It happened in the square. We must go back!\"" ;
//  }
//  } 
    
    
   }
    }
   //pinky


    }
 }
   }
}



#TRAPTOR 6 end




: if (taplow_window_counter>0&&is_at "recess") {
: if (chance (50)) {
: execute_one_at_random {
   : print "Mrs Taplow was leaning dangerously out of the window, reaching for the swinging casement." ;
   : print "Mrs Taplow cursed under her breath as the swinging casement eluded her grasp once again." ;
   : print "Mrs Taplow gave a little shriek as a gust of wind blew the window fully shut, knocking her backwards into the recess and almost into Arthur crouching helplessly behind her. A little flustered but unbowed, she picked herself up and reached for the window just as the wind blew it open again." ;
   : print "Mrs Taplow tussled valiantly with the wind for possession of the casement." ;
   : print "With a triumphant cry, Mrs Taplow caught the handle of the window with her fingertips - but a sudden gust wrested it away from her causing her to lose her balance. For a sickening moment, Arthur thought that she was going to fall from the window as she flailed in the empty air before righting herself. Undaunted, she carried on. " ;
   
   }
}
}
: if (taplow_window_counter>0) {

   : increment "taplow_window_counter" ;
}
   
#LIGHTING CONDITIONS start

 : if (is_at "darkroom") {
   : if (is_present "safelight") {
   : if (!light_on&&!is_carried "match_1") {
      : print "Everything was bathed in an eerie red glow." ;
      : done ;
   }
   }
 }
 : if (is_at "coal_cellar"||is_at "cellar_room"||is_at "cellar_passage") {
   : if (is_present "safelight") {
   : if (!is_carried "match_1") {
      : print "Everything was bathed in an eerie red glow." ;
      : done ;
   }
   }
 }
 : if (blinder) {
    : print "An intense, cold, unearthly light shone from the spectacles case and illuminated the surroundings." ;
 }
 
 
 
#LIGHTING CONDITIONS end
 
  : if (onbike&&!is_at "zone_road_zone"&&!is_at "zone_road_to_wood") {
     : print "Arthur dismounted the bicycle." ;
: set_false "onbike" ;
     : set_true "hasbike" ;
     
  }
  
: if (onbike) {
   : print "Arthur was on the bicycle." ;
   
}
: if (hasbike) {
   : print "Arthur held the bicycle alongside him." ;
   
}


: if (is_at "garden_3"&&is_first_entered ()) {
: press_any_key ;
: clear_screen;

   : print "As he stood looking at the flowers, Arthur had a sudden, powerful sensation of being watched. He thought he saw something move out of the corner of his eye, and imagined he heard a faint sound, like mocking laughter. But when he turned, there was nobody there.\nIn spite of the warm sunshine, he shivered." ;
   : press_any_key ;
   : redescribe;
   
   
   }

    : if (is_at "potting_shed"&&is_first_entered ()) {
       : set_true "rainstorm" ;
       
    }
    
    : if (is_at "rockery"&&is_first_entered ()) {
    :print "The sense of an invisible, crackling energy filling the atmosphere was very strong here. Arthur felt a definite sense of presence although his eyes told him quite plainly that there was nothing there with him, except the darting things that he took to be insects, constantly fluttering and vanishing around him.";
    }
    
    
: if (is_at "garden_4") {
: if (rainstorm) {
: clear_screen;

: print "The light dimmed suddenly as he left the potting shed. Glancing at the sky, Arthur watched a lid of cloud slide across the bright disk of the sun, like an eyelid blinking shut. There was a rumble of thunder, far off and yet powerful enough that Arthur could have sworn he felt the earth tremble beneath his feet. A moment later a sudden deluge soaked him to the skin. And then, in an instant, the sky cleared and the sun shone brightly once more. " ;
: set_false "rainstorm" ;
: press_any_key ;
: redescribe;

}



}
: if (is_at "zone_rockery")
{
   : if (chance (20)) {
   : if (seen_faeries) {
    : execute_one_at_random {
       : print "Tiny figures hovered about him, and skittered away when he approached." ;
       : print "Arthur saw tiny people everywhere, amongst the rocks and foliage of the rockery. They watched him closely as he encroached into their domain." ;
       : print "Tiny human-like creatures floated like thistle-down all around Arthur." ;
       }
    }
    : else {
       : execute_one_at_random {
      : print "Something landed on Arthur's sleeve. He glanced down and, just for a second, he could have sworn that he saw a tiny human face looking back at him. And then in the next instant, it was gone." ;
      : print "Arthur felt a sudden sharp pang in his leg and, rolling up his trousers, he discovered that he was bleeding from a small wound. Something, it seemed, had bitten him." ;
      : print "Shadowy things seemed to move through the undergrowth all around Arthur. It must have been the rippling of the shadows as the branches swayed overhead, he told himself. But still it made him uneasy." ;
      : print "Arthur thought he heard a whispering close to his ear and, whipping round, he caught a glimpse of something small and airborne dashing away from him. It must have been a dragonfly and the whisper the beat of its wings." ;
    }
   }
}
}


: if (is_at "zone_dmv"&&spell<12) {
   : if (chance(20)) {
   : if (traptor!=6&&traptor!=2) {
   : cycle predictable_order = "false"  key = "DMVcreatures"  {
         : print "A hare leapt into view and froze as it saw Arthur, observing him silently with eyes of fractured amber. He blinked in the bright sunlight and when he looked again, the animal had vanished." ;
         : print "A tiny shrew shot across Arthur's path, causing him to shriek in surprise. It paused for just an instant and seemed to look at him rather crossly, before disappearing into a hole in the ground. Arthur, somewhat shaken, felt a little embarrassed at his reaction." ;
         : print "A swarm of butterflies appeared from nowhere and fluttered about Arthur. One landed on his sleeve and he watched its wings open and close slowly and the long black tongue unfurl and begin to probe uselessly at the tweed of his jacket. And then an instant later, it had taken to the air and vanished along with its fellows." ;
         : print "Arthur felt something land on his shoulder and, glancing round, was surprised to see a robin perching there. It looked at him with black, unfathomable eyes, chirped once and then flew away. He watched it disappear across the field and vanish into the distance." ;
         : print "A pair of field mice tumbled from a nearby bank and scurried across Arthur's shoes as he passed. The little animals paused and seemed to observe him for an instant, before disappearing into the long grass on the other side of him." ;
            : print "Arthur had a sudden strong feeling that he was being watched and turned to see a fox observing him steadily from a hillock a short distance away. He stared at it and the animal cocked its head slightly and continued to stare unblinkingly back. It had a curiously expectant air and Arthur had a sudden wild fancy that the creature was there to tell him something, so boldly and unflinchingly did it stare. He ventured a few hesitant steps towards it and it stood its ground, its lip curling into what Arthur could almost have imagined was a smile, before it turned tail and disappeared."  ;
            : print "Arthur glanced across the field and saw a group of rabbits nibbling the grass nearby. They barely stirred as he passed, although Arthur was aware of their eyes watching him. He had a peculiar, fleeting impression of voices, as of something remembered rather than heard." ;
            : print "Arthur was aware of eyes watching him wherever he went. The place seemed alive with small creatures that did not seem to threaten but rather to tolerate his presence there, for the time being." ;
            : print "Arthur sensed the wary watchfulness of small creatures all around him. An occasional movement of the grass here, a quiet rustle of leaves there, betrayed their presence." ;

      }
      }
      : else_if (spell>11) {
      : if (!endgame) {
             : print "Arthur saw the ghostly forms of the medieval villagers and the faeries amongst them, going about their business in the old village of Haelstowne." ;
      }
      : else {
         : execute_one_at_random {
             : print "Small groups of villagers huddled close to one another, fear written on their faces." ;
 : print "Village children, sensing excitement but not knowing the cause, ventured from doorways only to be hurried back indoors by anxious parents." ;
      : print "The occasional drunkard staggered by, having drowned their fears in ale." ;
      : print "The men and women of the village glanced fearfully at one another and conversed in anxious whispers." ;
             }
   }
      }
}
      }


}


###################
#################
#  Subroutines                       #
###################################### 
subroutines {

end_of_traptor_1 : subroutine {

: set_false "daytime" ;
: set_false "ottoline_follow" ;
: set_false "vase_on_candle" ;

: set_integer var = "traptor"  value = "2" ;
: print "Arthur left the prints to dry and tried to occupy himself before dinner which would be served, as it had been since time immemorial, at precisely 5.15." ;
: press_any_key ;

: print "He read in the study for a while, but found he couldn't settle to it. Nothing in Peldash's library interested him particularly and whenever he did attempt to read something, that nagging sense of presence seemed always to break his concentration. The house having become a rather uneasy place to be, he went outside for a walk." ;
: press_any_key ;
: print "Snow was still falling steadily through the sunshine and melting the instant it hit the hot and dusty ground, although here and there it had begun to gain a foothold in the shadows. The wildlife seemed fretful and subdued; the birds had mostly fallen silent. Oppressed, Arthur returned to The Vicarage." ;
: press_any_key ;
: print "After dinner, Arthur was heading back to the study when he heard Mrs Taplow in the kitchen, talking in a low voice to Mr Thurgood. Pausing to eavesdrop, he couldn't make out the words, but the anxious tone was unmistakable. As the evening drew in, the snow steadily thickened." ;
: press_any_key ;
: print "Arthur retired early to bed, having discretely returned the house keys to their proper place. He was tired after a busy and confusing day. Drawing the curtains on a snow-covered midsummer night, he tried to hard to explain to himself the strange events of the day, but found he could not. Perhaps, he thought, everything would make more sense in the morning." ;
: press_any_key ;
: clear_screen;

: print "Arthur lurched awake in the middle of the night. His heart was racing and his skin clammy, his senses jangling and alert to invisible danger. He sat up in bed. Light was pouring in through the curtains, illuminating the whole room in a strange, cold light. It must have been a full moon." ;
: press_any_key ;
: print " He looked around and saw the empty room. There was nothing there. But he was sure he had felt....He pulled back the covers and got out of bed, threw on his dressing gown and slippers and opened the curtains. Immediately he was assailed by the dazzling whiteness of the world outside his window. Everything was smothered by a thick blanket of snow." ;
: press_any_key ;
: clear_screen;

   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^June 22nd 1928";
        : pause "1500" ;
        : print "^c^(A little after midnight)";
        
   : pause "2000" ;
   
       : clear_screen;

: set_string var = "date_description"  text ="June 22nd 1928 (A little after midnight)" ;
: set_true "housespellbroken" ;
: if (parent_of "rail"=="darkroom") {
   : create "rail"target = "bedroom_1"  ;
}
: if (parent_of "gardening_gauntlets"=="darkroom") {
   : create "gardening_gauntlets"target = "bedroom_1"  ;
}
: if (parent_of "shovel"=="darkroom") {
   : create "shovel"target = "bedroom_1"  ;
}
: destroy "bunch_keys" ;
: destroy "edna_taplow" ;
: destroy "thurgood" ;
: destroy "box_brownie" ;
: destroy "bottle" ;
: destroy "flask" ;
: destroy "vase_1" ;
: destroy "base" ;
: destroy "dish" ;
: destroy "bucket" ;
: destroy "breakfast_things" ;
: destroy "instructions" ;
: destroy "film" ;
: create "steps"target = "study"  ;
: create "scones" target = "scullery" ;
: destroy "holder_1" ;
: destroy "candle" ;
: set_true "candleinholder" ;
: set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
: create "holder" target = "bedroom_1" ;

: create "boots"target = "outbuilding"  ;
: create "bunch_keys" target = "kitchen" ;
: create "goggles" target = "kitchen" ;
: set_false "matchboxopen" ;
 : set_string var = "matchbox_description"  text = "a matchbox" ;
: set_false "peldash_door_unlocked" ;
: set_false "cellar_door_unlocked" ;
#REMOVE VITAL STUFF FROM DARKROOM start

: if (parent_of "rail"=="darkroom") {
   : create "rail" target = "study"  ;
}
: if (parent_of "fragment_5"=="darkroom") {
   : create "fragment_2" target = "study"  ;
}
: if (parent_of "fragment_3"=="darkroom") {
   : create "fragment_3" target = "study"  ;
}
: if (parent_of "fragment_4"=="darkroom") {
   : create "fragment_4" target = "study"  ;
}
: if (parent_of "gardening_gauntlets"=="darkroom") {
   : create "gardening_gauntlets" target = "study"  ;
}

: if (parent_of "trunk_key"=="darkroom") {
   : create "trunk_key" target = "study"  ;
}

: if (parent_of "mistletoe_sprig"=="darkroom") {
   : create "mistletoe_sprig" target = "study"  ;
}

: if (parent_of "scone"=="darkroom") {
   : create "scone" target = "study"  ;
}

: if (parent_of "crumbs"=="darkroom") {
   : create "crumbs" target = "study"  ;
}



: if (parent_of "screwdriver"=="darkroom") {
   : create "screwdriver" target = "study"  ;
}


: if (parent_of "lump_hammer"=="darkroom") {
   : create "lump_hammer" target = "study"  ;
}

: if (parent_of "shovel"=="darkroom") {
   : create "shovel" target = "study"  ;
}

: if (parent_of "shears"=="darkroom") {
   : create "shears" target = "study"  ;
}

: if (parent_of "tuning_hammer"=="darkroom") {
   : create "tuning_hammer" target = "study"  ;
}

: if (parent_of "knife"=="darkroom") {
   : create "knife" target = "study"  ;
}

: if (parent_of "fence_post"=="darkroom") {
   : create "fence_post" target = "study"  ;
}

: if (parent_of "twig"=="darkroom") {
   : create "twig" target = "study"  ;
}

: if (parent_of "robes"=="darkroom") {
   : create "robes" target = "study"  ;
}

: if (parent_of "spectacles_case"=="darkroom") {
   : create "spectacles_case" target = "study"  ;
}


: if (parent_of "paperback"=="darkroom") {
   : create "paperback" target = "study"  ;
}


#REMOVE VITAL STUFF FROM DARKROOM end

#REMOVE VITAL STUFF FROM MAZE start

: if (parent_of "shovel"=="maze_1"||parent_of "shovel"=="maze_2"||parent_of "shovel"=="shovel"||parent_of "shovel"=="maze_4") {
   : create "shovel" target = "lane_4"  ;
}
#REMOVE VITAL STUFF FROM MAZE end


: create "matchbox" target = "bedroom_1" ;
: set_string var = "sheet_description"  text = "a sheet of contact prints" ;

: create "sheet" target = "bedroom_1" ;

: set_true "key_on_hook" ;
: set_true "goggles_on_hook" ;
:set_false "onbike";
:set_false "hasbike";
: create "bicycle" target = "path_3" ;
: set_false "wardrobe_open";

 : set_string var = "wardrobe_description"  text = "a wardrobe (closed)" ;
         : destroy "clothes" ;

: destroy "drawer_1" ;
: set_false "draweropen" ;
: goto "bedroom_1" ;
: redescribe;
}
end_of_traptor_2 : subroutine {
: set_false "ottoline_follow" ;
: set_true "daytime" ;

: set_integer var = "traptor"  value = "3" ;
: print "He awoke at mid-morning to a feeling of peace and security; the terrors of the night seemed to have evaporated in the sunshine. He yawned and stretched, rose from his bed and threw wide the curtains. " ;
: press_any_key ;
: print "The snow had disappeared, the midsummer sun blazed down from a clear blue sky and the air was already hot. He wondered briefly if last night had been nothing but a bad dream, but his snow-scorched face and damp trousers told him otherwise. " ;
: press_any_key ;
: print "Something was different - the feeling of unseen presence within the house had lessened, if not disappeared altogether. Now The Vicarage seemed a less unnerving place." ;
: press_any_key ;
: clear_screen;

: print "Arthur made his way to the dining room. Mrs Taplow entered and asked pointedly if he still required breakfast at this late hour. He affirmed and the housekeeper took herself off the prepare it, evidently annoyed that the immutable routine of vicarage meal times should be disrupted by this late-sleeping newcomer. " ;
: press_any_key ;
: print "In a short while she returned and served him breakfast, informing him that there was a letter for him in the study, before withdrawing. " ;
: press_any_key ;
: print " Arthur pondered as he ate. It all seemed so strange. But at least, he considered, he now knew the way to Nevernear Cottage. Perhaps he should pay a visit and see if its eccentric occupant could shed any light on matters? She could hardly make things more confusing than they were already." ;

   : press_any_key ;
   : clear_screen;
   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^June 22nd 1928";
        : pause "1500" ;
        : print "^c^(Daytime)";
        
   : pause "2000" ;
   
       : clear_screen; 
   : set_string var = "date_description"  text ="June 22nd 1928 (Daytime)" ;
: set_false "drywell" ;
   : set_false "snowfall" ;
   : if (jarbell_ask_counter==1) {
      : increment "jarbell_ask_counter" ;
   }
   
: goto "dining_room" ;
   : create "edna_taplow" target = "study"  ;
   : create "ernest_snapeshuttle" target = "church" ;
: create "envelope" target = "study"  ;
: create "dagger" target = "study"  ;
: create "thurgood"target = "outside_pub"  ;
: create "shears" target = "potting_shed" ;
: destroy "boots" ;
: destroy "motor_tricycle" ;
: destroy "bunch_keys" ;
: set_true "key_on_hook" ;
 : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
            : create "bunch_keys" target = "kitchen" ;
            
: create "garden_fork" target = "potting_shed" ;
: destroy "holder_1" ;
: destroy "candle" ;
: set_true "candleinholder" ;
: set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
: create "holder" target = "bedroom_1" ;
: create "matchbox" target = "bedroom_1" ;
: create "sheet"target = "bedroom_1"  ;
: set_string var = "coat_description"  text = "a heavy woollen overcoat" ;
: set_string var = "gloves_description"  text = "a pair of knitted gloves" ;

: create "gloves" target = "bedroom_1" ;
: create "overcoat"target = "bedroom_1"  ;
: destroy "goggles" ;



: set_false "housespellbroken" ;

: set_false "hasbike" ;
: set_false "onbike" ;
: create "bicycle"target = "path_3" ;
: create "breakfast_things"target = "dining_room"  ;
: redescribe;

}

end_of_traptor_3 : subroutine {
: set_false "ottoline_follow" ;
: destroy "ottolines_bike" ;
: destroy "crow" ;
: set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
: set_false "daytime" ;
: set_false "sitting" ;
: create "edna_taplow" target = "scullery" ;
: set_false "housespellbroken" ;
: set_integer var = "traptor"  value = "4" ;
   :print "\"This is no ordinary knife,\" said Ottoline. \"It's an athame.\"\n\"An athame?\" Arthur had never heard the word before.\n\"A ritual knife, used in magical workings. This was lost recently. It's looking for its owner.\"";
   : press_any_key ;
   : print "\"How on earth can you know that?\" Arthur exclaimed. She laid the knife on her palm, covered it with her other hand and closed her eyes. She became very still.\n\"I sense fear...\" she said softly, \"and violence. A great...rushing in. Triumph? Release!\" Her voice dropped to a mere whisper. \"This played its part in a great working, recently. The blade still sings with the memory of it.\"\n\"Who?\" asked Arthur urgently. \"Who did it belong to?\" He was adrift in a world of the unreal and unseen; he craved for concrete facts." ;
   : press_any_key ;
   : print "Ottoline gasped suddenly and opened her eyes.\n\"Peldash!\" she cried, \"Without a doubt!\"\n\"How can you be so sure?\" asked Arthur, aware that he sounded rather skeptical.\n\"My dear man, I am a medium. It's my job to know such things. And besides, I saw him just now.\"\n\"You saw him?\" said Arthur, incredulously.\n\"Yes, quite plainly. I think he was trying to communicate. From the other side.\"" ;
    : press_any_key ;
    : clear_screen;
    
   : print "\n\"The other side? Do you mean to say...\"\nOttoline sighed. \"I'm rather afraid I do. He is no longer in this world. I'm sorry if that's a bit of a shock, Arthur.\"" ;
   
  
    : press_any_key ;
   : print "\"Well actually, it's not. I mean - I rather expected it.\" Arthur told Ottoline what he had seen during the night.\n\"So he is still around,\" she said, \"and trying to communicate. Excellent! We must speak to him.\"" ;
    : press_any_key ;
   : print "\"I'm not quite sure how...\"\n\"Why, a seance, of course! That's usually the way. We must make a circle and invite him in to speak to us.\"\n\"How?\" said Arthur, \"Where?\"" ; 
   : press_any_key ;
   : clear_screen;
   
   : print "\"The usual way,\" said Ottoline, \"by holding hands around a table, with a candle to focus on. Anything more is just window dressing. As for where - it will need to be at The Vicarage I think.\"\n\"Really?\" Arthur had a sinking feeling as he imagined what Mrs Taplow might say about that. \"Why there?\"" ;
    : press_any_key ;
  
    : print "\"Well, firstly because ghosts tend to haunt their own houses and after all, The Vicarage is where you saw him. And secondly, because it simply won't work at the cottage. I can't pick up anything there at all. It's an ethereal Faraday cage; nothing from the spirit world can get through. Travais's work, no doubt.\"" ;
   : press_any_key ;
   : print "\"Very well,\" said Arthur, \"if it must be The Vicarage then so be it. We must find out what happened to Peldash. I'll see if I can persuade Mrs Taplow to leave us alone for the evening.\"\nOttoline's expression indicated that she didn't fancy his chances of success. \"Tonight then,\" she said. \"Shall I call around 7?\"" ;
   : press_any_key ;
   
   : clear_screen;
   : if (has_visited "peldash_room") {
      : print "After dinner, Arthur tried to pass the time until Ottoline's arrival with a little reading, but found the contents of Reverend Peldash's bookshelves for the most part rather stultifying. Eventually, he remembered the paperback that he had come across in Peldash's room and opted to read that instead. It was a little trashy and sensational, but at least it was entertaining." ;
   }
   : else {
      : print "After dinner, Arthur tried to pass the time until Ottoline's arrival with a little reading, but found the contents of Reverend Peldash's bookshelves for the most part rather stultifying. He searched the house for more diverting reading material and eventually discovered a cheap paperback that he opted to read instead. It was a little trashy and sensational, but at least it was entertaining." ;
   }
   
   : print "After a little while, he went in search of Mrs Taplow and suggested she should take the evening off." ;
   : press_any_key ;
: print "\"I can't do that, Mr Mapple,\" she said, \"what with the Reverend missing and everything here at sixes and sevens and you being a guest and all.\"\n\"I shall be quite alright, Mrs Taplow. And besides,\" he added, not wishing to be untruthful but quite aware that it would probably make matters worse, \"I shan't be alone. Ms Elderfield will be paying a visit.\"" ;
 : press_any_key ;
: print "\"Will she indeed,\" intoned Mrs Taplow, her mouth setting into hard line. It was quite evident that any intention of complying with Arthur's wishes had evaporated at this news; she would certainly not leave The Vicarage that evening. \"Just a social call, you know,\" said Arthur, weakly." ;
 : press_any_key ;
: print "Mrs Taplow gathered the dishes without another word and left the dining room. Arthur wondered briefly what gossip about himself and Ottoline had been circulating at the village pump. Whatever it was, Mrs Taplow would certainly have a few things to add to it after this evening." ;
  : press_any_key ;
   : clear_screen;
   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^June 22nd 1928";
        : pause "1500" ;
        : print "^c^(Early evening)";
        
   : pause "2000" ;
   
       : clear_screen;
   
   : set_string var = "date_description"  text = "June 22nd 1928 (Evening)" ;
   : goto "drawing_room" ;
   : create "paperback" ;
   
   : destroy "breakfast_things" ;
   : set_true "key_on_hook" ;
 : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
            : create "bunch_keys" target = "kitchen" ;
   : set_false "shoes_in_fireplace" ;
   : set_integer var = "tea_counter"  value = "1" ;
 : destroy "holder_1" ;
: destroy "candle" ;
: set_true "candleinholder" ;
: set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
: create "holder" target = "bedroom_1" ;
      : create "matchbox" target = "bedroom_1" ;
      : create "mirror" target = "bedroom_1" ;
   : destroy "knife_1" ;
   : create "athame" target = "bedroom_1" ;
        
   : set_integer var = "ottoline_ask_counter"  value = "3" ;
   : create "lightswitch_1" ;
   : set_true "light_on" ;
   : create "chair_1"target = "drawing_room"  ;
    : create "chair_2"target = "drawing_room"  ;
     : create "chair_3"target = "study"  ;

   : redescribe;
}
end_of_traptor_4 : subroutine {
: set_false "ottoline_follow" ;
: set_false "sitting" ;
: set_false "housespellbroken" ;
: set_true "daytime" ;
: destroy "ottoline_elderfield" ;
: destroy "chair_4" ;
: set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;

: print "Arthur awoke to peace and quiet. Mrs Taplow was moving about downstairs; he supposed she was refortifying the supernatural defences of the house in her own simple way. ";
: press_any_key ;
: print "He rose, washed and dressed with Peldash's word echoing in his head. 'Beware the Faery Queen...'" ;
: press_any_key ;

: print " Arthur could scarcely bring himself to believe what he had seen and heard last night, but whatever the truth of it, it was evident that Peldash was in real danger and that he, Detective Constable Arthur Mapple, instrument of the law, was duty bound to deliver him from it. " ;
: press_any_key ;
: print "But where to start? 'Conduct the rite of banishment' Peldash had said. A magical spell, a puff of smoke, and the faeries would vanish? It seemed absurdly like something one might see at the theatre. But, admitted Arthur, he had no better plan. " ;
: press_any_key ;
: print "He had to find that book... Peldash had said the rite was incomplete, and perhaps that was so. Or perhaps he had simply not paid enough attention to it. He did seem a singularly careless, if not downright reckless man. " ;
: press_any_key ;
: print "Arthur finished trimming his moustache and admired himself in the washstand mirror. The face he saw was passably handsome, he thought vainly, if a little wide-eyed and naive. Hardly the face of a man planning to conduct a daring and dangerous rescue. " ;
: press_any_key ;
: print "He set his features a little more firmly, tied his tie with steely determination, and made his way down to breakfast." ;
: press_any_key ;

   : clear_screen;
   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^Midsummer Eve, 1928";
        : pause "1500" ;
        : print "^c^(Daytime)";
        
   : pause "2000" ;
   
       : clear_screen;
: set_false "housespellbroken" ;
: if (has_not_created "scone") {
   : create "scones" target = "kitchen" ;
   
}
: destroy "holder_1" ;
: destroy "candle" ;
: set_true "candleinholder" ;
: set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
: create "holder" target = "bedroom_1" ;
: set_true "key_on_hook" ;
 : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
            : create "bunch_keys" target = "kitchen" ;
: goto "dining_room" ;
: create "breakfast_things" ;
: create "edna_taplow" target = "hallway_2" ;
: create "thurgood" target = "garden_4" ;
: create "witch_bottle" target = "bedroom_1" ;
: set_integer var = "ottoline_ask_counter"  value = "7" ;
: set_false "hasbike" ;
: set_false "onbike" ;
: create "bicycle"target = "path_3" ;
: set_integer var = "traptor"  value = "5" ;
: create "rabbit" target = "DMV_1" ;
 : create "mirror" target = "bedroom_1" ;

: create "ernest_snapeshuttle" target="church";
: set_string var = "date_description"  text ="Midsummer Eve 1928 (Daytime)" ;
}
end_of_traptor_5 : subroutine {
   : set_false "ottoline_follow" ;
   : set_false "daytime" ;
   : set_false "sitting" ;
   : set_false "housespellbroken" ;
   : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
 : set_integer var = "traptor"  value = "6" ;
 ;: set_string var = "date_description"  text ="*UPDATE 22nd June (a little after midnight)" ;
   : clear_screen;
   : print "Arthur ate a quiet supper - Mrs Taplow, anxious and distracted, was in no mood for chatter - and retired early to snatch a few hours of fitful sleep. ";
   : press_any_key ;
   : print "He awoke a little before midnight, arose and drew back the curtains to see the midsummer moon huge and clear in a cloudless sky and the area around The Vicarage turned to silver beneath its cold light. " ;
   : press_any_key ;
   : print "Knowing the time was near, he dressed quickly and went downstairs to the study to prepare himself for whatever the next few hours might bring." ;
   : press_any_key ;
   
      : clear_screen;
   : pause "1000" ;
        : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^Midsummer Eve, 1928";
        : pause "1500" ;
        : print "^c^(Night-time)";
        
   : pause "2000" ;
   : set_string var = "date_description"  text = "Midsummer Eve 1928 (Night-time)" ;
   
     :create "keg" target = "study";   
     : create "mirror" target = "study" ;
     : create "grimoire" target = "study" ;
    : create "spectacles_case_1" target = "study" ;
    : set_string var = "robes_description"  text = "a set of robes" ;
    
    : create "robes" target="bedroom_1" ;
    : destroy "holder_1" ;
: destroy "candle" ;
: set_true "candleinholder" ;
: set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
: create "holder" target = "bedroom_1" ;
: create "matchbox" target = "bedroom_1" ;

    : create "twig" target = "bedroom_1" ;
    : create "athame" target = "bedroom_1";
    : create "binoculars" target = "study" ;
    : set_true "key_on_hook" ;
 : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
            : create "bunch_keys" target = "kitchen" ;
    : set_false "hasbike" ;
: set_false "onbike" ;
 : create "bicycle"target = "path_3"  ;
 
 : create "edna_taplow" target = "hallway" ;
 : create "ottoline_elderfield" target = "nevernear_cottage" ;
 : set_integer var = "ottoline_ask_counter"  value = "9" ;
 : goto "study" ;
: redescribe;

   
}


#HOUSE SPELL BROKEN

house_spell_broken : subroutine {
   

      
   : if (chance (20)) {
      : cycle predictable_order = "false"  key = "ghoulies1"  {
         : print "Arthur saw a ghostly figure in old fashioned clothing emerge from one wall and disappear into another." ;
         : print "Arthur heard sniggering laughter and turned around to see a pair of slender youths in medieval clothing whispering to one another. He looked away for a second and when he looked back, they were gone." ;
         : print "Arthur saw something out of the corner of his eye. He turned his head and saw a tiny person hovering close to him. It smiled a cold smile and flitted away. " ;
         : print "A translucent spectre of a man suddenly floated up through the floor, mouthing something silently. It hovered for a moment and then dissipated like smoke." ;
         : print "Arthur felt something land on his shoulder. He glanced and saw a tiny man standing there, holding something shiny in his hand. The little figure lunged and Arthur felt a pain in his ear. He touched the lobe and found that he was bleeding. The tiny man vanished." ;
         : print "A group of men and women suddenly appeared from nowhere, chattering away to one another. They wore old fashioned clothes and had a curiously insubstantial quality to them, as though they were made of smoke. They passed by Arthur and when he turned, they were gone. " ;
         : print "Arthur turned to see a small child standing alarmingly close to him. It had a sickly pale face and was dressed in ragged clothing; its feet were bare. As Arthur stared, he sensed that there was something not quite solid about it. It opened its mouth as if to speak and then, quite suddenly, vanished in a gust of icy air. Arthur shivered." ;
         
      }
      
   }
  
}


//CONTAINER CODE
#CONTAINER MANAGEMENT start

   container_management : subroutine {
   
    : gosub "object_accessibility" ;
    : match "examine _"  {
 
       : if (noun1_is "cupboard") {
       : if (is_present "cupboard") {
          
   
        : examine "cupboard" ;
          : if (cupboardopen) {
          : print "The cupboard was open." ;
          
              : gosub "print_cupboard_contents";
          }
          : else {
             : print "The cupboard was closed." ;
             
          }
          
          : done ;
          
               }
       }
           : if (noun1_is "dish") {
           : if (is_present "dish") {
              
         
        : examine "dish" ;
              : gosub "print_dish_contents";
          : done ;
            }
           
       
       }
           : if (noun1_is "bucket") {
           : if (is_present "bucket") {
              
      
           
        : examine "bucket" ;
              : gosub "print_bucket_contents";
          : done ;
          
            }
       }
           : if (noun1_is "bottle") {
           : if (is_present "bottle") {
       
        : examine "bottle" ;
              : gosub "print_bottle_contents";
              : if (bottle_open) {
                 : print "The bottle was open." ;
                 
              }
              : else {
                : print "The bottle was closed." ;
                
              }
              
              
          : done ;
          
              
           }
           
       }
           : if (noun1_is "flask") {
           : if (is_present "flask") {
              
           
        : examine "flask" ;
              : gosub "print_flask_contents";
              : if (flask_open) {
                 : print "The flask was open." ;
                 
              }
              : else {
                 : print "The flask was closed." ;
                 
              }
              
              
          : done ;
          
       }
           
       }
       
           : if (noun1_is "drawer") {
           : if (is_present "drawer") {
        : examine "drawer" ;
        : if (draweropen) {
        : print "The drawer was open." ;
        
              : gosub "print_drawer_contents";
               }
               : else {
                  : print "The drawer was closed." ;
                  
               }
               
        
          : done ;
          
         }
           : if (is_present "drawer_1") {
        : examine "drawer_1" ;
        : print "The drawer was open." ;
              : gosub "print_drawer_1_contents";
          : done ;
          
         }
       }
          : if (noun1_is "sink") {
          : if (is_present "sink") {
             
       
          
        : examine "sink";
              : gosub "print_sink_contents";
          : done ;
          
       
       }
   }
       
     }
         
         
         
      : match "open _"  {
      
     : if (noun1_is "cupboard") {
      : if (is_present "cupboard") {
         : if (!cupboardopen) {
         : if (!cupboard_stuck) {
         
            : print "Arthur opened the cupboard." ;
         : set_true "cupboardopen" ;
          : gosub "update_cupboard_description" ;
            : gosub "print_cupboard_contents" ;
         }
         : else {
            : print "Arthur tried and failed to open the cupboard. The door was ill-fitting. He could see no keyhole, so it seemed that it was not locked. Rather, he guessed, the wood of the door must have swelled a little and jammed in the frame. Arthur fancied that if he had a blade he could use that to lever it open." ;
         }
         }
         : else {
            : print "But the cupboard was already open." ;
         
         : done ;
         
      }
       }
   }
   
     : if (noun1_is "drawer") {
      : if (is_present "drawer") {
         : if (!draweropen) {
            : print "Arthur opened the drawer." ;
         : set_true "draweropen" ;
          : gosub "update_drawer_description" ;
            : gosub "print_drawer_contents" ;
         }
         : else {
            : print "But the drawer was already open." ;
            
         }
      }
         : if (is_present "drawer_1") {
          : print "But the drawer was already open." ;
           : done ;
      }
   }
   
   
   : if (noun1_is "bottle") {
   : if (is_carried "bottle") {
      : if (!bottle_open) {
         : print "Arthur unscrewed the cap from the bottle." ;
         : if (is_pocketable "screw_cap") {
            : pocket "screw_cap" ;
            
         }
         : else {
            : create "screw_cap" ;
            
         }
         : set_true "bottle_open" ;
         
      }
      : else {
         : print "But the bottle was already open." ;
          : done ;
      }
   }
   : else_if (is_carried "witch_bottle") {
      : return ;
      
   }
   
: else {
   : print "But Arthur was not holding a bottle." ;
    : done ;
}

   }
   
   : if (noun1_is "flask") {
   : if (is_carried"flask") {
      : if (!flask_open) {
         : print "Arthur removed the stopper from the flask." ;
            : pocket "stopper" ;
         : set_true "flask_open" ;
         
      }
      : else {
         : print "But the flask was already open." ;
      }
   }
: else {
   : print "But Arthur was not holding a flask." ;
   
}

   
      }
      }
      
      
    
      
      : match "close _"  {
   
      : if (noun1_is "cupboard") {
         : if (cupboardopen){
            : print "Arthur closed the cupboard." ;
            : set_false "cupboardopen" ;
            : press_any_key ;
            : redescribe;
            
         }
         : else {
            : print "But the cupboard was already closed." ;
            
         }
         
      }
      
      : if (noun1_is "drawer") {
      : if (is_present "drawer") {
         : if (draweropen){
            : print "Arthur closed the drawer." ;
            : set_false "draweropen" ;
            
         }
         : else {
            : print "But the drawer was already closed." ;
            
         }
         
      }  
      : else_if (is_present "drawer_1") {
             : print "Arthur pushed the secret drawer shut and heard a click as it locked back into place." ;
:destroy "drawer_1";
      }
         }
    
    
      : if (noun1_is "bottle") {
   : if (is_carried "bottle") {
      : if (bottle_open) {
      : if (is_carried "screw_cap") {
         : print "Arthur screwed the cap onto the bottle." ;
: destroy "screw_cap" ;
         : set_false "bottle_open" ;
      }
      : else {
         : print "But Arthur was not carrying the screwcap." ;
      }
   }
: else {
   : print "But the bottle was already closed.";
}
 }
  : else_if (is_carried "witch_bottle") {
      : return ;
      
   }
 : else {
    : print "But Arthur was not holding a bottle." ;
 }
   }
   : if (noun1_is "flask") {
   : if (is_carried "flask") {
      : if (flask_open) {
      : if (is_carried "stopper") {
         : print "Arthur fitted the stopper onto the flask." ;
: destroy "stopper" ;
         : set_false "flask_open" ;
      }
      : else {
         : print "But Arthur was not carrying the stopper." ;
      }
   }
: else {
   : print "But the flask was already closed.";
}
 }
 : else {
    : print "But Arthur was not holding a flask." ;
 }
 }
       }
   
      : match "inventory -"  {
     
           : gosub "update_cupboard_description";
           
           : gosub "update_drawer_description"
         ;
         
         : gosub "update_dish_description" ;
         : gosub "update_bucket_description" ;
         : gosub "update_sink_description" ;
   : gosub "update_drawer_1_description" ;
      : gosub "update_bottle_description" ;
         : gosub "update_flask_description" ;
         : inventory;
      }

 :match "get _" {
 : if (noun2_is "") {

     : if (parent_of(s1()) == "cupboard") {
       : if (is_present "cupboard") {
          : if (cupboardopen) {
              : remove_from_container "cupboard";

              :done;
          }
          
       }
       
    }
    : if (parent_of(s1()) == "drawer") {
       : if (is_present "drawer") {
          : if (draweropen) {
              : remove_from_container "drawer";
              :done;
          }
          
       }
       
    }
    : if (parent_of(s1()) == "dish") {
       : if (is_present "dish") {
              : remove_from_container "dish";
              : if (!s1_has_trait "wettable_t") {
                 : decrement "nonwettable_things_in_dish" ; 
                 
              }
              
              :done;
          
          
       }
       
    }
    : if (parent_of(s1()) == "bucket") {
       : if (is_present "bucket") {
              : remove_from_container "bucket";
              : if (!s1_has_trait "wettable_t") {
                 : decrement "nonwettable_things_in_bucket" ; 
                 
              }
              
              :done;
          
          
       }
       
    }
     : if (parent_of(s1()) == "sink") {
       : if (is_present "sink") {
              : remove_from_container "sink";
              : if (!s1_has_trait "wettable_t") {
                 : decrement "nonwettable_things_in_sink" ; 
                 
              }
              :done;
          
          
       }
       
    }
   
    : else_if (parent_of(s1()) =="drawer_1") {
       : if (is_present "drawer_1") {
             : remove_from_container "drawer_1";
             :done;
  
 }
 }
 : if (parent_of(s1()) == "bottle") {
       : if (is_present "bottle") {
          : if (bottle_open) {
              : remove_from_container "bottle";
              :done;
          }
          
       }
       
    }
 : if (parent_of(s1()) == "flask") {
       : if (is_present "flask") {
          : if (flask_open) {
              : remove_from_container "flask";
              :done;
          }
          
       }
       
    }
 }
}
      : match "get all"  {
      
         : if (noun2_is "cupboard") {
            : if (cupboardopen) {
               : do_all "cupboard";
               : done ;
            }
         }
         
          : if (noun2_is "drawer") {
          : if (is_present "drawer") {
            : if (draweropen) {
               : do_all "drawer";
               : done ;
            }
               }
               : if (is_present "drawer_1") {
                      : do_all "drawer_1";
               : done ;
               }
               
         }
          : if (noun2_is "dish") {
             : set_integer var = "nonwettable_things_in_dish"  value = "0" ;
               : do_all "dish";
               : done ;
         }
         : if (noun2_is "bucket") {
             : set_integer var = "nonwettable_things_in_bucket"  value = "0" ;
               : do_all "bucket";
               : done ;
         }
          : if (noun2_is "sink") {
          : set_integer var = "nonwettable_things_in_sink"  value = "0" ;
               : do_all "sink";
               : done ;
         }
      
          : if (noun2_is "bottle") {
             : set_integer var = "nonwettable_things_in_bottle"  value = "0" ;
               : do_all "bottle";
               : done ;
         }
          : if (noun2_is "flask") {
             : set_integer var = "nonwettable_things_in_flask"  value = "0" ;
               : do_all "flask";
               : done ;
         }
      }

      
      : match "put all"  {
    
      //check if target container is present and not inside a closed container
      
      : if (is_present (s2())) {
   : if (parent_of (s2())=="cupboard"&&!cupboardopen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
  
    : else_if (parent_of (s2())=="drawer"&&!draweropen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
}
: else {
   : print "Arthur couldn't see that anywhere." ;
   :done;
}

     
         : if (noun2_is "cupboard") {
            : if (cupboardopen) {
               : do_all "inventory_notworn";
               : done ;
            }
            : else {
               : print "But the cupboard was not open." ;
               : done ;
            }
         }
          : if (noun2_is "drawer") {
          : if (is_present "drawer") {
            : if (draweropen) {
               : do_all "inventory_notworn";
               : done ;
            }
            : else {
               : print "But the drawer was not open." ;
               : done ;
            }
            }
             : else_if (is_present "drawer_1") {
               : do_all "inventory_notworn";
               : done ;
         }
         }
         : if (noun2_is "dish") {
               : do_all "inventory_notworn";
               : done ;
         }
             : if (noun2_is "bucket") {
               : do_all "inventory_notworn";
               : done ;
         }
         : if (noun2_is "sink") {
               : do_all "inventory_notworn";
               : done ;
         }
    
             : else_if (noun2_is "bottle") {
            : if (bottle_open) {
               : do_all "inventory_notworn";
               : done ;
         }
            : else {
               : print "But the bottle was not open." ;
               : done ;
            }
          }
             : else_if (noun2_is "flask") {
            : if (flask_open) {
               : do_all "inventory_notworn";
               : done ;
         }
            : else {
               : print "But the flask was not open." ;
               : done ;
            }
          }
      }
      
  
       
      : match "put _"  {
      : if (noun1_is "candle"&&noun2_is"holder"||noun1_is "vase"&&noun2_is "candle"||noun1_is "vase"&&noun2_is "holder"||noun1_is "fragment"&&noun2_is "mirror"||noun1_is "match"||noun1_is "screwdriver"&&is_carried "screwdriver"||noun1_is "knife"&&is_carried "knife"||noun1_is "vase"&&noun2_is "light") {
         : return ;
         }
         : if (noun1_is "water") {
   : if (is_at "scullery") {
      : print "(If Arthur wanted to fill something with water from the tap then he simple needed to FILL [[container]].)" ;
      : done ;
      
   }
}
: if (noun1_is "developer"||noun1_is "fixer"||noun1_is "water") {

   : print "(If Arthur wanted to decant fluid from one container into another then he should POUR [[fluid]] INTO [[container]].)" ;
   : done ;
   }

      //check if target container is present and not inside a closed container
      : disambiguate_s1 "carried";
  
      : if (is_carried (s1())) {
      : if (is_present (s2())) {
   : if (s2()=="developer"||s2()=="fixer"||s2()=="water"||s2()=="water_1"||s2()=="water_2"||s2()=="water_3"||s2()=="water_4") {
      : print "(If Arthur wanted to put something into a fluid then he should PUT [[something]] IN [[container with the fluid in it]].)" ;
      : done ;
      
   }
   
    
   : if (parent_of (s2())=="cupboard"&&!cupboardopen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }

    : else_if (parent_of (s2())=="drawer"&&!draweropen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
 
}
: else {
   : print "Arthur couldn't see that anywhere." ;
   :done;
}
//checking if non-wettable things in target recepticle

: if (noun2_is "dish") {
: if (parent_of "developer" == "dish"||parent_of "fixer" == "dish"||parent_of "water_2" == "dish") {
: disambiguate_s1 "carried";
: if (!s1_has_trait "wettable_t") {
      : print {("Arthur decided not to try it. The "+original "noun1"+" would not benefit from being wet.")} ;
     : done ;
   }
///checking order of film processing (disallow fixing before developing etc)
//zinky
: if (parent_of "developer" == "dish") {
: if (s1()=="film") {
 
   : if (film_description=="a strip of film negatives (unfixed, washed)" ) { 
      : print "Arthur has just washed the developer off the film and saw no need to immerse it in the same fluid again." ;
      : done ;
   }
   : else_if (film_description=="a strip of film negatives (fixed, unwashed)"||film_description=="a strip of film negatives (processed, wet)") {
      : print "Having already developed the film, Arthur saw no need to immerse it in developing fluid again." ;
      : done ;
   }

}
: else_if (s1()=="sheet") {
   : if (sheet_description=="a sheet of contact prints (unfixed, washed)" ) { 
      : print "Arthur has just washed the developer off the sheet and saw no need to immerse it in the same fluid again." ;
      : done ;
   }
   : else_if (sheet_description=="a sheet of contact prints (fixed, unwashed)"||sheet_description=="a sheet of contact prints (processed, wet)") {
      : print "Having already developed the prints, Arthur saw no need to immerse the sheet in developing fluid again." ;
      : done ;
   }

}
}
: else_if (parent_of "fixer"=="dish") {
: if (s1()=="film") {
   : if (film_description=="a strip of undeveloped film" ) { 
      : print "Arthur knew that he needed to develop the film before fixing it, so there was no point in immersing it in the fixer now." ;
      : done ;
   }
   : else_if (film_description=="a strip of film negatives (unfixed, unwashed)") {
      : print "But the film was still soaked with developing fluid. Arthur thought that he should wash it off before proceeding." ;
      : done ;
      
   }

}
: if (s1()=="sheet") {
   : if (sheet_description=="a sheet of exposed, undeveloped photo paper" ) { 
      : print "Arthur knew that he needed to develop the prints before fixing them, so there was no point in immersing the sheet in the fixer now." ;
      : done ;
   }
   : else_if (sheet_description=="a sheet of contact prints (unfixed, unwashed)") {
      : print "But the sheet was still soaked with developing fluid. Arthur thought that he should wash it off before proceeding." ;
      : done ;
      
   }

}
}

}

//continue checking non-wettable in other containers

}
: if (noun2_is "bottle") {
: if (parent_of "developer" == "bottle"||parent_of "fixer" == "bottle"||parent_of "water_3" == "bottle") {
 : if (!s1_has_trait "wettable_t") {
      : print {("Arthur decided not to try it. The "+original "noun1"+" would not benefit from being wet.")} ;
     : done ;
   }  
}

}
: if (noun2_is "flask") {
: if (parent_of "developer" == "flask"||parent_of "fixer" == "flask"||parent_of "water_4" == "flask") {
   : if (!s1_has_trait "wettable_t") {
      : print {("Arthur decided not to try it. The "+original "noun1"+" would not benefit from being wet.")} ;
     : done ;
   }  
}

}
: if (noun2_is "bucket") {
: if (parent_of "developer" == "bucket"||parent_of "fixer" == "bucket"||parent_of "water_1" == "bucket") {
  : if (!s1_has_trait "wettable_t") {
      : print {("Arthur decided not to try it. The "+original "noun1"+" would not benefit from being wet.")} ;
     : done ;
   }
      //stop film & sheet being developed in bucket
   :if (s1()=="film") {
: if (parent_of "developer" == "bucket"||parent_of "fixer" == "bucket"){
: print "Arthur was a novice when it came to the art of photographic processing, but one thing he felt certain of was that attempting it in a rusty bucket was sure to yield disappointing results." ;
: done ;
}

}
   :if (s1()=="sheet") {
: if (parent_of "developer" == "bucket"||parent_of "fixer" == "bucket"){
: print "Arthur was a novice when it came to the art of photographic processing, but one thing he felt certain of was that attempting it in a rusty bucket was sure to yield disappointing results." ;
: done ;
}

}
}
}
//dealing with individual containers below:
      
           : if (noun2_is "cupboard") {
           : if (parent_of(s1()) == "inventory") {
               : if (cupboardopen) {
                  : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the cupboard.")} ;
                      : done ;
                  }
                  : else {
                     : if (count "cupboard"==cupboard_item_limit) {
                        : print "The cupboard was too full to put anything else in it." ;
                         : done ;
                     }
                     : else {
                       : insert_in_container "cupboard";
                       : done ;
                       
                     }
                  }
               }
               : else {
                  : print "But the cupboard was not open." ;
               }
            }
            : else {
              : print "But Arthur was not carrying that." ;
            }
         }
         : if (noun2_is "drawer") {
           : if (parent_of(s1()) == "inventory") {
               : if (is_present "drawer") {
               : if (draweropen) {
                  : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the drawer.")} ;
                      : done ;
                  }
                  : else {
                     : if (count "drawer"==drawer_item_limit) {
                        : print "The drawer was too full to put anything else in it." ;
                        : done ;
                        
                     }
                     : else {
                       : insert_in_container "drawer";
                       : done ;
                       
                     }
                  }
               }
               : else {
                  : print "But the drawer was not open." ;
               }
            }
            : else_if (is_present "drawer_1") {
                  : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the drawer.")} ;
                      : done ;
                  }
                  : else {
                     : if (count "drawer_1"==drawer_1_item_limit) {
                        : print "The drawer was too full to put anything else in it." ;
                        : done ;
                        
                     }
                     : else {
                       : insert_in_container "drawer_1";
                       : done ;
                       
                     }
                  }
           
            }
            
         }
         : else {
              : print "But Arthur was not carrying that." ;
            }
          }
         
         : if (noun2_is "dish") {
           : if (parent_of(s1()) == "inventory") {
           : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the dish.")} ;
                     : done ;
                     
                  }
                  : else_if (count "dish"==dish_item_limit) {
                        : print "The dish was too full to put anything else in it." ;
                        : done ;
                        
                     } 
             : else_if (!s1_has_trait "wettable_t"){
             : increment "nonwettable_things_in_dish" ;
         }
            : insert_in_container "dish";
             : if (parent_of "water_2"=="dish")
             {
            : gosub "washing_off" ;
            }
            : done ;
            
            }
            : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
         }
         
         : if (noun2_is "bucket") {
           : if (parent_of(s1()) == "inventory") {
           : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the bucket.")} ;
                     : done ;
                     
                  }
                  : else_if (count "bucket"==bucket_item_limit) {
                        : print "The bucket was too full to put anything else in it." ;
                        : done ;
                        
                     } 
             : else_if (!s1_has_trait "wettable_t"){
             : increment "nonwettable_things_in_bucket" ;
         }
         
                 : insert_in_container "bucket";
            : if (parent_of "water_1"=="bucket") {
        : gosub "washing_off" ;
            : done ;
         }
            
: done ;
         
            }
            : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
         }
          : if (noun2_is "sink") {
           : if (parent_of(s1()) == "inventory") {
           : if (s1_has_trait "too_big_for_container_t"==true) {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the sink.")} ;
                     : done ;
                     
                  }
                  : else_if (count "sink"==sink_item_limit) {
                        : print "The sink was too full to put anything else in it." ;
                        : done ;
                        
                     } 
                     : else_if (!s1_has_trait "wettable_t"){
             : increment "nonwettable_things_in_sink" ;
         }
            : insert_in_container "sink";
: done ;  
         
            }
            : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
         }
   
          : if (noun2_is "bottle") {
           : if (parent_of(s1()) == "inventory") {
           : if (!s1_has_trait "matchboxable_t") {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the bottle.")} ;
                     : done ;
                     
                  }
                  : else_if (count "bottle"==bottle_item_limit) {
                        : print "The bottle was too full to put anything else in it." ;
                        : done ;
                        
                     } 
             : else_if (!s1_has_trait "wettable_t"){
             : increment "nonwettable_things_in_bottle" ;
         }
            : insert_in_container "bottle";
: done ;  
         
            }
            : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
         }
          : if (noun2_is "flask") {
           : if (parent_of(s1()) == "inventory") {
           : if (!s1_has_trait "matchboxable_t") {
                     : print {("Arthur couldn't fit the "+original "noun1"+" in the flask.")} ;
                     : done ;
                     
                  }
                  : else_if (count "flask"==flask_item_limit) {
                        : print "The flask was too full to put anything else in it." ;
                        : done ;
                        
                     } 
             : else_if (!s1_has_trait "wettable_t"){
             : increment "nonwettable_things_in_flask" ;
         }
            : insert_in_container "flask";
: done ;  
         
            }
            : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
         }
      }
 : else {
              : print "But Arthur was not carrying that." ;
              : done ;
              
            }
       }
      
       
   }


#CONTAINER MANAGEMENT end
#UPDATE CONTAINER DESCRIPTION START
  
   
   update_cupboard_description : subroutine {
      : set_string var = "cupboard_description"  {((cupboardopen ? "an open cupboard" : "a closed cupboard"))}
      
      : if (cupboardopen) {
         : if (count "cupboard" > 0) {

            : look_inside
               of               = "cupboard"
               extract_the      = "description"
               store_results_in = "cupboard_objects"
               make_known       = "true"
            ;
            : print_list_verbose  "cupboard_objects"
               lead_in       = " (which contained "
               final_part    = ")"
               append_to_var = "cupboard_description"
            ;
         }
         : else {
            : set_string var="cupboard_description" text = "an empty open cupboard" ;
            
         }
      }
   }
   
    update_drawer_description : subroutine {
      : set_string var = "drawer_description"  {((draweropen ? "an open drawer" : "a closed drawer"))}
      
      : if (draweropen) {
         : if (count "drawer" > 0) {

            : look_inside
               of               = "drawer"
               extract_the      = "description"
               store_results_in = "drawer_objects"
               make_known       = "true"
            ;
            : print_list_verbose  "drawer_objects"
               lead_in       = " (which contained "
               final_part    = ")"
               append_to_var = "drawer_description"
            ;
         }
          : else {
            : set_string var="drawer_description" text = "an empty drawer" ;
            
         }
      }
   }
      update_dish_description : subroutine {
      : set_string var = "dish_description"  {(("a porcelain dish"))}
         : if (count "dish" > 0) {

            : look_inside
               of               = "dish"
               extract_the      = "description"
               store_results_in = "dish_objects"
               make_known       = "true"
            ;
            : print_list_verbose  "dish_objects"
               lead_in       = " (which contained "
               final_part    = ")"
               append_to_var = "dish_description"
            ;
         }
       : else {
            : set_string var = "dish_description"  text = "an empty porcelain dish" ;
            
         }
   }
   update_bucket_description : subroutine {
      : set_string var = "bucket_description"  {(("a bucket"))}
         : if (count "bucket" > 0) {

            : look_inside
               of               = "bucket"
               extract_the      = "description"
               store_results_in = "bucket_objects"
               make_known       = "true"
            ;
            : print_list_verbose  "bucket_objects"
               lead_in       = " (which contained "
               final_part    = ")"
               append_to_var = "bucket_description"
            ;
         }
         : else {
            : set_string var = "bucket_description"  text = "an empty bucket" ;
            
         }
         
      
   }
   update_sink_description : subroutine {
      : set_string var = "sink_description"  {(("the sink"))}
         : if (count "sink" > 0) {

            : look_inside
               of               = "sink"
               extract_the      = "description"
               store_results_in = "sink_objects"
               make_known       = "true"
            ;
            : print_list_verbose  "sink_objects"
               lead_in       = " (which contained "
               final_part    = ")"
               append_to_var = "sink_description"
            ;
         }
         : else {
            : set_string var = "sink_description"  text = "an empty sink" ;
            
         }
         
      
   }
    update_drawer_1_description : subroutine {
       :set_string var = "drawer_1_description" text ="a drawer";
      : if (count "drawer_1" > 0) {

         : look_inside
         of               = "drawer_1"
         extract_the      = "description"
            store_results_in = "drawer_1_objects"
           make_known       = "true"
         ;
           : print_list_verbose  "drawer_1_objects"
           lead_in       = " (which contained "
           final_part    = ")"
              append_to_var = "drawer_1_description"
        ;
        }
        : else {
            : set_string var = "drawer_1_description"  text = "an empty drawer" ;
            
         }
     
   }
    update_bottle_description : subroutine {
       : set_string var = "bottle_description"  {((bottle_open ? "an (open) bottle" : "a (closed) bottle"))}
      : if (count "bottle" > 0) {

         : look_inside
         of               = "bottle"
         extract_the      = "description"
            store_results_in = "bottle_objects"
           make_known       = "true"
         ;
           : print_list_verbose  "bottle_objects"
           lead_in       = " (which contained "
           final_part    = ")"
              append_to_var = "bottle_description"
        ;
        }
        : else {
            : set_string var = "bottle_description"  text = "an empty bottle" ;
            
         }
     
     
   }
      update_flask_description : subroutine {
       : set_string var = "flask_description"  {((flask_open ? "an (open) flask" : "a (closed) flask"))}
      
      : if (count "flask" > 0) {

         : look_inside
         of               = "flask"
         extract_the      = "description"
            store_results_in = "flask_objects"
           make_known       = "true"
         ;
           : print_list_verbose  "flask_objects"
           lead_in       = " (which contained "
           final_part    = ")"
              append_to_var = "flask_description"
        ;
        }
        : else {
            : set_string var = "flask_description"  text = "an empty flask" ;
            
         }
     
     
   }
#UPDATE CONTAINER DESCRIPTION END
//CONTAINER CODE
#PRINT CONTAINER CONTENTS START
  
   
    print_cupboard_contents : subroutine {
      : if (count "cupboard" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "cupboard"
            extract_the      = "description"
            store_results_in = "cupboard_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "cupboard_objects" lead_in=""
           final_part    = "."
           when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
   }
   
    print_drawer_contents : subroutine {
      : if (count "drawer" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "drawer"
            extract_the      = "description"
            store_results_in = "drawer_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "drawer_objects" lead_in=""
           final_part    = "."
           when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
   }
   
    print_drawer_1_contents : subroutine {
      : if (count "drawer_1" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "drawer_1"
            extract_the      = "description"
            store_results_in = "drawer_1_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "drawer_1_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
     print_bottle_contents : subroutine {
      : if (count "bottle" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "bottle"
            extract_the      = "description"
            store_results_in = "bottle_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "bottle_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
    print_flask_contents : subroutine {
      : if (count "flask" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "flask"
            extract_the      = "description"
            store_results_in = "flask_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "flask_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
    print_bucket_contents : subroutine {
      : if (count "bucket" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "bucket"
            extract_the      = "description"
            store_results_in = "bucket_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "bucket_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
    print_dish_contents : subroutine {
      : if (count "dish" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "dish"
            extract_the      = "description"
            store_results_in = "dish_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "dish_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
     print_sink_contents : subroutine {
      : if (count "sink" > 0) {
         : append   "It contained \s" ;
         : look_inside
            of               = "sink"
            extract_the      = "description"
            store_results_in = "sink_objects"
            make_known       = "true"
         ;
         : print_list_verbose  "sink_objects" lead_in=""
          final_part    = "."
          when_empty = "nothing."  ;
         : return ;
      }
   
      : else {
         : print "It was empty." ;
      }
      
      
   }
#PRINT CONTAINER CONTENTS END

ambient_faeries : subroutine {
      
   
      : if (!is_at "zone_wetland"&&!is_at "zone_dmv"&&!is_at "church"&&!is_at "church_1"&&!is_at "porch"&&!is_at "poachers_house"&&!is_at "poachers_scullery"&&!is_at "vet"&&!is_at "pub"&&!is_at "pub_cellar"&&!is_at "pub_cellar_passage"&&!is_at "chapel"&&!is_at "zone_inside_vicarage"&&!is_at "zone_garden"&&!is_at "zone_outside_vicarage"&&!is_at "outbuilding"&&!is_at "on_chair"&&!is_at "on_monument"&&!is_at "on_steps"&&!is_at "on_the_table"&&!is_at "potting_shed"&&!is_at "hut"&&!is_at "nevernear_cottage"&&!is_at "zone_rockery"&&!is_at "well") {
: if (chance (7)) {

: cycle predictable_order = "false"  key = "ambient faeries"  {
            : if (true) {
            : if (seen_faeries) {
               : print "Arthur was suddenly surrounded by a swarm of tiny people all around him. They seemed everywhere: on his clothing and in his hair and darting around his face. He panicked and waved his arms about wildly - and then, quite suddenly, they disappeared." ;
            }
            : else {
               : print "Arthur was suddenly surrounded by a swarm of strange insects all around him. They seemed everywhere: on his clothing and in his hair. He panicked and waved his arms about wildly - and then, quite suddenly, they disappeared." ;
            }
            }
            : if (true) {

            : if (seen_faeries) {
               : print "Arthur saw a group of little people dash by his feet." ;
            }
            : else {
               : print "Arthur saw tiny things dashing by his feet. He supposed they must be beetles of some sort." ;
            }
            }
            : if (true) {
            : if (seen_faeries) {
               : print "A tiny person landed on Arthur's sleeve. It seemed to be trying to speak to him, so he brought his arm close to his face to see it more clearly. The thing laughed and a tiny, shiny thing shot from its hand. Feeling a sharp pain above his eye, Arthur felt his brow and discovered there a tiny knife, embedded in his flesh. He shuddered to think what might have happened if its aim had been a little lower. The creature grabbed its knife and disappeared. " ;
            }
            : else {
               : print "A strange insect landed on Arthur's sleeve. He bent his arm to bring it a little closer and had a fleeting glimpse of something glinting before he felt a sharp pain n his brow. He shook off the thing and it disappeared. It seemed that, even at a distance, it had stung him." ;
                      
            }
            }
            : if (true) {
              : if (seen_faeries) {
               : print "Arthur saw little people everywhere. They seemed to point and laugh at him as he walked by, and their laughter was not kind." ;
            }
            : else {
               : print "Arthur saw unfamiliar insects everywhere and had the strangest impression that they meant him harm." ;
            }
            }
            : if (true) {
            : if (seen_faeries) {
               : print "Arthur felt a tap on his cheek and turned to see a tiny woman standing on his shoulder, holding a basket woven from reeds. She spat at him and vanished. Arthur wiped the tiny glob of mucus from his jacket and felt rather shaken." ;
            }
            : else {
               : print "Arthur felt a tap on his cheek and turned to see a strange insect there. It spat something and then flew away. Arthur wiped the substance from his jacket and felt rather shaken." ;
               }
            }
            : if (true) {
            : if (seen_faeries) {
               : print "Arthur felt something crawl up his trouser leg and naturally panicked, jumping about and patting the area wildly. A moment later, he felt a sharp pain in his shin and saw a tiny person emerge from his clothing and float away." ;
            }
            : else {
               : print "Arthur felt something crawl up his trouser leg and naturally panicked, jumping about and patting the area wildly. A moment later, he felt a sharp pain in his shin and saw some sort of insect emerge from his clothing and float away." ;
                             
            }
            }
            : if (true) {
            : if (seen_faeries) {
               : print "Something became tangled in Arthur's hair. He attempted to brush out whatever it was and felt a sharp pain in his finger. He shook his head rapidly and the thing fell out. Arthur saw upon the ground a tiny person. It picked itself up, mouthed a silent curse at him, and vanished." ;
            }
            : else {
               : print "Something became tangled in Arthur's hair. He attempted to brush out whatever it was and felt a sharp pain in his finger. He shook his head rapidly and the thing fell out. Arthur saw upon the ground a strange insect that almost seemed to gesture at him before it scurried away." ;
                          
            }
               
            }
            
            : print "A couple of strange looking individuals walked by. They were rather tall and very pale and were dressed in curiously old-fashioned clothing. As they passed Arthur they stopped talking and gave him a knowing look. He glanced back at them after they'd gone and found to his surprise that they had disappeared." ;
               : print "A crowd of ruffians appeared from nowhere and began to brawl; suddenly Arthur was surrounded by flailing fists and kicking feet. He ducked and covered his head, but when he looked up again, they had gone." ;
                  : print "At a little distance, Arthur saw two people quarrelling violently. He was generally relucant to intervene in domestic affairs but felt he had to when the woman pulled back her fist and punched her companion in the face. He ran over but as he approached they stopped fighting and ran away, leaving blood on the ground." ;
                     : print "A group of people staggered by. They were an incongruous bunch - some looked ordinary enough but other were curiously dressed and had a peculiar insubstantial quality about them. They all seemed incredibly drunk." ;
                        : print "Someone whistled to Arthur and he turned to see a lanky youth grinning at him. There was something odd about his old-fashioned clothing and his curiously insubstantial appearance. Arthur approached him and the boy seemed to simply melt away. Arthur was rather shaken." ;
                           : print "A man staggered by, wearing ragged, blood-stained clothing and clutching his head. He scowled and backed off as Arthur approached; when he tried to speak to him, he ran away." ;
                              : print "As if from nowhere, a ragtag bunch of men and women appeared. They were singing loudly and seemed rather drunk. One of them, a woman in curiously old-fashioned clothing, smiled at him as she passed by. It was a smile with no warmth in it. Arthur looked back and was surprised to see that she was no longer amongst them." ;
   
}

         
      
            
      }
       }
}

load_camera : subroutine {
   : if (is_carried "box_brownie") {
   : if (!cameraloaded) {
      : if (cameraopen) {
      : if (is_carried "film"&&film_description=="a roll of film") {
         : print "It had been many years since Arthur had loaded a Brownie, but his fingers remembered what to do. He pulled out the winding key to release the inner chamber and the metal box slid into his hand. He fixed the spool of film into the holder in the top of the box and threaded the film across the rollers and into the slot in the empty reel beneath. He then slotted the inner back into the body of the camera and pushed it home with a click." ;
         : destroy "film" ;
          : set_true "cameraloaded" ;
          :done;
            }
            : else {
            : if (film_description=="a roll of exposed film")
            { 
               : print "There was no point in loading the camera with a used roll of film." ;
               : done;
               
            }
            : else {
                   : print "But Arthur didn't have anything to load the camera with." ;
                   : done ;
                   
            }
   }
             }
             : else {
                : print "Arthur would need to open the camera first." ;
                : done ;
                
             }
             
      }
      : else {
         : print "But the camera was already loaded." ;
         : done ;
         
      }
   }
   : else {
      : print "That didn't seem like something that Arthur could do at the present time." ;
       : done ;
   }
   
   
}
// sink_washing : subroutine {

// : if (parent_of "film"=="sink") {
//           :if (film_description=="a strip of film negatives (fixed, unwashed)") {
//                 : print "The water washed the fixer off the film." ;
//                : set_string var = "film_description"  text = "a strip of film negatives (processed, wet)" ;                   : remove_trait subject="film" trait="wettable_t";   
//                 : increment "nonwettable_things_in_sink" ;
//             }
//             : return ;
//             }
//             : else_if (parent_of "sheet"=="sink") {
//                 : if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
//                 : print "The water washed the fixer off the sheet." ;
//                : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, wet)" ;                   : remove_trait subject="film" trait="wettable_t";
//                 : increment "nonwettable_things_in_sink" ;
//             }
//             : return ;
//             }
            
         
// }

describe_images : subroutine {

   
      : clear "photos";
      : set_string var = "images_descriptionstring"  text = "" ;
      : if (photo_inside_vicarage) {
          : collection_push { collection = "photos" text = "inside The Vicarage" }
      }
      : if (photo_outside_vicarage) {
          : collection_push { collection = "photos" text = "outside The Vicarage" }
      }
      : if (photo_taplow) {
          : collection_push { collection = "photos" text = "a somewhat surprised-looking Mrs Taplow" }
      }
        : if (photo_thurgood) {
          : collection_push { collection = "photos" text = "a rather uncomfortable-looking Mr Thurgood" }
      }
       : if (photo_lanes) {
          : collection_push { collection = "photos" text = "around the lanes" }
      }
        : if (photo_dmv) {
          : collection_push { collection = "photos" text = "around the deserted medieval village" }
      }
      : if (photo_outside_church) {
          : collection_push { collection = "photos" text = "outside the church" }
      }
       : if (photo_inside_church) {
          : collection_push { collection = "photos" text = "inside the church" }
      }
  : if (photo_chapel_outside) {
          : collection_push { collection = "photos" text = "inside the chapel" }
      }
  : if (photo_road_village) {
          : collection_push { collection = "photos" text = "the road to the village" }
      }
      : if (photo_around_village) {
          : collection_push { collection = "photos" text = "around the village" }
      }
        : if (photo_wetland) {
          : collection_push { collection = "photos" text = "the wetland" }
      }
        : if (photo_garden) {
          : collection_push { collection = "photos" text = "the garden" }
      }
        : if (photo_rockery) {
          : collection_push { collection = "photos" text = "the rockery" }
      }
   
       : if (faerycounter==-1) {
       : if (tiny_man_photo) {
       : collection_push { collection = "photos" text = "a tiny man at the rockery" } 
       }
       : else {
       : collection_push { collection = "photos" text = "small figures at the rockery" }   
       }
      }
: if (is_carried "film") {
     : print_list_verbose  "photos"
         lead_in       = "There were negatives of "
         final_part    = "."
         final_sep     = ", and " 
         append_to_var = "images_descriptionstring"
      ;
}
: else_if (is_carried "sheet") {
    : print_list_verbose  "photos"
         lead_in       = "There were prints of "
         final_part    = "."
         final_sep     = ", and " 
         append_to_var = "images_descriptionstring"
      ;
}



    

      : print {(images_descriptionstring)}
   
 
}

keg_contents : subroutine {
      : clear "keg_objects";
      : set_string var = "whats_in_the_keg"  text = "" ;
       : collection_push { collection = "keg_objects" text = "some ale" }
      : if (!has_not_created "mistletoe_sprig"&&!is_exists "mistletoe_sprig") {
          : collection_push { collection = "keg_objects" text = "a sprig of mistletoe" }
      }
      : if (!has_not_created "toadstool"&&!is_exists "toadstool") {
          : collection_push { collection = "keg_objects" text = "a toadstool" }
      }
       : if (blood_in_keg) {
          : collection_push { collection = "keg_objects" text = "some blood" }
      }
       : if (gossip_in_keg) {
          : collection_push { collection = "keg_objects" text = "tittle-tattle" }
      }
     
     : print_list_verbose  "keg_objects"
         lead_in       = "It contained "
         final_part    = "."
         final_sep     = " and " 
         append_to_var = "whats_in_the_keg"
     
    
      ;

: print {(whats_in_the_keg)} ;

: if (count("keg_objects") > 0&&count ("keg_objects")<5) {
   : print "Arthur looked at the murky brew and felt certain that it was missing something.";
}
: if ( count("keg_objects")==5) {
   : print "Arthur looked at the odorous concoction and felt satisfied that it was complete." ;
   
}


}

object_accessibility : subroutine {
     
       // checking if subject is a. in a closed container and b. contained in something already in another closed container eg bottle in cupboard
      
   //    : if (!is_present (s1())) {
   //       : nope;
   //  }
      
      : if (parent_of (s1())=="cupboard" && !cupboardopen) {
         : nope ;
         
      }
     
       : if (parent_of (s1())=="drawer") {
       : if (!draweropen) {
          : nope ;
      }
      }
      
   
      
      : if (parent_of (s1())=="dish") {
         : if (parent_of "dish"=="cupboard"&&!cupboardopen) {
         : nope ;
         }
         
         : if (parent_of "dish"=="drawer"&&!draweropen) {
         : nope ;
         }
      }
      : if (parent_of (s1())=="bottle") {
         : if (parent_of "bottle"=="cupboard"&&!cupboardopen) {
         : nope ;
         }
         

         : if (parent_of "bottle"=="drawer"&&!draweropen) {
         : nope ;
         }
      }
      : if (parent_of (s1())=="flask") {
         : if (parent_of "flask"=="cupboard"&&!cupboardopen) {
         : nope ;
         }
        
   
         : if (parent_of "flask"=="drawer"&&!draweropen) {
         : nope ;
         }
      }
      : if (parent_of (s1())=="bucket") {
         : if (parent_of "bucket"=="cupboard"&&!cupboardopen) {
         : nope ;
         }
       
         
         : if (parent_of "bucket"=="drawer"&&!draweropen) {
         : nope ;
         }
      }
     
}

washing_off : subroutine {

            : if (film_description=="a strip of film negatives (unfixed, unwashed)") {
               : print "The water washed the developer off the film." ;
               : set_string var = "film_description"  text = "a strip of film negatives (unfixed, washed)" ;
               
            }
            : else_if (film_description=="a strip of film negatives (fixed, unwashed)") {
                : print "The water washed the fixer off the film." ;
               : set_string var = "film_description"  text = "a strip of film negatives (processed, wet)" ;                   : remove_trait subject="film" trait="wettable_t";  
               : if (parent_of "film"=="sink") {
                  : increment "nonwettable_things_in_sink" ;
               }
               : if (parent_of "film"=="dish") {
                  : increment "nonwettable_things_in_dish" ;
               }
               : if (parent_of "film"=="bucket") {
                  : increment "nonwettable_things_in_bucket" ;
               }
            
               
            }
           
            : if (sheet_description=="a sheet of contact prints (unfixed, unwashed)") {
               : print "The water washed the developer off the sheet." ;
               : set_string var = "sheet_description"  text = "a sheet of contact prints (unfixed, washed)" ;
               
            }
            : else_if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
                : print "The water washed the fixer off the sheet." ;
               : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, wet)" ;                   : remove_trait subject="sheet" trait="wettable_t";    : if (parent_of "sheet"=="sink") {
                  : increment "nonwettable_things_in_sink" ;
               }
               : if (parent_of "sheet"=="dish") {
                  : increment "nonwettable_things_in_dish" ;
               }
               : if (parent_of "sheet"=="bucket") {
                  : increment "nonwettable_things_in_bucket" ;
               }
            }
         
        
         
}
photosensitive : subroutine {

   : if (is_present "packet"&&packet_open||is_present "sheet"&&sheet_description=="a sheet of exposed, undeveloped photo paper"||is_present"sheet"&&sheet_description=="a sheet of contact prints (unfixed, unwashed)"||is_present "sheet"&&sheet_description=="a sheet of contact prints (unfixed, washed)"||is_present "film"&&film_description=="a strip of undeveloped film"||is_present "film"&&film_description=="a strip of film negatives (unfixed, unwashed)"||is_present "film"&&film_description=="a strip of film negatives (unfixed, washed)"

) {
   : print "Arthur decided not to as he did not want to risk spoiling photosensitive material by casting white light in the darkroom." ;
   : done ;
   }
    : if (is_present "sheet"&&sheet_description=="a sheet of new, unexposed photo paper"){
  : if (negs_on_sheet&&glass_on_sheet) {
     : print "Arthur decided not to attempt an exposure with such a feeble light. A more powerful light was needed to produce satisfactory contact prints." ;
     : done ;
     
  }
     : print "Arthur decided not to as he did not want to risk spoiling photosensitive material by casting white light in the darkroom." ;
   : done ;
}

}

seance_check : subroutine {

: clear "seance_check" ;
   : set_string var = "seance_check_string"  text = "" ;
 : if (round_table_description=="a round table (by the window)") {
          : collection_push { collection = "seance_check" text = "the table is in the middle of the room" }
      }
       : if (light_on) {
          : collection_push { collection = "seance_check" text = "the electric light is off" }
      }
       : if (!is_present "holder"&&!is_present "holder_1") {
          : collection_push { collection = "seance_check" text = "we have a candle to show the way" }
      }
       : if (is_present "holder") {
           : if (candleinholder) {
            : collection_push { collection = "seance_check" text = "the candle is lit" }
            }
            : else {
            : collection_push { collection = "seance_check" text = "we have a candle" }
            }
                        }
         : if (is_carried "holder_1") {
              : collection_push { collection = "seance_check" text = "you are not carrying the candle holder" }
         }
         : if (!sitting) {
         : if (ottoline_description=="Ottoline Elderfield") {
         
            : collection_push { collection = "seance_check" text = "we are both sitting down" }
            }
            : else {
               : collection_push { collection = "seance_check" text = "you are sitting down" }
            }
            }
            : if (!holding_hands) {
                 : collection_push { collection = "seance_check" text = "we are holding hands" }
            }
             : if (something_is_blocking_the_spirits&&!housespellbroken) {
                 : collection_push { collection = "seance_check" text = "whatever it is that is blocking the spirits is removed" }
            }
            : if (!is_present "chair_4") {
            : collection_push { collection = "seance_check" text = "most importantly of all, there are no interruptions" }
            }

         : print_list_verbose  "seance_check"
         lead_in       = "\"Everything must be prepared,\" said Ottoline. \"We must make sure "
         final_part    = ".\""
         final_sep     = " and " 
         append_to_var = "seance_check_string"
      ;
              : print {(seance_check_string)}
            
            }
         
chair_creation : subroutine {
   
   : if (!is_exists "chair_1") {
      : create "chair_1" ;
      : return ;
      
   }
     : else_if (!is_exists "chair_2") {
      : create "chair_2" ;
       : return ;
   }
   : else {
     : if (!is_exists "chair_3") {
        : create "chair_3" ;
         : return ;
        
     }
     ;
      
   }
   
  
}
chair_deletion : subroutine {
   
   : if (is_present "chair_1") {
      : destroy "chair_1" ;
       : return ;
   }
      : else_if (is_present "chair_2") {
      : destroy "chair_2" ;
       : return ;
      
   }
     : else {
    : if (is_exists "chair_3") {
        : destroy "chair_3" ;
         : return ;
    }
    
      
   }
}
//zaba
positive_spell_development : subroutine {

   : execute_one_at_random {
   : print "Arthur felt a build up of positive energy." ;
   : print "Arthur felt that things were heading in the right direction." ;
   : print "Arthur felt suddenly elated." ;
   }
   
   : if (is_present "ottoline_elderfield") {
       : execute_one_at_random {
   : print "\"I think it's working!\" said Ottoline." ;
   : print "\"Yes,\" said Ottoline, \"I'm sure it's having the right effect.\"" ;
   : print "\"Keep going Arthur!\" said Ottoline. \"It's working!\"" ;
   }
   }

: increment "spell" ;



}


negative_spell_development : subroutine {

: set_integer var = "spell"  value = "0" ;

    : execute_one_at_random {
   : print "Arthur felt energy draining away." ;
   : print "The world around seemed to flatten a little as energy disippated." ;
   : print "Arthur sensed that something was wrong." ;
   }
   : if (is_present "ottoline_elderfield") {
       : execute_one_at_random {
   : print "\"No, that's not right!\" said Ottoline." ;
   : print "\"Oh Arthur, it's going wrong!\" said Ottoline, despairingly." ;
   : print "\"I don't think that's how it is supposed to go!\" said Ottoline." ;
   }
   }
}
   }

######################################
#  On Pre-Command                     #
######################################
on_pre_command {

   : if (true) {
      : mask {
       
         : set_string var = "cupboard_description" text = "a cupboard" ;
         : set_string var = "drawer_description" text = "a drawer" ;
         : set_string var = "drawer_1_description" text = "a drawer" ;
         : set_string var = "dish_description" text = "a porcelain dish" ;
         : set_string var = "bucket_description"  text = "a bucket" ;
           : set_string var = "sink_description"  text = "the sink" ;
            : set_string var = "bottle_description" text = "a bottle" ;
               : set_string var = "flask_description" text = "a flask" ;
      }
   }



   : if (is_dark&&is_inaccessible_darkness_verb) {
       : append "Arthur fumbled around in the dark." ;
  : done ;
  
   }
}


######################################
#  On Command                        #
######################################

on_command {


: match "theme _"  {
   : add_choice "black ink, white paper"  {
      : set_theme "blackonwhite" ;
   }
    : add_choice "black ink, pale yellow paper"  {
      : set_theme "blackonyellow" ;
   }
    : add_choice "black ink, light blue paper"  {
      : set_theme "blackonblue" ;
   }
    : add_choice "white ink, black paper"  {
      : set_theme "whiteonblack" ;
   }
    : add_choice "yellow ink, black paper"  {
      : set_theme "yellowonblack" ;
   }
    : add_choice "green ink, black paper"  {
      : set_theme "greenonblack" ;
   }
  : choose "Choose from the following ink and paper colour combinations:" ;
  : redescribe;
  
}


# TO REMOVE LATER start

: match "summon fragment2"  {
   : create "fragment_2" target = "inventory" ;
}

: match "summon fragment3"  {
   : create "fragment_3" target = "inventory" ;
}

// : match "images-"  {
//    : gosub "describe_images" ;
   
// }


# TO REMOVE LATER end

#UNIMPORTANT STUFF start

: match "_ _"  {
: if (is_present (s1())) {
: if (noun1_is "ewer"||noun1_is "basin"||noun1_is "bench"||noun1_is "hook"||noun1_is "fanlight"||noun1_is "fireback"||s1()== "mangle"&&!verb_is "turn"||s1()== "tombstone"||s1()== "gravestone"||noun1_is"knick"||noun1_is "cobweb"||noun1_is "spider"||noun1_is "bottles"||noun1_is "vegetables"||noun1_is "flowerbed"||noun1_is "canes"||noun1_is "herbs"||noun1_is "seedlings"||noun1_is "pea"||noun1_is "marrow"||noun1_is "raspberries"||noun1_is "leeks"||noun1_is "leek"||noun1_is "tombstone"||noun1_is "floor"||noun1_is "beams"||noun1_is "reed"||noun1_is "dragonfly"||noun1_is "horses"||noun1_is "pigs"||noun1_is "loom"||noun1_is "vessels"||noun1_is "stones"||noun1_is "skins"||noun1_is "pipes"||noun1_is "jars"||noun1_is "ceiling"||noun1_is "blanket"||noun1_is "silk"||noun1_is "spiders") {
: if (!verb_is "examine") {
       : print "Arthur had an intuition he shouldn't waste time bothering with that." ;
      : done ;
         
}
}
}
: if (noun1_is "fox"&&is_at "church"&&noticed_fox_carving) {
   : if (!verb_is "examine") {
      : print "Arthur tried it hopefully and was a little disappointd when nothing whatsoever happened. He concluded that is was simply a carving and nothing more." ;
      : done ;
      
   }
   
}

}

#UNIMPORTANT STUFF end

#CREDITS start

: match "credits-;about-"  {
: clear_screen;

   : print "^i^The Faeries of Haelstowne^i^" ;
   : print "© 2021 Christopher Merriner" ;
   : print "Written in ADVENTURON 1.0.0 Beta 70 (Adventuron © 2017 Chris Ainsley)" ;
   : print "Cover art by Christopher Merriner, incorporating elements of freely available clip art." ;
   : print "ACKNOWLEDGEMENTS:" ;
   : print "Credit is due to Chris Ainsley for not only creating Adventuron in the first place but also for being an incredibly attentive and responsive developer for whom no question is too trifling nor feature request too trivial not to be given his full attention. Thanks for putting up with all my questions Chris; I really couldn't have done it without you. " ;
   : print "Enormous thanks are owed to my playtesters, all of whom willingly gave up many hours of their precious time to plough doggedly through a rather large and complicated (and, in its beta incarnation, a very buggy) game, ferreting out bugs, spotting typos and making many thoughtful and insightful suggestions, most of which are incorporated into the finished article. It is a much, much better game for all of your efforts and I am deeply grateful to you: Dee Cooke, Alex Harby, Jim MacBrayne, Małgorzata Reczko, Mike Russo and Joshua Wilson. Additionally, I am indebted to Rovarsson, who played the competition release of the game with a tester's eye and offered much useful feedback, spotting further bugs and making many helpful suggestions which I incorporated into the post-comp release." ;
   : print "Any bugs, typos or other problems that remain are, of course, entirely my responsibility." ;
   : print "The author can be contacted at: christopher.merriner@gmail.com" ;
   : press_any_key ;
   : redescribe;
   
}

#CREDITS end

#CREDITS start

: match "amusing-"  {
   : print "Arthur failed to see what was so funny." ;
   
}

#CREDITS end

#SAVE start

: match "save-"  {
   : print "(Choose save slot below or, to save to file, quit this menu with option 4 and type SAVEF.)" ;
:save;

   
}

#SAVE end

#LOAD start
: match "load-"  {
   : print "(Choose load slot below or, to load from file, quit this menu with option 4 and type LOADF.)" ;
:load;

   
}
#LOAD end

: if (spell==18) {
   : match "use mirror; show mirror; wave mirror; reflect mirror; reflect spell"  {
    : print "Arthur held the mirror before him and stepped between Ottoline and the Faery Queen, putting himself directly in the path of her magic." ;
    : press_any_key ;
    : clear_screen;
    
 : print "Fire spat from the tips of her fingers, struck the silvered surface of the mirror and reflected back upon her. The Queen shrieked and threw wide her arms, catching the energy and directing it back at Arthur. " ;
      : press_any_key ;
      : print "Fire leapt back and forth between them; Arthur staggered back as is became ever colder, ever brighter until it was unbearable in intensity. There was a  sudden, sharp crack and Arthur realised, with horror, that the mirror was beginning to fracture. He shouted to Ottoline, \"I can't hold it. Get out! Get away! The mirror is breaking!\"" ;
      : press_any_key ;
      : print "And then, from out of nowhere, stepped a man with an unruly mass of red hair pushed back from a high forehead, a long nose and piercing green eyes gazing from beneath arched brows. Arthur recognised him immediately from the portrait in Nevernear Cottage. It was Richard Travais himself.";
   
     : press_any_key ;
     : clear_screen;
     
      : print "He stood beside Arthur, holding something before him. It was a bronze mirror with strange symbols around the rim and a concave surface, the very twin of Arthur's own." ;
      : press_any_key ;
      : print "Travais thrust his mirror into the stream of cold fire, beside Arthur's. With both mirrors focused upon her, the Faery Queen screamed and twisted, her horse bucking frantically beneath her. For a few moments she seemed to hold back the tide of reflected energy, but it was too late. " ;
      : press_any_key ;
      : print "With a final, terrible scream she buckled and shrivelled and then vanished in a brilliant, silent explosion that engulfed her and all her entourage. " ;
      : press_any_key ;
      : print "There was a moment of terrible brightness and then darkness slammed down like a shutter, the horses and riders disappeared, and the air was suddenly full of moths, fluttering and circling wildly. And then they too dispersed into the darkness and were gone." ;
      : press_any_key ;
: clear_screen;

      : print "Arthur looked around. He was in the empty field where once, five hundred years ago, the village of Old Haelstowne had stood. The buildings and the streets had disappeared, the villagers also. Behind him, a little shaken but otherwise unharmed was Ottoline, holding in her arms the pale and trembling but very human form of the Reverend Jeremiah Peldash. There was a distant rumble of thunder and the first fat raindrops began to fall." ;
       : press_any_key ;
    
       
      : print "\"Is it over?\" whispered Ottoline." ;
      : print "\"I think...\" began Arthur, but stopped as he saw a shadowy figure at the other side of the square, raising a hand in a gesture of farewell. " ;
      
     : press_any_key ;
     : print "Arthur raised his also, as rain began to fall in a torrent; blinking water from his eyes, he thought he saw a glimpse of a slender, bushy-tailed creature disappearing into the darkness. But when he looked again, there was nothing and nobody there." ;
     : press_any_key ;
     
     : clear_screen;
   : pause "1000" ;
   
       : print "\n\n\n\n\n\n\n\n\n\n\n\n^c^August 12th 1948\n";
   : pause "3000" ;
   
       : clear_screen;
       : pause "1000" ;
       
      : print "Arthur drove the Morris along narrow dusty roads, past the sweet-smelling  hedgerows and patchwork fields drowsing in the late summer heat, and thought how little changed this part of the country seemed. If it wasn't for the blacked-out signposts and the occasional pillbox one might almost imagine the war had never happened." ;
      : press_any_key ;
      : print "Daphne dozed in the passenger seat - the week away had proven, like the best of holidays, to be an exausting experience - but the boys were wide awake and quarrelling in the back. They groaned as Arthur turned off the road and drove into a small village where he stopped at a garage." ;
      : press_any_key ;
      : print "\"Just a quick stop,\" he assured them. \"Need to fill up. Unless you want to spend the night at the side of the road?\"\n\"Sounds super!\" replied the eldest. Arthur sighed and waited for the owner to attend.\n\"I say,\" he asked the elderly fellow when he'd finished filling the tank, \"I don't even know the name of this place. The signpost up the road is still blacked out.\"" ;
   : press_any_key ;
      : print "\"This is Haelstowne, sir\" replied the owner, and bid Arthur a good day.\n" ;
      : press_any_key ;
      : clear_screen;
      
      : print "They drove out of the village along increasingly narrow country lanes, passing an ancient-looking pile on the way.\n\"The Vicarage,\" Arthur told Daphne. \"I stayed there once, a long time ago.\"\n\"You say you had a friend around here?\" asked Daphne. She was used to indulging her husband's whims.\n\"Yes, in a cottage somewhere a little further along. It was always rather hard to find.\"" ;
      : press_any_key ;
      : print "Presently, they arrived at the gate of Nevernear Cottage. The place was exactly as he recalled it, which gave him hope that, even after all this time...\nThere was a woman in the garden. Arthur called politely and she looked up from her weeding. He was disappointed not to recognise her." ;
      : press_any_key ;
      : print "\"Can I help?\" she asked, brightly.\n\"I'm sorry,\" replied Arthur. \"But I knew someone who lived here a long time ago. Ms Elderfield. I was hoping that she still did.\"" ;
      : press_any_key ;
      : print "\"Ms Elderfield? Are you a friend of hers?\"\nArthur considered. It had been such a long time.\n\"Yes. Yes I am. Arthur Mapple is the name.\"\n\"Millicent Morgan. Well, I'm sure Ottoline will be delighted to see you. We don't have many visitors. Do come in.\"" ;
   : press_any_key ;
   
      : clear_screen;
      : print "The inside was as unchanged as the outside - and so was Ottoline. She smoked and nattered away as though no time had passed at all, while Millicent served tea and fussed over Daphne and the boys, both of whom were fascinated by the immortal Crackers, still perched within his iron cage." ;
      : press_any_key ;
      : print "\"Whatever happened to Peldash?\" enquired Arthur as the conversation turned to the events of long ago.\n\"Oh, long gone,\" Ottoline chuckled. \"Left the ministry and joined a Thelemic order of some sort. He's probably a high priest by now. His replacement is rather more traditional. It took him quite a while for him to forgive us our sins,\" she indicated herself and her companion, \"but he came round to it, eventually.\"" ;
      : press_any_key ;
      : clear_screen;
      
      : print "They said their goodbyes and drove away.\n The boys seemed to have enjoyed the excursion and Daphne had humoured him, as ever; he was glad he'd made the stop. " ;
      : press_any_key ;
      : print "They had just turned the corner into Vicarage lane when one of the boys cried, \"Stop!\" \nArthur slammed the brakes and the car skidded to a halt. From the footpath to the old village site slipped a fox, sleek and sharp-eyed. Unhurriedly it crossed the lane in front of the car, pausing halfway to look at them inquisitively before carrying on. " ;
      : press_any_key ;
      : print "\"How super!\" said one of the boys excitedly.\n \"Just look at that!\" said the other. They had never seen one so close. \nIt disappeared into the hedgerow opposite. \"It was beautiful. Do you think we'll ever see another one like it?\" " ;
      : press_any_key ;
      : print "Arthur released the brake and set off once more towards the main road.\n\"No,\" he said thoughtfully as he drove away. \"I'm not sure that we ever will.\"\n\n^c^THE END" ;
  : win_game ;
      
   }
   
}




: if (is_at "DMV_2"&&traptor==6&&endgame&&countdown_horses<1&&is_movement_command () ) {
   : print "Arthur tried to leave and found that there was a barrier stopping him. It was as though the outside world had ceased to exist and all that remained was the village square of Old Haelstowne. " ;
   : done ;

}
: if (is_carried "spectacles_case_1"&&case1_open) {
: if (try_move() != "") {
   : if (is_at "cellar_passage"&&try_move()=="cellar_room"||is_at "cellar_room"&&try_move()=="coal_cellar"||is_at "coal_cellar"&&try_move()=="cellar_room"||is_at "cellar_room"&&try_move ()=="cellar_passage") {
       : move ;
   }
   : else {
      : print "Arthur shut the spectacles case to conceal the brilliant, unearthly light from the horseshoe nail." ;
 : set_false "case1_open" ;
 : set_string var = "case_description"  text = "a spectacles case (closed)" ;
 : press_any_key ;
 
 : move {
     
 }
  
  
   }
   
   
}

}


: if (is_at "darkroom") {
   : if (noun1_is "dust") {
    : print "Arthur wasn't particularly interested in the dust." ;
      : done ;
      
   }
   
}
#HINT start
: match "hint-"  {
: if (!first_hint) {
   : print "(Hints are dependent on place, time and items carried. If no hints are given, try a different place or time, or try holding different items.)" ;
   : set_true "first_hint" ;
   
}

: if (is_carried "box_brownie"&&cameraloaded&&filmended) {
   : print "Arthur was keen to develop the film to see what he had captured from the extraordinary scene at the rockery." ;
   :done;
}

: if (is_at "chapel") {
   : if (!is_worn "robes") {
          : print "Arthur felt a little underdressed to approach the altar. Perhaps, he pondered, some sort of ceremonial garb would help?" ; 
          : done ;
          
   }
   : else_if (!is_present "horseshoe_nail") {
      
   }
   

      
   }
: if (is_at "square") {
: if (is_present "frank_farthing"&&has_not_created "bandage") {
   : print "Frank Farthing looked in a bad way. Arthur thought he could do with a bandage to stop the bleeding. He wondered where he could get one." ;
   : done ;
}
: if (parent_of "frank_farthing"=="pump") {
   : print "Arthur thought that it would be a good idea to follow the inebriated and bleeding Frank Farthing. He might very well require the assistance of a police officer." ;
   : done ;
   
}

}
: if (is_at "wetland") {
: if (traptor>2) {
: if (has_not_created "broken_dagger"||is_exists "broken_dagger") {
: if (has_visited "sweet_track_bridge") {
      : print "Arthur felt that the information on the board might be the key to crossing the bridge." ;
      : done ;
      
}
}
}
}


: if (is_at "sweet_track_bridge") {
   : if (traptor<3) {
      : print "Arthur felt that crossing the bridge wasn't something that he needed to do at the moment. He decided to put it out of his mind until a little later on." ;
      : done ;
      
   }
   : else {
    : if (has_not_created "broken_dagger"||is_exists "broken_dagger") {
      : print "Arthur had found the information board most interesting, especially the part about ritual deposition of broken knives and daggers." ;
   : done ;
    }
    
   
   }
   
}
: if (is_present "ash") {
: if (!ash_follow&&!is_at "pub") {
   : print "Arthur wondered what might happen if he were to touch the insubstantial Ash." ;
   : done ;
}
: else {
   : print "Arthur felt that he should return Ash to Mr Jarbell." ;
   : done ;
   
}

}
: if (is_at "bell_loft") {
   : if (coffer_open&&hymn_books_in_coffer) {
      : print "Arthur imagined the coffer would be lighter if he took all of those heavy books out of it." ;
      : done ;
   }
   : if (!hymn_books_in_coffer&&!moved_coffer) {
      : print "Arthur wondered what he might discover if he moved the coffer." ;
      : done ;
      
   }
   
}
: if (is_at "footpath_1"&&daytime) {
   : if (!has_not_created "scones"&&has_not_created "twig") {
      : print "Arthur imagined how pleasant it might be to forget all his troubles for a while and feed the pretty little birds." ;
      : done ;
      
   }
   
}



: if (is_at "peldash_room") {
   : if (has_not_created "drawer_1") {
   : if (!wardrobe_open) {
      : print "Arthur thought that a look inside the wardrobe might be useful." ;
   }
   : else {
   : print "Arthur felt there was some relation between the base of the wardrobe and the panel beneath." ;
   
   }
   
      : done ;
      
   }
   
}

: if (is_at "pub") {
  :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) == 0){
  : print "Arthur wondered if he should investigate the pub games." ;
  : done ;
  
  }

    :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) > 0 &&( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) < 4){
    : print "Arthur thought it would be worth playing all of the pub games on offer." ;
        : done ;
    }
    : if (traptor<3) {
       : print "Arthur had an intuition that he wouldn't be able to investigate behind the bar at the moment. " ;
       : done ;
       
    }
    : else_if (jarbell_ask_counter==2) {
       : print "Arthur though it might be profitable to question Mr Jarbell again." ;
       : done ;
       
    }
    : if (has_not_created "tuning_hammer") {
       : print "Arthur wondered if the piano might warrant more thorough investigation." ;
       : done ;
       
    }
    
    
}

: if (is_at "chapel") {
   : if (has_not_created "horseshoe_nail") {
      : print "Arthur sensed that he had not yet come upon the correct object to place upon the paten." ;
      : done ;
   }
   : else {
   : if (has_not_created "horseshoe_nail_1") {
        : print "Arthur wondered what it was that the paten desired to be placed upon it. There seemed to be faery magic at work in this place. Perhaps something of faery origin was the thing that was needed. " ;
      : done ;
   }
   }
   : if (is_present "horseshoe_nail_1") {
      : print "Arthur wondered what he could secrete the glowing horseshoe nail in to take it out of the chapel. Some sort of small, light-tight container woud be the thing. He rememebered something he had found in Peldash's room at The Vicarage." ;
      : done ;
      
   }
   
}

: if (is_at "DMV_5") {
   : if (has_not_created "wooden_cover") {
      : print "Arthur wondered what might be hidden in that long grass." ;
      : done ;
   }
   : else_if (is_present "hole") {
   : if (!is_present "rope") {
    : if (!is_present "fence_post") {
        : print "Arthur looked at the forbidding hole in the ground and wondered if he might use a rope to go down into it." ;
      : done ;
    }
    : if (!rope_tied) {
        : print "Arthur looked at the forbidding hole in the ground and wondered if he might use a rope to go down into it." ;
        : done ;
        
    }
      }
      : if (!is_present "fence_post") {
          : print "Arthur felt that it might be useful to have something to attach the rope to. He looked around and saw nothing obvious. Perhaps if he had something he could fix into the ground then he could tie the rope to that." ;
         : done ;
      }
      
   : if (!fence_post_fixed) {
     : print "Arthur felt it might be useful if he fixed the fence post in the ground. He would need something to hammer it in with." ; 
     : done ;
     
   }
      : if (!rope_tied) {
            : print "Arthur though it might help to tie the rope to the fence post." ;
            : done ;
   }
   }
}

: if (is_at "pub_cellar") {
: if (has_not_created "keg") {
   : if (beer_tap_on) {
      : print "Arthur thought that he might turn off the tap on the keg before attempting to disconnect the hose." ;
      : done ;
}
   }
   : if (!is_beside "keg_1") {
      : print "Arthur thought that he should replace the keg that he had taken with another, otherwise someone up above was bound to notice when the beer dried up. " ;
      : done ;
   }
   : if (is_exists "keg") {
: if (beer_keg_description!="a beer keg (attached to the hose)") {
: print "Arthur though that he had better connect the hose to the keg before anyone up above noticed that the flow of beer had stopped and came down to investigate." ;
: done ;
}
: if (!beer_tap_on) {
   : print "Arthur thought that he had better turn on the beer tap to restore the flow of ale to the pumps up above." ;
   : done ;
}
}
}
: if (is_at "well") {
: if (has_not_created "waterlogged_thing") {
   : print "Arthur wondered what might be lurking in the deep, black water below." ;
   : done ;
   
}
: else_if (!is_carried "hook_pole") {
: print "Arthur had an intuition that he was not at present carrying anything that might be of use to retrieve the waterlogged thing." ;
: done ;

}

   
}


   : if (traptor==1) {
   : if (is_carried "vase") {
      : print "Arthur thought that the crack in the base of the vase was such that it might easily break." ;
          : done ;
   }
   
       : if (is_at "study") {
      : if (!moved_tapestry) {
        : print "Arthur had noted the relation of the study walls to the staircase beyond and realised that there must be a space beneath the stairs. It might well be hidden, but accessible from this room." ;
          : done ;
      }
      }
      
      : if (is_at "darkroom") {
       : if (cupboard_stuck) {
          : print "Arthur fancied that he could prise open that cupboard if he had something thin enough to get between the door and the frame. A knife would do it." ;
            : done ;
       }
           : if (is_present "weight"&&is_present "dish"&&has_not_created "instructions") {
           : print "Arthur wasn't sure what this 'Haresnape & Balls' business was about. Perhaps there were some instructions to be found? Amongst the junk in the cellar seemed a likely place." ;
           : done ;
    }
    
      : if (film_description=="a roll of exposed film") {
      : if (has_not_created "safelight") {
         : print "Arthur read the notice stuck to the wall and realised that he would not be able to carry out any photographic work in there without a red light. If there was nothing to hand then he would have to improvise. He needed a light source and something transparent and red to filter it through." ;
             : done ;
           }
      }
      
      : if (is_present "film"&&film_description!="a roll of film"&&film_description!="a strip of film negatives (processed, hanging on the drying line)"&&film_description!="a strip of film negatives (processed, dry)"&&film_description!="a set of film negatives (cut from a strip)"&&film_description!="a set of film negatives (cut from a strip) (on the photo sheet)"&&film_description!="a strip of film negatives (processed, wet)")
      {

: if (!has_not_created "instructions") {
    : print "Arthur thought that he should follow the instructions to process the film." ;
         : done ;
}
: else {
   : print "Arthur couldn't remember enough about film processing to confidently develop the film. He felt he needed some instructions." ;
   : done ;
   
}
      }
     : if (negs_on_sheet&&glass_on_sheet&&sheet_description=="a sheet of new, unexposed photo paper") {
: print "Arthur thought that the electric light might be just powerful enough to make a satisfactory exposure." ;
: done ;
     }
     : if (sheet_description!="a sheet of new, unexposed photo paper"&&sheet_description!="a sheet of contact prints (processed, wet)") {
        : print "Arthur thought that he should develop the sheet of photographic paper in the same way as he developed the negatives." ;
        : done ;
        
     }
     
      
      
      : if (!has_not_created "packet") {
         : print "Arthur thought that he should follow the instructions in the Practical Techniques book to make the contact prints. " ;
         : done ;
         
      }
      
      
      }
      : if (is_present "film") {
          : if (film_description=="a strip of film negatives (processed, wet)") {
         : print "Arthur thought that he really should hang the film strip up to dry." ;
         : done ;
         
      }
      }
      
       
      : if (is_present "holder_1"&&is_present "vase_1"&&has_not_created "safelight") {
         : print "Arthur looked at the broken red vase and the lit candle and imagined what fun it might be to place one atop the other." ;
  : done ;
   }
   : if (is_at "garden_3") {
      : if (has_not_created "plate_glass") {
         : print "Arthur thought it might be worth investigating the lid of the cold frame." ;
        : done ;
         
      }
      
   }
   
   : if (is_at "top_stairs") {
      : if (!is_present "steps") {
         : print "Arthur looked up at the window recess and wished he was four foot taller. He wondered how he could elevate himself sufficiently to reach it." ;
           : done ;
      }
   }
  : if (is_at "recess") {
     : print "Arthur looked at the window and remembered Mrs Taplow's dire warning never to open it." ;
       : done ;
  }
  : if (is_at "kitchen") {
     : if (!has_not_created "bunch_keys") {
        : if (is_present "edna_taplow") {
           : print "Arthur would need to get Mrs Taplow out of the way if he was to have a chance of helping himself to those keys." ;
             : done ;
        }
        
        
     }
     
  }
  : if (is_carried "weight") {
 : if (has_not_created "dish") {
 : print "Arthur thought that the weight he was carrying, with its four stumpy legs, might be designed to sit in a tray or dish with depressions in the base." ;
 : done ;
         }

 }

 
  : if (is_at "graveyard_2") {
     : if (has_not_created "bicycle") {
        : print "Arthur though that anything might be hidden beneath that smothering blanket of ivy." ;
        : done ;
        
        
     }
     
  }
  : if (is_at "top_rockery") {
     : print "Arthur thought it might be feasible to enter that stand of rhododendron trees. " ;
     : done ;
     
  }
  : if (is_at "in_trees") {
     : if (has_not_created "tiny_man") {
        : print "The atmosphere was so expectant that Arthur thought it might be worth his while simply waiting, to see what happened." ;
        : done ;
     }
     : if (is_present "tiny_man") {
     : if (is_carried "box_brownie") {
        : print "Arthur looked at the incredible sight before him and thought it really was worth capturing for posterity." ;
        : done ;
        
     }
     
        : print "Arthur looked at the incredible sight before him and thought of the Cottingley pictures. If only he had a way of capturing the scene." ;
        : done ;
        
     }
     
  }
  : if (!bikefixed) {
     : if (hasbike||onbike) {
        : print "Arthur looked doubtfully at the broken bicycle and wondered if he would be able to fix it. And then he remembered Mr Thurgood - he seemed like a handy fellow. Perhaps it would be worthwhile to ask him?" ;
            : done ;
     }
     
  }
    : if (need_paper) {
      : print "Arthur needed photo paper and wondered where he might get some. Perhaps a shop in the village might stock it? " ;
     : done ;
     
  }
   }
  
  : if (is_at "on_monument") {

    : if (has_not_created "fragment_3") {
       : print "Arthur fancied that if he had some sort of small hammer he might, with a little care, be able to dislodge something from the window." ;
       : done ;
       
    }
    
  }
  
  : if (is_carried "herbal"&&is_carried "remnant") {
   : print "Arthur thought Ottoline might be interested to see the books that he was carrying." ;
 
  
  
 
  
   }
   
   : if (traptor==2) {
   : if (!visited_end_of_drive) {
      : if (is_at "zone_inside_vicarage") {
         
           : print "Arthur felt that a look around outside might be a good idea." ;
           : done ;
      }

      
       }
       : else {
             : if (!is_carried "goggles"||!is_carried "overcoat"||!is_carried "boots") {
        : print "Arthur needed some protection against the weather. He was sure to find it somewhere inside the buildings of the vicarage." ;
        : done ;
  
        }
       }
 
      
        : if (has_not_created "hedgehog") {
           : print "Arthur felt that he should listen out around the garden for those secretive sounds of night-time creatures going about their business." ;
           : done ;
        }
        : else_if (is_at "zone_outside_vicarage"||is_at "zone_garden"||is_at "zone_outside_vicarage") {
           : print "Arthur felt exploring the lanes might be profitable." ;
           : done ;
        }
        : if (is_at "lane_4") {
           : if (!snow_dug) {
: if (has_not_created "shovel") {
   : print "Arthur need an implement to dig with. He felt that he hadn't quite explored every nook and cranny of the Vicarage where such a thing might be found." ;
   : done ;
   
}
: else_if (has_not_created "gloves") {
   : print "Arthur needed something to keep his hands warm while he was digging. It might be found very close about his person." ;
   :done;
}


           
        }
        }
        
   }
   : if (traptor==3) {
   : if (is_at "garden_path"&&is_present "ottoline_elderfield"&&is_exists "sheet") {
      : print "Arthur wondered if Ottoline would be interested in his remarkable photographs." ;
    : done ;
      
   }
   : if (!clipper_1) {
       : if (is_at "wood_entrance") {
: if (!is_carried "shears") {
   : print "Arthur thought that some sort of tool to clip through the foliage would be handy." ;
   : done ;
   }
   : print "Arthur had an intuition that he should pay close attention to the direction that the crow was flying in, and try to go that way." ;
   : done ;
   
}
: if (is_at "zone_wood") {
   : print "Arthur thought that he should try to get a little nearer to the crow and see what it was doing." ;
   : done ;
   
}

       }
   
         : if (is_carried "scone") {
         : print "Arthur felt a little peckish for some home baking." ;
         : done ;
         
      }
         
   }
   : if (traptor==4) {
         : if (is_at "drawing_room") {
              : if (!is_exists "chair_4") {
            : if (is_present "ottoline_elderfield") {
               : print "Arthur wondered how he might secure the door against Mrs Taplow to prevent her constantly interrupting proceedings. He recalled something he had read recently..." ;
               : done ;
            }
            
         }

      : if (something_is_blocking_the_spirits) {
         : if (has_not_created "something") {
            : print "Arthur knew that some object hidden in this very room was blocking the seance from proceeding. He would have to examine everything very thoroughly until he found it." ;
            : done ;
            
         }
         : if (round_table_description=="a round table (in the middle of the room)") {
            : print "Arthur wondered if moving the table nearer the window might help to reach whatever was on top of the pelmet." ;
            :done;
         }
     : else {
        : print "Arthur thought he might have better luck reaching the thing above the window if he stood on the table." ;
        : done ;
        
     }
     
         
         }

         
      }
      : if (is_at "on_the_table") {
      : if (!has_not_created "something") {
            : print "Arthur thought he might be able to get even higher if he stood on a chair." ;
            : done;
      }
      
        
         
      }
      
   }
   : if (traptor==5) {
    
      : if (is_at "footpath_1"||is_at "footpath_2") {
            : if (is_carried "crumbs") {
         : print "Arthur wondered if some small creatures in this vicinity might be interested in the remains of the scone." ;
         : done ;
         
         
      }
      }
      
   
      : if (is_exists "injured_rabbit") {
         : print "Arthur wondered how he could help that poor injured rabbit. Perhaps Ottoline would know what to do?" ;
         : done ;
         
      }
      
    : if (drywell_ask_counter>1) {
     : if (is_at "church") {
          : if (!noticed_fox_carving) {
        : print "Arthur remembered Miss Drywell's discourse of the Molyneux family and wondered if there might be anything close at hand that could reveal more about that intriguing story." ;
        : done ;
     }
     : else {
     : if (has_not_created "stone_fox") {
        : print "Arthur thought about that enigmatic fox carved across Geoffrey's name on the Molyneux pew and wondered if some other memorial to the family might bear further inspection." ;
        : done ;
        
     }
     }
     }
     : if (is_at "church_1") {
     : if (has_not_created "stone_fox") {
 
        : if (noticed_fox_carving){
           : print "Arthur thought it might be worth giving the monument a closer look." ;
           : done ;
        }
        : print "Arthur saw the ostentatious monument to the Molyneux family and, remembering Miss Drywell's history lesson, felt sure there was something of significance to be found. But where to start? Perhaps something else related to the family might give a clue about where to look." ;
         : done ;
         
     }
           
     }
    }
   : if (is_present "stone_fox") {
      : if (has_not_created "cavity") {
      : if (rail_description!="an iron rail (inserted into the stone fox's ear)") {
           : print "Arthur noticed the hole in the stone fox's ear and wondered if it was made for something to be inserted into it." ;
         : if (has_not_created "rail") {
       : print "Arthur wondered if a search around the graveyard might prove profitable." ;
         }
         : else {
            : print "Arthur remembered something he had found outside the church earlier." ;
         }
         : done ;
      }
      : print "Arthur wondered if he might need Ottoline's help." ;
      : done ;
      
      }
   }
 : if (!has_not_created "grimoire") {
    : if (is_carried "keg"&&beer_keg_open){
       : if (count("keg_objects")<5) {
       : if (has_read_ingredients) {
        : if (has_not_created "mistletoe_sprig") {
         : print "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add mistletoe to it. He knew it grew parasitically on trees and wondered if he might find some in the vicinity of The Vicarage. " ;
         : done ;
      }
      : else_if (is_exists "mistletoe_sprig") {
        : print "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add mistletoe to it." ;
         : done ;
      }
      : if (has_not_created "toadstool") {
    : print "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add a toadstool to it - perhaps a wooded place would be the best place to look for one? " ;
         : done ;
        
      }
      : else_if (is_exists "toadstool") {
         : print  "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add a toadstool to it.";
         :done;
      }
       : if (!blood_in_keg) {
       : if (bleeding>0) {
  : print "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add blood to it - his own, it seemed." ;
  : done ;
       }
          : print  "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add blood to it - his own, it seemed. Arthur wasn't particularly squeamish but still didn't relish the idea of cutting himself open. Perhaps if he used a very sharp blade he might be able to nick himself just enough to draw blood without causing serious harm.";
          : done ;
    
      }
       : if (!gossip_in_keg) {
       : print  "Arthur remembered the ingredients in the grimoire. He had the ale but needed to add 'tittle-tattle' to it. He remembered the gossipy atmosphere around the village pump and wondered if that might be the place to get some.";
       : done ;
       
      }
     
       }
       
       }
    }
    
 }
   
   : if (is_carried "scone") {
         : print "Arthur felt a little peckish for some home baking." ;
         : done ;
         
      }
      
   }
   : if (traptor==6) {
      : if (is_present "weather_vane") {
         : if (!sign_of_wind) {
           : if (is_carried "binoculars") {
              : print "Arthur thought it would be worth having a closer look at the weather vane." ;
              : done ;
           }
          : print "Arthur wondered about that weather vane. It looked unusual, but it was difficult to pick out much detail from so far away. He wondered it there was a way to make it appear closer." ;
          : done ;
         }
      }
     : if (is_carried "keg"&&!is_at "grove") {
        : print "Arthur remembered incantation in the grimoire, 'where the trees three by three', and wondered if it might mean somewhere up in Calderhall wood." ;
        : done ;
     }
      : if (is_at "grove") {
         : if (is_present "keg") {
         : if (!is_carried "grimoire") {
            : print "Arthur felt that the grimoire held the key to whatever he was destined to do up there in Calderhall wood. He should have it with him. " ;
            : done ;
         }
         
            : if (!is_worn "robes") {
               : print "Arthur remembered the incantation in the grimoire, 'full dressed be', and wondered if he should don some ceremonial attire for the occasion." ;
               : done ;
            }
            : if (!is_carried "twig") {
               : print "Arthur remembered the ingredients list in the grimoire, particulary the part about the stirring, and thought he should be fully equipped for the task in hand." ;
               : done ;
            }
            : if (!sign_of_eye||!sign_of_moon||!sign_of_sun||!sign_of_wind) {
        : if (!sign_of_sun) {
        : print "Arthur remembered the incantation in the grimoire, 'maketh the sign if it'. The first of the verses seemed to be about the sun - but Arthur didn't know a 'sign of the sun'. He had an intuition that something around the grounds of The Vicarage might hold the key." ;
        :done;
      }
      : if (!sign_of_moon) {
       : print "Arthur remembered the incantation in the grimoire, 'maketh the sign if it'. The second of the verses seemed to be about the moon - but Arthur didn't know a 'sign of the moon'. Then he remembered the way the moonlight flooded the eastern hallway of the vicarage at night-time. Could something there be the answer?" ;
        :done;
     }
      : if (!sign_of_eye) {
            : print "Arthur remembered the incantation in the grimoire, 'maketh the sign if it'. The third of the verses seemed to be about an eye - but Arthur didn't know a 'sign of the eye'. He has a sudden recollection of being in the old chapel and the powerful feeling of being watched. Could the answer be there?" ;
            : done ;
     }
      : if (!sign_of_wind) {
          : append "Arthur remembered the incantation in the grimoire, 'maketh the sign if it'. The fourth of the verses seemed to be about the wind - but Arthur didn't know a 'sign of the wind'.  " ;
       : if (is_exists "weather_vane") {
          : print "Arthur remembered the weather vane on the church and wondered if it was significant." ;
       }
       : else {
          : print "Arthur wondered about things related to it. He had an intuition that something on the outside of the church might be significant." ;
       }
            : done ;
     }
     
      }
      : print "Arthur felt that he had everything he needed. He thought he should follow the directions in the incantation carefully." ;
      : done ;
      
     }
     }
       : if (is_at "zone_dmv") {
   : if (!endgame) {
    : if (spell>11) {
    : if (!is_present "ottoline_elderfield") {
       : print "Arthur wondered where Ottoline was. He would have felt much better if she was there. She seemed to possess such extraordinary intuition and, he could admit to himself, she was far braver than he was. He'd grown very attached to her." ;
       : done ;
    }
    : if (!is_worn "robes") {
       : print "Arthur sensed an expectant atmosphere, as of something waiting to happen. Yet it seemed that something was holding back events. He wondered if being specially dressed for the occasion would help." ;
             : done ;
    }
    : if (!is_carried "mirror") {
       : print "Arthur felt as though something was waiting to happen, but things were not in readiness. He wondered what else could be needed and suddenly recalled the mirror. It was such an old and mysterious artefact and seemed to belong to the past as much as the present." ;
             : done ;
    }
      : if (!is_carried "spectacles_case_1") {
       : print "Arthur sensed that something momentous was on the verge of happening, but was being held back. Whatever was waiting to happen seemed related to that other world of the faeries. He thought about the horseshoe nail safely tucked away in the spectacles case - it was the only thing he'd come across that was definitely of faery origin." ;
             : done ;
    }

}
         }
         }
   }
   

   : if (is_at "church_1"&&has_not_created "fragment_3") {
      : print "Arthur looked up at the daunting marble terraces of the Molyneux monument and wondered if it was scalable." ;
      : done ;
      
   }
   
   
   
  
   : if (is_at "church"&&holding_rope&&bell_ringing>0) {
      : print "Arthur remembered Mr Snapeshuttle's dire warning about grabbing the sally at the wrong moment." ;
      : done ;
      
   }
   : if (is_at "pump") {
      : if (has_not_created "witch_bottle") {
         : print "Arthur had an intuition that he was not able to do anything very useful at the pump at present." ;
         : done ;
         
      }
      : else_if (!gossip_in_keg) {
      : if (!is_present "witch_bottle") {
         : print "The gossip and rumour flying around the village pump was so tangible that Arthur almost imagined he might be able to catch some of it - if he had the right sort of container." ;
         : done ;
         
      }
      : else_if (!witch_bottle_open&&!gossip_in_bottle) {
         : print "Arthur felt that he might have better luck if the witch bottle was open." ;
         : done ;
         
      }
         : else_if (!witch_bottle_empty) {
         : print "Arthur felt that he might have better luck if the witch bottle was empty." ;
           : done ;
      }
      : else_if (is_carried "witch_bottle"&&!gossip_in_bottle) {
         : print "Arthur felt that he might have more luck if he put the witch bottle down." ;
           : done ;
      }
     : else_if (gossip_in_bottle&&witch_bottle_open) {
        : print "Arthur thought that he should close the bottle quickly, before whatever was inside had a chance to escape." ;
        : done ;
        
     }
     : else_if (!gossip_in_bottle) {
        : print "Arthur thought that simply waiting might be the best thing to do." ;
        : done ;
        
     }
     
      
   }
  
   }
    : if (is_carried "witch_bottle"&&!gossip_in_bottle&&!gossip_in_keg&&!is_at "pump") {
      : print "Arthur felt that the bottle might be useful for catching something in - but somewhere else, not here." ;
      : done ;
      }
   
   
  
   : print "Arthur couldn't think of anything that might help at present." ;
   
}
#HINT end

#STUCK start

: match "stuck-"  {
// : ask_bool {

//    var      = 
//    question = 
   
// }

// : print "WARNING: Contains spoilers. Are you sure you are really stuck?" ;

// : if (traptor==1) {
   
// }


   : print "WARNING: Contains many spoilers. Use HINT for a more subtle clue. " ;
: ask_bool {

   var      = areyousure
   question = Are you really stuck?
   yes_answer = yes - spoilers.
   no_answer = no - return to game.
}
: if (areyousure) {
: clear_screen;
: if (traptor==1) {
   : print "What do you need help with?" ;

   : add_choice "NOTHING - return to game."  {
      : redescribe;
      
   }
   
   : add_choice "What are the objectives for this chapter of the game?"  {:clear_screen;
     : print "Arthur's objectives were to take and develop a photograph of the faeries. \n(Note: The tasks are listed in order of priority. Those at the end of the list might not be essential right now, i.e. they could be completed at a later stage of the game.) " ;
     : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur get the keys from the kitchen?"  {: clear_screen;
   : print "Mrs Taplow had warned Arthur about the difficult window in the recess at the top of the stairs. Arthur needed to get into the recess using an object found in the study, and open the window. Mrs Taplow would come running to close it and Arthur could leave the recess, go to the kitchen and take the keys before she returned. " ;  : press_any_key ;
     : redescribe;
}




: add_choice "Where could Arthur find a camera?"  {: clear_screen;
   : print "Amongst the junk in the crates in the cellar." ;  : press_any_key ;
     : redescribe;
   
}
: add_choice "Where could Arthur find the faeries?"  {: clear_screen;
   : print "At the top of the rockery. Arthur needed to ENTER TREES to hide amongst them and then read the text carefully and do what it suggested to make them appear." ;  : press_any_key ;
     : redescribe;
   
}
: add_choice "Where could Arthur develop pictures?"  {: clear_screen;
   : print "In the darkroom, behind the tapestry in the study. Arthur could MOVE TAPESTRY to discover it." ;  : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur make a safelight?"  {: clear_screen;
   : print "By breaking the red vase found in the drawing room (BREAK VASE) and then putting the vase over the lit candle in the candle holder (PUT VASE ON HOLDER or PUT VASE ON CANDLE; PUT VASE OVER HOLDER or PUT VASE OVER CANDLE)." ;  : press_any_key ;
     : redescribe;
}
: add_choice "What items did Arthur need to develop film?"  {
: clear_screen;

   : print "Arthur needed:\n1. the lights off and a lit candle or match not present;\n2. the safelight;\n3. a strip of film that he could get by unreeling the exposed film roll in the darkroom (UNREEL FILM or UNWIND FILM);\n4. the developing weight found on the desk in the study;\n5. the dish found in the potting shed;\n6. developer and fixer found in the bottle and flask respectively, in the cupboard in the darkroom;\n7. a bucket of water;\n8. the instructions, found between the plates in the crate in the cellar.\n" ;  : press_any_key ;
     : redescribe;
 
}
: add_choice "What did Arthur need to do to develop the film?"  {
: clear_screen;

   : print "Arthur could follow the process listed in the instructions found between the plates in the cellar." ;  : press_any_key ;
     : redescribe;
 
}
: add_choice "What items did Arthur need to make prints?"  {
: clear_screen;

   : print "Arthur needed:\n1. the lights off and a lit candle or match not present;\n2. the safelight;\n3. a sheet of photo paper (dropped);\n4. the negatives, cut from the film strip (using the scissors from the scullery drawer) and put on the paper;\n5. a sheet of glass, put on top of the sheet (sandwiching the negatives in-between)." ;  : press_any_key ;
     : redescribe;

}
: add_choice "Where could Arthur find the glass?"  {
: clear_screen;

   : print "In the lid of the cold frame, out in the garden." ;  : press_any_key ;
     : redescribe;
   
}
: add_choice "How could Arthur get to the village?"  {
: clear_screen;

   : print "By bicycle. He needed to EXAMINE IVY in the southern graveyard of the church. The bicycle needed repair, but someone at The Vicarage could fix it if ASKed." ;
   : press_any_key ;
   : redescribe;
   
}
: add_choice "Where could Arthur find the photo paper?"  {
: clear_screen;

   : print "At Mr Salter's chemist's shop in the village. He could ASK SALTER and the chemist would give him the paper - but only after Arthur had developed the film and left the negatives hanging to dry." ;  : press_any_key ;
     : redescribe;
 
}



: add_choice "What exactly did Arthur need to do to make a print?"  {
: clear_screen;

   : print "Arthur simply needed to turn the light on to make the exposure. \nThe developing process was the same as for the negatives." ;  : press_any_key ;
     : redescribe;

}
: add_choice "What did Arthur need to do in the pub?"  {
: clear_screen;

   : print "Arthur needed to play all of the games on offer." ;  : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur help Frank Farthing?"  {
: clear_screen;

   : print "Arthur needed to fetch a bandage from the Chemist's shop (ASK SALTER) and then return to the square and HELP FRANK or STAUNCH BLOOD. He then needed to follow Frank when he left the square." ;  : press_any_key ;
     : redescribe;
}
: choose;
}
: if (traptor==2) {
: add_choice "NOTHING - return to game."  {
  : redescribe;
   
}

    : add_choice "What are the objectives for this chapter of the game?"  {: clear_screen;
     : print "Arthur's objectives were to find the things necessary to venture out into the snowy weather and to find the way up the lanes to Nevernear Cottage." ;
     : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur get out into the lanes?"  {: clear_screen;
     : print "Arthur needed to be appropriately dressed to venture out in the snow and ice. If he was not suitably attired then he would be told so. He needed to be wearing:\n1. eye protection;\n2. a warm coat;\n3. stout boots.\n The required items were to be found in the rooms of The Vicarage and the outbuilding of Gardener's Cottage." ;
     : press_any_key ;
     : redescribe;

}
: add_choice "What did Arthur need to dig through the snow?"  {: clear_screen;
     : print "Arthur needed the shovel, to be found camouflaged against the coal heap in the cellar of The Vicarage." ;
     : press_any_key ;
     : redescribe;

}
: add_choice "What could Arthur use to keep his hands warm?"  {: clear_screen;
     : print "Arthur could use the pair of woolly gloves, to be found in the pocket of the overcoat." ;
     : press_any_key ;
     : redescribe;

}
: add_choice "How could Arthur find his way through the maze of lanes to Nevernear Cottage?"  {: clear_screen;
     : print "Arthur needed a guide to show him the way. \nHe needed to listen carefully in the garden area close to Gardener's Cottage and investigate the foliage as indicated. Once he had discovered what lurked there, he could venture out into the lane and follow the creature." ;
     : press_any_key ;
     : redescribe;
}
:choose;
}
: else_if (traptor==3) {
: add_choice "NOTHING - return to game."  {
   : redescribe;
   
}

   : add_choice "What are the objectives for this chapter of the game?"  {: clear_screen;
     : print "Arthur's objectives were to make proper acquaintance with Ms Ottoline Elderfield and to find his way up to and through Calderhall Wood.\nHe could also find his way over the wetlands bridge and access the chapel in this part of the game (and also later, in chapter 5, if he did not do so now).";
          : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur find Ottoline Elderfield again?"  {
: clear_screen;
   : print "Arthur simply needed to find his way back to Nevernear Cottage along the route that he had discovered the previous evening." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur persuade Ottoline to let him inside Nevernear Cottage?"  {
: clear_screen;
   : print "Arthur needed to reveal to Ottline what he had witnessed at the rockery. To do that, he should show her the sheet of contact prints that he had made (SHOW SHEET / GIVE PRINTS)." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do inside Nevernear Cottage?"  {
: clear_screen;
   : print "Arthur needed to examine both the portrait and the unusual ashtray in the presence of Ottoline Elderfield. Having done so, the nature of the latter artefact would be revealed." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "Arthur had learned about the ashtray - what did he need to do next?"  {
: clear_screen;
   : print "Arthur needed to ASK OTTOLINE to progress to the next part of the story." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur find which way to go through the wood?"  {
: clear_screen;
   : print "Arthur needed to EXAMINE the CROW when he was directly beneath it, to discover which way he should go." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to cut through the dense foliage at the wood?"  {
: clear_screen;
   : print "Arthur needed the shears, to be found in the potting shed in the garden of The Vicarage." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How coud Arthur protect himself against the thorns of the bramble bush?"  {
: clear_screen;
   : print "Arthur needed to be wearing the gardening gauntlets, to be found inside the cold frame in the garden of Nevernear Cottage." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do with the artefact he then discovered?"  {
: clear_screen;
   : print "Arthur needed to either drop it in the presence of Ottoline Elderfield, or SHOW OTTOLINE." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What could Arthur do in the pub in this chapter?"  {
: clear_screen;
   : print "Arthur could ASK JARBELL to hear his tragic story." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur get across the bridge at the wetlands?"  {
: clear_screen;
   : print "Arthur need to take careful note of the information board. He needed to find the dagger in the study at the The Vicarage and BREAK DAGGER. He then needed to DROP DAGGER INTO WATER at the crossing place and the barrier would be broken." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do with Ash?"  {
: clear_screen;
   : print "Arthur needed to TOUCH ASH and then return them to Mr Jarbell at the pub." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do when ringing the bells in the church?"  {
: clear_screen;
   : print "Arthur needed to rememember (and wilfully disregard) the warning of Ernest Snapeshuttle about GRABbing the SALLY at the wrong moment." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do with the coffer?"  {
: clear_screen;
   : print "Arthur needed to move it out of the way to reveal what was behind. To do that, he would need to open it, GET BOOKS (to remove them, so the coffer was then light enough to move) and then MOVE COFFER." ;
        : press_any_key ;
     : redescribe;
}

:choose;
}
: else_if (traptor==4) {
   : add_choice "NOTHING - return to game."  {
     : redescribe;
   }
   : add_choice "What are the objectives for this chapter of the game."  {
      :clear_screen;
      :print"Arthur's objective was to ensure conditions were right for the seance to happen.";
      : press_any_key ;
      : redescribe;
   }
   : add_choice "How could Arthur prevent Mrs Taplow's constant interruptions?"{
   : clear_screen;
   : print "Arthur needed to follow the example of the heroine in 'The Dean of Misslefell' and wedge a chair under the door handle (WEDGE CHAIR UNDER DOOR HANDLE)." ;
   : press_any_key ;
   : redescribe;
   }
 
   : add_choice "Where was the thing blocking the spirits from participating in the seance?"  {
      : clear_screen;
       : print "The thing would be discovered if Arthur EXAMINEd WINDOW." ;
   : press_any_key ;
   : redescribe;
   }
    : add_choice "How could Arthur reach the thing?"  {
      : clear_screen;
       : print "Arthur needed to move the table to beneath the window, get a chair, stand on the table, drop the chair and then stand on the chair to be high enough to reach the thing." ;
   : press_any_key ;
   : redescribe;
   }
    : add_choice "How could Arthur move the table?"  {
      : clear_screen;
       : print "Arthur would need Ottoline's help (ASK OTTOLINE) to move that singularly heavy piece of furniture." ;
   : press_any_key ;
   : redescribe;
   }
   : choose ;
   
}
: else_if (traptor==5) {
     : add_choice "NOTHING - return to game."  {
     : redescribe;
   }
    : add_choice "What are the objectives for this chapter of the game?"  {:clear_screen;
    : print "There were several things that needed to be done, if they had not been done already. To finish the chapter, Arthur needed to have:\n1. retrieved the faery horseshoe nail from Calderhall wood, energised and concealed it;\n2.  discovered the grimoire;\n3. added all the ingredients listed in the grimoire to the keg;\n4. found a hazel twig;\n5. found all the fragments of the mirror and fitted them back into the frame. " ;
       : press_any_key ;
   : redescribe;
    }
    : add_choice "What did Arthur need, to get down the well?"  {:clear_screen;
    : print "Arthur needed the following:\n1. the fence post (found by examining the fence at the wetlands);\n2. the lump hammer (found amongst the tools in the outbuilding of Gardener's Cottage);\n3. the rope (found in the bell-loft);\nOnce he had gathered the items by the side of the well, he needed to HAMMER POST to fix it into the ground, TIE ROPE around the post, GET ROPE to pick up the end, DROP ROPE DOWN HOLE to drop it into the well. He could then descend safely." ;
       : press_any_key ;
   : redescribe;
    }
      : add_choice "How could Arthur retrieve the waterlogged thing?"  {:clear_screen;
    : print "Arthur needed the hook on a pole, to be found in the church." ;
       : press_any_key ;
   : redescribe;
    }
       : add_choice "What did Arthur need to do with the rabbit he saw at the old village site?"  {
       :clear_screen;
    : print "Arthur needed to follow it." ;
       : press_any_key ;
   : redescribe;
    }
     : add_choice "What did Arthur need to do with the injured rabbit?"  {
       :clear_screen;
    : print "Arthur needed to take it to Nevernear Cottage, knock on the door and then SHOW RABBIT to Ottoline. \nHe then needed to take it to the vet's in the village. He might not be welcome there at first, but he should be persistent and SHOW BOX or GIVE BOX to Miss Drywell." ;
       : press_any_key ;
   : redescribe;
    }
      : add_choice "What did Arthur need to do at the church (aside from ringing the bells)?"  {
       :clear_screen;
    : print "After Arthur had spoken to Miss Drywell, he would need to EXAMINE the CARVINGs on the Molyneux Pew and then go to the chancel and EXAMINE EFFIGY or EFFIGIES." ;
       : press_any_key ;
   : redescribe;
    }
       : add_choice "What did Arthur need to do with the stone fox?"  {
       :clear_screen;
    : print "Arthur needed to INSERT the RAIL that he could find by examining the old sepulchre in the graveryard outside. He would then need to ASK OTTOLINE, to enlist her help, and then PULL RAIL." ;
 
       : press_any_key ;
   : redescribe;
    }
     : add_choice "Arthur had found the herbal and tattered remnant - what did he need to do next?"  {
       :clear_screen;
    : print "Arthur needed SHOW either the HERBAL or the REMNANT to Ottoline when he was carrying both items." ;
 
       : press_any_key ;
   : redescribe;
    }
    : add_choice "Where could Arthur find the fragments of the mirror?"  {
    : clear_screen;
    
       : print "There were four fragments to be found:\n1. embedded in the mosaic at the base of the sundial (PRISE FRAGMENT when holding the knife or the screwdriver);\n2. dug up by the rabbit that Arthur could follow at the old village site;\n3. behind the date stone in the pub cellar;\n4. incorporated into the triptych window in the church (CLIMB MONUMENT and then HAMMER or TAP WINDOW when holding the tuning hammer found in the piano at the pub)." ;
           : press_any_key ;
   : redescribe;
    }
    : add_choice "What did Arthur need to do at the chapel?"  {
       : clear_screen;
       : print "Arthur needed to be wearing the robes to approach the altar.\nHe needed to have the horseshoe nail and then PUT NAIL ON PATEN." ;
       : press_any_key ;
       : redescribe;
    }
     : add_choice "How could Arthur conceal the glowing nail?"  {
       : clear_screen;
       : print "Arthur needed to hide the nail in the spectacles case." ;
       : press_any_key ;
       : redescribe;
    }
      : add_choice "Where could Arthur find a hazel twig?"  {
       : clear_screen;
       : print "Arthur needed to find the place at the footpath where many birds were present. He needed to EAT SCONE to create crumbs and then DROP CRUMBS to feed the birds." ;
       : press_any_key ;
       : redescribe;
    }
     
     : add_choice "Where could Arthur find the keg ingredients?"  {
       : clear_screen;
       : print "Arthur could find the ingredients as follows:\n1. mistletoe could be found by examining the trees at the top of the rockery;\n2. a toadstool could be found by examining the rotten tree stump in the clearing at the wood;\n3. blood could be found by Arthur cutting himself with the athame;\n4. tittle-tattle could be found by capturing some with the witch bottle at the village pump." ;
       : press_any_key ;
       : redescribe;
    }
     : add_choice "How could Arthur get the tittle-tattle?"  {
       : clear_screen;
       : print "Arthur needed to do the following:\n1. empty the witch bottle at the scullery sink;\n2. open the empty witch bottle and drop it at the pump;\n3. wait until something seemed to enter the bottle (the bottle rocks slightly);\n4. close the bottle.\nArthur would then be able to open the bottle by the keg and ADD GOSSIP or ADD TITTLE-TATTLE to it." ;
       : press_any_key ;
       : redescribe;
    }
    

    : add_choice "What could Arthur do in the main part of the pub in this chapter?"  {
: clear_screen;
   : print "Arthur could ASK JARBELL to hear his tragic story." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What could Arthur do in the pub cellar?"  {
   : clear_screen;
   : print "Arthur could appropriate a keg and find a fragment of mirror." ;
   : press_any_key ;
   : redescribe;
   
}
: add_choice "How could Arthur take the keg?"  {
   : clear_screen;
   : print "Arthur needed to:\n1. TURN OFF TAP;\n2. DISCONNECT HOSE;\n3. TAKE KEG;\n4. MOVE or ROLL KEG (to move a keg from the upper rack into the vacant space on the lower rack);\n4. CONNECT HOSE;\n5. TURN ON TAP." ;
   : press_any_key ;
   : redescribe;
}
: add_choice "What did Arthur need to do with the barrels?"  {
   : clear_screen;
   : print "Arthur needed simply to move them, to reveal the wall behind." ;
   : press_any_key ;
   : redescribe;
}
: add_choice "How could Arthur remove the date stone?"  {
   : clear_screen;
   : print "Arthur needed to be holding the fish knife or the screwdriver and then GOUGE MORTAR or SCRAPE MORTAR or CHISEL MORTAR or DIG MORTAR." ;
   : press_any_key ;
   : redescribe;
}
: add_choice "What did Arthur need to do when ringing the bells in the church?"  {
: clear_screen;
   : print "Arthur needed to rememember (and wilfully disregard) the warning of Ernest Snapeshuttle about GRABbing the SALLY at the wrong moment." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do with the coffer?"  {
: clear_screen;
   : print "Arthur needed to move it out of the way to reveal what was behind. To do that, he would need to open it, GET BOOKS (to remove them, so the coffer was then light enough to move) and then MOVE COFFER." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur get across the bridge at the wetlands?"  {
: clear_screen;
   : print "Arthur need to take careful note of the information board. He needed to find the dagger in the study at the The Vicarage and BREAK DAGGER. He then needed to DROP DAGGER INTO WATER at the crossing place and the barrier would be broken." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to do with Ash?"  {
: clear_screen;
   : print "Arthur needed to TOUCH ASH and then return them to Mr Jarbell at the pub." ;
        : press_any_key ;
     : redescribe;
}

   : choose;
}
: else_if (traptor==6) {
     : add_choice "NOTHING - return to game."  {
     : redescribe;
   }
   : add_choice "What are the objectives for this chapter of the game?"  {
: clear_screen;
   : print "Arthur needed to perform the rite of banishing at Calderhall wood and then confront the Faery Queen in the Old Village of Haelstowne." ;
        : press_any_key ;
     : redescribe;
}
  : add_choice "Where did Arthur need to perform the rite?"  {
: clear_screen;
   : print "Arthur needed to carry out the rite at the grove in Calderhall wood." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "What did Arthur need to carry out the rite?"  {
: clear_screen;
   : print "Arthur needed the following to carry out the rite:\n1. to be at the grove in Calderhall wood;\n2. to have the beer keg containing the brew;\n3. to be wearing the robes;\n4. to have the hazel twig\n5. to have the grimoire;\n6. to know each of the signs." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "Where were the signs that Arthur needed to know for the rite?"  {
: clear_screen;
   : print "There were four signs for the rite, to be found by examining the following:\n1. the sundial in the garden (the sign of the sun);\n2. the picture at the east hallway in The Vicarage (the sign of the moon);\n3. the altar cloth in the chapel (the sign of the eye);\n4. the weather vane on the church steeple, as seen through the binoculars (the sign of the wind)." ;
        : press_any_key ;
     : redescribe;
}

: add_choice "After the rite, what did Arthur need to do at the old village site?"  {
: clear_screen;
   : print "Arthur needed the following:\n1. to be accompanied by Ottoline Elderfield;\n2. to be wearing the robes;\n3. to be holding the mirror;\n4. to be holding the spectacles case containing the horseshoe nail." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur stop the horses?"  {
: clear_screen;
   : print "Arthur could open the spectacles case when the horses were upon him." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur get peldash, once he was on the ground?"  {
: clear_screen;
   : print "Arthur would need to ASK OTTOLINE for her help." ;
        : press_any_key ;
     : redescribe;
}
: add_choice "How could Arthur defeat the faery queen?"  {
: clear_screen;
   : print "Arthur would need to USE MIRROR or WAVE MIRROR or REFLECT SPELL." ;
        : press_any_key ;
     : redescribe;
}
: choose;
}

}
}
#STUCK end
#UNDO start

: match "undo-"  {
   : print "Use CTRL+SHIFT+Left Arrow to step back through moves." ;
}
: match "redo-"  {
   : print "Use CTRL+SHIFT+Right Arrow to step forward through moves." ;
}

#UNDO end

#REDO start
#REDO end

#SIT start
: match "sit _"  {
: if (sitting) {
   : print "But Arthur was already sitting down." ;
   : done ;
   
   }
: else_if (!is_present "chair_1"&&!is_present "chair_2"&&!is_present "chair_3") {
: if (traptor==4&&is_at "drawing_room") {
   : print "But there was no chair to sit in." ;
   : done ;
   
}

   : print "Arthur didn't particularly feel like it at the moment." ;
      : done; 
}

      : if (is_carried "chair_1") {
         : drop "chair_1" ;
      
      }
       : if (is_carried "chair_2") {
          : drop "chair_2" ;
      }
       : if (is_carried "chair_3") {
          : drop "chair_3" ;
      }
      
      : set_true "sitting" ;
      : gosub "chair_deletion" ;
      
       : print "Arthur sat down." ;

       
      // : decrement "chairs_available" ;
      // : print {("chairs available: "+ chairs_available)} ;
      
      
      : if (is_present "ottoline_elderfield") {
      : if (ottoline_description == "Ottoline Elderfield") {
      : if (!is_present "chair_1"&&!is_present "chair_2"&&!is_present "chair_3"){
       : print "Arthur felt rather rude sitting down while there was no chair for Ottoline to sit in." ;
       : press_any_key ;
       : redescribe;
       
            : done ;
      }
            : print "Ottoline sat down." ;
             : set_string var = "ottoline_description"  text = "Ottoline Elderfield (sitting on a chair)" ;
             : gosub "chair_deletion" ;
         
         
      }
      
     

   
  }

   
    : set_integer var = "chairs_available"  value = "0" ;
     ;
   
   : press_any_key ;
   : redescribe;
   
   
   
}


#SIT end

#STAND start

: match "stand _"  {
   : if (sitting) {
      : print "Arthur stood up." ;
      : set_false "sitting";
       : set_false "holding_hands" ;
       :gosub "chair_creation"; 
       :press_any_key; :redescribe ;
   
     :  set_false "holding_hands";
      : done ;
      
   }
   : if (preposition_is "on") {
   : if (noun1_is "table") {
      

      : if (is_at "drawing_room") {
         : print "Arthur clambered up onto the table." ;
      : goto "on_the_table" ;
      : if (is_exists"something") {
         : create "something" ;

      }
      
         : press_any_key ;
         : redescribe;
         
      }
      : else_if (is_at "on_the_table") {
         : print "But Arthur was already standing on the table." ;
         : done ;
         
      }
      : else_if (is_at "dining_room") {
         : print "Arthur thought that Mrs Taplow might not take kindly to his standing on the dining table." ;
      }
        : else_if (is_at "kitchen") {
         : print "Arthur thought that Mrs Taplow might not take kindly to his standing on her kitchen table." ;
      }
          : else_if (is_at "pub") {
         : print "Arthur hadn't had nearly enough to drink yet." ;
      }
         }
   : else_if (noun1_is "chair") {
   : if (is_at "on_chair") {
      : print "But Arthur was already standing on a chair." ;
      : done ;
   }
      : if (is_present "chair_1"||is_present "chair_2"||is_present "chair_3") {
      : if (is_carried "chair_1") {
                    : drop "chair_1";
                  }
                   : if (is_carried "chair_2") {
                    : drop "chair_2";
                    : press_any_key ;
                  }
                   : if (is_carried "chair_3") {
                    : drop "chair_3";
                    : press_any_key ;
                  }
        : set_string var = "down_chair_location" { text-> (current_location()) }
         : if (is_at "on_the_table") {
          : if (sitting) {
                           : print "Arthur got out of the chair." ;
                    : set_false "sitting";
                     : set_false "holding_hands" ;:gosub "chair_creation"; :press_any_key; :redescribe ;
                    }
            : print "Arthur clambered up onto his precarious platform." ;
            
         }
         : else {
               : print "Arthur stood on the chair" ;
         }
         
      
         : goto "on_chair" ;
         : if (is_exists "something") {
            : create "something" ;
            
         }
         
         : press_any_key ;
         : redescribe;
         
      }
      : else {
         : print "But there was no chair to stand on." ;
         : done ;
         
      }
      
   }
      : else {
      : if (is_present (s1())) {
          : print {("Arthur didn't feel particularly inclined to stand on the "+original "noun1"+".")} ;
         : done ;
      }
      : else {
         : print "But Arthur couldn't see that anywhere." ;
         
      }
      
        
         
      }
      
   }


   : else {
      : print "But Arthur was already standing." ;
      
   }
   
}

#STAND end

#WEAR START
: match "wear _"  {
: if (noun1_is "") {
   : print "Arthur wasn't sure what he should be trying to wear." ;
   : done ;
   
}

: if (is_beside (s1())) {
: if (s1()=="overcoat"||s1()=="gloves"||s1()=="robes"||s1()=="pince_nez"||s1()=="boots"||s1()=="goggles") {
   : get;
   }
   : else_if (s1()=="gardening_gauntlets") {
   : if (gardening_gauntlets_description=="a pair of gardening gauntlets (inside the cold frame)") {
   : if (frame_open) {
   : if (is_pocketable "gardening_gauntlets") {
   : set_string var = "gardening_gauntlets_description"  text = "a pair of gardening gauntlets" ;
      : get;
   }
   }
   : else {
         : print "But the cold frame was closed." ;
   }
   }
   : else {
      :get;
   }
   

   }
   : else {
      : print "Arthur thought that was a silly thing to wear." ;
      : done ;
      
   }
   
}
   : if (noun1_is "coat") {
      : if (is_carried "overcoat") {
      : if (is_worn "robes") {
         : print "Arthur managed, awkwardly, to shrug the overcoat on over the voluminous robes." ;
         : wear "overcoat"quiet = "true"  ;
      }
      : else {
          : wear "overcoat" ;
      }
         : set_string var = "coat_description"  text = "a heavy woollen overcoat (worn)" ;
      }
      
   }
   : if (noun1_is "boots") {
      : if (is_carried "boots") {
      : print "The boots were so large that Arthur found he could simply slip his already shod feet into them without needing to take off his brogues." ;
      
          : wear "boots" ;
         : set_string var = "boots_description"  text = "a pair of stout boots (worn)" ;
      }
      
   }
   : if (noun1_is "gloves") {
      : if (is_carried "gloves") {
      : if (is_worn "gardening_gauntlets") {
            : print "Arthur struggled to wear the woolly gloves over the gardening gauntlets, and gave up." ;
      : done ;
      }
      
          : wear "gloves" ;
         : set_string var = "gloves_description"  text = "a pair of knitted gloves (worn)" ;
      }
      
   }
    : if (noun1_is "gauntlets") {
      : if (is_carried "gardening_gauntlets") {
     : if (is_worn "gloves") {
        : print "Arthur struggled to wear the gardening gauntlets over the woolly gloves, and gave up." ;
      : done ;
     }
          : wear "gardening_gauntlets" ;
         : if (traptor==2) {
         : if (!is_at "zone_inside_vicarage") {
            : print "They were designed for protecting the hands against thorns, not frost. Arthur's fingers felt a little less chilly but they were still terribly cold." ; 
         }
         }
         
         : set_string var = "gardening_gauntlets_description"  text = "a pair of gardening gauntlets (worn)" ;
      }
      
   }
   : if (noun1_is "goggles") {
      : if (is_carried "goggles") {
      : if (is_worn "pince_nez") {
         : print "Arthur sensibly removed the pince-nez before attempting to wear the goggles." ;
         : set_string var = "nez_description"  text = "a pair of pince nez" ;
         : unwear "pince_nez" quiet = "true" ;
      }
      
          : wear "goggles" ;
         : set_string var = "goggles_description"  text = "a pair of goggles (worn)" ;
     
      }
   }
     : if (noun1_is "robes") {
      : if (is_carried "robes") {
          : wear "robes" ;
         : set_string var = "robes_description"  text = "a set of robes (worn)" ;
    
    
      }
   }
  : if (noun1_is "pince-nez") {
  : if (is_carried "pince_nez"||is_carried "spectacles_case"&&case_open&&specs_in_case) {
  : if (is_worn "goggles") {
     : print "Arthur sensibly removed the goggles before attempting to wear the pince-nez." ;
     : set_string var = "goggles_description"  text = "a pair of goggles" ;
     : unwear "goggles"quiet = "true"  ;
     
  }
  
     : if (!is_worn "pince_nez") {
        : print "Arthur placed the pince-nez on the bridge of his nose and peered through them tentatively. The world seemed to swim a little through the thick lenses, but he could still see more or less. Arthur imagined that they made him look rather scholarly." ;
        : create "pince_nez" target = "inventory" ;
        : set_false "specs_in_case" ;
        : set_string var = "case_description"  text = "a spectacles case (open)" ;
        
        : wear "pince_nez"quiet = "true"  ;
        : set_string var = "nez_description"  text = "a pair of pince-nez (worn)" ;
 
        
         }
  
     }
     
  }
  
   
   }
   

#WEAR END

#REMOVE START

   : match "remove _"  {
   : if (noun1_is "tweeds"||noun1_is "brogues"||noun1_is "clothes"||noun1_is "brogues"||noun1_is "suit"||noun1_is "shoes") {
      : print "Arthur felt no need to start removing his clothing at the present time." ;
      : done ;
      
   }
   
   : if (noun1_is "chair") {
: if (is_exists "chair_4") {
         : print "Arthur took the chair from under the door handle, unblocking access to the room." ;
         : destroy "chair_4" ;
         : if (!is_exists "chair_1") {
            : pocket "chair_1" ;
            : press_any_key ;
            : redescribe;
            
         }
         : if (!is_exists "chair_2") {
            : pocket "chair_2" ;
              : press_any_key ;
            : redescribe;
         }
                 : if (!is_exists "chair_3") {
            : pocket "chair_3" ;
              : press_any_key ;
            : redescribe;
         }
      }
      }
   : if (traptor==2) {
   : if (noun1_is "coat"||noun1_is "goggles"||noun1_is "boots") {
      : if (!is_at "zone_inside_vicarage"&&!is_at "garden"&&!is_at "rockery"&&!is_at "outbuilding"&&!is_at "zone_outside_vicarage") {
      : print {("Arthur decided it would be foolish in the extreme to remove the "+original "noun1"+" out here in the current weather conditions.")} ;
      : done ;
      
      }
   }
   }
   
   : if (noun1_is "coat") {
      : if (is_worn "overcoat") {
         : set_string var = "coat_description"  text = "a heavy woollen overcoat";
       : unwear "overcoat" ;
      : press_any_key ;
        : redescribe;
        
      }
   }
    : if (noun1_is "boots") {
      : if (is_worn "boots") {
       : set_string var = "boots_description"  text = "a pair of stout boots";
       : unwear "boots" ;
       : press_any_key ;
        : redescribe;
        
      }
   }
    : if (noun1_is "gloves") {
      : if (is_worn "gloves") {
         : set_string var = "gloves_description"  text = "a pair of knitted gloves";
       : unwear "gloves" ;
      : press_any_key ;
        : redescribe;
        
      }
   }
    : if (noun1_is "gauntlets") {
      : if (is_worn "gardening_gauntlets") {
         : set_string var = "gardening_gauntlets_description"  text = "a pair of gardening gauntlets";
       : unwear "gardening_gauntlets" ;
      : press_any_key ;
        : redescribe;
        
      }
   }
    : if (noun1_is "goggles") {
      : if (is_worn "goggles") {
       : set_string var = "goggles_description"  text = "a pair of goggles";
       : unwear "goggles" ;
        : press_any_key ;
        : redescribe;
        
      }
   }
    : if (noun1_is "robes") {
      : if (is_worn "robes") {
       : if (endgame) {
      : print "Arthur felt strongly that he should keep the robes on. They seemed to offer him a degree of magical protection." ;
         : done ;
         
      }
       : set_string var = "robes_description"  text = "a set of robes";
       : unwear "robes" ;
        : press_any_key ;
        : redescribe;
        
      }
   }
     : if (noun1_is "nez") {
      : if (is_worn "pince_nez") {
       : set_string var = "nez_description"  text = "a pair of pince-nez";
       : unwear "pince_nez" ;
  : press_any_key ;
        : redescribe;
        
      }
   }
   }

#REMOVE END

#TRY MOVE start
: if (is_at "zone_road_to_village"||is_at "zone_road_to_wood") {
: mask{
: if (try_move() != "") {
: if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   : print "Arthur picked up the bicycle." ;
   : set_true "hasbike" ;
       : press_any_key ;
      
   }
      }
        : if (!ash_follow) {
      : print "Arthur mounted the bicycle and carried on along the road." ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
          : press_any_key ;
      
      }
      
      
      
       }
}
}

}
: if (is_at "zone_wood") {
: if (is_movement_command () ) {
      :if (try_move() == "") {
   : print "The wood was an impenetrable thicket of twisted branches and thorny shrub, between which occasional splinters of sunlight broke. Everywhere was choked with the jagged leaves of stinging nettles, like rows of teeth waiting to inflict pain on any trespasser. Arthur didn't fancy fighting his way through that lot." ;
   : done ;
   }
}
}

   : if (is_at "wood_entrance") {
  : match "northeast -; northwest -"  {
   :mask{
      : if (is_present "ottoline_elderfield") {
      : if (ottoline_description=="Ottoline Elderfield (with her bicycle)") {
         : print "Ottoline put down her bicycle before venturing into the wood." ;
         : create "ottolines_bike" ;
         : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
      }
     }
       : if (hasbike) {
      : print "Arthur put down his bicycle before venturing into the wood." ;
      : create "bicycle" ;
      : set_false "hasbike" ;
      : press_any_key ;
      }
      }
        } 
   }
   
   :mask{: if (try_move () =="hallway_3"||try_move () =="hallway_2"||try_move () =="scullery"||try_move () =="pub"||try_move () =="vet"||try_move () =="chemist"||try_move () =="poachers_house"||try_move()=="porch"||try_move () == "chapel"||try_move ()== "garden_path"||try_move()=="faery_hut"||try_move ()=="potting_shed") {
   : if (is_present "ottoline_elderfield"&&ottoline_follow&&ottoline_description=="Ottoline Elderfield (with her bicycle)") {
      : print "Ottoline propped her bicycle against a wall." ;
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
      : create "ottolines_bike" ;
      : press_any_key ;
      
   }
   
: if (onbike) {
   : print "Arthur dismounted the bicycle." ;
   : set_false "onbike" ;
:set_true "hasbike";
}
: if (hasbike) {
: if (is_at "path_3"||is_at "outside_west"||is_at "outside_east") {
    : print "Arthur suspected that the sufferance on which he had been allowed to remain in The Vicarage might rapidly expire if he attempted to take a bicycle inside, so he left it propped against the wall." ;
 
}
: else_if (is_at "lane_7") {
   :print "Arthur left his bicycle propped against the garden fence.";
}
: else_if (is_at "faery_zone_2"||is_at "garden_4") {
   : print "Arthur left the bicycle outside." ;
   
}


: else {
   : print "Arthur propped the bicycle against a wall." ;
   }
   : create "bicycle" ;
   : set_false "hasbike" ;
   : set_false "onbike" ;
   : press_any_key ;
   
   }
}
}

: if (is_carried "rope"&&rope_tied) {
: if (try_move ()=="well") {
     : print "Arthur thought that jumping into the hole whilst holding onto the end of the rope was rather reckless. A controlled descent was what was needed; perhaps dropping the rope down the hole first would be sensible." ;
      : done ;
}
   : if (try_move() != "") {
      : print "The rope gradually tightened as Arthur walked away from the post until, eventually, he dropped the end of it." ;
      : destroy "rope" ;
      : press_any_key ;
: move {
   
}

   }

}
: if (is_at "road_to_wood"||is_at "road_to_wood_1") {
: mask{
: if (try_move() != "") {
: if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   : print "Arthur picked up the bicycle." ;
   : set_true "hasbike" ;
       : press_any_key ;
      
   }
     
      }
       : print "Arthur mounted the bicycle and carried on along the road." ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
          : press_any_key ;
      
      
       }
}
}
}


#TRY MOVE end

: if (is_at "darkroom"&&is_dark||is_at "cellar_passage"&&is_dark||is_at "cellar_room"&&is_dark||is_at "coal_cellar"&&is_dark||is_at "pub_cellar"&&is_dark) {
   : match "get_"  {
    : if (noun1_is "matchbox") {
         : if (is_beside "matchbox") {
            : print "Arthur fumbled around in the dark and by chance found the matchbox." ;
            : get "matchbox" quiet = "true" ;
            
         }
         
      }
      : else_if (!noun1_is "match") {
      : print "Arthur fumbled around in the dark.";
         : done ;
      }
     
      
   }
     : match "open_"  {
      : if (!noun1_is "matchbox"&&!noun1_is "case") {
      : print "Arthur fumbled around in the dark.";
         : done ;
      }
   }
   : match "close_"  {
      : if (!noun1_is "matchbox"&&!noun1_is "case") {
      : print "Arthur fumbled around in the dark.";
         : done ;
      }
   }
   : match "light_"  {
      : if (!noun1_is "match") {
      : print "Arthur fumbled around in the dark.";
         : done ;
      }
   }
}

: match "safelight-"  {
   : toggle "safelight" ;
   : redescribe;
   
}
//CONTAINER CODE
 : if (is_present "drawer_1"||is_present "cupboard"||is_present "dish"||is_present "drawer"||is_present "bucket"||is_present "bottle"||is_present "flask") {
      : gosub "container_management" ;
   }
 #TALK start
 
 : match "talk _;tell _"  {
    : print "(If Arthur wanted to speak to someone then he would simply ASK [[CHARACTER]]. They would respond as they saw fit, depending on the place and time.)" ;
 }
 
 
 #TALK end
 
#DIRECTIONS start
#EAST start
: match "e_"  {

   : if (is_at "hallway_2"||is_at "scullery") {
   : if (traptor==4) {
   : if (parent_of "ottoline_elderfield"=="drawing_room") {
      : print "Arthur didn't feel the need to go gadding about outside at this time of night. Besides, Ms Elderfield was here and his plans for this evening involved remaining indoors." ;
   }
   : else {
      : print "Arthur didn't feel the need to go gadding about outside at this time of night. Besides, he was expecting a visit from Ms Elderfield and his plans for this evening involved remaining indoors." ;
       }
       : done ;
       
   }
   
   : if (is_carried "steps") {
      : print "Arthur felt rather foolish going outside with the set of library steps. They so patently belonged inside the house that he decided to leave them behind." ;
      : drop "steps"quiet = "true"  ;
   }
   : if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
      : print "Arthur didn't think it would be right to take The Vicarage's chairs for a trip outside." ;
      : if (is_carried "chair_1") {
        : drop "chair_1" quiet = "true" ;
         
      }
        : if (is_carried "chair_2") {
        : drop "chair_2" quiet = "true" ;
         
      }
        : if (is_carried "chair_3") {
        : drop "chair_3" quiet = "true" ;
         
      }
      
   }
   
      : if (!housespellbroken) {
      : if (daytime) {
          : print "Arthur felt a subtle change as he left the house, as though a cloud had suddenly passed over the sun - though glancing up, he saw that the sky was bright and empty. In contrast with the cool neutrality of the house, the air out here felt invisibly alive, as though charged with electricity." ;
      }
      : else {
          : print "Arthur felt a subtle change as he left the house, as though a cloud had suddenly passed over the moon - though glancing up, he saw that the sky was bright and empty. In contrast with the cool neutrality of the house, the air out here felt invisibly alive, as though charged with electricity." ;
      }
      
        
         : if (is_at "hallway_2") {
            : goto "outside_east" ;
            
         }
         : else_if (is_at "scullery") {
            : goto "path_3" ;
            
         }
         
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   : else_if (is_at "outside_west") {
   : if (!housespellbroken) {
      : print "Arthur passed across the threshold with an odd sensation like stepping into cool, still water. While outside life busied on, within these walls the world seemed to have paused between one breath and the next." ;
       : press_any_key ;
      }
      : goto "hallway_3" ;
         : redescribe;
   }
   : else_if (is_at "study") {
   : if (traptor>1) {
      : print "Arthur tried the door and discovered that it was locked. Mrs Taplow must have been there before him." ;
      : done ;
      
   }
   
   
   : if (moved_tapestry) {
      : if (is_carried "match_1"||is_carried "holder_1") {
         : gosub "photosensitive" ;
         : goto "darkroom" ;
         }
         : goto "darkroom" ;
         : redescribe;
         
      }
      
   }
   : else_if (is_at "lane_1") {
 
   : if (traptor==2) {
      : print "Even if he had been minded to trek the five miles to Nether Haelstowne in the dead of night, the deep drift of snow blocking the road down the hill was enough to dissuade Arthur from attempting such folly." ;
      : done ;
   }
   : if (traptor==5&&ottoline_follow ) {
      : print "\"Oh, really Arthur - I don't want to go on that dreary ride down to the village again. I shall wait for you at the old village site.\" She hopped onto her bicycle and cycled away." ;
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
      
      : create "ottoline_elderfield"target = "DMV_3"  ;
      
      : create "ottolines_bike" target = "DMV_3" ;
      
: set_false "ottoline_follow" ;
: move;
: press_any_key ;
: redescribe;
   }
   : if (traptor==6) {
    : print "Arthur felt that he no more business in the present day village of Haelstowne." ;
      
   }
   
   : if (traptor==1||traptor==3||traptor==5) {
   : if (!bikefixed||!is_present "bicycle"&&!hasbike&&!onbike) {
      : if (snowfall) {
         : print "Snow was falling impossibly from the June sky but in spite of that, it was still a blazing hot day." ;
      }
      : else {
         : print "It was a blazing hot day.";
      }
      
      
         : print "The sun beat down remorselessly, the flowers wilted in the hedgerows and there was barely a breath of wind. Arthur looked along the long and dusty road to the village, shimmering faintly in the heat, and decided that he didn't much fancy the prospect of walking the five miles to Nether Haelstowne. He would need some means of transport.  " ;
      : done ;
   }
   
 : if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   :mask{
   : print "Arthur picked up the bicycle." ;
    : print "Arthur mounted the bicycle and set off along the road to Nether Haelstowne" ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : press_any_key ;
   }
   }
      }
      : else {
      :mask{
       : print "Arthur mounted the bicycle and set off along the road to Nether Haelstowne" ;
       : set_true "onbike" ;
      :set_false "hasbike";
       : press_any_key ;
       }
      }
}
      :else {
      : goto "road_1" ;
      : redescribe;
      }
   }
   }
   : else_if (is_at "porch") {
      : if (traptor==2||traptor==4||traptor==6) {
     : print "Arthur tried the door of the church and discovered that, quite sensibly, it was locked." ;
   }
   }
     : if (is_at "chapel") {
   :mask {
      : if (is_carried "horseshoe_nail_1") {
         : print "The horseshoe nail was glowing so brightly that even on a sunny day it would be conspicuous. Arthur felt that he should conceal it inside something before he carried it beyond the chapel." ;
         : if (is_present "ottoline_elderfield") {
            : print "\"We really should hide that thing before we go outside, you know Arthur\" said Ottoline. \"It's bound to draw attention.\" " ;
            
         }
         
         : drop "horseshoe_nail_1" ;
         : press_any_key ;
         
         }
      }
      
   }
   : if (is_at "lane_4"&&is_carried "injured_rabbit") {
      : print "Arthur thought he shouldn't carry the poor, injured creature for a long way along the lanes. It was in a bad way and needed attention quickly." ;
   
   }
     : else_if (is_at "DMV_2"&&endgame) {
      : print "Arthur tried to leave the village but found that he couldn't. It was as though there was an invisible barrier preventing him, beyond which there was nothing but blackness. And then suddenly he understood: the world outside the village had ceased to exist. He was trapped within a little pocket of the here and now, beyond which was nothing." ;
      : execute_one_at_random {
      : print "\"We can't leave, Arthur\" said Ottoline quietly. \"There is nowhere else to go, only here and now.\"" ;
           : print "\"Don't you see, Arthur?\" said Ottoline, \"There is nowhere else to go. The past is in the present and we have no choice but to relive it.\"" ;
                : print "\"It's no use Arthur,\" said Ottoline gently, \"We can't escape it. We've been brought here to relive whatever it is that happened all that time ago." ;
      }
      
   }
   
         : if (is_at "church") {
         : if (bell_ringing>0) {
                  : print "Arthur gradually slowed the bells until they were at rest once more and then let go of the rope." ;
            : set_integer var = "bell_ringing"  value = "0" ;
            : set_false "holding_rope" ;
            
            : press_any_key ;
            : move;
                     : done ;
         }
         : if (holding_rope) {
            : print "Arthur dropped the dangling rope." ;
            : set_false "holding_rope" ;
            
            : press_any_key ;
            
         }
       : move ;
        : redescribe;
        
         
         }
}
#EAST end

#NORTHEAST start

: match "ne_"  {
   : if (is_at "lane_7") {
    : if (is_carried "injured_rabbit") {
      : print "Arthur thought he shouldn't carry the poor, injured creature for a long way along the lanes. It was in a bad way and needed attention quickly." ;
      : done ;
      
   }
   : else_if (traptor==2) {
      : print "Arthur looked away up the snow-choked road to the dark and distant woodland and decided not to venture into the unknown at this time of night and in these inhospitable conditions.";
   : done ;
   }
   : if (traptor==3) {
    : if (!is_present "ottoline_elderfield") {
      : if (!has_not_created "mirror") {
                  : print "Arthur was ordinarily a solitary investigator, but on this occasion he felt that he might find out more if he had Ms Elderfield with him. He sensed she possessed intuitions that he couldn't quite explain." ;
                  : done ;
                  
         }
         : else {
         : if (has_not_created "trunk_key") {
              : print "Arthur looked away up the winding road to the distant woodland and didn't see any particular reason to set off on such an expedition into the unknown.";
              : done ;
         }
         : else {
            : print "Arthur looked away up the winding road to the distant woodland and remembered Frank Farthing's story about the night of Peldash's disappearance. It seemed he would have to venture up there, but he hesitated under the weight of some terrible foreboding. He would have felt much happier if he had a companion to go with him." ;
            : done ;
            
         }
         
            
              
         }
         
         
      }
      
   }
   
   : if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   :mask{
   : print "Arthur picked up the bicycle." ;
   : if (ottoline_follow) {
       : print "Arthur mounted the bicycle and, accompanied by Ottoline, set off along the road to the wood." ;
       : set_string var = "ottoline_description"  text = "Ottoline Elderfield (on her bicycle)" ;
        : set_true "onbike" ;
        
            : set_false "hasbike" ;
   }
   :else{
    : print "Arthur mounted the bicycle and set off along the road to the wood." ;
      }
      : set_true "onbike" ;
      : set_false "hasbike" ;
      
      : destroy "bicycle" ;
      : press_any_key ;
   }
   }
   : else {
   : if (traptor==3&&is_present "ottoline_elderfield") {
        : print "\"It's much too far to get to the wood on foot,\" said Ottoline. \"You'll certainly need some transport.\"" ;
   : done ;
   }
   : else {
        : print "Arthur looked up the twisting lane and over the tops of distant hedges to the dark smudge of the wood far beyond. It seemed just a little too far to reach it on foot." ;
      : done ;
   }
   }
      }
      : else {
       :mask{
   : if (ottoline_follow) {
       : print "Arthur mounted the bicycle and, accompanied by Ottoline, set off along the road to the wood." ;
       : set_string var = "ottoline_description"  text = "Ottoline Elderfield (on her bicycle)" ;
   }
   :else{
    : print "Arthur mounted the bicycle and set off along the road to the wood." ;
      }
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : press_any_key ;
   }
   }
   
   
   }
   : else {
   : if (traptor==3&&ottoline_follow) {
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield (on her bicycle)" ;
   }
   : move;
   }
   }
     
}

#NORTHEAST end

#WEST start
: match "w_"  {
   : if (is_at "outside_east"||is_at "path_3") {
      : if (!housespellbroken) {
         : print "Arthur passed across the threshold with an odd sensation like stepping into cool, still water. While outside life busied on, within these walls the world seemed to have paused between one breath and the next." ;
         : if (is_at "outside_east") {
            : goto "hallway_2" ;
         }
         : else_if (is_at "path_3") {
            : goto "scullery" ;
            
         }
 : press_any_key ;
         : redescribe;
      }
   }
: else_if (is_at "hallway_3") {
 : if (traptor==4) {
   : if (parent_of "ottoline_elderfield"=="drawing_room") {
      : print "Arthur didn't feel the need to go gadding about outside at this time of night. Besides, Ms Elderfield was here and his plans for this evening involved remaining indoors." ;
   }
   : else {
      : print "Arthur didn't feel the need to go gadding about outside at this time of night. Besides, he was expecting a visit from Ms Elderfield and his plans for this evening involved remaining indoors." ;
       }
       : done ;
       
   }
 : if (is_carried "steps") {
      : print "Arthur felt rather foolish taking the set of library steps outside. They so patently belonged inside the house that he decided to leave them behind." ;
      : drop "steps"quiet = "true"  ;
      
   }
   : if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
      : print "Arthur didn't think it would be right to take The Vicarage's chairs for a trip outside." ;
      : if (is_carried "chair_1") {
        : drop "chair_1" quiet = "true" ;
         
      }
        : if (is_carried "chair_2") {
        : drop "chair_2" quiet = "true" ;
         
      }
        : if (is_carried "chair_3") {
        : drop "chair_3" quiet = "true" ;
         
      }
      
   }
   : if (!housespellbroken) {
 : if (daytime) {
          : print "Arthur felt a subtle change as he left the house, as though a cloud had suddenly passed over the sun - though glancing up, he saw that the sky was bright and empty. In contrast with the cool neutrality of the house, the air out here felt invisibly alive, as though charged with electricity." ;
      }
      : else {
          : print "Arthur felt a subtle change as he left the house, as though a cloud had suddenly passed over the moon - though glancing up, he saw that the sky was bright and empty. In contrast with the cool neutrality of the house, the air out here felt invisibly alive, as though charged with electricity." ;
      }
: press_any_key ;

  }
 : goto "outside_west" ;
 : redescribe;
         }
: if (is_at "darkroom") {
: if (is_carried "film") {
: if (film_description=="a strip of undeveloped film"||film_description=="a strip of film negatives (unfixed, unwashed)"||film_description=="a strip of film negatives (unfixed, washed)") {
               : print "Arthur did not want to ruin the film by exposing it to ordinary light, so he left it behind in the darkroom." ;
            : create "film" ;
: press_any_key ;

   }
   }
: if (is_carried "sheet") {
:if (sheet_description=="a sheet of new, unexposed photo paper"||sheet_description=="a sheet of exposed, undeveloped photo paper"||sheet_description=="a sheet of contact prints (unfixed, unwashed)"||sheet_description=="a sheet of contact prints (unfixed, washed)"){
               : print "Arthur did not want to ruin the sheet of photo paper by exposing it to ordinary light, so he left it behind in the darkroom." ;
               : create "sheet" ;
               : press_any_key ;
                }
               
               }
               : if (is_carried "packet"&&packet_open) {
               : print "Arthur did not want to ruin the packet of photo paper by exposing it to ordinary light, so he left the packet behind in the darkroom." ;
               : create "packet" ;
               : press_any_key ;
                
               
               }
             : goto "study" ;
: redescribe;  
         }
         
         
         : if (is_at "square") {
         : if (!has_not_created "frank_farthing"&&has_not_created "trunk_key") {
            : if (parent_of "frank_farthing"=="poachers_scullery"||parent_of "frank_farthing"=="poachers_house") {
               : print "Arthur didn't want to leave the village until he'd properly finished questioning Frank Farthing. To do so would be to shirk his duty as a police officer." ;
               : done ;
               
            }
            : else {
               : print "Arthur thought he oughtn't to leave the village before attending to the drunken and bleeding fellow who had been ejected from the pub. It was his duty to assist." ;
               : done ;
               
            }
            
         }
         
         : if (ash_follow) {
     : print "With Ash determined to follow him, Arthur didn't think it would be a good idea to start trekking back along the main road to The Vicarage." ;
: done ;

}

   : if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   :mask{
   : print "Arthur picked up the bicycle." ;
    : print "Arthur mounted the bicycle and set off along the main road to The Vicarage." ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : press_any_key ;
      
   }
   }
   : else {
   : if (snowfall) {
      : print "Snow was falling impossibly from the June sky but in spite of that, it was still a blazing hot day and the air was thick with heat as well as snowflakes." ;
      
   }
   : else {
      : print "It was a blazing hot day and the air was thick with heat." ;
      
   }
   
      : append "Arthur, slowly stewing within the confines of his buttoned-up shirt and tweed blazer, looked up the gentle slope of the road out of Haelstowne and perceived a precipitous incline impossible to traverse on foot. Some sort of transport seemed his only means of escape." ;
      }
   

      }
      : else {
      :mask{
       : print "Arthur mounted the bicycle and carried on along the road." ;
       : set_true "onbike" ;
      :set_false "hasbike";
       : press_any_key ;
       
       }
      }
       }
      }
      
       : if (is_at "wood_entrance") {
   :mask{
   : if (!hasbike) {
   : print "Arthur picked up the bicycle." ;
   }
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : if (is_present "ottoline_elderfield") {
    : print "Arthur mounted his bicycle and, along with Ottoline Elderfield, set off down to road towards Nevernear Cottage." ;

    
      }
      : else {
          : print "Arthur mounted the bicycle and set off down the road towards Nevernear Cottage.";
      }
       : set_true "onbike" ;
      :set_false "hasbike";
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield (on her bicycle)" ;
      : destroy "ottolines_bike" ;
       : press_any_key ;

        }
       
      }
      
         : if (is_at "church") {
         : if (bell_ringing>0) {
              : print "Arthur gradually slowed the bells until they were at rest once more and then let go of the rope." ;
            : set_integer var = "bell_ringing"  value = "0" ;
            : set_false "holding_rope" ;
            
            : press_any_key ;
            : move;
                     : done ;
         }
         : if (holding_rope) {
            : print "Arthur dropped the dangling rope." ;
            : set_false "holding_rope" ;
            
            : press_any_key ;
            
         }
         : goto "porch" ;
        : redescribe;
        
         
         }
         : if (is_at "church_1") {
            : if (is_present "cavity") {
            : if (box_description=="a small wooden casket") {
               : print "Arthur felt that it wasn't right to move the casket from its resting place, so he returned it to the cavity." ;
               : set_string var = "box_description"  text = "a small wooden casket (within the cavity)" ;
               : drop "casket" quiet = "true" ;
               
            }
            
               : print "Arthur didn't think it would be right to leave the monument in its current state, with the stone fox out of place and the secret cavity revealed." ;
               : if (rail_description!="an iron rail (inserted into the stone fox's ear)") {
                  : print "He picked up the rail and inserted it into the hole in the stone fox's ear." ;
               }
               : print "Together, he and Ottoline pushed against the rail and the stone fox swung back into position, hiding the cavity beneath. Arthur then removed the rail so that all was as it was." ; 
               : set_string var = "rail_description"  text = "an iron rail" ;
               
               : create "rail" target = "inventory" ;
    : destroy "cavity" ;
: if (box_description=="a small wooden casket (within the cavity)") {
   : destroy "casket" ;
   : destroy "bones" ;
   : if (book_description=="a tattered book (in the small wooden casket)") {
      : destroy "remnant" ;
            }
            }
            : press_any_key ;
            : move;
            
         }
              : else_if (rail_description=="an iron rail (inserted into the stone fox's ear)") {
                  : print "Arthur decided not to leave the rail conspicuously sticking out of the stone fox's ear, so he removed it and took it with him." ;
               : set_string var = "rail_description"  text = "an iron rail" ;
               : create "rail"target = "inventory"  ;
               : press_any_key ;
               
               }
         : move;
         
        
         
         }
         
}
#WEST end

#NORTHWEST start
: match "northwest_"  {
   : if  (is_at "lane_4") {
   : if (traptor==2&&!snow_dug) {
   : print "Arthur tried to carry on along the lane but the way was blocked by a deep snow drift that had piled up between the hedges on either side. It seemed impossible for him to wade through it." ;
      : done ;
   }
   : if (traptor==5&&ottoline_follow) {
            : print "\"I hope you don't mind if I don't follow you Arthur,\" said Ottoline. \"I think I'll picnic down in the meadow area. It's such a restful spot.\"" ;
            : set_false "ottoline_follow" ;
            : create "ottoline_elderfield" target = "DMV_3"  ;
            : press_any_key ;
            : move;
         }
   
   : if (cottagerouteclear) {
        :move ;
   }
       : else {
          : goto "maze_1" ;
         : redescribe;
         
       }
         
        
               }
         : if (is_at "backroad_2"&&ash_follow) {
            : print "With Ash determined to follow him, Arthur didn't think it would be a good idea to trek all the way back to The Vicarage. " ;
            
         }
         
   }
#NORTHWEST end

#UP start
: match "up_"  {
   : if (is_at "rockery") {
      : print "Arthur climbed up the rockery." ;
      : goto "top_rockery" ;
      : press_any_key ;
      : redescribe;
      
   }
   : if (is_beside "steps") {
    : if (is_at "top_stairs") {
      : print "Arthur climbed the steps rather anxiously, stationed as they were at the very top of the stairs. With every creaking footfall he imagined himself toppling over and falling into the jagged wooden throat of the staircase below. He breathed a sigh of relief when he reached the top without incident, and noted that the sill of the window recess was now quite near to him." ;
      : press_any_key ;
      
      }
      
: goto "on_steps" ;
: if (parent_of "steps"=="drawing_room") {
   : if (is_exists "something") {
      : create "something" ;
      
   }
   
}

: redescribe;

   }
   
}
#UP end

#DOWN start
 : match "down_"  {
      : if (is_at "top_rockery") {
         : print "Arthur scrambled down the rockery." ;
         : goto "rockery" ;
         : press_any_key ;
         : redescribe;
         
      }
      : if (is_at "on_steps") {
      : goto "steps" ;
      : if (is_exists "something") {
         : create "something" ;
         
      }
      
      : redescribe;
      
      }
   : if (is_at "bell_loft") {
      : print "Arthur looked for a way down and found none - except for the bell rope. He grasped it firmly, closed his eyes, said a quiet prayer and then slid all the way down until he landed safely on the stone floor below. He glanced up at the floor of the bell loft high above and immediately felt dizzy." ;
      : goto "church" ;
      : press_any_key ;
      : redescribe;
      
   }
   : if (is_at "DMV_5"&&is_present "hole") {
      : if (rope_down_well) {
      : if (fence_post_fixed) {
      :mask{
      : if (hasbike) {
         : set_false "hasbike" ;
         : create "bicycle" ;
         : print "Arthur put down the bicycle." ;
      }
      : if (ottoline_follow) {
      : set_false "ottoline_follow" ;
      }
      
           : print "Arthur climbed down the rope into the black throat of the hole in the ground." ;
           : press_any_key ;
           : redescribe;
           
           
           }
      }
      : else {
         : print "Arthur thought about climbing down the rope into the hole and hoping that the fence post would somehow jam itself across the top and remain secure as he descended - but he decided that it was too risky. He might very well end up falling who knows how far down and if he arrived at the bottom unscathed, would only remain so for as long as it took the fence post to come down after him and dash him on the head." ;
         
      }
      
       
      }
      : else {
         : print "Arthur wasn't the sort to go jumping into holes in the ground, especially when he had no idea where they might lead." ;
         
      }
      
      
   }
   : else_if (is_at "on_the_table") {
   : if (is_beside "chair_1"||is_beside "chair_2"||is_beside "chair_3") {
   : if (is_beside "chair_1"&&is_beside "chair_2"||is_beside "chair_2"&&is_beside "chair_3"||is_beside "chair_1"&&is_beside "chair_3") {
      : print "Arthur picked up the chairs and awkwardly clambered down off the table." ;
   }
   : else {
        : print "Arthur picked up the chair and awkwardly clambered down off the table." ;
   }
   
    
   : if (is_beside "chair_1") {
     : get "chair_1" quiet = "true" ;
      
   }
    : if (is_beside "chair_2") {
     : get "chair_2" quiet = "true" ;
   }
    : if (is_beside "chair_3") {
    : get "chair_3" quiet = "true" ;
      
   }
       }
   : else {
      
      : print "Arthur clambered down off the table" ;
   }
   
      : goto "drawing_room" ;
      : if (is_exists "something") {
         : create "something" ;
         
      }
      
      : press_any_key ;
      : redescribe;
  
   }
            : if (is_at "on_chair") {
             : goto { target -> (down_chair_location) }
               : print "Arthur climbed down off the chair.";
               : if (is_exists "something") {
                  : create "something" ;
                  
               }
               
               : press_any_key ;
               : redescribe;
            }
            : if (is_at "on_monument") {
               : goto "church_1" ;
               : create "triptych" ;
     : redescribe;
            }
            
      
      
      
   }

#DOWN end

#NORTH start

: match "north-"  {
 : if (is_at "drawing_room"&&is_present "chair_4") {
      : print "A chair was wedged under the door handle, making a very effective barrier to entry or exit." ;
      : done ;
      
   }
   : if (is_at "pub") {
      : if (is_present "molly") {
         : print "Arthur lifted the hatch and made boldly to walk behind the bar but instead walked directly into Molly who had moved swiftly to fill the breach. \"Now now Mr Mapple,\" she reproved, a little mockingly, \"what business would you be wanting back here I wonder? Police or no police, I can't never let customers behind the bar. Mr Jarbell would never stand for it!\" She smiled at her boss, who shrank back a little and gave a nervous laugh. Arthur turned away and heard the thud of the hatch closing behind him." ;
      }
      : else {
         : print "Mr Jarbell raised an eyebrow as he saw Arthur walk behind the counter of the pub, but seeing as how he was an officer of the law and had just rescued his child, he seemed minded to turn a blind eye and let him get on with his business." ;
         : goto "behind_the_bar" ;
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   : if (is_at "outside_poachers") {
      : print "The door of number 23 was closed and Arthur was not the type to enter without knocking." ;
      
   }
   : if (is_at "lane_7"&&traptor==2) {
      : print "Arthur felt that now was not the time to walk up the garden path and knock on the door of Nevernear Cottage. However could he explain what he was doing there at this time of night?" ;
      : done ;
      
   }
   :mask{
   : if (is_at "DMV_5"&&!cover_on) {
   : if (rope_down_well) {
      : print "Arthur felt that he shouldn't leave the hole in the ground uncovered - heaven knew what or who might end up down there - so he retrieved the rope and then grasped the ring and inched the cover back into place before leaving." ;
;
      : set_false "rope_down_well" ;
      : destroy "rope" ;
      
   }
   : else {
       : print "Arthur felt that he shouldn't leave the hole in the ground uncovered - heaven knew what or who might end up down there - so he grasped the ring and inched the cover back into place before leaving." ;
   }
      : set_true "cover_on" ;
      : press_any_key ;
      : destroy "hole" ;
      
      }
   }
   : if (is_at "wetland") {
   : if (ash_follow) {
   : print "With Ash following him, Arthur resigned himself to trekking to the village on foot." ;
   : if (!hasbike) {
      : print "Before he left the wetland, he fetched the bicycle. It was far too useful to leave lying around in this wild place." ;
: set_true "hasbike" ;

   }
   
   : press_any_key ;
   : goto "backroad_2" ;
   : redescribe;
   
   
}
                  : if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   :mask{
   : print "Arthur picked up the bicycle." ;
    : print "Arthur mounted the bicycle and carried on along the road." ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : press_any_key ;
      
   }
   }
   : else {
      : print "It was a blazing hot day and the air was thick with heat. Arthur, sticky inside his tweeds, looked along the dusty strip of road and decided he couldn't face the trek on foot. He would need some form of transport." ;
      
   }
   

      }
      : else {
      :mask{
       : print "Arthur mounted the bicycle and carried on along the road." ;
       : set_true "onbike" ;
      :set_false "hasbike";
       : press_any_key ;
       
       }
      }
    
      
       }
   }
   : if (is_at "garden_path") {
   : if (is_present "ottoline_elderfield") {
      : print "Arthur could hardly barge past Ms Elderfield and into her house. He was the sort of policeman who, even if in possession of a search warrant, would always knock politely first." ;
      
   }
   : else {
          : print "Arthur wasn't in the habit of attempting to open people's front doors, especially the doors of those he hardly knew. He would have preferred to knock and wait for an answer." ;
          
   }
   
  
   }
   : if (is_at "lane_7") {
   :mask {
    : print "As he passed through the garden gate, Arthur felt a distinct change in the atmosphere similar to that he had experienced when entering The Vicarage. He felt enclosed within an invisible bubble of quiet neutrality and the outside world beyond the garden fence, in appearance unchanged, seemed somehow less real than before." ;
      : if (is_present "ottoline_elderfield") {
      : if (ottoline_follow) {
         : set_false "ottoline_follow" ;
      }
         : print "Ottoline looked curiously at Arthur as he strode off up the garden path to her front door." ;
      }
            : press_any_key ;
      
      }
   }
   : if (is_at "clearing") {
   : if (traptor==6) {
      : print "Arthur tried the door of the hut and found that it was locked. Frank Farthing must have been there before him" ;
      : done ;
      
   }
   
      : print "Arthur tried the door of the ramshackle hut and discovered that, although stiff, it was not locked." ;
      : if (is_present "ottoline_elderfield") {
         : print "It creaked open, and Arthur and Ottoline went inside." ;
      }
       : else {
           : print "It creaked open, and Arthur went inside." ;
      }
      : move;
      : press_any_key ;
      : redescribe;
      
      
      
   }
  
   : if (is_at "vet") {
    : if (drywell_ask_counter==0) {
       : print "\"Thanks heavens!\" Arthur heard Miss Drywell say as he left the surgery, \"The message seems finally to have got through!\"" ;
    }
      : if (drywell_ask_counter==1) {
       : print "\"I'm afraid that duty calls,\" said Arthur to Miss Drywell, somewhat abruptly. She nodded.\n\"Very well, Mr Mapple. But if you should still find that you need to speak to me, you know where you can find me. Goodbye.\"\n Arthur took his leave. " ;
    }
      : if (drywell_ask_counter==2) {
       : print "\"I'm so sorry, Miss Drywell,\" said Arthur, rather suddenly, \"but I'm afraid I'm being called away.\"\n\"Never mind, Mr Mapple. I really should be getting back to my patients in any case. I hope you find what you're looking for in the church.\"" ;
    }
      : press_any_key ;
      : move;
      
   }
   : if (is_at "lane_1") {
 
    : if (traptor==5&&ottoline_follow ) {
      : print "\"Well, I shan't follow you into The Vicarage Arthur. Mrs Taplow and I don't quite see eye to eye. I'll wait for you at the old village site.\"\nOttoline got on her bicycle and cycled away." ;
         : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
      : create "ottoline_elderfield"target = "DMV_3"  ;
         : create "ottolines_bike" target = "DMV_3" ;
: set_false "ottoline_follow" ;
: press_any_key ;
:move;

   }
   : else_if (traptor==6&&ottoline_follow) {
        : print "\"Well, I shan't follow you into The Vicarage Arthur,\"said Ottoline.\"I'll wait for you here.." ;
   
: set_false "ottoline_follow" ;
: press_any_key ;
:move;
     
      
      
   }
   
   }
: if (is_at "DMV_1") {
   : if (traptor==5) {
      : if (ottoline_follow&&has_not_created "grimoire") {
         : print "\"Would you mind if I didn't come with you Arthur? I'd rather like to stay here and picnic.\"\n\"No, not at all,\" replied Arthur. \"I'll come and find you later.\"" ;

          : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
      : create "ottoline_elderfield"target = "DMV_3"  ;
         : create "ottolines_bike" target = "DMV_3" ;
: set_false "ottoline_follow" ;
: press_any_key ;
:move;
      }
      
   }
   : else_if (traptor==6) {
   : if (endgame) {
      : print "Arthur felt unable to leave. He was too much a part of the events that were playing out around him. He had to stay and see them through to the end." ;
      : done ;
   }
   : else {
   : if (spell>11) {
      : print "Arthur sensed a transition, as though he was stepping from one time into another." ;
      : press_any_key ;
      : move {
               
   }
   
      }
      
   }
   
   }
  
 
   
}
: if (is_at "sweet_track_2") {
   : print "Arthur sensed a transition, as though he was stepping between worlds." ;
   : press_any_key ;
   : move;
   
}
: if (is_at "pub_cellar"&&is_carried "date_stone") {
 : print "Arthur didn't think it would be sensible to carry around a lump of the pub's masonry, so he put the date stone back in the wall before leaving the cellar." ;
 : set_string var = "date_stone_description"  text = "a date stone (in the stone wall)" ;
   : drop "date_stone"quiet = "true"  ;
   : destroy "hole_wall" ;
   
   : press_any_key ;
   : move;
   
}

    
   
}

#NORTH end

#SOUTH start

: match "south-"  {

: if (is_at "sweet_track_bridge") {
: if (!has_not_created "broken_dagger"&&!is_exists "broken_dagger") {
   : print "Arthur sensed a transition, as though he was stepping between worlds." ;
   : press_any_key ;
   : goto "sweet_track_2" ;
   : redescribe;
   
}
: else {
   : print "Arthur sensed an invisible barrier. It seemed that he could go no further." ;
   
}

}
: if (is_at "square") {
 : if (!has_not_created "frank_farthing"&&has_not_created "trunk_key") {
            : if (parent_of "frank_farthing"=="poachers_scullery"||parent_of "frank_farthing"=="poachers_house") {
               : print "Arthur didn't want to leave the village until he'd properly finished questioning Frank Farthing. To do so would be to shirk his duty as a police officer." ;
               : done ;
              
            }
            : else {
               : print "Arthur thought he oughtn't to leave the village before attending to the drunken and bleeding fellow who had been ejected from the pub. It was his duty to assist." ;
               : done ;
               
            }
            
         }
: if (ash_follow) {
: print "With Ash determined to follow him, Arthur didn't think it would be a good idea to start trekking back along the back road to The Vicarage." ;
: done ;

}

            : if (!onbike) {
   : if (!hasbike) {
   : if (is_present "bicycle") {
   :mask{
   : print "Arthur picked up the bicycle." ;
    : print "Arthur mounted the bicycle and carried on along the road." ;
      : set_true "onbike" ;
          : set_false "hasbike" ;
      : destroy "bicycle" ;
      : press_any_key ;
      
   }
   }
   : else {
      : print "It was a blazing hot day and the air was thick with heat. Arthur, slowly stewing within the confines of his buttoned-up shirt and tweed blazer, looked up the gentle slope of the road out of Haelstowne and perceived a precipitous incline that seemed impossible to traverse on foot. Some sort of transport was his only means of escape." ;
      
   }
   

      }
      : else {
      :mask{
       : print "Arthur mounted the bicycle and carried on along the road." ;
       : set_true "onbike" ;
      :set_false "hasbike";
       : press_any_key ;
       
       }
      }
       }
       }
       : if (is_at "poachers_house") {
          : print "\"I'm so sorry, Mrs Farthing, but I'm being called away,\" said Arthur apologetically.\n\"That's quite alright,\" said Daisy. \"I expect you're a busy man.\"\nHe left the Farthing's house." ;
          : press_any_key ;
          : goto "outside_poachers" ;
          : redescribe;
          
       }
: if (is_at "garden") {
   
}

   : if (is_at "drive") {
   : if (traptor==2) {
   : print "Arthur trudged through the gate.\n As soon as he stepped beyond the boundary of The Vicarage and into the lane, the full force of the weather hit him. A fierce and biting wind whipped snowflakes into his face where they stung like shards of glass, the snow was piled up in great drifts all along the length of the lane and the temperature on this late June evening was well below freezing.  " ;
   : if (!is_worn "goggles"||!is_worn "overcoat"||!is_worn "boots") {
   : if (!is_worn "goggles") {
      : print "Particles of ice stung Arthur's eyes so that he could barely see a thing." ;
   }
 
      : if (!is_worn "overcoat") {
      : if (is_worn "robes") {
         : print "The robes were designed for ceremony and not protection against the weather. The freezing wind cut through them." ;
         
      }
      : else {
           : print "The freezing wind cut through Arthur's light summer clothing and chilled him to his very core." ;
      }
      
       
      }
      : if (!is_worn "boots") {
         : print "The snow was so deep that Arthur feared to venture into it in his lightweight brogues. They were hardly suitable footwear for these incredible alpine conditions!" ;
         
   }
   : print "Arthur retreated back into the relative sanctuary of The Vicarage driveway." ;
   : press_any_key ;
   : redescribe;
   
      }
      : else {
         : print "Arthur steeled himself and, dressed awkwardly in his borrowed apparel, prepared to weather the worst of the unseasonable winter storm." ;
         : goto "lane_1" ;
         
         : press_any_key ;
         : redescribe;
         
      }
      
   }
  
   
}
: if (is_at "garden_path") {
: if (traptor==3) {
   

:mask {
   : if (is_present "ottoline_elderfield") {
      : print "\"I'm sorry to rush off Ms Elderfield, but I must leave you now.\" Arthur wasn't sure where he was going but couldn't help but feel a little relieved for the chance to put an end to a rather difficult interview.\n\"That's quite all right, Mr Mapple. I myself have many things to do. Perhaps the next time you could give me fair warning before you turn up on my doorstep?\" Arthur was a little taken aback by her bluntness.\n\"Of course, Ms Elderfield. I'm so sorry to have disturbed you.\"" ;
      : destroy "ottoline_elderfield" ;
      : press_any_key ;
      
      }
      : else_if (parent_of "ottoline_elderfield"=="lane_7") {
         : set_true "ottoline_follow" ;
      }
      
   }
   
}
: else_if (traptor==5) {
   : if (ottoline_ask_counter==8) {
    :if (is_present "ottoline_elderfield") {
    :mask {
     : print "\"Very well Arthur - perhaps we'll see each other a little later?\" Ottoline closed the door.\"" ;
     : destroy "ottoline_elderfield" ;
     : press_any_key ;
     }

     
   }
   
     
      
   }
   
}
   }
: if (is_at "nevernear_cottage") {
: if (!is_present "ottoline_elderfield") {

   : print "Arthur thought it rather rude to simply walk out of Ms Elderfield's cottage while she was engaged in the making of tea. Whatever would his excuse be?" ;
}
: else {
   : print "Nothing would induce Arthur to be so rude as to simply walk out of the cottage during his interview with Ms Elderfield - unless, perhaps, his clothes were on fire." ;
}
}
: if (is_at "lane_7") {
   : if (traptor==3) {
      : if (is_present "ottoline_elderfield") {
      :mask{
         : if (has_visited "wood_entrance") {
            : print "Ottoline glanced anxiously towards the distant wood. \"Dear old Crackers, all alone and so far away. I do hope he'll find his way back home.\"\n\"I'm sure he will Ottolline,\"said Arthur reassuringly, \"it's no distance really, as the crow flies.\"\n She smiled at his feeble joke. \"In any case, Arthur, I'm afraid that I have some things to do. Perhaps I shall see you later?\" \nThey took their leave of one another and Ottoline went back inside Nevernear Cottage." ;
           : set_false "ottoline_follow" ;
           
         }
            : else {
               : print "\"I see Arthur - you're not interested in visiting Calderhall Wood after all?\" She seemed mildly affronted. \"Very well. Perhaps we shall see one another later then?\" She went back inside Nevernear Cottage." ;
                : destroy "crow" ;
            }
            : destroy "ottoline_elderfield" ;
            : set_false "ottoline_follow" ;
            
             : press_any_key ;
         }
         
      }
      
   }
   
}
   : if (is_at "hut") {
   :mask {
      : if (is_present "ottoline_elderfield") {
         : print "Arthur and Ottoline left the hut, closing the door behind them." ;
      }
       : else {
           : print "Arthur left the hut, closing the door behind him." ;
      }
      : press_any_key ;
      
      }

   }

 : if (is_at "outside_vet") {
 : if (is_present "ash") {
    : print "Arthur didn't think it would be wise to visit the veterinary surgery with Ash following him. His priority was to see Mr Jarbell's child home safely." ;
    : done ;
    
 }
 
    : if (traptor==5) {
    : if (drywell_ask_counter==3) {
       : print "Arthur tried to, but the door of the veterinary surgery was closed. Surgery hours must have finished for the day." ;
       : done ;
       
}
    
    : if (!has_not_created "cardboard_box") {
        : if (drywell_ask_counter==-1) {
            : increment "drywell_ask_counter";
        }
    : move;
    
    }
: else {
    :print "Arthur had no reason or inclination to mingle with the sick animals and anxious humans at the Veterinary Surgery.";
}
    }
    
    : else {
    :print "Arthur had no reason or inclination to mingle with the sick animals and anxious humans at the Veterinary Surgery.";
    }
    
 }
 : if (is_at "pub") {
 : mask {
 : if (is_present "ash") {
    : destroy "ash" ;
    
 }
 
    : if (parent_of "joseph_jarbell"=="pub_cellar") {
       : create "joseph_jarbell" target = "pub" ;
      : print "Arthur saw Mr Jarbell emerging from the cellar door." ;
      : press_any_key ;
      
      
 }
       : if (is_carried "pint") {
        : print "\"No taking drinks outside if you don't mind sir,\" said Mr Jarbell as he saw Arthur heading for the door with his pint of ale \"or else you'll have the law down on us. 'Cept, of course...\" he looked at Arthur a little uncertainly, \"well, no doing it anyway, if you don't mind Mr Mapple.\"\n Arthur left the drink behind. " ;
        : destroy "pint" ;
        
        : press_any_key ;
        
       }
         : if (is_carried "pint_jug") {
        : print "\"No taking jugs outside if you don't mind sir,\" said Mr Jarbell as he saw Arthur heading for the door with his pint of ale \"or else you'll have the law down on us. 'Cept, of course...\" he looked at Arthur a little uncertainly, \"well, no doing it anyway, if you don't mind Mr Mapple.\"\n Arthur left the drink behind. " ;
        : destroy "pint_jug" ;
        
: press_any_key ;

       }
    }
    
 }
 : if (is_at "lane_3") {
    : if (ottoline_follow&&ottoline_description=="Ottoline Elderfield (on her bicycle)") {
      : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
      : move {
         
      }
      
       
    }
    
 }

   : else_if (is_at "DMV_3"&&endgame) {
       : print "Arthur felt unable to leave. He was too much a part of the events that were playing out around him. He had to stay and see them through to the end." ;
    
   }
   : else_if (is_at "footpath_2"&&traptor==6&&spell>11) {
      : print "Arther sensed a transition, as if he were stepping between two different times." ;
      : press_any_key ;
      : move {
         
      }
      
   }
   
   
         }
#SOUTH end


#DIRECTIONS end

: if (try_move() != "") {
:mask{
  : if (sitting) {
     : print "Arthur got up from the chair." ;
     : set_false "sitting";
      : set_false "holding_hands" ;
      :gosub "chair_creation"; 
      :press_any_key;
      :redescribe ;
  }
  }
}
#EXAMINE start
: match "examine _"  {
: if (preposition_is "under") {
   : print "Arthur felt that he had more pressing things to do than spend time looking under things." ;
   : done ;
}
: if (preposition_is "behind") {
     : print "Arthur felt that he had more pressing things to do than spend time looking behind things." ;
        : done ;
     
}
: if (preposition_is "on") {
     : print "Arthur felt that he had more pressing things to do than spend time looking on top of things." ;
     : done ;
}
: if (noun1_is "chair"&&sitting) {
   : print "It was a very plain and ordinary chair of the sort that one might spend hours sitting upon and then walk away from and be unable to describe a single thing about even if one's life depended on it. That was often the way with chairs." ;
   
}
: if (noun1_is "rail"&&is_at "study") {
   : print "It was a very functional and unremarkable brass rail, to which the hanging tapestry was attached." ;
   
}

 
: if (noun1_is "images") {
:if (is_carried "film") {
   : if (film_description=="a strip of film negatives (unfixed, unwashed)"||
film_description=="a strip of film negatives (unfixed, washed)"||
film_description=="a strip of film negatives (fixed, unwashed)"||
film_description=="a strip of film negatives (processed, wet)"||film_description=="a strip of film negatives (processed, dry)"||
film_description=="a set of film negatives (cut from a strip)"
) {
        : gosub "describe_images" ;
   }
   : else {
      : print "But there was nothing visible on the film." ;
      
   }
   
   }
  : else_if (is_present "sheet") {
   : if (sheet_description=="a sheet of contact prints (unfixed, unwashed)"||
sheet_description=="a sheet of contact prints (unfixed, washed)"||
sheet_description=="a sheet of contact prints (fixed, unwashed)"||
sheet_description=="a sheet of contact prints (processed, wet)"
) {
        : gosub "describe_images" ;
   }
      : else {
      : print "But there was nothing visible on the sheet." ;
      
   }
   }
     : else {
      : print "But Arthur wasn't holding anything with images on it." ;
  }
}



      : if (noun1_is "car") {
      :if (is_at "path_8"){}
         : print "It was an Austin Seven Tourer, barely two years old, and Arthur's most prized possession. He bestowed upon it the same affection that, had he been a father, he might have lavished on his child. It squatted proudly on the driveway in its maroon and black livery, the starting handle lolling tongue-like from beneath the front grille." ;
           : if (faeries_car) {
            : print "Arthur had the impression of several small things taking flight as he approached the vehicle. He blinked in the sunlight and seeing nothing there, supposed that a fleeting butterfly or moth must have caught his eye. " ;
            : set_false "faeries_car" ;
            
         }
      
      
   }
   : if (noun1_is "window") {
   : if (is_at "drawing_room"||is_at "on_the_table"||is_at "on_chair"&&down_chair_location=="drawing_room"||is_at "on_chair"&&down_chair_location=="on_the_table") {
  
      : print "It was old, like all the windows in The Vicarage, and constructed of small pieces of diamond-shaped glass held together by leading. Looking through it, one saw a curiously distorted view of the driveway beyond, rippling as though underwater." ;
     : if (traptor==4) {
     : if (has_not_created "something") {
     
         : print "Arthur spotted something on top of the pelmet, over the window." ;
         : create "something" ;
         : press_any_key ;
         : redescribe;
         
     }
     
      
        
     }
     
      }
      : else_if (is_at "recess") {
         : print "It was a narrow, lead-framed arched window of quite the wrong size and shape for its setting. Arthur surmised that it was a later insertion into a blocked-off archway, the top of which now formed the recess. It was this troublesome window that Mrs Taplow had expressly warned Arthur about opening.";
       : if (!window_open) {
          : print "The window was closed." ;
       }
       : else {
          : print "The window was open." ;
          
       }
       
       
         
      }
      : else_if (is_at "zone_window"&&!is_at "nevernear_cottage") {
      : print "The windows were singularly unremarkable." ;
      
      }
      : else_if (is_at "zone_vicarage_window") {
         : print "They were old and draughty, but had done a tolerable job of being slightly better than a hole in the wall, for half a millennium or so," ;
         
      }
      
      : if (is_at "church") {
         : print "There were marvels of the medieval stained glass maker's art, alongside a few rather hackneyed Victorian panels." ;

      }
      
      
   
   }
   : if (noun1_is "recess") {
        : if (is_at "top_stairs") {
         : print "It was a wide, low recess cut into the western wall at above head-height and terminating in a window that Arthur couldn't see from where he stood.  Arthur has been instructed rather firmly by Mrs Taplow not to attempt to open the window as it had a tendency to catch and bang in the breeze, and being situated as it was in a recess above the stairs, it was difficult to shut." ;
         
      } 
   }
   
   : if (noun1_is "books") {
   : if (is_at "study") {
        : print "The shelves were tightly packed with a great many volumes of all shapes and sizes. Many appeared to be on ecclesiastical subjects, but there was also a sizeable selection on secular history, the natural sciences and folklore as well as some volumes that appeared so ancient and weathered that Arthur could not discern from their spines what their contents might be." ;
       
        
 
   }
   : if (is_at "on_steps"&&parent_of "steps"=="study") {
      : print "Arthur scanned the books on the higher shelves but saw nothing that looked particularly interesting." ;
      
   }
   
    }

: if (is_at "cellar_room") {
   : if (noun1_is "crate") {
:print "There were numerous crates and boxes containing old crockery, ornaments, pictures and other such miscellanea that had fallen from grace and relinquished the right to a place above stairs.";
      : if (has_not_created "equipment") {
         : print "A crate containing photographic equipment caught Arthur's eye. He had been interested in photography as a boy but he had not progressed much beyond Brownie snaps and the most basic arts of the darkroom before the war had came along and put an abrupt end to childhood." ;
         : print "Another crate contained dozens of plates, separated by sheets of newspaper." ;
         
         : create "equipment" ;
         : create "plates" ;
         
      }
      : else {
         : print "Aside from the photographic equipment, none of it was of particular interest to Arthur." ;
         
      }
    }
   : if (noun1_is "equipment") {
      : print "There were various lenses and fittings, mostly of Victorian vintage." ;
      : if (has_not_created "box_brownie") {
         : print "Amongst the bric a brac, Arthur turned up an old Box Brownie camera." ;
         : create "box_brownie" ;

      }
         } 
        
}

 
   : if (noun1_is "camera") {
   : if (is_present "box_brownie") {
      
  
   
        : print "It was a Box Brownie camera similar to the one that Arthur had as a boy, old and grimy but seemingly in working order. Arthur felt a pang of nostalgia as he handled the chunky, leatherette-covered casing.";
        :print "There was a button that operated the shutter, a winder, and an indicator window set into the back flap, in which the frame number appeared when the camera was wound and loaded.";
      : if (cameraopen) {
      : if (cameraloaded) {
      : if (framenumber==9) {
          : print "The camera was open and contained a finished film, safely wound onto its reel." ;
          }
          : else {
             : print "The camera was open and loaded with a new spool of film. Arthur could see the light-safe leader paper that preceded the film proper." ;
          }
      }
          : else {
             : print "The camera was empty." ;
             
          }
          
      }
      : else_if (!cameraopen){
         : print "The camera was closed." ;
         : if (!cameraloaded||framenumber==9||framenumber==0) {
            : print "The indicator window was blank." ;
            
         }
         : else {
            : print {("The number "+framenumber+ " was visible in the indicator window.")} ;
         }
      }
}
   }
   : if (is_carried "box_brownie") {
      : if (noun1_is "button") {
         : print "It was a little round bakelite button that one pressed to operate the camera shutter." ;
         
      }
      : else_if (noun1_is "winder") {
         : print "It was a small metal key jutting from the side of the casing. One turned it to advance the film to the next frame." ;
         
         }
      : else_if (noun1_is "indicator") {
         : print "It was a little window covered in red glass. It showed the frame number when the camera was loaded." ;
         
      }
   
    }

: if (is_present "equipment") {
   : if (noun1_is "lenses"||noun1_is "fittings") {
      : print "There were variously sized lenses set in brass housings, all very dusty and tarnished." ;}
     }
   : if (noun1_is "bench") {
      : if (is_at "darkroom") {
    : print "It was ancient and heavy, with such an air of enduring permanence that one could imagine it has occupied the same spot before the house existed, and the latter was built around it. "  ;
    : if (has_not_created "practical") {
       : print "Upon the bench, Arthur found a dusty old book." ;
       : create "practical" ;
       
    }
    
  }
   }
   
  : if (noun1_is "seedlings") {
     : if (is_at "potting_shed") {
           : print "There were numerous young potted plants in various stages of growth, some just sending out their first tender shoots and others rapidly outgrowing their containers and ready to plant out. Many of the pots were standing in trays to catch the excess from watering.";
           : if (has_not_created "dish") {
              : print "Arthur noticed an unusual looking tray in which several pots were standing. He removed these and placed them on the bench alongside, revealing a fine porcelain dish." ;
              : create "dish" ;
              
           }
  }
  }
  : if (noun1_is "trees"&&is_at "top_rockery"||noun1_is "rhododendron"&&is_at "top_rockery") {
        : print "They were rhododendron trees, barely taller than Arthur and in full bloom. Above they frothed with pretty white flowers, whilst below their closely spaced trunks seemed designed to conceal." ;
        
     }
     : if (noun1_is "depression") {
        : if (is_at "DMV_4"||is_at "graveyard_1") {
        : if (!seen_depression) {
        : print "It was a large depression in the earth, formed of two closely opposed curved teardrop shapes each around four foot long and one foot wide that seemed to have been pressed into the earth rather than dug out of it. The shape reminded Arthur of something and, standing back a little, he suddenly realised what it was... but of course, that was simply impossible - for there before his very eyes was what looked like nothing so much as a cloven hoofprint, of enormous proportions." ;
        : set_true "seen_depression" ;
      }
      : else {
         : print "It was a depression in the earth of the same size and shape as the other that Arthur had seen. Arthur quickly calculated the distance between the two and imagined the stride of the creature that might have made such an impression. It would have to have been of stupendous proportions. He shook his head, dismissing the wild notion. Whatever the depression was it could not, in all reason, be a hoofprint." ;
         
      }
      
        }
        
     }
    : if (noun1_is "bicycle") {
    : if (adjective1_is "ottoline's") {
    : if (is_present "ottolines_bike"||ottoline_description == "Ottoline Elderfield (with her bicycle)"||ottoline_description== "Ottoline Elderfield (on her bicycle)") {
         : print "It was a fairly ordinary safety bicycle with a sprung saddle and a basket on the front. Between the handlebars was a rail that provided a convenient perch for avian passengers." ;
    }
    
  : done ;
  
    }
    
       : if (is_present "bicycle"||hasbike) {
          : print "It was an serviceable antique of a conventional design that Arthur's grandfather might have considered a ridiculous novelty in his day, when the penny-farthing was the preferred choice of bold young men wishing to travel on two wheels. It was made from heavy, black metal, a little rusted here and there, and had a sprung leather saddle worn smooth by the jiggling behinds of generations of owners. It proudly bore the legend 'Robinson's Harlequin - Safety Bicycle' in faded white lettering upon the frame.   " ;
          : if (!bikefixed) {
            : print "The front wheel was conspicuously wobbly and the chain had become detached and hung loose. It would need repair before it could be confidently ridden." ;
            
          }
          
       }
       
    }
     : if (noun1_is "tree"||noun1_is "trees") {
        : if (is_at "graveyard_2") {
           : print "It was an enormous yew tree, twisted with age and smothered with a cloak of ivy." ;
           
        }
        : else_if (is_at "in_trees"||is_at "top_rockery") {
        : if (has_not_created "mistletoe") {
           : print "Arthur noticed a mass of green growing between branches in several spots, with leaves that were not the trees' own. Looking more closely, he realised that it was mistletoe." ;
              : create "mistletoe" ;
      }
        }
        
     }
     : if (noun1_is "ivy"&&is_at "graveyard_2") {
        : print "It was a thick mass of entangled, dark-leaved ivy that descended in enormous quantities from the trunk of the yew and spread like a thick black wave across the monument beneath." ;
: if (has_not_created "bicycle") {
   : print "Arthur noticed a bicycle that seemed to have been carelessly tossed aside and had been almost submerged in the ivy." ;
   : create "bicycle" ;
   
}

     }
     : if (noun1_is "monument"||noun1_is "sepulchre") {
     : if (is_at "graveyard_2") {
        
     
     
        : print "It would once have been a rather splendid example of ostentatious funerary mid-Victoriana, but was now a ruin of scattered bricks and rusting wrought ironwork surrounding a marble obelisk. Arthur read the inscription and found it was dedicated to the memory of one John Filshaw who, it seemed, had 'fallen asleep' in 1852 - gone and now, it seemed, quite forgotten." ;
        
        : if (has_not_created "rail") {
        : print "Arthur noticed that one of the decorative rails had come loose from its stonework fitting and lay nearby." ;
        : create "rail" ;
        
        }
        }
     }
     : if (noun1_is "tapestry"&&is_at "study") {
        : print "It was rather threadbare and faded, but it seemed to be a typical hunting scene of men on horseback pursuing wild beasts through woodland, no doubt rich in heraldic significance. The top was attached to a rail fixed to the wall and the bottom edge flapped loose.  " ;
        
     }
     : if (noun1_is "desk"&&is_present "desk") {
     : examine;
        : if (has_not_created "weight") {
           : print "Amongst the miscellaneous items littering the desk, Arthur spotted a paperweight." ;
           : create "weight" ;
        
           
          
        }
        
     }

: if (noun1_is "leaflet") {
: if (is_present "leaflet") {
: print "They were sheets of a typical local newspaper, dominated by family announcements (largely death notices), details of lots in the local cattle auction and advertisements for patent embrocations." ;
   
   : if (has_not_created "instructions") {
      : print "Arthur noticed a different piece of paper amongst the newsheets." ;
      : create "instructions" ;
      
   }
   
}

}

: if (noun1_is "lid") {
: if (is_present "frame") {
   : print "The lid of the cold frame was a simple timber construction, hinged at the back and holding a couple of panes of plate glass." ;
   : if (glass_in_frame) {
      : print "Arthur noticed that one of the panes was rather loose." ;
   }
   : else {
      : print "Arthur noticed that one of the panes was missing." ;
      
   }
   
}
}
: if (noun1_is "dresser") {
: if (is_present "dresser") {
   


   : append "It was an indomitable survivor of the Elizabethan age, so warped, smoke-damaged and riddled with woodworm in ages past that subsequent insults simply glanced off it. " ;
   : if (has_not_created "drawer") {
      : create "drawer" ;
      : print "Arthur saw that the dresser contained a drawer." ;
      
   }
   }

   
}
: if (noun1_is "cutlery") {
: if (is_present "cutlery") {
   


: print "The drawer was clearly the equivalent of a third class train compartment, with passengers to match: a sad assortment of tarnished blades, bent prongs and cracked ivory handles, only fit for the scullery drawer." ;

   : if (has_not_created "knife") {
      : print "One particular knife, a cut above the rest, caught Arthur's eye. " ;
      : create "knife" target = "drawer" ;
      
   }
   }
}

: if (noun1_is "film") {
: if (is_present "film") {
   : if (film_description=="a roll of film") {
     :print "It was a dusty roll of film suitable for a Box Brownie camera, unboxed but unused. There was no telling how old it was, but it might still be usable.";
     : done ;
     
   }
   : else_if (film_description=="a roll of exposed film") {
      : print "It was a roll of exposed film, ready for processing." ;
      : done ;
      
   }
   : else_if (film_description=="a strip of undeveloped film") {
      : print "It was a strip of film, looking inscrutably blank in its current, undeveloped state. " ;
      : done ;
      
   }
: else_if (film_description=="a strip of film negatives (unfixed, unwashed)" ){
: print "It was a strip of photographic film, unfixed so that any images captured on it would be destroyed if exposed to ordinary light.\n It was wet with developing fluid. Arthur could see images on the film.";
}
: else_if (film_description=="a strip of film negatives (unfixed, washed)" ){
: print "It was a strip of photographic film, unfixed so that any images captured on it would be destroyed if exposed to ordinary light. Arthur could see images on the film.";
}
: else_if (film_description=="a strip of film negatives (fixed, unwashed)") {
      : print "It was a strip of film, fixed so that the images would not disappear in ordinary light.\n It was wet with fixing fluid. Arthur could see images on the film." ;}
      : else_if (film_description=="a strip of film negatives (processed, wet)") {
      : print "It was a strip of processed film negatives.\nThe strip was wet. It needed to be hung up to dry. Arthur could see images on the film." ;
       }
       : else_if (film_description=="a strip of film negatives (processed, dry)") {
      : print "It was a strip of processed film negatives.\nThe strip was dry. Arthur could see images on the film." ;
       }
       : else_if (film_description=="a strip of film negatives (processed, hanging on the drying line)") {
      : print "It was a strip of processed film negatives, hanging up to dry. Arthur could see images on the film.";
      : if (negs_dry) {
         : print "The strip was now dry." ;
      }
      : else {
         : print "The strip was still wet." ;
         
      }
   
       }
      : else_if (film_description=="a set of film negatives (cut from a strip)"||film_description=="a set of film negatives (cut from a strip) (on the photo sheet)") {
         : print "It was a set of individual negatives that had been cut from a film strip. Arthur could see images on the negatives." ;
       }
        :set_true "negatives";
   }
         }

: if (noun1_is "paper") {
: if (is_present "sheet") {
   : if (sheet_description=="a sheet of new, unexposed photo paper") {
     :print "It was a new sheet of photographic paper, fresh from the packet.";
     : done ;
     
   }
   : else_if (sheet_description=="a sheet of exposed, undeveloped photo paper") {
      : print "It was a sheet of photographic paper, blank in appearance but holding a latent image that could be made visible by developing." ;
      : done ;
      
   }
   : else_if (sheet_description=="a sheet of contact prints (unfixed, unwashed)") {
      : print "It was a sheet of contact prints, unfixed so that the images would be destroyed if exposed to ordinary light.\n The sheet was wet with developing fluid. Arthur could see images on the paper." ;
      
   }
: else_if (sheet_description=="a sheet of contact prints (unfixed, washed)" ){
: print "It was a sheet of contact prints, unfixed so that the images would be destroyed if exposed to ordinary light. Arthur could see images on the paper.";
}
: else_if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
      : print "It was a sheet of contact prints, fixed so that the images would not disappear in ordinary light.\n It was wet with fixing fluid. Arthur could see images on the paper." ;}
      : else_if (sheet_description=="a sheet of contact prints (processed, wet)") {
         : print "It was a sheet of contact prints, fixed so that the images would not disappear in ordinary light.\nThe sheet was wet. It needed to be hung up to dry. Arthur could see images on the paper." ;
      }
      : else_if (sheet_description=="a sheet of contact prints") {
      : print "It was a sheet of contact prints. Arthur could see images on the paper." ;
      
           : if (tiny_man_photo) {
          : print "He looked at the photograph of the tiny man at the rockery and was reminded of nothing so much as those Cottingley photographs at which he had always scoffed. He felt that he ought to show it to someone - but who would ever believe such a thing?" ;
       }
       : else {
          : print "He looked at the photograph of the tiny figures at the rockery and was reminded of nothing so much as those Cottingley photographs at which he had always scoffed. He felt that he ought to show them to someone - but who would ever believe such a thing?" ;
       
       }
      }
      

     :set_true "prints";
}
}


: if (noun1_is "photographs"||noun1_is "photos"
) {
   : if (is_present "ashes") {
      : print "They were just burnt fragments of cardboard with only traces of the photographic emulsion remaining. It was impossible to determine what the original image would have been." ;
  
   }
   
}



: if (noun1_is "fireplace") {
:if (is_at "study"||is_at "dining_room"||is_at "bedroom_1"||is_at "peldash_room"||is_at "drawing_room"||is_at "pub"||is_at "nevernear_cottage"||is_at "poachers_house"){
   : if (is_at "drawing_room") {
      : print "It was a fairly unremarkable stone fireplace, dating from the time that the room was partitioned into its current configuration." ;
      : if (traptor==3) {
         : print "The grate was empty but there was a sprinkling of soot on the hearthstone that must have come from the chimney." ;
         
      }
      
   }
   : else_if (is_at "study") {
      : print "It had been inserted into the space once occupied by a much larger fireplace that had been bricked up at some point in the long forgotten past. The cast iron fireback looked mid-Victorian." ;
      : if (has_not_created "ashes") {
         : print "Arthur noticed some ashes in the grate." ;
         : create "ashes" ;
         
      }
      : if (has_not_created "matchbox") {
         : print "Arthur saw a matchbox on the hearthstone." ;
         : create "matchbox" ;
         
      }
    : done ;
      
   }
  
   
   : else {
      : print "It was just an ordinary fireplace, more efficient at heating the flue above than the room beyond, as was often the way in old houses." ;
      
   }
   
   
   
}


: else {
   : print "But Arthur could see no fireplace." ;
   
}

}


  : if (noun1_is "packet"){
  :if (is_present "packet") {
       : print "It was a packet of 'Bigge's Bromatone No.1' photosensitive paper, for the printing of photographic images." ;
       : if (packet_open) {
          : print "The packet was open. Arthur saw sheets of photographic paper inside." ;
          
       }
       }
    }
    : if (noun1_is "vase"&&is_present "vase") {
    : if (is_present "vase") {
         : print "It was rather an ugly piece of heavy, ruby-coloured Victorian glassware, tall and conical with a wide neck tapering towards a pedestal base. When the sunlight shone through it, it cast a lovely red glow.\nArthur noticed a large crack near to where the body of the vase joined the base, which would explain why it was now used for dried and not fresh flowers.";
       : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
          : print "It held some dried flowers." ; 
          
    }
       }
       : else_if (is_present "vase_1") {
          :print "It was a tall, red glass cone with a hole at either end: one the original neck of the vase, and the other the place where the body used to attached to the base.";
       }
       
       
    }
    
: if (noun1_is "hook") {
   : if (is_at "kitchen") {
      : print "It was that most useful of artefacts, a hook. It was wrought iron and embedded in the fabric of the wall." ;
       : if (key_on_hook) {
         : print "A bunch of keys hung from the hook." ;
      }
      : if (goggles_on_hook) {
         : print "A pair of goggles hung from the hook." ;
      }
      
    
      
   }
   
}
: if (noun1_is "holder") {
: if (is_present "holder") {
   : print "It was an enamel metal saucer with a raised socket in the centre and a looped metal handle for carrying. Electric lighting having finally come to The Vicarage not very many years before, it was now redundant." ;
   : if (candleinholder) {
      : print "There was a stub of candle in the holder." ;
      
   }
   : else {
      : print "The socket was empty." ;
      
   }
   
   
   }
   : else_if (is_present "holder_1") {
      : print "It was an enamel metal saucer with a raised socket in the centre and a looped metal handle for carrying. Electric lighting having finally come to The Vicarage not very many years before, it was now redundant." ;
      : print "There was a lit candle in the holder." ;
      
   }
   
   
}
: if (noun1_is "edna_taplow") {
   : if (is_present "edna_taplow") {
      : examine;
      
      : if (is_at "recess") {
         : print "She was currently leaning out of the window, engaged in a life of death struggle with the wind for possession of the casement." ;
         
      }
      
   }
   
}
: if (is_at "pub") {
 : if (noun1_is "game"||noun1_is "nancy"||noun1_is "pardon"||noun1_is "thraplington"||noun1_is "foursquare") {
: if (pub_brawl_counter==0) {
   : if (noun1_is "game") {
         : print "A game of 'Nancy's Attic' was being played out amongst a huddle of six over by the fireplace, while by the window a crowd was cheering on two clearly inebriated individuals engaged in a round of 'Pardon the Parson'. Over by the bar, a grumble of old men was pushing pieces around a 'Four Square The Hare' board, while almost everyone else still on their feet was involved in a boisterous game of 'Thraplington Scrofield'. The noise of all this happening simultaneously was quite deafening!" ;
   }
   : else_if (noun1_is "nancy") {
      : print "It was just an ordinary game of Nancy's Attic, in that penultimate stage where all the sparrows have been flushed and Tommy Rimkin has been sent below stairs. The six players glared at each other over grimy pint glasses, knowing that one of them had the advantage but unable to guess who." ;
      
   }
     : else_if (noun1_is "foursquare") {
: print "It was one of those ubiquitous pub games which everyone knew but nobody could claim to have invented. The Weald variation was broadly similar to the version Arthur had learned as a boy, except here the chasers were three rather than two, and Thanner's Edge was illegal without a Hawk ." ;

   }
   : else_if (noun1_is "pardon") {
      : print "It was a game popular amongst the coarser classes, with a myriad of regional variations and idiosynscatic rules more or less made up on the spot. Common to all was the performance of a crude bodily function by the designated 'Parson' followed by a sort of sham trial in which a jury of his peers would attempt to shout one another down until guilt or innocence was proclaimed. The verdict was invariably preceded by violence of one sort or another." ;
      
   }
 
   : else_if (noun1_is "thraplington") {
      : print "It was 'Irk Thy Neighbour' by another name, and just as rowdy. In this version, elbows were always in play and extra points were awarded for Knuckle-In-The-Ale. It was the sort of game where drunken good humour could overbalance into anger in an unpredictable instant and was so frequently the cause of violent altercation that it was banned in many of the more particular drinking establishments." ;
      
   }
         
   }
   : else_if (pub_brawl_counter>0&&pub_brawl_counter<7) {
      : print "Arthur noticed that things has escalated beyond the mere playing of games." ;
      
   }
   
:else {
:print "It looked as though, for the moment, games had been put aside in favour of the more serious business of drinking.";
}
   }
   
   
   
      
}
: if (is_at "chemist") {
: if (noun1_is "products") {
   : if (is_at "chemist") {
      : print "There were the usual jars of ingredients mundane and exotic, and medicinal preparations made therefrom. There were a great number of patent medicines, a selection of medical hosiery and other things that the well-appointed modern chemist's saw fit to stock, such as stationary, tobacco and photographic supplies. " ;
      
   }
   }
   : if (noun1_is "ingredients") {
      : print "There were various dried-up things in jars that Arthur would rather have believed were vegetable in nature, and mysterious liquids. The labels were all hand-written by the pharmacist so naturally they were completely illegible. " ;
      
   }
   : if (noun1_is "medicines") {
      : print "There seemed to be endless small cardboard packages advertising such contents as 'Cutfork's Carminative Serum', 'Bertrand's Balsam' and 'Radney's Effective Itch Pills'." ;
      
   }
   : if (noun1_is "hosiery") {
      : print "Arthur was no expert, but he knew a stocking when he saw one." ;
      
   }
    : if (noun1_is "stationary") {
      : print "There was a selection of paper and writing implements, envelopes and ink. All very mundane and of very little interest to Arthur." ;
      
   }
    : if (noun1_is "tobacco") {
      : print "There were tall glass jars containing different varieties of tobacco, boxes of cigars, packets of cigarettes and snuff. In the absence of a dedicated retailer the chemist's shop could always be relied upon for one's tobacco products because after all, smoking was as likely to ensure good health as any of their other medicines." ;
      
   }
    : if (noun1_is "photographic"||noun1_is "supplies") {
      : print "There were the usual chemicals, plates and rolls of film as well as packets of photographic paper." ;
      
   }
}
: if (noun1_is "wardrobe") {
 : if (is_present "wardrobe") {
    : print "It was a quite unremarkable looking wardrobe with that question-begging property that many a bedroom wardrobe had: namely that of being much taller and wider than either the door or the window. It was rather plain apart from a carved panel at the base, above which were the doors." ;
    : if (!wardrobe_open) {
       : print "The wardrobe was closed." ;
    }
    :else {
    :print "The wardrobe was open.";
    }
 }
 
   
}
: if (noun1_is "panel") {
: if (is_present "wardrobe") {
   : print "It was rather crudely carved with a vine and flower design, definitely not the work of a master craftman." ;
   : if (wardrobe_open) {
    : print "Arthur looked into the open wardrobe and noticed that the base inside was level with the bottom of the doors, above the panel." ;
      
   }
      
}
}
: if (noun1_is "base") {
   : if (is_present "wardrobe") {
      : if (wardrobe_open) {
         : print "Arthur examined the base of the wardrobe carefully. It seemed solid enough, though he did feel it give a little in the right hand corner at the very back of the wardrobe." ;
         
      }
      
   }

}
: if (noun1_is "clothes") {
   : if (is_present "clothes") {
      : print "Arthur rummaged through the clothes and noted that there was nothing particularly fashionable or outrageously modern amongst them, as befitted a country vicar.";
   }
   : if (traptor==2) {
   : if (has_not_created "overcoat") {
   : print "At the end of the rail he found a woollen overcoat that seemed suddenly and improbably appropriate on this freezing June night." ;
   : create "overcoat" ;
   }

   }
   
   
}
: if (noun1_is "pocket") {
   : if (is_carried "overcoat") {
   : if (has_not_created "gloves") {
      : print "Arthur searched in the pockets and discovered a pair of woolly gloves." ;
      : pocket "gloves" ;
      
   }
   : else {
      : print "Arthur rummaged and found nothing more exciting than what one might expect to find in the overcoat pockets of a country vicar." ;

   }
   
   }
   
}
: if (noun1_is "coal"||noun1_is "heap") {
 : if (is_present "coal_heap") {
    : print "It was a pile of perfectly ordinary household coal." ;
    : if (has_not_created "shovel") {
       : print "Arthur looked closely and saw a sooty old shovel camouflaged effectively against the coal. " ;
       : create "shovel" ;
       
    }
    
 }
   
}
: if (noun1_is "foliage") {
   : if (is_at "garden_5") {
      : if (traptor==2) {
        : if (has_not_created "hedgehog") {
          : print "Arthur investigated the rustling sound and determined that it was coming from the overgrown vegetation, near to the ground. He parted the foliage and peered into the murky depths – and was rather startled to find two small and beady eyes looking back at him. The creature broke cover and Arthur was delighted to see that it was a hedgehog (he was rather fond of hedgehogs), caught out in the unseasonable snow drift and no doubt cold and disorientated. It crossed in front of Arthur, pausing to stare at him disconcertingly for a second, and then disappeared into the depths of the foliage once more." ;
          : create "hedgehog" target = "lane_2" ;
          : press_any_key ;
          : redescribe;
        }
         
      }
    : print "It was a tangled web of shoot and branch, laced with thorns." ;
      
   }
   
}

: if (noun1_is "chimney") {
: if (preposition_is "up") {
   : if (is_at "drawing_room"||is_at "dining_room"||is_at "bedroom_1"||is_at "peldash_room"||is_at "study"&&!shoes_in_fireplace||is_at "nevernear_cottage"||is_at "poachers_house") {
    : print "Arthur peered up into the dark and sooty heights of the chimney, but didn't notice anything particularly interesting." ;
    : done ;
    
}
: else_if (is_at "study") {
          : print "Arthur looked up into the dark and sooty heights of the chimney and spotted something lying on a small brick ledge just above the opening. He reached up into the blackness and grasped two objects which he brought into the light to examine. He was slightly surprised to find himself holding a somewhat crumpled and dirty pair of old-fashioned children's shoes." ;
          : if (parent_of "holly"=="bedroom_1"&&parent_of "horseshoe"=="dining_room") {
          : clear_screen;
          : print "Arthur felt a change in the atmosphere, as though a bubble had burst. The neutral tranquility of The Vicarage was suddenly dissipated. " ;
         }
         : press_any_key ;
            : set_false "shoes_in_fireplace" ;
         : create "shoes" ;
         : set_true "housespellbroken" ;
         : redescribe;
      }
      : else {
         : print "But Arthur couldn't see any chimney." ;
      }
}
:else_if (is_at "study"||is_at "dining_room"||is_at "bedroom_1"||is_at "peldash_room"||is_at "drawing_room") {
     : print "Arthur couldn't see the chimney being hidden, as it was, within the wall." ;
      }
      : else_if (is_at "lane_4"||is_at "maze_1"||is_at "maze_2"||is_at "maze_3"||is_at "maze_4") {
         : print "It was a distant chimney, visible over the top of the hedge. Chimneys being more often that not acompanied by houses, Arthur surmised that one must lie in that direction. " ;

         
      }
      
 : else {
         : print "But Arthur couldn't see any chimney." ;
      }
}
: if (noun1_is "loft"){
: if (is_at "church") {
        : print "The bell loft floor formed a timber roof above the internal entrance to the church. There were several holes from which bell ropes emerged, their tails dangling down to within grasping distance below" ;    
   
   
}

}
: if (noun1_is "panelling") {
   : if (is_at "bell_loft") {
   : examine;
      : if (moved_coffer) {
      : if (has_not_created "cupboard_1") {
: print "The oak panelling behind the coffer seemed at first glance unremarkable, but on closer inspection, Arthur discerned that there was a small door concealed within one of the panels." ;
: create "cupboard_1" ;
: press_any_key ;
: redescribe;

      }
    
              
      }
      
   }
   
}

: if (noun1_is "tools") {
: if (is_present "tools") {
  : examine;
   : if (has_not_created "iron_key") {
    : print "Standing out amongst the tools was a huge iron key." ;
      : create "iron_key" ;
      
   }
   
}
: else_if (is_present "tools_1") {
: examine;
: if (has_not_created "lump_hammer") {
   : print "Arthur picked out the more useful-seeming amongst them." ;
   : destroy "tools_1" ;
   : create "lump_hammer" ;

   : create "screwdriver" ;
   : press_any_key ;
   : redescribe;
   
   }
}
}

   
   



: if (noun1_is "fence") {
   : if (is_at "wetland") {
   : examine;
      : if (has_not_created "fence_post") {
         : print "Arthur spotted a fence post on the ground." ;
         : create "fence_post" ;
         
      }
      
   }
   
}
: if (noun1_is "grass") {
   : if (is_at "DMV_5") {
   : if (traptor!=2&&traptor!=6) {
     : print "Arthur swept his way through the long grass, sending innumerable small creatures fluttering and scurrying out of his way." ;
   : if (has_not_created "wooden_cover") {
           : print "Presently, he came upon a circular wooden cover set into the ground and partly hidden by the surrounding vegetation." ;
      : create "wooden_cover" ;
      : press_any_key ;
      : redescribe;
      
      }
    : else {
       : print "He found nothing else of interest." ;
       
    }
   }
   : else {
   : if (traptor==2) {
          : print "The thick snow had covered everything; only the tips of the tall grasses were visible above the smothering white blanket." ;
   }
   : else_if (traptor==6) {
       : print "In the 15th century village of Haelstowne, the grass had been cropped short." ;
       
   }
   
  
      
   }
   
      
      
   }
   
}
: if (noun1_is "water") {
   : if (is_at "well") {
   : print "It was perfectly still and utterly dark. Arthur gazed at the water and felt his mind being drawn inexorably beneath the surface as he imagined himself falling through it and sinking like a stone through fathomless, icy blackness, forever. " ;
   
   : if (has_not_created "waterlogged_thing") {
      : print "Arthur saw a dark something bobbing in the water." ;
      : create "waterlogged_thing" ;
      : press_any_key ;
      : redescribe;
   }
   }
}
: if (noun1_is "ash"&&is_present "ash") {
   : if (!ash_touched) {
    : print "The landlord's child looked like rather a delicate creature. There was a strange quality about them, as if they were not quite solid.\n Arthur felt as though, if he reached out to touch them, his hand might pass straight through." ;
   }
   : else {
   : if (is_at "pub") {
      : print "The landlord's child was a pale and delicate creature." ;
      
   }
   : else {
      
      : print "The landlord's child was pale and distraught. Arthur needed to get them back to the pub as quickly as he could." ;
   }
   : done ;
   
      
   }
   
   
}
: if (noun1_is "portrait"&&is_present "portrait") {
: examine "portrait" ;

: if (is_present "ottoline_elderfield") {
: if (!asked_about_portrait) {
: press_any_key ;
: clear_screen;

    : print "Ottoline noticed Arthur admiring the portrait.\n\"That's Richard Travais, my illustrious forebear,\" she told him. \"Or notorious. I expect you've heard the rather colourful legends about him? How the villagers were in thrall to the faeries of Haelstowne for centuries before he broke the spell and they were all saved. Aunt Ada used to tell it to me when I was a little girl. Rather fanciful I've always thought, but there must be some truth at the bottom of it all - there usually is with these old folk tales.\"\n\"Do you know what that is?\" asked Arthur, indicating the strange object beside Travais in the painting.\n\"Oh that,\" replied Ottoline. \"It's the famous mirror. According to the tale, when Travais confronted the Faery Queen on midsummer eve, she cast a spell to turn him into a frog, or a snake or something. You know how it goes. Anyway, he used that mirror to reflect the spell back at her, but it went wrong. Her magic was too powerful, the mirror cracked and the spell scattered everywhere so that all the villagers were turned into animals. And that, apparently, was the end of Old Haelstowne.\" She looked thoughtful for a moment. \"You know, I'd always assumed that the whole thing was just some propaganda dreamt up by the Puritans. But now, well - I'm not so sure.\"" ;
   : set_true "asked_about_portrait" ;
 : press_any_key ;
 : redescribe;
 
}
   : if (asked_about_ashtray&&has_not_created "mirror") {
   : press_any_key ;
   : clear_screen;
   
   : print "Arthur looked from the disc in the portrait to the ashtray and wondered why he hadn't seen it before.\n\"Ottoline! That's it!\" exclaimed Arthur. \"The disc in the portrait. It's your ashtray!\"\n\"What? Are you sure?\" said Ottoline, reflexively depositing more ash into the bronze saucer.\n\"Yes, look!\" he snatched up the ashtray. \"Oh! I mean, where can I...\"\nOttoline indicated a pot plant, into which Arthur deposited the ash. He held the dusty disc alongside the one shown in the portrait. \"Look, even the symbols around the edge are the same.\"\n\"Well I never!\" said Ottoline. \"You're right Arthur. And to think that I've been stubbing out my cigarettes in it as long as I've been here. What must Travais think of me.\"\nArthur was too excited by his discovery to notice that odd statement.\n \"I think you should keep it, Arthur,\" she said, mysteriously. \"I have an intuition that it has been waiting for you.\" \nArthur wasn't at all sure what she meant, but for some reason he felt that she was right. \"Thank you,\" he said, and pocketed the mirror." ;
  :destroy "ashtray";
  : create "mirror" target = "inventory" ;
  : press_any_key ;
  : redescribe;
  
  
}

}
}
: if (noun1_is "crow") {
: if (is_present "crow") {
: if (is_at "nevernear_cottage") {
  : print "It was an enormous black crow with beautiful, blue-black feathers, hunched atop a perch within an iron cage. It observed Arthur silently, with inscrutable black eyes." ;
: if (is_present "ottoline_elderfield") {
   : if (!asked_about_bird) {
    : print "Ottoline noticed Arthur peering through the bars of the cage at the great black bird within.\n\"He came with the house,\" she said, \"in case you were wondering. He's very much part of the fixtures and fittings is old Crackers.\"\n\"It's an unusual name,\" said Arthur. He had the unnerving impression that the cage was there more for the reassurance of the nervous visitor than for the containment of its occupant and that it would shatter like matchwood with one stretch of those glossy black wings. Arthur eyed the beast and the beast stared him back, unblinkingly.\n\"That's not his real name. I could never remember that, though Aunt Ada told me often enough. Something rather Celtic-sounding I think. Anyway, when I was a little girl I always used to call him Crackers after the sound he made - you know, 'craaak'...\" She produced a startlingly realistic crow noise, and Crackers shifted a little on his perch and cocked his head, \"and, I suppose, the name just stuck.\"\n\"My goodness,\" said Arthur, \"I never knew birds lived so long.\"\nOttoline raised an eyebrow. \"Just how old do you think I am, Mr Mapple?\"" ;
   : set_true "asked_about_bird" ;
   : done ;
}
}
}
: else_if (crow_description=="a huge black crow (perching on the handlebars of Ottoline's bicycle)") {
   : print "It was a huge black crow, perched on a rail between the handlebars of the bicycle. Arthur wondered how on earth Ottoline could see where she was going with that great black beast blotting out her view." ;
   
}

: else_if (crow_description=="a huge black crow (soaring directly above)") {
: print "It was a crow, soaring high above like an ink blot on the dazzling blue of the summer sky." ;
: if (is_at "wood_entrance") {
   : print "Arthur looked up at the crow and saw that it was circling a little to the northwest of him." ;
   : if (crow_directions<1) {
        
   : set_integer var = "crow_directions"  value = "1" ;
   }
 
}
: if (is_at "wood_path_1") {
   : print "Arthur looked up at the crow and saw that it was circling a little to the west of him." ;
   : if (crow_directions<2) {
   : set_integer var = "crow_directions"  value = "2" ;
   }
 
}
: if (is_at "wood_path_2") {
   : print "Arthur looked up at the crow and saw that it was circling a little to the north of him." ;
   : if (crow_directions<3) {
        
   : set_integer var = "crow_directions"  value = "3" ;
   }
 
}
: if (is_at "wood_path_3") {
  : if (has_not_created "knife_1") {
     : print "Arthur looked up and saw that the crow was now circling directly overhead, its harsh cries tumbling like splintered stones from sky." ;
  }
  
 
}
}

}
: else_if (crow_description=="a huge black crow (soaring directly above)") {
   : if (is_at "zone_road_to_wood"||is_at "zone_wood") {
      : print "It was a huge black crow, undoubtably the same creature that had accompanied them to the wood on Ottoline's handlebars. Now it soared above in silent majesty, inky-black against the brilliant sky, its long flight feathers spread out like sooty fingers stroking the heavens.\n" ;
      : if (parent_of"crow"=="wood_entrance") {
         : print "The crow was a little too far away to see the direction in which it was flying, but it appeared to be circling near to the entrance to the wood." ;
         
      }
      
   }
   
 
   
}


}


: if (noun1_is "ashtray"&&is_present "ashtray") {
: print "It was a bronze bowl with a narrow rim around which were inscribed strange symobols. It had evidently been used as an ashtray for some time to judge by the stub marks in the base, but Arthur had an inkling that its original purpose was a less mundane one." ;
: if (!asked_about_ashtray) {
    : print "\"What a curious ashtray,\" remarked Arthur.\n\"It is rather, isn't it? In fact, to tell the truth, I think it probably wasn't made to be an ashtray at all but it does the job admirably. Aunt Ada used it for potpourri.\"\n\"I wonder what its original use was,\" said Arthur. \"It looks like it might have been meant as a setting for something. And those odd symbols around the edge...\"\n\"Heaven knows, Mr Mapple. It's just one of those things that's always been in the house. Long before my time, and Aunt Ada's.\"" ;
   : set_true "asked_about_ashtray" ;
   
}
   : if (asked_about_portrait&&has_not_created "mirror") {
   : press_any_key ;
   : clear_screen;
   
   : print "Arthur looked from the disc in the portrait to the ashtray and wondered why he hadn't seen it before.\n\"Ottoline! That's it!\" exclaimed Arthur. \"The disc in the portrait. It's your ashtray!\"\n\"What? Are you sure?\" said Ottoline, reflexively depositing more ash into the bronze saucer.\n\"Yes, look!\" he snatched up the ashtray. \"Oh! I mean, where can I...\"\nOttoline indicated a pot plant, into which Arthur deposited the ash. He held the dusty disc alongside the one shown in the portrait. \"Look, even the symbols around the edge are the same.\"\n\"Well I never!\" said Ottoline. \"You're right Arthur. And to think that I've been stubbing out my cigarettes in it as long as I've been here. What must Travais think of me.\"\nArthur was too excited by his discovery to notice that odd statement.\n \"I think you should keep it, Arthur,\" she said, mysteriously. \"I have an intuition that it has been waiting for you.\" \nArthur wasn't at all sure what she meant, but for some reason he felt that she was right. \"Thank you,\" he said, and pocketed the mirror." ;
  :destroy "ashtray";
  : create "mirror" target = "inventory" ;
  : press_any_key ;
  : redescribe;
  
  
}

: done ;

}






: if (noun1_is "symbols") {
   : if (is_present "knife_1"||is_present "athame"||is_present "robes"||is_present "mirror") {
      : print "There were strange patterns of intersecting circles and jagged-walled triangles, with symbols depicting an eye, a sun, a half moon and a puff of air. It was like a message written in a language that Arthur did not know - and yet, in some intuitive and indefinable way, it seemed to speak to him. " ;
      
   }
   
}
: if (noun1_is "frame") {
   : if (is_present "frame") {
      : print "It was a timber frame with a glazed lid, designed to protect tender young plants from the weather during the cold months." ;
      : if (has_not_created "gardening_gauntlets"&&gardening_gauntlets_description=="a pair of gardening gauntlets (inside the cold frame)") {
      : create "gardening_gauntlets" ;
         : print "Arthur could see a pair of gardening gauntlets inside." ;
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   
}
: if (noun1_is "stump"&&is_present "stump") {
: print "It was the shattered remains of a tree, the core rotted out so that only a shell remained. The peeling bark was alive with woodlice and burrowing insects, and bracket fungi sprouted in several places. " ;

   : if (has_not_created "toadstool") {
      : append "Around the base of the stump, Arthur spotted a toadstool." ;
      : create "toadstool" ;
      
   }
   
}
: if (noun1_is "thing") {

: if (is_present "waterlogged_thing") {
   :examine;
   }
: else_if (is_present "something") {
   :examine;
}
: else {
   : print "Arthur saw nothing particularly noteworthy." ;
   
}

}
: if (noun1_is "altar"||noun1_is"candles"||noun1_is "paten"||noun1_is "altar"||noun1_is "cloth") {
: if (is_at "chapel") {

   : if (!is_worn "robes") {
      : print "Arthur tried to approach to take a closer look, but he was prevented from doing so. It was as though something emanating from the altar was negating his will to move. Under its influence, he found that he couldn't take another step towards it however much he wanted to." ;
      : done ;
         
}

   }
   
}
: if (noun1_is "earth") {
   : if (is_present "earth") {
      : if (has_not_created "fragment_1") {
         : print "Arthur picked through the small mound of earth and stones and found something shiny. Wiping the dirt off with his handkerchief, he found that he was holding a fragment of mirror glass." ;
       : pocket "fragment_1" ;
         
      }
      : else {
         : print "Arthur picked through the small mound of earth and stones but didn't find anything else of interest." ;
         
      }
      
   }
   
}
: if (is_present "sundial") {
: if (noun1_is "plinth") {

   : print "It was a sandstone pedestal, into which a mosaic was set." ;
}
: if (noun1_is "mosaic") {
 : print "It was a detailed piece of master craftsmanship, depicting a procession of fantastical creatures - half animal, half-human - against a backdrop of twisting vines and colourful flowers." ;
 : if (!has_not_created "fragment_5") {
    : append "One of the tessera was missing." ;
    
 }
 
 
   : if (has_not_created "fragment_2") {
      : print "One of the large tessera that made up a flower petal caught Arthur's eye as it glinted in the sunlight. Examining it more closely, he realised that it was a fragment of mirror." ;
      : create "fragment_2" ;
      
   }
     }
   
     
}
  : if (noun1_is "fragment"||noun1_is "fragments") {
 : if (is_present "fragment_2") {
      : print "It was a large fragment of an imperfect and pockmarked mirror glass, with a curious bluish sheen. Arthur gazed into it and could almost fancy that the peculiar, rippling image reflected back at him was a view of another world." ;
      : print "It was set into the mosaic, but not very deeply. Arthur reckoned that he could work it free of the cement bed if he had a suitable tool." ;
      : done ;
      
         }
         : if (is_at "on_monument"&&has_not_created"fragment_3") {
            : print "There were several fragments of the mirror glass set into lead surrounds that made up the disc in the stained glass window." ;
            : done ;
 
         }
         : if (is_present "fragment_1"||is_present "fragment_2"||is_present "fragment_3"||is_present "fragment_4"||is_present "fragment_5") {
         : if (noun1_is "fragment") {
           : print "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;
        : done ;
            
         }
         
        : set_integer var = "fragments_counter"  value = "0" ;
        : if (is_present "fragment_1") {
           : increment "fragments_counter" ;
        }
        : if (is_present "fragment_2") {
           : increment "fragments_counter" ;
        }
         : if (is_present "fragment_3") {
           : increment "fragments_counter" ;
        }
         : if (is_present "fragment_4") {
           : increment "fragments_counter" ;
        }
         : if (is_present "fragment_5") {
           : increment "fragments_counter" ;
        }
        : if (fragments_counter==1) {
            : print "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;
        : done ;
        }
        : else_if (fragments_counter>1) {
           : print "They were fragments of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. They seemed very old." ;
        : done ;
        }
        
         
           
        
         }
         : if (is_present "mirror") {
            : if (fragments_in_mirror>0) {
               : if (fragments_in_mirror==1) {
                  : print "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;
                  : print "It nestled in the frame as though it had always belonged there." ;
               }
                : else_if (fragments_in_mirror<4) {
                  : print "They were fragments of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. They seemed very old." ;
                  : print "They nestled together in the frame as though they had always belonged there." ;
               }
               : else {
                   : print "They were fragments of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. They seemed very old." ;
                  : print "They nestled together in the frame as though they had always belonged there, their broken edges reuniting perfectly to form a complete mirror surface once more." ;
                  : done ;
                  
               }
               
            }
            
         }
         
 
     }
   : if (noun1_is "molyneux") {
      : if (is_present "pew_1") {
      : examine "pew_1" ;
         : if (has_not_created "carvings") {
         : print "Arthur saw that the back of each seat was embellished with a decorative carving." ;
         : create "carvings" ;
      }
      }
   }
   : if (noun1_is "pew") {
   : if (is_at "church") {
      : if (has_not_created "pew_1") {
      : examine "pew" ;
         : print "Amongst the ordinary, humble pews Arthur spotted a row at the front that was grander than the rest. They were high backed and enclosed, and the seats were upholstered in what would once have been a fine fabric, now threadbare and enormously dusty with age. Between each seat was a wooden divider, separating the pews into a series of small booths. They were rather thoughtlessly situated as to block the view of those in the cheap seats behind, who might just about be able to see the top of the preacher's head in the pulpit from where they sat. Arthur saw the name 'Molyneux' carved into the decorative panel along the back of the pews and concluded that these must be the private seats of the wealthy church patrons." ;
         : create "pew_1" ;
         : done ;
      }
      : else {
         : print "Arthur was unsure whether to EXAMINE the ORDINARY PEWS or the more splendid MOLYNEUX PEWS." ;
         : done ;
         
      }
      
   }
   }
   : if (noun1_is "ordinary") {
      : if (is_at "church") {
         : examine "pew" ;
         : if (has_not_created "pew_1") {
         : print "Amongst the ordinary, humble pews Arthur spotted a row at the front that was grander than the rest. They were high backed and enclosed, and the seats were upholstered in what would once have been a fine fabric, now threadbare and enormously dusty with age. Between each seat was a wooden divider, separating the pews into a series of small booths. They were rather thoughtlessly situated as to block the view of those in the cheap seats behind, who might just about be able to see the top of the preacher's head in the pulpit from where they sat. Arthur saw the name 'Molyneux' carved into the decorative panel along the back of the pews and concluded that these must be the private seats of the wealthy church patrons." ;
         : create "pew_1" ;
         : done ;
         }
         
      }
      
   }
   
   
   : if (is_present "carvings") {
   : if (noun1_is "carving") {
      : if (is_present "carvings") {
         : print "There was a name surrounded by decorative motifs of flowers and animals. It seemed that, in the regimented hierarchy of a wealthy medieval family, each member had their own allotted place in which they were expected to stay." ;
         : if (drywell_ask_counter>1) {
            : print "Arthur saw a depiction of a fox by Geoffrey's name. He noticed that it had been carved into and over a part of the lettering, showing that it had been added at a later date." ;
      
        : set_true "noticed_fox_carving" ;
        
         }
         }
      }
      : if (noun1_is "fox") {
      : if (noticed_fox_carving) {
     
         : print "It was a carving of a fox, sly and sinuous, carved over and partly obscuring the lettering of Geoffrey's name." ;
             
      }
      
      }
      
   }
   
  

   : if (noun1_is "triptych"||noun1_is "window") {
   : if (is_at "church_1") {
      : print "Three panels made a fantastical tableau in vivid colours of stained glass. The first panel depicted a village scene with the inhabitants cowering back fearfully from a group of unnaturally tall and slender riders dressed in white and mounted upon coal black steeds. In the midst of their number and riding a white horse was a young woman, who appeared to be bound.\n In the second panel, violence seemed to have erupted: the horses were rearing and the villagers scattering, with many of their number lying on the ground as though dead or wounded. One figure stood apart from the others in front of the leading rider, barring the way. In his hand was some sort of disc that Arthur noticed particularly as it glinted in the light.\n The third panel was the most curious of all. In it, the riders were gone as were the villagers. But in their place was a menagerie of strange creatures that appeared to have the bodies of people and the heads of animals, crawling about on all fours amongst foxes, deer and hares. It was a beautiful, if unsettling, piece of work." ;
      : if (!has_not_created "fragment_3") {
                 : print "Arthur noticed a hole in the disc in the second panel, where a piece of glass was missing." ;
                 : done ;
   }
      }
      : if (is_at "on_monument") {
             : print "Arthur could see the triptych in more detail now that he was closer to it. The disc held by the figure in the second panel was reflective, like a mirror. " ;
              : if (!has_not_created "fragment_3") {
                 : print "Arthur noticed a hole in the disc in the second panel where a piece of glass was missing." ;
                 : done ;
                 
              }
     
         }
   }
   : if (noun1_is "monument") {
   : if (is_present "monument") {
      
  
   
      : print "The monument was to the Molyneux family, the main landholders and patrons of the church for centuries. The top part was a magnificently vulgar and ostentatious pile of gilded scrollwork and cherubs, in white marble, that seemed more recent than the more humble effigies reposing in their niches beneath. " ;
      : print "The angular terraces of stonework suggested a staircase ascending heavenwards, which may have been the sculptor's intention - but the use of it as such by the occasional wayward youth who found themselves unable to resist the invitation most certainly was not." ;
      
    }
      
   }
   : if (noun1_is "effigy"||noun1_is "effigies") {
   : if (is_at "church_1") {
      
 
      : print "They were the likenesses of the Molyneux family over a few hundred years, before such depictions fell out of fashion. They were carved from a cream coloured marble, much cracked and polished with age, with the name alongside each. The gentlemen were depicted in armour and the ladies in long dresses; each man seemed to have a lion at his feet and each woman a dog. They lay in state upon pillows of stone and stared sightlessly at the roof with expressions of calm acceptance." ;
      
      //pinky
: if (noticed_fox_carving) {
: if (has_not_created "stone_fox") {
   : print "Remembering the unusual carving on the pew, Arthur looked again at the effigy of Geoffrey Molyneux and noticed something curious about the stone animal at his feet. What at first he had taken to be a lion appeared on further inspection to be something different, like a slender dog with a long snout. He looked more closely and realised that it was, without a shadow of a doubt, a carved stone fox. ";
   : create "stone_fox" ;
   : press_any_key ;
   : redescribe;
      
}
}
  }
   
      
   }
  
   : if (noun1_is "cavity") {
      : if (is_present "cavity") {
         : examine; 
         : if (has_not_created "casket") {
            : print "Arthur looked into the cavity and saw something within.";
            : create "casket" ;
            
         }
         
      }
      
      
   }
   : if (noun1_is "disc") {
      : if (is_at "church_1") {
         : print "Arthur couldn't see much detail from down there, but it was some sort of disc held by the figure standing in front of the riders. It gleamed and glinted in the light." ;
         
      }
      : else_if (is_at "on_monument") {
         : print "Arthur saw that it was made from several pieces of mirror glass, which is why it gleamed and glinted in the light.";
         : if (has_not_created "fragment_3") {
            : print "One of the pieces appeared a little loose in its lead surround." ;
            
         }
         : else {
            : print "There was a hole where one of the pieces had been removed from its lead surround." ;
            
         }
         
         
      }
      
   }

   : if (noun1_is "rack") {
      : if (is_present "rack") {
         : examine ;
         : if (is_beside "keg_1") {
          : if (beer_keg_description=="a beer keg (attached to the hose)") {
           : print "There was a beer keg on the lower rack. It was connected to a beer hose." ;
          }
            : else {
               : print "There was a beer keg on the lower rack. It had been disconnected from the beer hose." ;
            }
         }
         : else {
            : print "There was an empty space for a beer keg, on the bottom level of the rack." ;
            
         }
         
      }
      
   }
   : if (noun1_is "wall") {
      : if (is_present "stone_wall") {
         : examine;
         : if (has_not_created "date_stone") {
            : print "Arthur noticed a date stone set into the wall." ;
            : create "date_stone" ;
            : press_any_key ;
            : redescribe;
            
         }
         
      }
      
   }
   : if (noun1_is "stone") {
  : if (is_present "date_stone") {
     : examine ;
      : if ( has_trait {subject="date_stone" trait="_immovable"} ) {
      : print "Arthur noticed that the ancient mortar around the stone was loose and crumbling." ;

   }
 
  }
  
      
   }
 : if (noun1_is "hole") {
    : if (is_present "hole_wall") {
    :examine "hole_wall";
    : if (has_not_created "fragment_4") {
          : print "Arthur saw something glinting within the hole. He reached inside and withdrew a fragment of mirror glass." ;
          : create "fragment_4" ;
          :get "fragment_4";
       : press_any_key ;
       : redescribe;
       
        }
    
    }
    : if (is_present "stone_fox") {
       : print "It was a deep, round hole in the centre of the stone fox's ear. Arthur thought it looked as though something might fit into it." ;
       : done ;
       
    }
    
    
 }
 : if (noun1_is "fox") {
    : if (is_present "stone_fox") {
       : examine "stone_fox" ;
       : if (rail_description=="an iron rail (inserted into the stone fox's ear)") {
       : print "Arthur saw the iron rail, jutting from the fox's ear." ;
       
       }
       : else {
      : print "Arthur noticed a hole in the fox's ear." ;
       }
       : done ;
       
       
    }
    
 }
 
 : if (noun1_is "bottle") {
 : if (is_present "witch_bottle") {
  : examine "witch_bottle" ;
  : if (!witch_bottle_open) {
     : print "It was closed with a bung." ;
     }
  : else {
     : print "It was open." ;
  }
    : if (!witch_bottle_empty) {
       : print "It contained a yellowish fluid, some strands of hair and some nails and other pieces of iron." ;
    }
    : else_if (gossip_in_bottle) {
       : print "It contained a nebulous, twisting thing that was barely visible." ;
    }
    : else {
       : print "It was empty." ;
    }
 }
 }
 : if (noun1_is "hedgerow") {
 : if (is_at "footpath_1") {
    : print "The hedge here had grown high and spindly, as if to outpace the great mass of brambles that grew thickly about its lower portion. The very top of the hedge was crowned with tall and slender hawthorn twigs." ;
 }
 : else_if (is_at "zone_lanes"||is_at "zone_road_to_village"||is_at "zone_lanes"||is_at "footpath_2") {
    : print "They were a tangled mass of hawthorn and bramble threaded with dog rose and honeysuckle and home to many small creatures. Some efforts had been made to trim them back along the sides of the roads, but it was difficult to suppress their unruly nature." ;
    
 }
 
 }
 : if (noun1_is "twig"||noun1_is "twigs") {
    : if (is_at "footpath_1") {
       : print "Long, slender twigs grew out of the very top of the hedge, beyond Arthur's reach." ;
       
    }
    
 }
// : if (noun1_is "keg") {
//    : if (is_present "keg") {
//       : examine "keg" ;
//       : if (beer_keg_open) {
//          : print "The keg was open." ;
//          : gosub "keg_contents" ;
         
//       }
//       : else {
//          : print "The keg was closed." ;
         
//       }
      
//    }
   
// }
 : if (noun1_is "blood") {
    : if (bleeding>0) {
       : print "It was dark and red, as blood ought to be." ;
       
    }
    
 }
 : if (noun1_is "church"||noun1_is "steeple"){

    : if (is_at "Churchyard"||is_at "graveyard_1"||is_at "graveyard_2") {
     : print "The 13th century church of St Wilfrid's was a crooked sandstone building with a slate roof and a crenellated tower, from which emerged the steeple. It was one of those buildings that seemed always to have been there and would always so remain." ;
       : if (has_not_created "weather_vane") {
          : print "On top of the steeple, Arthur spotted a weather vane." ;
          : create "weather_vane" ;
       }
       
    }
    
 }
 : if (noun1_is "vane") {
   : if (is_present "weather_vane") {
      : if (is_carried "binoculars") {
         : print "Arthur peered through the binoculars at the weather vane and saw that it was an unsual design of a pair of hands held horizontally, palms pressed together and the tips of the fingers curved slightly outwards, as though to signify the wind. When the wind blew, the fingers would point to show the direction. " ;
         : set_true "sign_of_wind" ;
         
      }
      : else {
         : print "The weather vane was too far away for Arthur to see much detail." ;
         
      }
      
   }
   
 }
 : if (preposition_is "through"&&noun1_is "binoculars") {
    : if (is_carried "binoculars") {
       : print "Arthur looked through the binoculars and was somewhat unimpressed with the magnified but otherwise quite ordinary view. So he looked through the wrong end instead and took a childish delight in observing the world shrunk to Lilliputian proportions." ;
       
    }
    
 }
 : if (noun1_is "cloth") {
: if (is_present "altar_cloth") {
   : print "The altar cloth was embroidered with an unusual motif of a pair of hands, pressed together at the tips of the fingers and the thumbs to enclose a roughly triangular area, inside which was a huge eye." ;
   : set_true "sign_of_eye" ;
   
 
}

 }
 : if (noun1_is "sundial") {
    : if (is_present "sundial") {
       : print "It was a brass sundial with roman numerals etched around the face and a stylised image of the sun in the centre. Arthur looked at the unusual design and saw that it actually depicted two outspread hands held together at the wrists, with the fingers spreading out like the rays of the sun. It was set into the top of a stone pillar, at the base of which was a plinth decorated with a mosaic.  " ;
       : set_true "sign_of_sun" ;
       
    }
    
 }
 : if (noun1_is "painting"||noun1_is "paintings"||noun1_is "pictures") {
    : if (is_present "paintings") {
     : print "There were various pastoral watercolour scenes, some of which could have been highly embellished views of the countryside around The Vicarage, some of which seemed purely fantastical. One in particular caught Arthur's eye: a night scene of a medieval village with a church in the background that could have been a depiction of the Old Haelstowne, were it not that the figures in it were strange creatures with the bodies of human beings and the heads of animals. At the top right of the painting was depicted the moon, with a gigantic hand curved around it. It was a strange and disturbing scene." ;
     : set_true "sign_of_moon" ;
       
    }
    
 }
 : if (traptor==6) {
       : if (is_at "zone_dmv") {
 : if (noun1_is "buildings"||noun1_is "building") {
 : if (spell>11) {
 : if (!endgame) {
          : print "It was a ghostly image of the buildings of medieval Haelstowne." ;
 }
 : else {
    : print "It was the buildings of medieval Haelstowne, quite solid and real." ;
     }
 
 }

       }
       : if (noun1_is "villagers") {
       : if (spell>11) {
       : if (!endgame) {
          : print "It was the ghostly images of the inhabitants of medieval Haelstowne." ;
       }
       : else {
          : print "It was the medieval villagers of Old Haelstowne, quite solid and real." ;
          
       }
                     
       }
    
          
       }
       
    }
    
 }
 : if (noun1_is "peldash") {
    : if (is_present "jeremiah_peldash") {
       : if (peldash_description=="The Reverend Jeremiah Peldash (on the ground)" ) {
          : print "The Reverend Peldash lay on the ground, barely conscious, as the horses reared around him." ;
       }
       : else {
          : print "The form of the Reverend Peldash seemed to flux and flow like molten wax in the arms of Ottoline Elderfield as he was transformed by the Faery Queen's magic." ;
         
       }
       
    }
    
 }
 : if (noun1_is "rug") {
    : if (is_at "landing"||is_at "landing_2") {
       : print "It had a conventional pattern, now faded into obscurity, and had been worn paper thin by the constant passage of feet. Yet still it refused to yield to the inevitable and allow itself to become full of holes. Miraculously, precariously, it remained intact." ;
       
    }
    
 }
 : if (noun1_is "bookcases"&&is_at "study") {
    : print "They were purely functional and built into the walls of the study." ;
    
 }
 : if (noun1_is "matches"&&is_present "matchbox"&&matchbox_description=="an open matchbox (containing some matches)") {
:print "They were Pollock and Harshaw's Invincibles, ordinary-looking matches whose mundane appearance belied their extraordinary qualities, if the advertising was to be believed."  ;
 }
 : if (is_at "car_1") {
    : if (noun1_is "dials") {
       : print "The temperature gauge, oil indicator, speedometer and rev counter all looked invitingly at him." ;
       
    }
    : if (noun1_is "seat") {
       : print "It was soft and springy and, after months of intimate assocation, sculpted perfectly to Arthur's behind." ;
       
    }
    : if (noun1_is "wheel"||noun1_is "steering") {
       : print "Just a simple turn of the wheel and the Austin would head in whatever direction took Arthur's fancy." ;
       
    }
    : if (noun1_is "dials") {
       : print "Their needles were at rest, just waiting for the signal to swing into life." ;
       
    }
    : if (noun1_is "dashboard") {
        : print "It was a shining walnut wonder of buttons and dials." ;
        
    }
    : if (noun1_is "controls") {
       : print "They were ready to do Arthur's bidding." ;
       
    }
   
 }
  : if (noun1_is "handle"&&is_present "car") {
       : print "It was a plain crank-handle sticking out of the front of the car. One turned it to start the engine." ;
    }
    

: if (is_at "outside_west" ) {
   : if (noun1_is "stonework"||noun1_is  "brickwork"||noun1_is "timbers") {
      : print "It was an eccentric collage of different building materials, all jumbled together, that constituted the very fabric of The Vicarage." ;
      
   }
   
}
: if (noun1_is "gate") {
: if (is_at "drive"||is_at "lane_1") {
  :print "They were wrought iron and heavily corroded, the rust-blown metal covered by thick, black paint. They hung from heavy hinges cemented into the sandstone posts.";
}
}
: if (noun1_is "post"||noun1_is "pillar") {
   : if (is_at "drive"||is_at "lane_1") {
   : print "They were hefty sandstone pillars that looked rather like the bases of a pair of roman columns repurposed for their present use." ;
   
}
}
: if (noun1_is "wallpaper") {
   : if (is_at "bedroom_1"||is_at "peldash_room") {
      : print "It was a stylised floral pattern in cream on a dark green background." ;
      
   }
   
}

   : if (noun1_is "mirror"||noun1_is "ashtray"||noun1_is "reflection") {
   : if (is_present "mirror") {
: if (preposition_is "in"||noun1_is "reflection") {
      : if (fragments_in_mirror==0) {
         : print "The mirror frame was currently empty; the dull bronze surface reflected no image." ;
         : done ;
         
         
      }
      : else_if (fragments_in_mirror<4) {
         : print "Arthur gazed into the incomplete mirror and saw his fractured reflection gazing eerily back at him." ;
         
      }
     : else {
        : print "Arthur gazed deep into the inky lustre of the mirrored surface and saw a face at once familiar and utterly unknown looking back at him." ;
        
     }
   :done;
}

      : print "It was the very mirror created by Richard Travais, five hundred years ago: a saucer-sized bronze disk engraved with mysterious symbols on the rear face and around the rim. The concavity at the front was designed to hold a reflective surface. " ;
      : if (fragments_in_mirror==0) {
         : print "The frame was currently empty; the dull bronze surface reflected no image." ;
         : done ;
         
         
      }
      
      : if (fragments_in_mirror==4) {
        : print "The glass fragments having been fitted back into the frame, the mirror was complete once more. Arthur gazed deep into the inky lustre of the mirrored surface and saw a face at once familiar and utterly unknown looking back at him." ;
        : done ;
      }
      : if (fragments_in_mirror==1) {
         : print "One fragment had been fitted back into the bronze frame, but the mirror surface was still incomplete. " ;
         : done ;
      }
     : if (fragments_in_mirror==2) {
         : print "Two fragments had been fitted back into the bronze frame, but the mirror surface was still incomplete. " ;
         : done ;
      }
       : if (fragments_in_mirror==3) {
         : print "Three fragments had been fitted back into the bronze frame, but the mirror surface was still incomplete. " ;
         : done ;
      }
            
   }
   
   }
: if (is_at "cellar_room") {
 : if (noun1_is "plates"&&is_present "plates") {
         :print "Beneath their thick envelope of dust, they appeared shiny and barely used. Arthur wondered briefly at that irrational human urge to manufacture things in such vastly wasteful quantities. There had not been produced enough cakes and sandwiches since time began to occupy the number of plates that streamed from the Potteries each year.\nThe plates were separated from each other by sheets of paper.";
         : set_true "plates" ;
         
      }
      : if (noun1_is "paper") {
         : if (plates) {
            : print "They were just sheets of scrap paper that had been interleaved between the plates to prevent them scratching one another." ;
            : if (has_not_created "instructions") {
                : print "Arthur looked more closely and saw that one of the sheets had some writing on it. It looked like a set of instructions." ;
            : create "instructions" ;
            : press_any_key ;
            : redescribe;
            }
            
           
            
         }
         
      }

      : if (noun1_is "ornaments"||noun2_is "crockery") {
         : print "They were things of porcelain, once fashionable but now merely hideous." ;
         
      }
      : if (noun1_is "pictures") {
         : print "They were etchings of country scenes and comic depictions of Victorian gentlemen with huge whiskers and ruddy noses." ;
         
      }
      : if (noun1_is "miscellanea") {
         : print "It was a sorry collection of things that didn't really belong together but had nowhere else to go." ;
         
      }
     
   
   
}
: if (is_at "rockery") {
   : if(noun1_is "stones") {
      : print "They were small boulders, piled together and covered in moss and lichen." ;
      : if (noun1_is "trees"||noun1_is "shrubs") {
         : print "There were a variety of species that had gained a foothold on the rocky surface wherever there was a nook or cranny to root into." ;
         
      }
      
   }
   
}
: if (is_at "garden") {
   : if (noun1_is "beds"||noun1_is "flower beds") {
      : print "They were ordinary flowerbeds, kept more of less in trim by the endeavours of Mr Thurgood." ;
   }
   
}
: if (noun1_is "lawn") {
   : if (is_at "garden"||is_at "garden_4") {
      : print "It was an unremarkable patch of turf, yellowing in the relentless midsummer sun. Mr Thurgood did a decent job of keeping it neat and tidy although a stray dandelion or two reminded one that an army of weeds lay in wait for the slightest opportunity to invade." ;
      
   }
   
}
: if (is_at "garden_5") {
   : if (noun1_is "fruit") {
      : print "Apricots, peaches and plums hung from the trees in ripe abundance." ;
      
   }
   
}



: if (noun1_is "vicarage") {
   : if (is_at "path"||is_at "path_2"||is_at "path_3"||is_at "path_4"||is_at "path_5"||is_at "path_6"||is_at "path_7"||is_at "path_8"||is_at "path_9"||is_at "drive"||is_at "outside_east"||is_at "outside_west"||is_at "garden"||is_at "garden_3"||is_at "garden_4"||is_at "car_1") {
      : print "It was a lopsided building with an enormous thatched roof, obviously very old." ;
      
   }
}
  : if (noun1_is "frank"&&is_present "frank_farthing") {
     : examine "frank_farthing" ;
     : if (is_at "square") {
       : print "Frank Farthing was a local character that had been pointed out to Arthur when he'd first arrived. He had a reputation as a drinker and was well known as the local poacher. He was rather bruised and battered, having come off worst in the pub brawl." ;
       
     }
     
  }
  : if (noun1_is "water") {
  : if (is_at "sweet_track_1"||is_at "sweet_track_2"||is_at "sweet_track_bridge") {
     : print "It was deep and black." ;
  }
  }
  : if (noun1_is "bottle"&&is_at"scullery"&&is_present "edna_taplow"&&traptor==3) {
     : print "It was a large glass bottle containing some yellowish liquid, into which Mrs Taplow was dropping some iron nails." ;
  }
  : if (noun1_is "me"||noun1_is "arthur") {
     : print "Arthur examined his person and saw the same unremarkable frame to which he was accustomed, not quite adequately tall nor sufficiently well-built for his own satisfaction. He pictured his face, as he'd seen it in the mirror: pale and round, rather innocent looking, a little naive. He'd grown a moustache as soon as he'd been able to, in an attempt to lend his countenance a little gravitas but even now at the age of 25, he looked like a schoolboy wearing it for a theatrical performance." ;
    
     
  }
  : if (noun1_is "well"&&preposition_is "down") {
     : if (is_at "DMV_5") {
        : if (traptor==6&&spell>11||is_present "hole") {
          : print "Arthur peered into the mouth of the well and saw nothing but inky darkness within." ;
          : done ;
          
        }
        
     }
     
  }
  : if (noun1_is "name") {
     : if (is_present "monument") {
        : print "Arthur glanced idly at the names of the Molyneux family members carved next to their effigies. The medieval script was not easy to read, but he noted Hannah, Mary, Thomas and Geoffrey among them." ;
        
     }
     : else_if (is_present "carvings") {
        : print "Arthur glanced at the names and saw Mary, Agnes, Joseph and Geoffrey among them." ;
        
     }
     
  }
  : if (noun1_is "mounds"||noun1_is "humps"||noun1_is "troughs"||noun1_is "earthworks"||noun1_is "tumulus") {
     : if (is_at "DMV_1"||is_at "DMV_2"||is_at "DMV_4"||is_at "DMV_6") {
        : print "They were the remains of structures buried beneath the turf." ;
        
     }
     
 
: if (is_at "DMV_3") {
   : print "It was the mound to the south of the village known as The Devil's Settle. Arthur had noticed it on his drive up." ;
   
}
 }
: if (is_at "Churchyard"||is_at "DMV_2") {
: if (noun1_is "lychgate") {
//pinky
   : print "It was a roofed gate that led into the churchyard, constructed of ancient and weathered timber. In times past, coffins would have been kept there out of the weather until the time came to bury them." ;
   }
}


    : if (is_present "breakfast_things") {
      : if (noun1_is "kipper"||noun1_is "boiled"||noun1_is "egg"||noun1_is "toast"||noun1_is "marmalade"||noun1_is "crockery"||noun1_is "coffee"||noun1_is "pot"||noun1_is "salt"||noun1_is "pepper"||noun1_is "crockery") {
      
      : print "Arthur searched the breakfast things for clues as to Reverend Peldash's disappearance, but failed to find anything of significance. He would have to cast his net wider. " ;
      
      }
      
   }
  : if (noun1_is "ribbons"&&is_present "bell_rope") {
     : print "They were long ribbons of tough material, attached to the end of the bell rope." ;
     
  }
  : if (noun1_is "keg") {
 :disambiguate_s1 category = "present" ;
  : if (s1()== "keg_1") {
    : examine "keg_1" ;
       : if (beer_keg_description=="a beer keg (attached to the hose)") {
      : print "It was connected to a beer hose." ;
   }
   : done ;
  }
: else_if (s1()=="keg") {
   : examine "keg";
   : if (beer_keg_open) {
      : print "The keg was open." ;
        : gosub "keg_contents" ;
      : done ;
      
   }
   
}

  }
 : if (noun1_is "nez") {
   : if (is_present "spectacles_case"&&case_open&&specs_in_case||is_present "pince_nez") {
      : examine "pince_nez" ;
      : done ;
      
   }
   
} 
  : if (noun1_is "glass") {
     : if (is_at "garden_3") {
        : if (has_not_created "plate_glass") {
           : print "They were ordinary panes of glass in a simple wooden frame that formed the lid of the cold frame." ;
           
        }
        
     }
     
  }
  : if (noun1_is "flowers") {
     : if (is_present "vase"&&vase_description=="a vase (containing a bouquet of dried flowers)") {
        : examine "bouquet_flowers";
     }
     
  }
  : if (noun1_is "tweeds") {
     : print "It was a tolerably well-tailored tweed suit, not quite Savile Row but respectable enough for Stathings." ;
     
  }
  : if (noun1_is "brogues") {
   : print "They were ordinary brown leather shoes, worn-in but still acceptably smart. Arthur made an effort to keep them polished." ;
     
  }
  : if (noun1_is "daisy"&&is_present "daisy_farthing") {
     : examine "daisy_farthing" ;
     
  }
  
  : if (noun1_is "pint"||noun1_is "ale"||noun1_is "beer") {
  : if (is_present "pint") {
: examine "pint" ;
: done ;

  }
  : if (is_present "keg"&&beer_keg_open) {
     : print "It was cloudly liquid with a powerful yeasty odour, sloshing about in the dark depths of the keg." ;
   : done ;
     
  }
  
  }

  : if (noun1_is "light") {
     : if (is_at "darkroom") {
        : if (light_on) {
           : print "The electric light was on, emitting a steady 30 watts of white light and being symbolic of a century and a half of industrial progress in its own humble way." ;
       
           
        }
        : else {
           : print "The electric light was off." ;
           
        }
        
     }
     
  }
  : if (noun1_is "pub") {
    : if (is_at "pub"||is_at "pub_cellar_passage"||is_at "pub_cellar") {
       : print "It was not the most insalubrious drinking establishment that Arthur had ever been in, but it was close." ;
       : done ;
       
    }
     
  }
  : if (noun1_is "disc") {
     : if (is_at "nevernear_cottage") {
        : print "Arthur gazed at the mysterious disc-shaped object in the portrait and wondered what its significance might be." ;
        : done ;
        
     }
     
  }
  : if (noun1_is "hose") {
     : if (is_present "keg") {
     : press_any_key ;
     
        : print "It was an ordinary hose, designed for the tranfer of ale from the keg to the taps in the bar up above.";
        
     }
  }
  : if (noun1_is "mistletoe") {
     : if (is_present "mistletoe_sprig") {
        : examine "mistletoe_sprig";
        :done;
        }
       : if (is_present "mistletoe") {
          :examine "mistletoe";
          :done;
       }
  }
 : if (countdown_horses<1) {
    : if (noun1_is "queen") {
       : print "She was tall and slender, ghastly pale upon her coal-black steed. Her eyes were terribly cold and her mouth cruel. To look upon her was to invite fear into one's very soul." ;
       : done ;
       
    }
    : if (noun1_is "horse"||noun1_is "horses") {
       : print "They were huge black beasts, wild-eyed and foam-flecked." ;
       : done ;
       
    }
    
 }
 : if (noun1_is "snowflake"&&snowfall) {
    : if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
 }
 : else {
 : if (daytime) {
    
    : print "They were fat, fluffy and light as air. They floated down dreamlike from the bright midsummer sky. " ;
 }
 : else {
       : print "They were fat, fluffy and light as air. They floated down dreamlike from the night sky" ;
 }
 
    
 }
 
  
}
 : if (noun1_is "snow"&&snowfall) {
    : if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
 }
 : else {
: if (daytime) {
   : print "It was ephemeral white stuff that mostly failed to settle in the blazing midsummer sun - although it has begun to gain a small foothold in the occasional patch of shade." ;
   
}
: else {
   : print "It was a smothering blanket of purest white that rendered the surroundings magically unfamiliar." ;
   
}


 
    
 }
 
  
}
: if (noun1_is "cap") {
   : if (is_present "thurgood") {
      : print "It was a flat cap made of a tweed profoundly discoloured and worn with use. It suited Mr Thurgood so perfectly and fitted so exactly that Arthur found it impossible to picture him without it. Quite probably, he bathed and slept in it." ;
      
   }
   
}

 : if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald") {
      : if (is_present "villages") {
        : examine "villages" ;
         
      }
   
      
   }
   
    : if (original "noun1" =="spirits"||original "noun1" =="andredesweald") {
      : if (is_present "spirits") {
        : examine "spirits"  {
           
        }
        
      }

      
   }
   
   : if (original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography") {
      : if (is_present "practical") {
        : examine "practical"  {
           
        }
        
      }
 
      
   }
   
     : if (original "noun1" =="tattered"||original "noun1" =="remnant") {
      : if (is_present "remnant") {
     : examine "remnant" ;
     
      }

      
   }
   
    : if (original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell") {
      : if (is_present "paperback") {
        : examine "paperback"  {
           
        }
        
      }

      
   }
   
      : if (original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's") {
      : if (is_present "herbal") {
         : examine "herbal" ;
      
      }

      
   }
   
       : if (original "noun1" =="grimoire") {
      : if (is_present "grimoire") {
         : examine "grimoire" ;

      }
 
      
   }
   
: if (noun1_is "fragments") {
: set_integer var = "fragments_counter"  value = "0" ;
   : if (is_present "fragment_1") {
      : increment "fragments_counter" ;
   }
      : if (is_present "fragment_3") {
      : increment "fragments_counter" ;
   }
      : if (is_present "fragment_4") {
      : increment "fragments_counter" ;
   }
      : if (is_present "fragment_5") {
      : increment "fragments_counter" ;
   }
   : if (fragments_counter>1) {
   : print "They were fragments of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. They seemed very old." ;
   }
 : if (fragments_counter==1) {
   : print "It was a fragment of mirror glass, thick and greenish with an uneven finish and marred by small air bubbles. It seemed very old." ;
   }
   : else {
      : print "But Arthur couldn't see that anywhere." ;
      
   }
   

   
}
: if (noun1_is "tap") {
   : if (is_present "keg"||is_present "keg_1") {
      : print "It was a little tap on the side of the keg, below the hose connector." ;
      
   }
   
}
: if (noun1_is "mortar"&&is_present "date_stone") {
   : print "Arthur noticed that the ancient mortar around the stone was loose and crumbling." ;
   
}




}




#EXAMINE end




#RIDE start

: match "ride bicycle;drive bicycle"  {
: if (is_present "motor_tricycle") {
   : print "Arthur would have dearly loved to borrow Miss Drywell's three-wheeler and take it for a spin, but to do so without her permission hardly seemed fitting behaviour for a police officer." ;
   :done;
}


: if (onbike) {
   : print "But Arthur was already riding the bicycle." ;
   : done ;
   
}

: if (is_present "bicycle") {
   : print "Arthur picked up the bicycle." ;
   : destroy "bicycle" ;
   : set_true "hasbike" ;
}
: if (hasbike) {
   : if (bikefixed) {
   : if (is_at "zone_road_zone"||is_at "zone_road_to_wood") {
   : if (ash_follow) {
   : print "Arthur didn't think he should ride the bicycle with Ash determined to follow him; it seemed rather unkind." ;
   :done;
    }
    : if (traptor==5||traptor==6) {
    : if (ottoline_follow) {
 : if (ottoline_description=="Ottoline Elderfield") {
     : print "Ottoline having decided to accompany Arthur, it seemed rather rude to mount his bicycle and either expect her to run alongside him or leave her trailing behind." ;
       : done ;
 }
 : else_if (ottoline_description=="Ottoline Elderfield (with her bicycle)") {
    : print "Arthur was too much of a gentleman to set off on his bicycle unless Ottoline was also ready to ride hers." ;
    : done ;
    
 }
 
    
      
       
    }
          
    }
      : print "Arthur mounted his mechanical steed and prepared to ride whither the fancy took him." ;
      : set_true "onbike" ;
      : set_false "hasbike" ;
      
: destroy "bicycle" ;
: press_any_key ;
: redescribe;

      }
      : else {
         : print "Arthur, as dedicated upholder of what was both right and lawful, did not believe in the riding of bicycles anywhere other than on the public highway." ;
         
      }
      
   }
    : else {
         : print "Arthur was not reckless enough to attempt to ride it in its current state of repair." ;
      }
}
: else {
   : print "But there wasn't a bicycle to hand. " ;
}
}
: match "ride horse"  {
   : if (countdown_horses<1) {
      : print "Arthur didn't fancy tackling one of the huge beasts." ;
      : done ;
      
   }
   
}

#RIDE end

#LOAD start
: match "load film; load camera"  {

   : gosub "load_camera" ;
   : done ;
   
}

#LOAD end

#UNLOAD start

: match "unload camera; unload film; remove film"  {
   : if (is_carried "box_brownie") {
      : if (cameraloaded) {
         : if (cameraopen) {
         : if (filmended) {
             : print "Arthur removed the roll of film from the camera." ;
            : set_false "cameraloaded" ;
           : set_string var = "film_description"  text = "a strip of undeveloped film" ;
           : pocket "film" ;
           
         }
         : else {
                : print "Arthur removed the roll of film from the camera." ;
            : set_false "cameraloaded" ;
        : pocket "film" ;
        
         }
         }
         : else {
            : print "Arthur would need to open the camera before he could remove the film." ;
         }
      }
      : else {
         : print "But there was no film in the camera." ;
      }
   }
}


#UNLOAD end

#HOLD start

: match "hold _"  {
   : if (noun1_is "hand"||noun1_is "hands") {
      : if (is_present "mr_salter"||is_present "thurgood"||is_present "daisy_farthing"||is_present "frank_farthing"||is_present "molly"||is_present "ash"||is_present "joseph_jarbell"||is_present"edna_taplow"||is_present "ottoline_elderfield"&&traptor!=4) {
         : print "Arthur had a sudden urge to hold their hand, but managed to resist by thrusting his hands deep into his own pockets." ;
         
      }
         : else_if (is_present "ottoline_elderfield") {
          : if (traptor==4) {
            : if (ottoline_description=="Ottoline Elderfield"||!sitting) {
               : print "Ottoline looked at Arthur curiously. \"We do both need to be sitting down Arthur,\" she reminded him." ;
               : done ;
               
            }
            : else_if (!holding_hands) {
               : print "Arthur held Ottoline's hand." ;
               : set_true "holding_hands" ;
           
    : press_any_key ;
    : redescribe;
    
                     
            }
            
      
         }
         
      }
         : else {
      : print "Arthur decided to hold his own hand for a moment, which proved to be oddly comforting." ;
      : done ;
      
   }
   }

   
   
}


#HOLD end

#GET start

   : match "get _"  {
   : if (preposition_is "up") {
     : if (sitting) {
   : print "Arthur got off the chair." ;
   : set_false "sitting";
    : set_false "holding_hands" ;:gosub "chair_creation"; :press_any_key; 
    : redescribe;
    
} 
: else {
   : print "But Arthur was already standing." ;
   : done ;
   
}

   }
   

:mask
{

: if (sitting) {
   : print "Arthur got off the chair." ;
   : set_false "sitting";
    : set_false "holding_hands" ;:gosub "chair_creation"; :press_any_key; 
 
    
}
}


: if (noun1_is "chair") {
      : if (preposition_is "off") {
         : if (is_at "on_chair") {
             : goto { target -> (down_chair_location) }
             : if (is_exists "something") {
                : create "something" ;
                
             }
             
               : print "Arthur climbed down off the chair.";
               : press_any_key ;
               : redescribe;
            }
             : else{
            : print "But Arthur was not on a chair." ;
            : done ;
            
            }
             }
             : if (preposition_is "on") {
    
                  : if (is_present "chair_1"||is_present "chair_2"||is_present "chair_3") {
                  : if (is_carried "chair_1") {
                    : drop "chair_1";
                  }
                   : if (is_carried "chair_2") {
                    : drop "chair_2";
                    : press_any_key ;
                  }
                   : if (is_carried "chair_3") {
                    : drop "chair_3";
                    : press_any_key ;
                  }
                    : if (is_at "on_the_table") {
                    : if (sitting) {
                           : print "Arthur got out of the chair." ;
                    : set_false "sitting";
                     : set_false "holding_hands" ;:gosub "chair_creation"; :press_any_key; :redescribe ;
                    }
                    
                
                    
            : print "Arthur clambered up onto his precarious platform." ;
            
         }
         : else {
            
         : print "Arthur stood on the chair" ;
         }
         
          : set_string var = "down_chair_location" { text-> (current_location()) }
         : goto "on_chair" ;
         : if (is_exists "something") {
            : create "something";
         }
         
         : press_any_key ;
         : redescribe;
         
      }
      : else_if (is_at "on_chair") {
       : print "But Arthur was already standing on a chair." ;
         : done ;
         
      }
      :else {
:print "Arthur didn't feel move to attempt that right here and now.";
}
             }
             

         
         
: if (is_at "on_chair") {
   : print "Arthur found it rather difficult to get the chair while he was standing on it." ;
   : done ;
   
}
: if (is_exists "chair_4") {
: disambiguate_s1 "beside";
: if (s1()=="chair_4") {
         : print "Arthur took the chair from under the door handle, unblocking access to the room." ;
         : destroy "chair_4" ;
         : if (!is_exists "chair_1") {
            : pocket "chair_1" ;
            : press_any_key ;
            : redescribe;
            
         }
         : if (!is_exists "chair_2") {
            : pocket "chair_2" ;
              : press_any_key ;
            : redescribe;
         }
                 : if (!is_exists "chair_3") {
            : pocket "chair_3" ;
              : press_any_key ;
            : redescribe;
         }
      }
}

 : if (is_beside "chair_1") {
 : get "chair_1" ;
 : done ;
}
   : if (is_beside "chair_2") {
 : get "chair_2" ;
 : done ;
}
 : if (is_beside "chair_3") {
 : get "chair_3" ;
 : done ;
}

      : if (is_present "ottoline_elderfield"&&ottoline_description=="Ottoline Elderfield (sitting on a chair)") {
   
     : if (!is_present "chair_1"&&!is_present "chair_2"&&!is_present "chair_3") {
        : print "Arthur didn't think it polite to steal Ottoline's chair from beneath her." ;
         : done ;
  
      }
      
     } 



}
: if (noun1_is "chairs") {
 : if (is_present "ottoline_elderfield"&&ottoline_description=="Ottoline Elderfield (sitting on a chair)") {
   
     : if (!is_beside "chair_1"&&!is_beside "chair_2"&&!is_beside "chair_3") {
        : print "Arthur didn't think it polite to steal Ottoline's chair from beneath her." ;
         : done ;
      }
     }
     : if (is_beside "chair_1"&&is_beside "chair_3"||is_beside "chair_2"&&is_beside "chair_3"||is_beside "chair_1"&&is_beside "chair_2") {
        : print "Arthur took the chairs." ;
     }
     : else_if (is_beside "chair_1"||is_beside "chair_2"||is_beside "chair_3") {
        : print "Arthur took the chair." ;
        
     }
     
     
 : if (is_beside "chair_1") {
 : get "chair_1" quiet = "true" ;
}
   : if (is_beside "chair_2") {
 : get "chair_2" quiet = "true" ;
}
 : if (is_beside "chair_3") {
 : get "chair_3" quiet = "true" ;
}
}



   : if (is_carried "safelight") {
: if (noun1_is "safelight") {
   : print "Arthur was already carrying the safelight." ;
   : done ;
}
      : print "Arthur couldn't carry anything else while he was balancing the components of the makeshift safelight." ;
      : done ;
   }
   : if (is_present "breakfast_things") {
      : if (noun1_is "kipper"||noun1_is "boiled"||noun1_is "egg"||noun1_is "toast"||noun1_is "marmalade"||noun1_is "crockery"||noun1_is "coffee"||noun1_is "pot"||noun1_is "salt"||noun1_is "pepper"||noun1_is "things"||noun1_is "crockery") {
      : print "Arthur had finished with the breakfast things and saw no need to pick them up and take them with him. " ;
      
      }
      
   }
   
   : if (noun1_is "match") {
      : if (is_carried "matchbox") {
       : if (is_carried "match"||is_carried "match_1") {
         : print "Arthur was already holding a match and saw no need to get another." ;
         : done ;
         
         }
      : if (!matchboxopen) {
         : print "Arthur opened the matchbox." ;
         : set_true "matchboxopen" ;
         
      }
        
: else {
   
            : pocket "match" ;
               : print "Arthur took a match from the box." ;
  
}
            
            
            
      }
      : else {
         : print "But Arthur did not have a matchbox." ;
         
      }
      
      
   }
   : else_if (noun1_is "matches") {
       : if (is_carried "matchbox") {
         : if (matchboxopen) {
         : if (is_carried "match"||is_carried "match_1") {
         : print "Arthur was already holding a match and saw no need to get another." ;
         }
         : else {
            : print "But Arthur didn't need more than one at a time." ;
            
         }
         
         }
         }
   }
   

   : if (is_present "equipment") {
      : if (noun1_is "lenses") {
      : print "Arthur couldn't think of any reason why he would need to carry such things around." ;
      
   }
 
   
   }
: if (noun1_is "bicycle") {
: if (endgame) {
   : if (is_present "bicycle"||is_present "ottolines_bike") {
      : print "Attending to a bicycle was not Arthur's priority at that that precise moment." ;
      : done ;
      
   }
   
}

   : if (adjective1_is "ottoline's") {
   : if (is_present "ottoline_elderfield") {
   : if (ottoline_description=="Ottoline Elderfield (with her bicycle)"||ottoline_description=="Ottoline Elderfield (on her bicycle)") {
       : print "Arthur didn't it would be proper to snatch away Ottoline's bicycle from her, for no good reason." ;
       : done ;
       
   }
  : else_if (is_present "ottolines_bike") {
     : print "Arthur had already acquired one bicycle - he didn't need another" ;
     : done ;
  }
   }
    }
: if (preposition_is "off") {
      : if (onbike) {
         : print "Arthur dismounted the bicycle." ;
         : if (is_present "ottoline_elderfield"&&is_at "zone_road_to_wood") {
         : if (traptor==3) {
            : print "Ottoline stopped as she heard Arthur dismount his bicycle and looked at him curiously over her shoulder.\n\"Surely you can't need a rest already Arthur,\" she said scornfully. \"We've barely come 6 miles! Whatever is the police force coming to?\"" ;
            : if (is_present "crow") {
               : print "The huge black crow hopped about on his perch and called 'craaak!' impatiently." ;
               
            }
            
         }
         : if (traptor==6) {
            : print "Ottoline stopped as she heard Arthur dismount his bicycle and looked at him curiously over her shoulder.\n\"Surely you can't need a rest already, Arthur,\n she said scornfully, \"We've barely come 6 miles! Whatever is the police force coming to?\"" ;
            
         }
         
         }
         
         : set_false "onbike" ;
      : set_true "hasbike" ;
      : press_any_key ;
      : redescribe;
      
      }
      : else_if (hasbike) {
         : print "But Arthur was not riding the bicycle." ;
      }
      : else {
         : print "But Arthur did not have a bicycle." ;
         
      }
   
}
: else_if (preposition_is "on") {
   
   : if (is_present "motor_tricycle") {
   : print "Arthur would have dearly loved to borrow Miss Drywell's three-wheeler and take it for a spin, but to do so without her permission hardly seemed fitting behaviour for a police officer." ;
   :done;
}


: if (onbike) {
   : print "But Arthur was already riding the bicycle." ;
   : done ;
   
}

: if (is_present "bicycle") {
   : print "Arthur picked up the bicycle." ;
   : destroy "bicycle" ;
   : set_true "hasbike" ;
}
: if (hasbike) {
   : if (bikefixed) {
   : if (is_at "zone_road_zone"||is_at "zone_road_to_wood") {
   : if (ash_follow) {
   : print "Arthur didn't think he should ride the bicycle with Ash determined to follow him; it seemed rather unkind." ;
   :done;
    }
    : if (traptor==5||traptor==6) {
    : if (ottoline_follow) {
 : if (ottoline_description=="Ottoline Elderfield") {
     : print "Ottoline having decided to accompany Arthur, it seemed rather rude to mount his bicycle and either expect her to run alongside him or leave her trailing behind." ;
       : done ;
 }
 : else_if (ottoline_description=="Ottoline Elderfield (with her bicycle)") {
    : print "Arthur was too much of a gentleman to set off on his bicycle unless Ottoline was also ready to ride hers." ;
    : done ;
    
 }
 
    
      
       
    }
          
    }
      : print "Arthur mounted his mechanical steed and prepared to ride whither the fancy took him." ;
      : set_true "onbike" ;
      : set_false "hasbike" ;
      
: destroy "bicycle" ;
: press_any_key ;
: redescribe;

      }
      : else {
         : print "Arthur, as dedicated upholder of what was both right and lawful, did not believe in the riding of bicycles anywhere other than on the public highway." ;
         
      }
      
   }
    : else {
         : print "Arthur was not reckless enough to attempt to ride it in its current state of repair." ;
      }
}
: else {
   : print "But there wasn't a bicycle to hand. " ;
}
   
}

: else_if (is_beside "bicycle") {
: print "Arthur picked up the bicycle." ;
: set_true "hasbike" ;
: destroy "bicycle" ;
}
: else_if (hasbike||onbike) {
   : print "But Arthur was already holding the bicycle." ;
}

}



  : if (noun1_is "peg") {
  : if (negs_hung){

         : print "But the peg was doing sterling work in keeping the film strip attached to the drying line." ;
         
      }
      : else_if (prints_hung) {
         : print "But the peg was doing sterling work in keeping the sheet attached to the drying line." ;
      }
      
      }

: if (noun1_is "sheet") {
   : if (prints_hung) {
         : set_false "prints_hung" ;
         : print "Arthur unpegged the sheet and took it from the drying line." ;
         : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, wet)" ;
         : get "sheet"quiet = "true"  ;
          :  create "peg" target = "inventory" ;
          : done ;
          
           }
: if (is_beside "sheet") {
: if (negs_on_sheet) {
   : print "Arthur took the negatives off the sheet." ;
  : set_false "negs_on_sheet" ;
  : set_string var = "film_description"  text = "a set of film negatives (cut from a strip)" ;
  
}
: if (glass_on_sheet) {
   : print "Arthur took the glass off the sheet" ;
   : set_false "glass_on_sheet" ;
   : set_string var = "glass_description"  text = "a pane of glass" ;
   
   }

: get "sheet" ;
: done ;
}
   : else_if (is_carried "packet") {
   : if (packet_open) {
: if (!is_exists "sheet") {
   : print "Arthur took a fresh sheet of photographic paper from the packet." ;
   : create "sheet" target = "inventory" ;
}
: else {
   : print "Arthur saw no need to take another sheet of paper from the packet." ;
}
       }
       : else {
          : print "But the packet was not open." ;
       }
   }
   }
   : if (noun1_is "film") {
   : if (is_carried "box_brownie"&&cameraloaded) {
         : if (cameraopen) {
              : print "Arthur removed the roll of film from the camera." ;
               : set_false "cameraloaded" ;
          :pocket "film";
               
         : if (filmended) {
            : set_string var = "film_description"  text = "a roll of exposed film" ;
            ;
        
            
         }
      
         }
         : else {
            : print "Arthur would need to open the camera before he could remove the film." ;
      }
      }
   : if (negs_hung) {
         : set_false "negs_hung" ;
         : set_false "need_paper" ;
         : print "Arthur unpegged the strip and took it from the drying line." ;
         : if (is_exists "packet") {
           : set_string var = "film_description"  text = "a strip of film negatives (processed, dry)" ; 
         }
         :else {
         : set_string var = "film_description"  text = "a strip of film negatives (processed, wet)" ;
         }
         : get "film"quiet = "true"  ;
          :  create "peg" target = "inventory" ;
           ;
           
           : done ;
           
   }
   : if (film_description=="a strip of film negatives (unfixed, unwashed)"||film_description=="a strip of film negatives (unfixed, washed)"||film_description=="a strip of film negatives (fixed, unwashed)"||film_description=="a strip of film negatives (processed, wet)"||film_description=="a set of film negatives (cut from a strip)"||film_description=="a set of film negatives (cut from a strip) (on the photo sheet)") {
: if (is_beside "sheet") {
   : if (negs_on_sheet&&glass_on_sheet) {
     : print "Arthur lifted the glass and took the negatives from the sheet." ;
     : set_false "negs_on_sheet" ;
     : set_string var = "film_description"  text = "a set of film negatives (cut from a strip)" ;
        : create "film" target = "inventory" ;
     
   }
   : else_if (negs_on_sheet) {
      : print "Arthur took the negatives from the sheet." ;
      : set_false "negs_on_sheet" ; 
       : set_string var = "film_description"  text = "a set of film negatives (cut from a strip)" ;
      : get "film" quiet = "true" ;
   }
   : else {
      : get "film" ;
   }
   
   }
    : else {
      : get "film" ;
   }
}

   }
   : if (noun1_is "glass") {
:if (is_beside "plate_glass"){
      : if (glass_on_sheet) {
         : print "Arthur took the glass off the sheet of photographic paper." ;
          : set_string var = "glass_description"  text = "a pane of glass" ;
         :set_false "glass_on_sheet";
          :get "plate_glass" quiet ="true" ;
      }
     
   }
   
   }
   : if (noun1_is "bouquet") {
   : if (is_present "bouquet_flowers") {
      :get;
   }
      : else_if (is_present "vase") {
      : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
            : print "Arthur took the flowers out of the vase." ;
           : pocket "bouquet_flowers" ;
           : set_string var = "vase_description"  text = "a vase" ;
           
            : done ;
      }
      
      }
      
   }
   
   : if (noun1_is "keys"||noun1_is "bunch"||noun1_is "key") {
      : if (is_at "kitchen") {
      : if (is_present "bunch_keys") {
       : if (key_on_hook) {
       : if (parent_of "edna_taplow"=="dining_room"&&traptor==1) {
          : print "The housekeeper bustled into the kitchen." ;
          : create "edna_taplow" ;
       }
          : if (is_present "edna_taplow") {
             : print "Arthur made to take the key from the hook but was arrested by a single glance from Mrs Taplow which was enough to convince him that an invisible line existed between himself and his intended prize that it would be dangerous to cross. He foolishly stuffed his hands into his pockets and smiled nervously at the housekeeper, who held his gaze for one chilling second longer before returning to her domestic duties." ;
             : done ;
          }
          : if (is_pocketable "bunch_keys") {
            : set_string var = "keys_description"  text = "a bunch of keys" ;
             : get "bunch_keys" ;
             : set_false "key_on_hook" ;
            }
             } 
          
       }
         
      }
      
   }
   
      : if (noun1_is "goggles") {
      : if (is_at "kitchen") {
      : if (is_present "goggles") {
       : if (goggles_on_hook) {
       : if (is_pocketable "goggles") {
            : set_string var = "goggles_description"  text = "a pair of goggles" ;
             : get "goggles" ;
             : set_false "goggles_on_hook" ;
           
                  }
             }
       }
         
      }
      
   }
   : if (noun1_is "steps") {
      : if (is_at "top_stairs") {
         : if (is_beside "steps") {
         : if (parent_of "edna_taplow"=="recess") {
            : print "Arthur decided not to stoke the fire of Mrs Taplow's anger yet further by trapping her in the window recess." ;
            : done ;
            
         }
         : else_if (is_at "on_steps") {
            : print "Arthur would have found it difficult to pick up the steps while he was standing on top of them." ;
            
         }
         
         : else {
            : get "steps" ;
            : set_false "beside_steps" ;
             }
         }
         
      }
      
   }
   
      : if (noun1_is "holder"||noun1_is "candle"&&noun2_is "holder") {
   : if (is_present "safelight") {
   : gosub "photosensitive" ;
    : destroy "safelight" ;
    : set_string var = "vase1_description"  text = "a broken vase" ;
    
    : create "vase_1" ;
    : pocket "holder_1" ;
     : print "Arthur took the holder from beneath the vase." ;
         : set_false "vase_on_candle" ;
         : press_any_key ;
         : redescribe;
         
   }
   : if (is_beside "holder") {
      : if (vase_on_candle) {
          : print "Arthur took the candle holder from beneath the vase." ;
          : pocket "holder" ;
          : set_false "vase_on_candle";
          : set_string var = "vase_description"  text = "a vase" ;
            : set_string var = "vase1_description"  text = "a broken vase" ;
         : press_any_key ;
         : redescribe;
         
      }
    : get "holder" ;
      : done ;
      
   }
  : else_if (is_beside "holder_1") {
     : get "holder_1" ;
     : done ;
     
  }
  
   }
   : if (noun1_is "candle") {
      : if (is_present "holder") {
         : if (candleinholder) {
         : if (vase_on_candle) {
    
         
            : print "Arthur took the vase off the candle." ;
            : set_false "vase_on_candle" ;
            : set_string var = "vase_description"  text = "a vase" ;
 : set_string var = "vase1_description"  text = "a broken vase" ;
         }
            : print "Arthur removed the candle from the holder." ;
            : pocket "candle" ;
            : set_false "candleinholder";
            : set_string var = "candleholder_description"  text = "a candle holder (empty)" ;
            : done ;
         }
      }
      : if (is_present "holder_1"||is_present "safelight") {
         : print "Arthur decided not to take the candle while it was alight." ;
         : done ;
      }
      
      
      
   }
   : if (noun1_is "vase") {
   : if (is_present "vase") {
      : if (vase_on_candle) {
         : print "Arthur took the vase off the candle holder." ;
         :get "vase"quiet = "true" ;
         : set_false "vase_on_candle" ;
         : set_string var = "vase_description"  text = "a vase" ;
          : press_any_key ;
         : redescribe;
      }
      : get "vase" ;
      }
      : else_if (is_present "vase_1") {
      : if (vase_on_candle) {
            : print "Arthur took the vase off the candle holder." ;
            : get "vase_1" quiet = "true" ;
                  : set_false "vase_on_candle" ;
               : set_string var = "vase1_description"  text = "a broken vase" ;
      }
      }
      : else_if (is_present "safelight") {
       : gosub "photosensitive" ;
         : print "Arthur took the vase off the candle." ;
         : destroy "safelight" ;
         : create "holder_1" ;
         : set_string var = "vase1_description"  text = "a broken vase" ;
      : pocket "vase_1" ;
        : set_false "vase_on_candle";
        : press_any_key ;
        : redescribe;
      
   }
   }
   
   
   
   
      // : if (noun1_is "fixer") {
      // : if (is_present (parent_of "fixer")) {
      //     : get object -> (parent_of "fixer");
      // }
      
//  : if (is_present (s1())) {
//    : print "Arthur would have found it difficult to grapple with liquids directly - but he could handle the things that contained them." ;
//     : done ; 
//  }
 
   
   : if (s1()== "fixer"||s1()==  "developer"||s1()==  "water") {
 : if (is_present (s1())) {
   : print "Arthur would have found it difficult to grapple with liquids directly - but he could handle the things that contained them." ;
    : done ; 
 }
 
   

    
     
      
   }
   

   : if (noun1_is "safelight"&&is_present "safelight") {
       : if (count "_inventory"==1) {
         : print "Arthur would need both hands free to keep together the makeshift components of the improvised safelight, and he was already carrying something." ;
      }
      : else_if (count "_inventory">1) {
          : print "Arthur would need both hands free to keep together the makeshift components of the improvised safelight while transporting it, and he was already carrying things." ;
      }
      : else {
         : get "safelight" ;
         
      }
      
      
   }
: if (noun1_is "scones"||noun1_is "scone") {
: if (is_present "scones"){
:if (has_not_created "scone") {
   : print "Arthur furtively stole a scone and immediately felt guilty at this minor felony." ;
   : create "scone" target = "inventory" ;
   }
   : else {
      : print "Having lived with the guilt of stealing one scone, Arthur didn't feel he could bruise his conscience further by stealing another." ;
      
   }
   
}
}
: if (noun1_is "steps") {
   : if (is_at "on_steps") {
      : print "Arthur couldn't manage the feat of picking up the steps whilst standing on them." ;
   }
   : else_if (is_beside "steps") {
      : get "steps" ;
      
   }
   
   
}
: if (is_at "chemist") {
   : if (noun1_is "film"||noun1_is "tobacco"||noun1_is "ingredients"||noun1_is "medicines"||noun1_is "supplies"||noun1_is "hosiery"||noun1_is "stationary"||noun1_is "chemicals"||noun1_is "plates") {
      : print "Mr Salter swiftly intercepted Arthur as he reached out to take it. \"Of course, Mr Mapple,\" said the chemist, \"I'll be happy to help you to anything - provided you pay for it!\" He exploded into a hissing, wheezing laugh like a thing violently deflating. Arthur smiled nervously." ;
      
   }
   
}

 
   : if (noun1_is "clothes") {
      : if (is_present "clothes") {
         : print "Arthur saw no need to pilfer the clothes of the absent Reverend Peldash." ;
         
      }
      
   }
   : if (noun1_is "overcoat") {
      : if (is_present "overcoat") {
      : if (coat_on_hook) {
         : set_false "coat_on_hook" ;
         : set_string var = "coat_description"  text = "a heavy woollen overcoat" ;
      }
      : get;
      
      }
   }
   
   : if (noun1_is "horseshoe") {
      : if (is_present "horseshoe") {
      : if (is_pocketable "horseshoe") {
     : get "horseshoe" ;
         : if (is_at "zone_inside_vicarage") {
                : if (shoes_in_fireplace&&parent_of "holly"=="bedroom_1") {
      : clear_screen;
         : print "Arthur felt the light around him dim a little. Suddenly the tranquil neutrality of The Vicarage was gone and the atmosphere seemed full of whispers and unseen menace." ;
          : set_true "housespellbroken";
          : press_any_key ;
           : redescribe;
      }
      }
      }
      }
    
   }
 
  : if (noun1_is "holly") {
      : if (is_present "holly") {
      : if (is_pocketable "holly") {
     : get "holly" ;
         : if (is_at "zone_inside_vicarage") {
         : if (shoes_in_fireplace&&parent_of "horseshoe"=="dining_room") {
      : clear_screen;
         : print "Arthur sensed something shift. Whatever it was that lay between the inner spaces of The Vicarage and the outside world had gone. Suddenly the atmosphere seemed alive with unseen things." ;
          : set_true "housespellbroken";
             : press_any_key ;
           : redescribe;
         }
   
      }
      }
      }
    
   }
 
: if (noun1_is "rope"||noun1_is "ribbon"||noun1_is "tail") {
   : if (is_at "church") {
   : if (bell_instructions) {
   : if (!holding_rope) {
      : print"Arthur took a firm hold of one of the tail ropes." ;
      : set_true "holding_rope" ;
      : done ;
      
   }

   : else {
   : if (bell_ringing==0) {
      : print "But Arthur was already holding the rope." ;
      
   }
   : else {
      
      : print "The only part of the rope that Arthur could safely grab was the sally, and only if it was in the correct place. Otherwise he might get rope burns!" ;
   }
   
   }
    }
 : else {
    : print "Arthur would loved to have had a go at ringing the bells but, having never been initiated into the sacred art of campanology, he thought it best to leave them alone. " ;
    
 }
 
 
  
   }
   : else_if (rope_tied) {
    : if (is_beside "fence_post") {
    : if (!is_carried "rope") {
            : if (is_pocketable "rope") {
             : if (rope_down_well) {
                : print "Arthur retrieved the rope from the hole in the ground." ;
                : set_false "rope_down_well" ;
                : destroy "rope" ;
                : press_any_key ;
                : redescribe;

                
             }
            : else {
                  : print "Arthur took hold of the end of the rope." ;
            }
          : set_string var = "rope_description"  text = "the end of a piece of rope (the other end tied to a fence post)" ;
            : pocket "rope" ;
            : press_any_key ;
            : redescribe;
               }
}
      }
      : else_if (is_carried "fence_post") {
         : print "Arthur already had the rope (tied to the fence post)" ;
         : done ;
      }
}
   : else_if (is_present "rope") {
: get "rope" ;
 }
   : else {
      : print "Arthur couldn't see that anywhere." ;
      
   }
   
}
: if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald"||original "noun1" =="spirits"||original "noun1" =="andredesweald"||original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography"||original "noun1" =="tattered"||original "noun1" =="remnant"||original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell"||original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's"||original "noun1" =="grimoire") {
  : if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald") {
      : if (is_beside "villages") {
        : get "villages" ;
        : done ;
        
      }
     : else_if (is_carried "villages") {
        : print "Arthur already had it." ;
        : done ;
        
     }
      
   }
   
    : if (original "noun1" =="spirits"||original "noun1" =="andredesweald") {
      : if (is_beside "spirits") {
        : get "spirits"  ;
        : done ;
        
     }
       : else_if (is_carried "spirits") {
        : print "Arthur already had it." ;
        : done ;
        
     }
   }
   
   : if (original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography") {
      : if (is_beside "practical") {
        : get "practical" ;
        : done ;
        
      }
       : else_if (is_carried "practical") {
        : print "Arthur already had it." ;
        : done ;
        
     }
   }
   
     : if (original "noun1" =="tattered"||original "noun1" =="remnant") {
      : if (is_beside "remnant") {
     : get "remnant" ;
: done ;

      }
  : else_if (is_carried "remnant") {
        : print "Arthur already had it." ;
        : done ;
        
     }
 
      
   }
   
    : if (original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell") {
      : if (is_beside "paperback") {
        : get "paperback" ;
        : done ;
        
      }
      : else_if (is_carried "paperback") {
        : print "Arthur already had it." ;
        : done ;
        
     }
 
      
   }
   
      : if (original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's") {
      : if (is_beside "herbal") {
         : get "herbal" ;
         : done ;
      }
     : else_if (is_carried "herbal") {
        : print "Arthur already had it." ;
        : done ;
        
     }
      
   }
   
       : if (original "noun1" =="grimoire") {
      : if (is_beside "grimoire") {
         : get "grimoire" ;
         : done ;
         
      }
   : else_if (is_carried "grimoire") {
        : print "Arthur already had it." ;
        : done ;
        
     }
      }
      : print "But Arthur couldn't see that anywhere." ;
      
      
   }
: if (noun1_is "books"||noun1_is "book") {
:disambiguate_s1 category = "beside" ;
   : if (is_present "hymn_books") {
   : if (hymn_books_in_coffer) {
      : print "Arthur rolled up his sleeves and began to the arduous task of taking the dozens and dozens of hymn books out of the coffer and piling them up on the floor. After 15 minutes, he had an empty coffer and a great pile of hymn books littering the floor of the bell loft." ;
         : set_false "hymn_books_in_coffer" ;
   : set_string var = "hymn_books_description"  text = "some hymn books" ;
   : press_any_key ;
   : redescribe;
   
   }
: else {
   : print "Arthur couldn't think why he would need a hymn book at the moment - let alone a hundred of them." ;
   
}

      
   }
   : if (is_at "study") {
          : if (has_not_created "villages") {
           : print "Arthur plucked a couple of books from the shelves, knowing that one could often judge the character of a man from the composition of his library." ;
           : create "villages" ;
           : create "spirits" ;
           : press_any_key ;
           : redescribe;
           
        }
        
      : else {
      : if (!is_present "books_t") {
         : print "Arthur had already taken a sample of Peldash's books. He didn't have the time to read his way through the entire library. There was a mystery to be solved!" ;
         :done;
              }
      }
      
      
   }
   
}
: if (noun1_is "key") {
   : if (is_present "iron_key") {
   : if (is_pocketable "iron_key") {
   : if (key_in_cupboard) {
          : set_string var = "iron_key_description"  text = "a huge iron key" ;
   }
      : get ;
   }
   }
}
: if (noun1_is "tools") {
   : if (is_present "tools") {
      : print "Arthur couldn't think what he would possibly need the unfamiliar tools for, so he didn't bother to take them." ;
      
   }
   
}
: if (noun1_is "cover"&&is_present "wooden_cover") {
    : print "The wooden cover was far too large and heavy for Arthur to pick up and carry around with him." ;
    
}
: if (noun1_is "hole") {
   : if (is_present "hole"||is_present "cavity"||is_present "hole_wall") {
     : print "Arthur considered briefly the philosophical conundrum of trying to take a thing that was be definition the absence of a thing, and decided it would be wisest not to try it." ;
      
   }
   
}
: if (noun1_is "post") {
   : if (is_present "fence_post") {
      : if (fence_post_fixed) {
         : print "With a great deal of effort, and regretting that he'd hammered it in so well in the first place, Arthur managed to tug the fence post out of the ground." ;
         }
         : if (rope_tied) {
         : if (rope_down_well) {
            : print "Arthur retrieved the rope from the hole in the ground." ;
            : set_false "rope_down_well" ;
            
         }
         
              : set_string var = "post_description"  text = "a fence post (with a piece of rope tied around it)" ;
              : destroy "rope" ;
              
         }
         : else {
                 : set_string var = "post_description"  text = "a fence post" ;
         }
         : set_false "fence_post_fixed" ;
             : get "fence_post" ;
   }
   
}
: if (noun1_is "thing") {
   : if (is_beside "waterlogged_thing") {
      : if (is_carried "hook_pole") {
      : if (is_pocketable "waterlogged_thing") {
             : print "Arthur held the rope in one hand and the pole in the other and, after several frustrating attempts, succeeded in hooking the waterlogged thing and pulling it out of the water. He glowed with pride as he retrieved his prize, gladdened that his misspent youth at the local fairground's hook-a-duck stall had not been for nothing." ;
             : print "Arthur saw that he was holding a sodden book. It fell open in his hand, revealing pages that were still more or less dry - remarkably the water seemed not to have penetrated too far. Arthur saw a hand-written recipe for some sort of preparation of leaves and flowers and realised that he was holding Aunt Ada's herbal." ;
             : destroy "waterlogged_thing" ;
: create "herbal" target = "inventory"  ;

      }
      : else {
         : print "Arthur held the rope in one hand and the pole in the other and, after several frustrating attempts, succeeded in hooking the waterlogged thing and pulling it out of the water. Unfortunately, having retrieved it he found that he simply couldn't carry it along with everything else in his possession so, reluctantly, he dropped it back into the water." ;
      }
      
         
         
      }
       : else {
          : print "Even if Arthur stretched as far as he dared, the surface of the water was just too far away and he was not carrying anything with which he could extend his reach. " ;
          
       }
       
   }
   : else_if (is_present "something") {
   : if (is_at "drawing_room"||is_at "on_steps"&&parent_of "steps"=="drawing_room") {
      : print "The top of the pelmet was much too high up to reach from where Arthur was standing." ;
   
   }
   : else {
   : if (is_at "on_the_table") {
      : if (round_table_description=="a round table (by the window)") {
         : print "Arthur reached and his fingertips just brushed the edge of whatever it was that had been left on top of the pelmet - but he still wasn't quite high up enough to grab it." ;
         
      }
      : else {
         : print "Arthur was much too far away from the window to grab whatever it was that had been left on top of the pelmet." ;
     
      }
      
   }
   : else_if (is_at "on_chair") {
   : if (down_chair_location=="on_the_table") {
   : if (round_table_description=="a round table (by the window)") {
      : print "Arthur reached up and managed to grab the thing that had been left on top of the pelmet." ;
      : swap o1 = "something"  o2 = "witch_bottle" ;
      : pocket "witch_bottle" ;
: set_true "housespellbroken" ;
      : print "There was an icy blast of wind and a whispering of unseen voices; the air was suddenly alive." ;
      
   
      : if (parent_of "holder_1"=="drawing_room") {
         : print "The candle blew out, plunging the drawing room into darkness." ;
         : swap o1 = "holder_1"  o2 = "holder" ;
        : press_any_key ;
        : redescribe;
        
      }
      
   }
   :else {
: print "Arthur was too far from the window to reach the top of the pelmet from here." ;

}
   }
:else {
: print "Arthur reached up, but he was still far too low to reach the top of the pelmet." ;
}
   }
   }
   }
   
}
: if (noun1_is "ashtray") {
   : if (is_at "nevernear_cottage") {
   : get "ashtray" ;
      : print "\"Would you like a cigarette after all? You only had to ask,\" said Ottoline as Arthur helped himself to her ashtray.\n\"No, thank you. I'm so sorry - it's just a rather unusual design, don't you think?\"\n\"Yes, it is rather.\"" ;
   }
   
}
: if (noun1_is "gauntlets") {
   : if (is_present "gardening_gauntlets") {
   : if (gardening_gauntlets_description=="a pair of gardening gauntlets (inside the cold frame)") {
   : if (frame_open) {
   : if (is_pocketable "gardening_gauntlets") {
   : set_string var = "gardening_gauntlets_description"  text = "a pair of gardening gauntlets" ;
      : get;
   }
   }
   : else {
         : print "But the cold frame was closed." ;
   }
   

      
   }
   
   }
   
}
: if (noun1_is "sacking") {
: if (is_at "hut") {
   : if (has_not_created "trunk") {
      : create "trunk" ;
      : print "Arthur moved the heap of old sacking, revealing a metal trunk beneath." ;
      : create "trunk" ;
      : get "sacking" ;
      : press_any_key ;
      : redescribe;
   }
}
}
: if (noun1_is "nail") {
 : if (is_present "horseshoe_nail") {
    : if (nail_description=="a horseshoe nail (in the trunk)") {
  
    :mask {
    : if (is_pocketable "horseshoe_nail") {
       : set_string var = "nail_description"  text = "a horseshoe nail" ;
      
       }
    }
    
     
       
    }
    
 }
 
   
}
: if (noun1_is "crow") {
   : if (crow_description=="a huge black crow (soaring directly above)") {
    : if (is_at "zone_wood"||is_at "zone_road_to_wood") {
  
      : print "Even if he he had been foolish enough to attempt it, the crow was very far out of reach." ;
   }
     }
   : else_if (is_present "crow") {
       : print "Arthur closed on the crow under a sudden compulsion to take it, but the flapping of its wings and the loud screeching, not to mention the gleaming sharpness of its talons, quickly convinced him of the folly of his actions. He didn't know what had come over him!" ;
   }

 : else_if (is_at "nevernear_cottage") {
    : print "Arthur looked at it and decided very definitely not to." ;
    
 }
 
  }
:else_if (noun1_is "cage"&&is_at "nevernear_cottage"){
: print "Arthur considered several factors, such as the cage's size and weight, its dangerous-looking occupant and the fact that it didn't belong to him and decided, on reflection, that it would be better to leave it where it was." ;

}


: if (noun1_is "mistletoe") {
: if (is_present "mistletoe_sprig") {
   : get "mistletoe_sprig" ;
   : done ;
   
}

   : if (is_at "in_trees"||is_at "top_rockery") {
      : if (is_present "mistletoe") {
      : if (has_not_created "mistletoe_sprig") {
         : print "Arthur reached up into the branches of a nearby tree and plucked a sprig of mistletoe." ;
         : pocket "mistletoe_sprig" ;
            
      }
   
     : else {
        : print "Arthur had already plucked a sprig of misteltoe - he didn't see the point in gathering any more." ;
        
     }
         }
   }
   



}

      
   
   

: if (noun1_is "table") {
: if (preposition_is "off") {
   : if (is_at "on_the_table") {
   : if (is_present "chair_1"||is_present "chair_2"||is_present "chair_3") {
      : print "Arthur picked up the chair and awkwardly clambered down off the table." ;
   : if (is_present "chair_1") {
     : create "chair_1" target = "drawing_room" ;
      
   }
    : if (is_present "chair_2") {
       : create "chair_2" target = "drawing_room" ;
      
   }
    : if (is_present "chair_3") {
      : create "chair_3" target = "drawing_room" ;
      
   }
      
   }
   : else {
         : print "Arthur climbed down off the table." ;
   }
      : press_any_key ;
      : goto "drawing_room" ;
        : if (is_exists "something") {
                : create "something" ;
                
             }
      : redescribe;
      }
      : else {
         : print "But Arthur was not on the table." ;
         
      }
      }
: if (preposition_is "on") {
       : if (is_at "drawing_room") {
       : if (sitting) {
          : print "Arthur got up out of the chair." ;
          : set_false "sitting"; 
           : set_false "holding_hands" ;:gosub "chair_creation"; :press_any_key; :redescribe ;
          : set_false "holding_hands" ;
          
       }
       
       
      : if (is_carried "steps") {
         : print "The steps were much to heavy and bulky for Arthur to manage while he was trying to climb onto the table and besides, if he did manage to get up there with them they'd probably ruin the french polish. He dropped them." ;
         : create "steps" ;
         
      }
      : else_if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
         : print "Arthur struggled to get onto the table while hampered by the chair that he was carrying, but he managed it eventually (albeit in a rather undignified and ungainly manner)." ;
         
      }
      
         : print "Arthur clambered up onto the table." ;
      : goto "on_the_table" ;
      : if (is_exists"something") {
         : create "something" ;

      }
      
         : press_any_key ;
         : redescribe;
         
      }
          : else_if (is_at "on_the_table") {
         : print "But Arthur was already standing on the table." ;

      }
      :else {
:print "Arthur didn't feel like attempting that right here and now.";
}
     }
   }
  
    : if (noun1_is "candles"||noun1_is "paten"||noun1_is "altar"||noun1_is "cloth") {
    : if (is_at "chapel") {
    : if (is_worn "robes") {
       
            : print "Arthur felt that the altar and the things on it were in some sort delicate balance that it would be foolish to disturb." ;
    }
    : else {
       : print "Arthur tried to approach the altar, but an invisible barrier held him back." ;
       
    }
    
    
    }
    
  
       
    }
    : if (noun1_is "pince") {
       : if (is_carried "spectacles_case"&&case_open&&specs_in_case) {
          : create "pince_nez" ;
          : get "pince_nez" ;
          
          : set_false "specs_in_case" ;
          : set_string var = "case_description"  text = "a spectacles case (open)" ;
          : done ;
          
          }
       
           
    }
    : if (noun1_is "nail") {
       : if (is_present "spectacles_case_1"&&case1_open) {
          : print "The horseshoe nail seemed safe where it was - Arthur didn't see the point in removing it." ;
        : done ;
          
       }
       
    }
    : if (noun1_is "earth"&&is_present "earth") {
       : print "Arthur decided that he could do without carrying a pocketful of dirt around with him." ;
       
    }
 : if (noun1_is "rail") {
 : mask{
    : if (rail_description=="an iron rail (inserted into the stone fox's ear)") {
       : print "Arthur removed the rail from the hole in the stone fox's ear." ;
       : set_string var = "rail_description"  text = "an iron rail" ;
       
    }
   } 
 }
 : if (noun1_is "book") {
    : if (is_present "remnant") {
    :mask {
       : if (book_description=="a tattered book (in the small wooden casket)") {
          : set_string var = "book_description"  text = "a tattered book" ;
          }
       }
       
    }
    
 }
 : if (noun1_is "book"||noun1_is "books") {
    : if (is_at "on_steps"&&parent_of "steps"=="study") {
       : print "Arthur scanned the books on the higher shelves, but saw nothing that piqued his interest amongst the rows of rows of cracked leather spines." ;
       
    }
    
 }
 
 : if (noun1_is "casket") {
    : if (is_present "casket") {
       : if (is_pocketable "casket") {
          : if (box_description=="a small wooden casket (within the cavity)") {
             : set_string var = "box_description"  text = "a small wooden casket" ;
             : get "casket" ;
             
          }
          
       }
       
    }
    
 }
 : if (noun1_is "disc"||noun1_is "mirror"||noun1_is "fragment") {
    : if (is_at "on_monument") {
    : if (has_not_created "fragment_3") {
    : print "Arthur tried to but, although a little loose, the mirror fragment was lodged within its lead surround. Perhaps a careful knock in the right place would be enough to dislodge it." ;
       
    }
    
  
    }
    
 }
 : if (noun1_is "keg") {
    : if (is_present "keg_1") {
      : if (beer_keg_description=="a beer keg (attached to the hose)"&&!is_beside "keg"){
    :print "Arthur couldn't very well make off with the keg while it was still connected to the beer hose.";
    }
    : else_if (beer_keg_description=="a beer keg (on the lower rack)") {
    : if (is_exists "keg") {
       : print "Arthur had already appropriated one beer keg; he couldn't think why he would need another." ;
       : done ;
       
    }
         : swap o1 = "keg_1"  o2 = "keg" ;
      : pocket "keg" ;
        : print "Arthur took the keg off the lower rack." ;
    }
    }
 }
 : if (noun1_is "hose") {
    : if (is_at "pub_cellar") {
       : if (beer_keg_description=="a beer keg (attached to the hose)") {
          : print "Arthur tried to, but the hose was attached to the keg at one end while the other end was attached to the wall." ;
       }
       : else {
          : print "Arthur tried to, but the hose was attached to the wall." ;
       }
       
    }
    
 }
 : if (noun1_is "stone") {
 : if (is_present "date_stone") {
 : if (is_pocketable "date_stone"&&!has_trait {subject="date_stone" trait="_immovable"} ) {
  : if (date_stone_description=="a date stone (set on the stone wall)"||date_stone_description=="a date stone (in the stone wall)") {
     : create "hole_wall" ;
        : print "Arthur tugged the stone out of the wall, leaving a hole behind.";
        : set_string var = "date_stone_description"  text = "a date stone" ;
        
        : get;
        : press_any_key ;
        : redescribe;
        
          }
        :get;
 }
 }
 }//treezle
 
 : if (noun1_is "fragments") {
  : if (is_beside "fragment_1"||is_beside "fragment_3"||is_beside "fragment_4"||is_beside "fragment_5") {

     : if (is_beside "fragment_1") {
     : get "fragment_1" quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_beside "fragment_3") {
     : get "fragment_3"quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_beside "fragment_4") {
     : get "fragment_4"quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_beside "fragment_5") {
     : get "fragment_5" quiet = "true";
     : increment "fragments_counter" ;
     }
  : if (fragments_counter>0&&fragments_counter<2) {
     : print "Arthur took the fragment of mirror." ;
  }
  : else {
     : print "Arthur took the fragments of mirror." ;
  }
   : set_integer var = "fragments_counter"  value = "0" ;
   : done ;
   
 }
  : else_if (is_carried "fragment_1"||is_carried "fragment_3"||is_carried "fragment_4"||is_carried "fragment_5") {
     : print "Arthur already had it." ;
     
  }
  
      
  }
  
: if (noun1_is "fragment"||noun1_is "fragments") {

   : if (!is_beside "fragment_1"&&!is_beside "fragment_3"&&!is_beside "fragment_4"&&!is_beside "fragment_5") {
      : if (is_carried "mirror"&&fragments_in_mirror>0) {
      : if (fragments_in_mirror==1) {
             : print "Arthur thought that the best place for the mirror fragment was in the frame that had been made for it; he didn't feel inclined to remove it again." ;
      }
      : else_if (fragments_in_mirror>1) {
          : print "Arthur thought that the best place for the mirror fragments was in the frame that had been made for them; he didn't feel inclined to remove them again." ;
      }
      
     
      }
      
   }
 }
 : if (noun1_is "twig") {
 : if (is_present "twig") {
    : get;
    : done ;
    
 }
 
    : if (is_at "footpath_1") {
       : print "The twigs were too high up for Arthur to reach." ;
       
    }
    
 }
 : if (noun1_is "vane") {
    : if (is_present "weather_vane") {
       : print "That was high up on the church steeple and out of reach." ;
       
    }
    
 }
 : if (noun1_is "peldash") {
    : if (endgame) {
       : if (is_present "jeremiah_peldash") {
       : if (spell==17) {
                   : print "Arthur tried to grab Reverend Peldash but he was prevented by the flailing hooves that threatened to trample him each time he tried. Ottoline seemed to be a little closer." ;
       }
       : else {
          : print "Arthur saw Peldash safely in Ottoline's grasp and decided not to attempt to move him. " ;
         
       }
       
 
          
       }
       
    }
    
 }
 : if (noun1_is "thurgood"||noun1_is "salter"||noun1_is "frank"||noun1_is "farthing"||noun1_is "jarbell") {
    : if (is_present "thurgood"||is_present "mr_salter"||is_present "frank_farthing"||is_present "joseph_jarbell") {
       : print "Arthur stifled a sudden desire to pick him up and walk around with him. Goodness knows where these urges came from!" ;
    }
 }
  : if (noun1_is "taplow"||noun1_is "ottoline"||noun1_is "elderfield"||noun1_is "drywell"||noun1_is "daisy"||noun1_is "molly") {
    : if (is_present "edna_taplow"||is_present "ottoline_elderfield"||is_present "daisy_farthing"||is_present "marjorie_drywell"||is_present "molly") {
       : print "Arthur stiffled a sudden desire to pick her up and walk around with her. Goodness knows where these urges came from!" ;
    }
 }
 : if (noun1_is "ash") {
    : if (is_present "ash") {
      : print "Arthur stiffled a sudden desire to pick them up and walk around with them. Goodness knows where these urges came from!" ;
       
    }
    
 }
 : if (noun1_is "ashes") {
    : if (is_at "study") {
       : print "Arthur looked at the ashes in the grate and decided that he didn't want to carry something so dusty and dirty around with him. " ;
       
    }
    
 }
 : if (noun1_is "rail"&&is_at "study"&&!is_present "rail") {
    : print "Arthur thought he should have a better excuse to wrench the tapestry rail off the wall." ;
    
 }
 : if (noun1_is "tapestry"&&is_at "study") {
   : print "Arthur decided against it. It was sure to be missed and besides, what on earth would he gain from carrying it around with him?" ;
    
 }
 : if (preposition_is "in") {
 : print "(If Arthur wanted to get into something then he should ENTER [[place or object]].)" ;
 
 }
 : if (preposition_is "out") {
   : print "(If Arthur wanted to get out of something then he should EXIT or LEAVE [[place or object]].)" ;
    
 }
 
 : if (noun1_is "handle"&&is_present "car") {
    : print "Arthur thought that was best left where it was." ;
    
 }
 : if (noun1_is "gate") {
    : if (is_at "drive"||is_at "lane_1") {
       : print "Arthur speculated what he would do with the huge and heavy pair of wrought iron gates once he'd managed to tear them from their moorings, and then dismissed the thought from him mind." ;
       
    }
    
 }
 : if (preposition_is "under") {
 : if (is_present "getunderable_t") {
    : print {("Arthur had more pressing things to do than to waste time getting under the "+original "noun1"+".")} ;
    
 }
 
   
   }
   : if (is_at "cellar_room") {
   : if (noun1_is "plates"||noun1_is "paper") {
      : print "Arthur didn't see the point in taking that with him." ;
      
   }
   
      : if (noun1_is "pictures"||noun1_is"ornaments"||noun1_is"crockery"||noun1_is "miscellanea") {
         : print "Arthur didn't see the point of taking that with him." ;
         
      
          
   }
   }
   : if (is_at "garden_5"&&noun1_is "fruit") {
      : print "Arthur felt he had more important things to do than to pick fruit." ;
      
   }
   : if (is_at "pump") {
      : if (noun1_is "gossip") {
      : if (is_carried "witch_bottle") {
         : print "Arthur wondered how he might do that. Perhaps if he had the right sort of vessel then some of it might find its way inside." ;
           
      }
      
         : print "Arthur wasn't sure how to catch the stuff - but he felt certain there must be a way." ;
      }
      
   }
   : if (noun1_is "letter") {
      : if (envelope_open) {
      : if (letter_in_envelope) {
         : print "Arthur took the letter out of the envelope." ;
         : set_false "letter_in_envelope" ;
         : create "letter"target = "inventory" ;
         : done ;
         
      }
  : else {
     : get;
     : done ;
     
  }
      }
      : else {
         : print "But the envelope had not been opened." ;
         : done ;  
      }
      
       
         
      }
 
: if (is_present "keg") {
   : if (noun1_is "mistletoe"&&!has_not_created "mistletoe_sprig"&&!is_exists "mistletoe_sprig"||noun1_is "sprig"&&!has_not_created "mistletoe_sprig"&&!is_exists "mistletoe_sprig"||noun1_is "toadstool"&&!has_not_created "toadstool"&&!is_exists "toadstool"||noun1_is "gossip"&&gossip_in_keg||noun1_is "blood"&&blood_in_keg) {
      : print "Having gone to the effort of adding it to the keg, Arthur didn't see the point in taking it out again." ;
      : done ;
      
   }
   
}
: if (noun1_is "rabbit"&&is_beside "rabbit") {
   : print "Arthur gently picked up the injured rabbit and carried it as carefully as he could." ;
   
}
: if (original "verb"=="take"&&noun1_is "photograph"&&is_carried "box_brownie") {
   : print "If Arthur wanted to take a photograph then, assuming it was loaded and ready, he should simply have pushed the button on the camera." ;
   : done ;
   
}
: if (noun1_is "bulb"||noun1_is "light") {
   : if (is_at "darkroom") {
      : print "Arthur didn't feel inclined to meddle with the electric light bulb." ;
      : done ;
      
   }
   
}
: if (noun1_is "bottle"||noun1_is "bottles") {
   : if (is_at "cellar_room"&&!is_present "bottle") {
      : print "Arthur felt he had better things to do than purloin items from the absent Reverend Peldash's wine cellar - even if they had been fit to drink." ;
      : done ;
      
   }
 
}
  : if (noun1_is "snowflake"||noun1_is "snow") {
      :if (snowfall) {
: if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
: print "Arthur was thankful that, extraordinary though the weather outside may have been, at least it wasn't snowing in there." ;
}
: else {
   : print "Arthur caught a snowflake with childish light and watched as it melted away to nothing an instant later." ;
}

}
   }
   : if (noun1_is "cap") {
   : if (is_present "thurgood") {
      : print "Arthur would never do something so disrespectful as to steal a man's flat cap from off his very head." ;
      
   }
   
}

 
   }

   
#GET end

#CATCH start
 
 : match "catch _"  {
  : if (is_at "pump") {
      : if (noun1_is "gossip") {
      : if (is_carried "witch_bottle") {
         : print "Arthur wondered how he might do that. Perhaps if he had the right sort of vessel then some of it might find its way inside." ;
      }
         : print "Arthur wasn't sure how to catch that." ;
      }
   }
     : if (noun1_is "snowflake") {
      :if (snowfall) {
: if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
: print "Arthur was thankful that, extraordinary though the weather outside may have been, at least it wasn't snowing in there." ;
}
: else {
   : print "Arthur caught a snowflake with childish light and watched as it melted away to nothing an instant later." ;
}

}
   }
   }
#CATCH end

#PICK start

: match "pick _"  {
  : if (is_at "garden_5"&&noun1_is "fruit") {
      : print "Arthur felt he had more important things to do than to pick fruit." ; 
}

 
      
   }
#PICK end

#GLASS REMOVAL start

: match "get glass; remove glass"  {
   : if (is_present "frame"){
   :if (glass_in_frame) {
      : print "Arthur set to work on the lid of the cold frame. The timber strips holding the loose pane in place had rotted and Arthur made quick work of removing them; in a moment he had released the glass and held it proudly in his hands. He fretted a little over what Mr Thurgood would make of this vandalism and hoped the gardener wouldn't notice for a while. Luckily, there wasn't much call for a cold frame at this time of the year." ;
      : pocket "plate_glass" ;
      : set_false "glass_in_frame" ;
   }
  
   
   }

}

#GLASS REMOVAL end

: match "replace glass"  {
: if (is_present "frame") {
   : if (!glass_in_frame) {
      : if (is_carried "plate_glass") {
         : print "Arthur tried but found that he couldn't fix the glass back into the frame since he had removed the retaining timber strips that had once held it in place. There was no effacing the evidence of his misdemeanour." ;
       
         
      }
   }
   : else {
      : print "But there was already glass in the frame." ;
   }
   
}
}

#GLASS REPLACE start

#GLASS REPLACE end

#DROP start




: match "drop _"  {
: if (is_at "on_chair") {
   : print "Arthur didn't think it would be sensible to drop things whilst he was standing precariously on the chair." ;
   : done ;
   
}
: if (is_at "on_the_table") {
: if (!noun1_is "chair"&&!noun1_is "chairs") {
    : print "Arthur didn't think it would be sensible to drop things onto the table." ;
     : done ;
}


  
}
: if (is_at "on_steps") {
   : print "Arthur didn't think it would be sensible to drop things from the top of the steps." ;
   : done ;
   
}
: if (is_at "poachers_house"||is_at "poachers_scullery") {
   : print "Arthur didn't think it would be appropriate to start discarding his possessions inside the Farthings' house." ;
   : done ;
}
: if (is_at "nevernear_cottage") {
   : print "Arthur didn't think it would be appropriate to start discarding his possessions inside Ms Elderfield's house." ;
   : done ;
}
: if (is_at "vet") {
   : print "Arthur didn't think it would be appropriate to start discarding his possessions inside the veterinary surgery." ;
   : done ;
   
}

: if (is_at "well") {
   : print "Arthur didn't want to drop anything into that fathomless black water. He would probably never see it again!" ;
   : done ;
}
: if (noun1_is "candle"&&noun2_is "holder") {
   : if (is_carried "holder"){
   : drop "holder" ;
   }
    : else_if (is_carried "holder_1") {
     : drop "holder_1" ;
    }
}



: if (traptor==2) {
   : if (noun1_is "coat"||noun1_is "goggles"||noun1_is "boots") {
      : if (!is_at "zone_inside_vicarage"&&!is_at "garden"&&!is_at "rockery"&&!is_at "outbuilding"&&!is_at "zone_outside_vicarage") {
      : print {("Arthur decided it would be foolish in the extreme to remove the "+original "noun1"+" out here in the current weather conditions.")} ;
      : done ;
      
      }
   }
   }
   : if (is_worn (s1())) {
   :mask {
      : if (s1()== "overcoat") {
         : set_string var = "coat_description"  text = "a heavy woollen overcoat";
       : unwear "overcoat" ;

        
      }
 
    : if (noun1_is "boots") {
      : if (s1()== "boots") {
       : set_string var = "boots_description"  text = "a pair of stout boots";
       : unwear "boots" ;

        
      }
   }
    : if (noun1_is "gloves") {
      : if (s1()== "gloves") {
         : set_string var = "gloves_description"  text = "a pair of knitted gloves";
       : unwear "gloves" ;
  
        
      }
   }
    : if (noun1_is "gauntlets") {
      : if (s1()== "gardening_gauntlets") {
         : set_string var = "gardening_gauntlets_description"  text = "a pair of gardening gauntlets";
       : unwear "gardening_gauntlets" ;
  
        
      }
   }
    : if (noun1_is "goggles") {
      : if (s1()== "goggles") {
       : set_string var = "goggles_description"  text = "a pair of goggles";
       : unwear "goggles" ;
   
        
      }
   }
    : if (noun1_is "robes") {
      : if (s1()== "robes") {
       : if (endgame) {
      : print "Arthur felt strongly that he should keep the robes on. They seemed to offer him a degree of magical protection." ;
         : done ;
         
      }
       : set_string var = "robes_description"  text = "a set of robes";
       : unwear "robes" ;
    
        
      }
   }
     : if (noun1_is "nez") {
      : if (s1()== "pince_nez") {
       : set_string var = "nez_description"  text = "a pair of pince-nez";
       : unwear "pince_nez" ;
 
        
      }
   }
   }
   }

   : if (noun1_is "match") {
      : if (is_carried "match") {
         : print "Arthur saw no need to litter his surroundings with matches and besides, if the advertising were to be believed, they might ignite with the smallest encouragement. To leave them lying around was positively dangerous!" ;
         }
         : else_if (is_carried "match_1") {
            : print "Arson was not one of Arthur's hobbies, which was just as well considering his occupation. " ;
         }
        
         
      
      
   }
   : if (noun1_is "bicycle") {

   
      : if (onbike) {
         : print "Arthur dismounted the bicycle and carefully laid it down." ;
         : if (is_present "ottoline_elderfield"&&is_at "zone_road_to_wood") {
         : if (traptor==3) {
            : print "Ottoline stopped as she heard Arthur dismount his bicycle and looked at him curiously over her shoulder.\n\"Surely you can't need a rest already, Mr Mapple,\n she said scornfully, \"We've barely come 6 miles! Whatever is the police force coming to?\"" ;
         }
          : if (is_present "crow") {
               : print "The huge black crow hopped about on his perch and called 'craaak!' impatiently." ;
               
            }
         : if (traptor==6) {
            : print "Ottoline stopped as she heard Arthur dismount his bicycle and looked at him curiously over her shoulder.\n\"Surely you can't need a rest already, Mr Mapple,\n she said scornfully, \"We've barely come 6 miles! Whatever is the police force coming to?\"" ;
            
         }
         
         }
         
         : create "bicycle" ;
         : set_false "hasbike" ;
         : set_false "onbike" ;
         
      }
      : else_if (hasbike) {
         : print "Arthur carefully laid the bicycle down." ;
         : create "bicycle" ;
         : set_false "hasbike" ;
      }
      : else {
         : print "But Arthur did not have a bicycle." ;
         
      }
   }

   
   : if (noun1_is "steps") {
         : drop;
 : if (is_at "top_stairs") {
    : set_true "recess_way_clear" ;
 }
 
   }
   : if (noun1_is "keys") {
      : if (is_carried "bunch_keys") {
         : if (is_present "edna_taplow") {
            : print "Arthur decided not to announce his guilt to Mrs Taplow by dropping the purolined keys right in front of her." ;
            
         }
         
      }
      
   }
   
   : if (noun1_is "horseshoe") {
      : if (is_carried "horseshoe") {
        : drop "horseshoe" ;
      : if (parent_of "holly"=="bedroom_1"&&shoes_in_fireplace) {
         :print "The Vicarage suddenly seemed a tranquil place once more.";
         : set_false "housespellbroken" ;
         : press_any_key ;
         : redescribe;
      }
         
      }
      
   }
    : if (noun1_is "holly") {
      : if (is_carried "holly") {
      : drop "holly" ;
      : if (parent_of "horseshoe"=="dining_room"&&shoes_in_fireplace) {
          
       :print "The Vicarage suddenly seemed a tranquil place once more.";
         : set_false "housespellbroken" ;
         : press_any_key ;
         : redescribe;
      }
     
         
         
      }
      
   }
   : if (noun1_is "rope") {
      : if (bell_ringing>0) {
            : print "Arthur gradually slowed the bells until they were at rest once more and then let go of the rope." ;
            : set_integer var = "bell_ringing"  value = "0" ;
            : set_false "holding_rope" ;
            
      }
      : else_if (holding_rope) {
          : print "Arthur let go of the rope.";
          : set_false "holding_rope" ;
      }
      : else_if (rope_tied) {
         : if (is_carried "fence_post") {
             : print "Arthur couldn't drop the rope while he was carrying the fence post to which it was tied." ;
         }
         : else_if (is_carried "rope") {
         : if (noun2_is "hole"&&is_present "hole") {
            : print "Arthur dropped the free end of the rope down the hole." ;
      : set_true "rope_down_well" ;
      
            : set_string var = "rope_description"  text = "a piece of rope (one end tied to a fence post, the other end down the hole)" ;
            : create "rope" ;
            : press_any_key ;
            : redescribe;
            
            
         }
         
            : print "Arthur dropped the end of the rope." ;
            : set_string var = "rope_description"  text = "a piece of rope" ;
           : destroy "rope" ;
            
         }

      }
     
      : else_if (is_carried "rope") {
      : if (noun2_is "hole"&&is_present "hole") {
         : print "Arthur didn't want to drop anything into the hole - he might never see it again!" ;
         : done ;
         
      }
      
         : drop "rope" ;
         : done ;
         
      }
      
      : else {
      : print "But Arthur was not holding the rope." ;
      : done ;
      
      }
      
   }
   : else_if (noun2_is "hole"&&is_present "hole") {
      : print "Arthur didn't want to drop anything into the hole - he might never see it again!" ;
      
   }
               : if (noun1_is "dagger") {
                     : if (noun2_is "water"){
                        : if (is_at "sweet_track_bridge") {
            : if (is_carried "broken_dagger") {
               : print "Arthur dropped the broken dagger over the side of the track and watched it sink and disappear into the black water. A moment passed before Arthur realised that he could hear and smell things from across the bridge that he hadn't been able to before. The way seemed to have been opened." ;
               : destroy "broken_dagger" ;
               : done ;
                }
            }
            : else_if (is_at "sweet_track_1"||is_at "sweet_track_2") {
               : print "Arthur didn't think it was a good idea to go dropping things into unknown waters. He might never get them back." ;
               : done ;
               
               
            }
            
            }
   }
   : if (is_at "sweet_track_1"||is_at "sweet_track_2"||is_at "sweet_track_bridge") {
   : if (noun2_is "water") {
             : print "Arthur didn't think it was a good idea to go dropping things into unknown waters. He might never get them back." ; 
             : done ;
             
   }
   

   }
   
      : if (noun1_is "crumbs") {
         : if (is_carried "crumbs") {
            : if (is_at "footpath_1") {
               : if (has_not_created "twig") {
              : print "Arthur dropped the crumbs and several small birds immediately swooped down and began to squabble over them. One of them, having eaten its fill, cocked its head to one side, looked at Arthur and chirruped before flying up to the top of the hedge. It returned with a hazel twig in its mouth that it dropped in front of Arthur, before chirruping again and flying away.";
              : destroy "crumbs" ;
              : create "twig" ;
              : press_any_key ;
              : redescribe;
              
               }
               
            }
            
         }
         
      }
      : if (endgame) {
      : if (!is_at "DMV_2") {
            : print "Arthur felt certain that he should keep hold of his possessions at this crucial juncture." ;
      }
      }
      : if (noun1_is "mistletoe") {
: if (is_carried "mistletoe_sprig") {
   : drop "mistletoe_sprig" ;
   : done ;
   
}
 }
: if (noun1_is "vase") {
   : if (is_carried "vase") {
      : drop "vase" ;
      
   }
   
}
: if (noun1_is "flowers") {
   : if (is_carried "vase") {
      : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
         : print "But they were in the vase." ;
         : done ;
         
      }
      
   }
   
}
: if (noun1_is "chairs") {
   : if (is_carried "chair_1"&&is_carried "chair_2"||is_carried "chair_2"&&is_carried "chair_3"||is_carried "chair_1"&&is_carried "chair_3") {
   : print "Arthur put down the chairs." ;
   }
   : else {
   : if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
           : print "Arthur put down the chair." ;
   }
   : else {
      : print "But Arthur didn't have them." ;
      : done ;
      
   }
   }
   
   : if (is_carried "chair_1") {
      : drop "chair_1" quiet = "true" ;
   }
    : if (is_carried "chair_2") {
      : drop "chair_2" quiet = "true" ;
   }
    : if (is_carried "chair_3") {
     : drop "chair_3" quiet = "true" ;
   }

}
: if (noun1_is "scone") {
    : if (is_carried "scone"&&is_present "edna_taplow") {
       : print "Shamefully, Arthur was rather reluctant to come clean and offer up the stolen scone to Mrs Taplow." ;
       : done ;
       
    }
    
}
 : if (noun1_is "fragments") {
  : if (is_carried "fragment_1"||is_carried "fragment_3"||is_carried "fragment_4"||is_carried "fragment_5") {

     : if (is_carried "fragment_1") {
     : drop "fragment_1" quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_carried "fragment_3") {
     : drop "fragment_3"quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_carried "fragment_4") {
     : drop "fragment_4"quiet = "true" ;
     : increment "fragments_counter" ;
     }
     : if (is_carried "fragment_5") {
     : drop "fragment_5" quiet = "true";
     : increment "fragments_counter" ;
     }
  : if (fragments_counter>0&&fragments_counter<2) {
     : print "Arthur dropped the fragment of mirror." ;
  }
  : else {
     : print "Arthur dropped the fragments of mirror." ;
  }
   : set_integer var = "fragments_counter"  value = "0" ;
 }
      
  }
: if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald"||original "noun1" =="spirits"||original "noun1" =="andredesweald"||original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography"||original "noun1" =="tattered"||original "noun1" =="remnant"||original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell"||original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's"||original "noun1" =="grimoire") {
: if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald") {
      : if (is_carried "villages") {
        : drop "villages" ;
         
      }
     : else {
        : print "But Arthur didn't have that." ;
     }
     
      
   }
   
    : if (original "noun1" =="spirits"||original "noun1" =="andredesweald") {
      : if (is_carried "spirits") {
        : drop "spirits"  {
           
        }
        
      }
      : else {
        : print "But Arthur didn't have that." ;
     }
      
   }
   
   : if (original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography") {
      : if (is_carried "practical") {
        : drop "practical"  {
           
        }
        
      }
    : else {
        : print "But Arthur didn't have that." ;
     }
      
   }
   
     : if (original "noun1" =="tattered"||original "noun1" =="remnant") {
      : if (is_carried "remnant") {
     : drop "remnant" ;
     
      }
       : else {
        : print "But Arthur didn't have that." ;
     }
   }
    : if (original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell") {
      : if (is_carried "paperback") {
        : drop "paperback"  {
        }
      }
       : else {
        : print "But Arthur didn't have that." ;
     }
 
   }
      : if (original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's") {
      : if (is_carried "herbal") {
         : drop "herbal" ;
      }
       : else {
        : print "But Arthur didn't have that." ;
     }
   }
       : if (original "noun1" =="grimoire") {
      : if (is_carried "grimoire") {
         : drop "grimoire" ;
      }
       : else {
        : print "But Arthur didn't have that." ;
     }
   }
}
}

#DROP end

: match "dismount bicycle"  {
   : if (onbike) {
      : print "Arthur got off the bicycle." ;
      : set_false "onbike" ;
      : set_true "hasbike" ;
      
   }
   : else {
      : print "But Arthur was not riding a bicycle." ;
      
   }
   
   
}

#PUT CHAIR / WEDGE CHAIR start

: match "put chair;wedge chair"  {
  : if (traptor==4) {
     : if (preposition_is "under") {
       : if (noun2_is "handle"||noun2_is "door") {
          : if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
             : if (is_at "drawing_room") {
                : if (is_present "ottoline_elderfield") {
               : if (!is_present "chair_4") {
                          : print "Arthur wedged the chair under the door handle, effectively locking it against intrusion from the outside." ;
                  : create "chair_4" ;
                  : if (is_carried "chair_1") {
                     : destroy "chair_1" ;
                     : done ;
                  }
                   : if (is_carried "chair_2") {
                     : destroy "chair_2" ;
                     : done ;
                  }
                   : if (is_carried "chair_3") {
                     : destroy "chair_3" ;
                     : done ;
                     
                  }
                  
               }
               : else {
                  : print "But there was already a chair wedged underneath the door handle. Surely that would be sufficient to keep out a single housekeeper, even one as determined as Mrs Taplow." ;
                     : done ;
               }
               
           
               }
                 : else {
                   : print "But Arthur was expecting a guest and it hardly seemed polite to secure the door against them." ;
                      : done ;
                }
                   
                }
               : else {
                : print "Arthur didn't see the point of doing that here." ;
                   : done ;
             }
                
             }
            : else {
             : print "But Arthur had no chair." ;
                : done ;
          }
             
          }
          
          
       }
       :else {
       : print "Arthur didn't see the point of putting the chair there." ;
          : done ;
       }
     }
     

  : else {
   : print "Arthur didn't see the point in that." ;
   : done ;
}
}
#PUT CHAIR / WEDGE CHAIR end

#PUT start

: match "put _"  {
   : if (noun2_is "table"&&is_present "table"||noun2_is "table"&&is_present "round_table"||noun2_is "bench"&&is_present "bench"||noun2_is "desk"&&is_present "desk"||noun2_is "table"&&is_present"kitchen_table"||noun2_is "range"&&is_present "range") {
: if (noun1_is "steps"||noun1_is "chair") {
   : print "If Arthur really wanted to do that then the best way would be to get up onto the surface whilst carrying the thing and then try dropping it." ;
   : done ;
   
}

: print "Arthur didn't need to put things explicitly on surfaces; just dropping them in the vicinity would be enough." ;
      : done ;
      
   }
: if (noun1_is "developer"||noun1_is "fixer"||noun1_is "water") {
   : print "(If Arthur wanted to decant fluid from one container into another then he should POUR [[fluid]] INTO [[container]].)" ;
   : done ;
   
}

: if (noun2_is "matchbox") {
:if (is_carried "matchbox"){
: if (matchboxopen) {
   : if (noun1_is "match"){
   : if (is_carried "match") {
      : print "Arthur put the match back in the matchbox." ;
      : destroy "match" ;
      : done ;
    }
    : else_if (is_carried "match_1") {
       : print "Arthur was not so foolish as to do that with a lighted match." ;
       : done ;
       
    }
}
: else_if (noun1_is "nail"&&is_carried "horseshoe_nail_1") {
: print "Arthur considered putting the horseshoe nail in the matchbox amongst the matches but he feared that the powerful, unearthly light, though so cold, might still cause the matches to combust. He didn't want to run the risk of setting fire to his jacket pocket!" ;

: done ;

}

: else {
   : print "Arthur felt that he had more pressing things to do than waste time putting things into matchboxes." ;
   : done ;
   
}

  }
      :else {
      : print "But the matchbox was not open.";
      : done;
      }
}
          
   }
   : if (noun2_is "packet"&&is_present "packet") {
   : if (noun1_is "sheet") {
   : if (packet_open) {
      : if (is_carried "sheet") {
      : if (sheet_description=="a sheet of new, unexposed photo paper") {
         : print "Arthur put the unused sheet back in the packet." ;
         : destroy "sheet" ;
      }
      : else {
         : print "Arthur saw no need to put the exposed sheet of photographic paper back in the packet of unused sheets." ;
      }
       }
       : else {
          : print "But Arthur wasn't carrying that." ;
       }
   
      }
   :else {
   :print "But the packet was not open.";
      }
   }
   : else {
      : print "Arthur didn't see the point of putting that in the packet along with the photographic paper." ;
       }
   
   }

   
 : if (noun1_is "film") {
    : if (noun2_is "sheet") {
    : if (negs_on_sheet) {
       : print "But Arthur had already done that." ;
       : done ;
       
    }
    
       : if (is_carried "film") {
          : if (is_beside "sheet") {
          : if (film_description=="a set of film negatives (cut from a strip)") {
          : if (!negs_on_sheet) {
          : if (glass_on_sheet) {
             : print "Arthur lifted the glass and placed the negatives on the sheet of photographic paper. He then replaced the glass." ;
              
                
          }
          : else {
               : print "Arthur placed the negatives on top of the sheet of photographic paper." ;
           
                
          }
          
        
          : set_true "negs_on_sheet" ;
          : set_string var = "film_description"  text = "a set of film negatives (cut from a strip) (on the photo sheet)" ;
          
           : create "film" ;
           : done ;
           
           ; 
          
             }
             : else {
                : print "But the negatives were already on the sheet." ;
             : done ;
             
                 }
             }
             : else {
                : print "Arthur saw no point in putting the film on the paper in its current state." ;
                : done ;
                
             }
             
             
          }
          : else_if (is_carried "sheet") {
             : print "Arthur would have had to drop the sheet first." ;
               : done ;
                
          }
       }
       : else {
       : print "But Arthur was not carrying the negatives." ;
         : done ;
                
       }
    
    }
    : else_if (noun2_is "camera") {
       : gosub "load_camera" ;
    }
    : else_if (noun2_is "lines"||noun2_is "lines") {
    : if (is_at "darkroom") {
       : print "(If Arthur wanted to hang something on the line then he should HANG [[object]].)" ;
    }
    }
    : else {
       : print "Arthur didn't see the point in that." ;
       : done ;
    }
 }
   : if (noun2_is "camera") {
       : print "Arthur wouldn't risk damaging one of the Box Brownies of which he was so fond by putting anything other than film in it." ;
         : done ;
                
       
    }
 : if (noun1_is "glass") {
    : if (noun2_is "sheet") {
    : if (glass_on_sheet) {
       : print "But Arthur had already done that." ;
       : done ;
    }
       : if (is_carried "plate_glass") {
          : if (is_beside "sheet") {
          : set_string var = "glass_description"  text = "a pane of glass (on the photo sheet)" ;
           : set_true "glass_on_sheet" ;
           : create "plate_glass" ;
           

          : if (negs_on_sheet) {
             : print "Arthur placed the glass on top of the sheet of photographic paper, sandwiching the negatives between." ;
             : set_true "glass_on_sheet" ;
             : done ;
          }
          : else {
             : print "Arthur placed the glass on top of the sheet of photographic paper." ;
              : set_true "glass_on_sheet" ;
              : create "plate_glass" ;
                  : done ;
          }
          }
          :else {
          : if (is_carried "sheet") {
                       : print "Arthur would have had to drop the sheet first." ;
                           : done ;
          }
          }
          }
 }
 
  : else_if (noun2_is "negatives") {
  : if (negs_on_sheet&&glass_on_sheet) {
       : print "But Arthur had already done that." ;
       : done ;
       
    }
    : else_if (is_carried "film") {
         : print "Arthur would have to put down the film first." ;
             : done ;
    }
    : else_if (is_beside "film") {
    : if (!negs_on_sheet) {
        : print "Arthur saw no point in doing that at present." ;
           : done ;
    }
      : else_if (is_beside "sheet") {
          : set_string var = "glass_description"  text = "a pane of glass (on the photo sheet)" ;
           : set_true "glass_on_sheet" ;
           : create "plate_glass" ;
             : print "Arthur placed the glass on top of the sheet of photographic paper, sandwiching the negatives between." ;
             : set_true "glass_on_sheet" ;
             : done ;
 }
    }
     : else {
             : print "But Arthur couldn't see the film anywhere" ;  
               : done ;
          }

   // :else {
   //        : if (is_carried "sheet") {
   //                    : print "Arthur would have had to drop the sheet first." ;
   //                         : done ;
   //        }
   //  }
 
 }
 
 
 
 
 
 
 
 
 : else_if (noun2_is "frame"&&is_present "frame") {
 : if (is_carried "plate_glass") {
    
 }
 
    : print "Arthur tried but failed to replace the glass in the lid of the cold frame. The timber was just too rotted and, following his efforts to remove it in the first place, too damaged to hold the glass anymore." ;
    : done ;
    
 }
 
 :else {
 :print "Arthur saw no need to put it there.";
 : done ;
 
 }
}
: if (noun2_is "vase") {
: if (is_present "vase") {
: if (noun1_is "flowers") {
: if (is_carried "bouquet_flowers") {
: if (vase_on_candle) {
   : print "Arthur couldn't very well do that while the vase was upside down over the candle holder." ;
   : done ;
   
}
         : print "Arthur put the dried flowers back in the vase, and struggled unsuccessfully to arrange them as they had originally been. He stood back and, looking in dismay at his handiwork, admitted to himself that he did not share Mrs Taplow's gift for floristry." ;
    : set_string var = "vase_description"  text = "a vase (containing a bouquet of dried flowers)" ;
    : destroy "bouquet_flowers" ;
    
      : done ;
      }
      : else_if (vase_description=="a vase (containing a bouquet of dried flowers)") {
         : print "But the flowers were already in the vase." ;
         : done ;
         
      }
      
      : else {
         : print "But Arthur didn't have them." ;
         : done ;
         
      }
      
      }
     
   : else {
      : print "Arthur didn't see the point of putting that in the vase." ;
      : done ;
      
   }
   
      
}
 : else_if (is_present "vase_1") {
      : print "Sadly, the vase was no longer fit to hold anything. ";  
      : done ;
      
   }
: else {
   : print "But the vase was not there." ;
   : done ;
   
}

}

   : if (noun2_is "holder"&&is_present "holder"||noun1_is "candle"&&is_present "holder") { 
   : if (preposition_is "in") {
   : if (noun1_is "candle") {
: if (is_carried "candle") {
      : if (!candleinholder) {
      : if (vase_on_candle) {
         : print "Arthur lifted the vase off the holder." ;
         : set_string var = "vase1_description"  text = "a broken vase" ;
          : set_string var = "vase_description"  text = "a vase" ;
         : set_false "vase_on_candle" ;
      }
         : print "Arthur fixed the candle into the holder." ;
         : set_true "candleinholder" ;
         : set_string var = "candleholder_description"  text = "a candle holder (with candle, unlit)" ;
         : destroy "candle" ;
         : done ;
      }
      : else {
         : print "But the candle was already in the holder." ;
          : done ;
      }
      }
      : else {
      : print "But Arthur was not carrying it." ;
       : done ;
   }
   }
    : else {
      : print "It seemed silly to put anything other than a candle in the candle holder." ;
     
      
   }
   }
  
   
}
: if (noun1_is "vase"){
: if (noun2_is "light"&&is_at "darkroom") {
   : if (is_present "vase"||is_present "vase_1") {
      : print "Arthur tried to put the vase over the electric light bulb but gave up as he had no way of keeping the arrangement in place, short of holding it there - and that meant that he couldn't do anything else. He had a feeling that it was not the answer he was looking for." ;
      : done ;
      
   }
   
}

: if (noun2_is "holder"||noun2_is "candle") {
   : if (!vase_on_candle) {
   : if (is_present "vase_1") {
         : if (is_present "holder") {
               : print "Arthur arranged the holder on the nearest surface and placed the broken glass vase over it. The wider end was just big enough to fit over the saucer of the candle holder, enclosing it within the cylinder of red glass." ;
      : create "holder" ;
   : set_string var = "vase1_description"  text = "a broken vase (over the candle holder)" ;
   
      : create "vase_1" ;
      : set_true "vase_on_candle" ;
      : press_any_key ;
      : redescribe;
      
         }
         : else_if (is_present "holder_1") {
           : print "Arthur arranged the holder on the nearest surface and placed the broken glass vase over it. The wider end was just big enough to fit over the saucer of the candle holder, enclosing it within the cylinder of red glass, open at the top where the base had once been attached.\n The candle burning within cast a ruddy glow. Arthur looked at the whole arrangement with satisfaction and congratulated himself that he had been so clever as to make an improvised safelight." ;
            : destroy "holder_1" ;
            : destroy "vase_1" ;
            : create "safelight" ;
            : set_string var = "vase1_description"  text = "a broken vase (over the candle holder)" ;
            
         : set_true "vase_on_candle" ;
         : press_any_key ;
         : redescribe;
         
         }
         : else {
            : print "But the holder wasn't there." ;
             : done ;
         }
   }
   : else_if (is_present "vase") {
   : if (is_present "holder") {
   : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
      : print "Arthur took the flowers out of the vase." ;
      : set_string var = "vase_description"  text = "a vase" ;
      : create "bouquet_flowers" ;
   }
      : print "Arthur arranged the holder on the nearest surface and placed the glass vase over it. The wider end was just big enough to fit over the saucer of the candle holder, enclosing it within a cylinder of red glass, sealed at the top by the base of the vase." ;
        : create "holder" ;
      : create "vase" ;
      : set_true "vase_on_candle" ;
      : set_string var = "vase_description"  text = "a vase (over the candle holder)" ;
    : press_any_key ;
    : redescribe;
    
    
   }
   : else_if (is_present "holder_1") {
      : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
      : print "Arthur took the flowers out of the vase." ;
      : set_string var = "vase_description"  text = "a vase" ;
      : create "bouquet_flowers" ;
   }
         : print "Arthur arranged the holder on the nearest surface and placed the vase upside down over it. The candle burned brightly for a few moments and then began to dim as the flame shrank away. Presently, all of the oxygen in the vase had been consumed and the flame died." ;
       : destroy "holder_1" ;
       : create "holder" ;
      : create "vase";
      : set_true "vase_on_candle" ;
      : set_string var = "vase_description"  text = "a vase (over the candle holder)" ;
      : press_any_key ;
      : redescribe;
      
   }
    }
    : else {
   : print "Arthur didn't see the point in that." ;
   : done ;
}
}
: else {
   : print "But the vase had already been placed over the candle." ;
   : done ;
   }

}
 : else {
   : print "Arthur didn't see the point in that." ;
   : done ;
   
}
}
: if (noun2_is "hook") {
: if (is_at "kitchen") {
: if (noun1_is "keys"||noun1_is "bunch") {
: if (is_carried "bunch_keys") {
      : if (is_at "kitchen") {
         : if (!is_present "edna_taplow") {
            : print "Arthur hung the bunch of keys on the hook." ;
            : set_true "key_on_hook" ;
            : create "bunch_keys" ;
            : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
               : done ;
         }
         : else {
            : print "Arthur didn't want to prove his guilt to Mrs Taplow by returning the purloined keys to their rightful place before her very eyes." ;
               : done ;
         }
      }
      
      
}
   }
   : if (noun1_is "goggles") {
      : if (is_carried "goggles") {
         : print "Arthur hung the goggles on the hook." ;
         : set_true "goggles_on_hook" ;
         : set_string var = "goggles_description"  text = "a pair of goggles (hanging from the hook)" ;
          : create "goggles" ;
         
         : done ;
         
      }
      
   }
   
   }
   : else {
      : print "But Arthur could see no hook.";
      }
}

 : if (noun1_is "overcoat") {
    : if (noun2_is "wardrobe"&&is_present "wardrobe") {
       : if (coat_on_hook) {
          : print "But the coat was already hanging in the wardrobe." ;
       }
       : else {
          : print "Arthur hung the coat back in the wardrobe." ;
          : set_true "coat_on_hook" ;
         : set_string var = "coat_description"  text = "a heavy woollen overcoat (hanging in the wardrobe)" ;
          : create "overcoat" ;
           : done ;
       }
       
    }
    
 }
 : if (noun1_is "shoes") {
    : if (noun2_is "chimney") {
   : if (is_at "study") {
       : if (is_carried "shoes") {
          : print "Arthur put the shoes back in the chimney." ;
          : destroy "shoes" ;
          : set_true "shoes_in_fireplace" ;
          : if (parent_of "horseshoe"=="dining_room"&&parent_of "holly"=="bedroom_1") {
             : print "The Vicarage was tranquil once more." ;
                       : set_false "housespellbroken" ;
       
                     
                       
          }
          : press_any_key ;
          
            : redescribe;

          
       }
       
    }
        
   }
   
 }
 : if (noun2_is "coffer") {
  : if (noun1_is "book"||noun1_is "books") { 
    : if (is_present "hymn_books") {
    : if (coffer_open) {
       : if (hymn_books_in_coffer) {
          : print "But the hymn books were already in the coffer." ;
          : done ;
          
       }
       : else {
          : print "Arthur sighed, took a deep breath and then began the onerous task of putting all of the hymn books back in the coffer. After a little while his task was complete; he leaned against the coffer and mopped his brow, wondering why his life seemed suddenly so full of these difficult little tasks." ;
          : set_true "hymn_books_in_coffer" ;
          : set_string var = "hymn_books_description"  text = "some hymn books (in the coffer) " ;
                 : done ;
                 
    }
       }
       : else {
          : print "But the coffer was closed." ;
             : done ;
       }
       
       }
    }
    : else {
       : print "Arthur felt that didn't belong in the coffer." ;
          : done ;
    }
    
 }
  : if (noun2_is "cupboard") {
  : if (is_present "cupboard_1") {
  : if (noun1_is "key") { 
    : if (is_carried "iron_key") {
    : if (panel_cupboard_open) {
   : print "Arthur put the key back in the cupboard." ;
   : set_true "key_in_cupboard" ;
   : set_string var = "iron_key_description"  text = "a huge iron key (in the cupboard)" ;
   : drop "iron_key" quiet = "true" ;
   
       }
       : else {
          : print "But the cupboard was closed." ;
             : done ;
       }
       
       }
    }
    : else {
       : print "Arthur didn't see the point of putting things in the cupboard that didn't belong in there." ;
          : done ;
    }
    
 }
  }
  
   : if (noun1_is "rail") {
     : if (is_carried "rail") {
          : if (is_present "stone_fox") {
             : print "Arthur inserted the iron rail into the hole in the fox's ear and found, remarkably, that it fitted exactly." ;
       : set_string var = "rail_description"  text = "an iron rail (inserted into the stone fox's ear)" ;
       : drop "rail" quiet = "true" ;
       : done ;
       }
       : else {
          : print "Arthur couldn't see anywhere to insert that." ;
          
       }

     }
  : else_if (is_beside "rail"&&rail_description=="an iron rail (inserted into the stone fox's ear)") {
  : print "But that had already been done." ;
  
  }
  : else {
     : print "But Arthur didn't have it." ;
     
  }
  
      : done ;
   }
   
   
   : if (noun1_is "stone"&&is_carried "date_stone") {
      : if (is_at "pub_cellar") {
         : print "Arthur put the date stone back in its place in the stone wall." ;
         : set_string var = "date_stone_description"  text = "a date stone (in the stone wall)" ;
   : create "date_stone" ;
     : destroy "hole_wall" ;
         : done ;
         
      }
      
   }
   
   : if (is_at "darkroom") {
   : if (noun1_is "screwdriver"&&is_carried "screwdriver"||noun1_is "knife"&&is_carried "knife" ) {
   : print "Arthur wasn't sure where to insert it. If the aim was to prise or lever something then he would be better off trying that instead." ;
     : done ;
   }
    
   }
   
   
  : if (noun1_is "post") {
     : if (noun2_is "ground") {
   
        : if (is_carried "fence_post") {
           : if (is_at "zone_dmv"||is_at "wetland") {
              : print "Arthur attempted to drive the fence post into the ground with his bare hands but only succeeded in giving himself splinters." ;
                 : done ;
              
           }
           : else {
              : print "Arthur didn't think it was appropriate to try and drive the fence post into the ground right here." ;
                 : done ;
           }
           
        }
        
     }
     
  }

  : if (noun2_is "frame"||noun2_is ""||noun2_is "mirror") {
       : if (noun1_is "fragments"||noun1_is "mirror"||noun1_is "fragment") {
       : if (is_carried "fragment_1"||is_carried "fragment_3"||is_carried "fragment_4"||is_carried "fragment_5") {
   : if (is_carried "mirror") {
   : if (is_carried "fragment_1") {
      : destroy "fragment_1" ;
      : if (fragments_in_mirror==0) {
         : print "Arthur eased the mirror fragment into the empty bronze frame, where it fitted snugly." ;
      }
      : else_if (fragments_in_mirror==1) {
         : print "Arthur slid another mirror fragment into the bronze frame, where it sat snugly alongside its companion, the fractured edges matching up exactly. " ;
      }
       : else_if (fragments_in_mirror==2) {
         : print "Arthur worked a third mirror fragment into the bronze frame alongside the others, observing how the fractured edges married so exactly as to make the join practically invisible. " ;
      }
         : else_if (fragments_in_mirror==3) {
         : print "Arthur gently pushed a fourth mirror fragment into the space defined by the fragments at either side. The fractured edges seemed to vanish into the seamless surface as it bedded in alongside its fellows." ;
      }
        : increment "fragments_in_mirror" ;
        : if (fragments_in_mirror==4) {
           : print "The mirror was complete." ;
           
        }
     
        : if (noun1_is "fragment") {
           : done ;
           
        }
        
   }
    : if (is_carried "fragment_3") {
        : destroy "fragment_3" ;
      : if (fragments_in_mirror==0) {
         : print "Arthur eased the mirror fragment into the empty bronze frame, where it fitted snugly." ;
      }
      : else_if (fragments_in_mirror==1) {
         : print "Arthur slid another mirror fragment into the bronze frame, where it sat snugly alongside its companion, the fractured edges matching up exactly. " ;
      }
       : else_if (fragments_in_mirror==2) {
         : print "Arthur worked a third mirror fragment into the bronze frame alongside the others, observing how the fractured edges married so exactly as to make the join practically invisible. " ;
      }
         : else_if (fragments_in_mirror==3) {
         : print "Arthur gently pushed a fourth mirror fragment into the space defined by the fragments at either side. The fractured edges seemed to vanish into the seamless surface as it bedded in alongside its fellows." ;
      }
        : increment "fragments_in_mirror" ;
        : if (fragments_in_mirror==4) {
           : print "The mirror was complete." ;
           
        }
     : if (noun1_is "fragment") {
           : done ;
           
        }
        
   }
    : if (is_carried "fragment_4") {
        : destroy "fragment_4" ;
     : if (fragments_in_mirror==0) {
         : print "Arthur eased the mirror fragment into the empty bronze frame, where it fitted snugly." ;
      }
      : else_if (fragments_in_mirror==1) {
         : print "Arthur slid another mirror fragment into the bronze frame, where it sat snugly alongside its companion, the fractured edges matching up exactly. " ;
      }
       : else_if (fragments_in_mirror==2) {
         : print "Arthur worked a third mirror fragment into the bronze frame alongside the others, observing how the fractured edges married so exactly as to make the join practically invisible. " ;
      }
         : else_if (fragments_in_mirror==3) {
         : print "Arthur gently pushed a fourth mirror fragment into the space defined by the fragments at either side. The fractured edges seemed to vanish into the seamless surface as it bedded in alongside its fellows." ;
      }
        : increment "fragments_in_mirror" ;
        : if (fragments_in_mirror==4) {
           : print "The mirror was complete." ;
    
        }
  
       : if (noun1_is "fragment") {
           : done ;
           
        }   
   }
    : if (is_carried "fragment_5") {
        : destroy "fragment_5" ;
      : if (fragments_in_mirror==0) {
         : print "Arthur eased the mirror fragment into the empty bronze frame, where it fitted snugly." ;
      }
      : else_if (fragments_in_mirror==1) {
         : print "Arthur slid another mirror fragment into the bronze frame, where it sat snugly alongside its companion, the fractured edges matching up exactly. " ;
      }
       : else_if (fragments_in_mirror==2) {
         : print "Arthur worked a third mirror fragment into the bronze frame alongside the others, observing how the fractured edges married so exactly as to make the join practically invisible. " ;
      }
         : else_if (fragments_in_mirror==3) {
         : print "Arthur gently pushed a fourth mirror fragment into the space defined by the fragments at either side. The fractured edges seemed to vanish into the seamless surface as it bedded in alongside its fellows." ;
      }
        : increment "fragments_in_mirror" ;
        : if (fragments_in_mirror==4) {
           : print "The mirror was complete." ;
        
           
        }

     : if (noun1_is "fragment") {
           : done ;
           
        }
               
       }
    
   }
   : else {
     : print "But Arthur didn't have the mirror frame." ;
        : done ;   
   }
    }
    : else_if (fragments_in_mirror==4) {
        : print "But all the fragments had been put into the mirror frame." ;
        
    }
    
   : else {
       : print  "But Arthur didn't have any mirror fragments." ;
      : done ; 
   }
   

  
     
   
   : done ;
   
  }
  
  : else_if (is_present "frame") {
     : if (noun1_is "gauntlets"&&is_carried "gardening_gauntlets") {
        : print "Having had the good fortune to come across those useful things abandoned inside the cold frame, Arthur decided that he'd rather hang onto them than put them back. After all, he reasoned, he was only borrowing them temporarily." ;
        : done ;
        
     }
     : else {
        : print "Arthur didn't see the point in that." ;
           : done ;
     }
  }


  }
    : if (noun2_is "trunk"&&is_present "trunk") {
    : if (!trunk_locked&&trunk_open) {
        : if (noun1_is "nail"&&is_carried "horseshoe_nail") {
        : print "Arthur decided that he would be better off keeping hold of the horseshoe nail. Mundane though it appeared, he had a feeling that it was somehow important." ;
        : done ;
        
     }
     : else {
        : print "Arthur didn't see the point of putting anything in the trunk." ;
        : done ;
        
     }
          }
          : else {
             : print "But the trunk was closed." ;
            : done ;
    }
  
    
 
     
  }
 
: if (noun2_is "paten") {
: if (is_at "chapel") {
: if (is_worn "robes") {
: if (noun1_is "nail") {
: if (is_carried "horseshoe_nail") {


    : print "Arthur placed the horseshoe nail on the paten. Nothing happened for a time but then he detected a change and saw that it was beginning to glow. Brighter and brighter it became, letting off an intense amount of light but no heat, until it was unbearable to look at and everything in the chapel was saturated by its cold, white glare.\n Arthur tentatively reached forward and probed it with a fingertip. It was icy to the touch. He took it off the paten and stared at it in awe.  " ;
    
 
    : if (is_present "ottoline_elderfield") {
       : print "\"Arthur, what have you done?\" cried Ottoline, shielding her eyes." ;
       
    }
    
    : swap o1 = "horseshoe_nail"  o2 = "horseshoe_nail_1" ;
    : done ;
    
}
: else_if (is_carried "horseshoe_nail_1") {
   : print "Arthur placed the glowing horseshoe nail on the paten, but nothing more happened. He took it off again." ;
   : done ;
   
}
}

  :disambiguate_s1 "carried";
  : if (is_worn (s1())) {
     : print "But Arthur was wearing that. He would have to take it off first." ;
     : done ;
     
  }
  
   : if (is_carried (s1())) {
      : print {("Arthur tried putting "+(definite(d(s1())))+" on the paten, but nothing happened. He took it off again.")} ;
      : done ;
      
   }
   }
: else {
   : print "Arther was prevented from approaching the altar by an invisible barrier." ;
   : done ;
   
}

      
}
}
: if (noun2_is "case") {
: if (is_carried "spectacles_case") {
   : if (case_open) {
      : if (specs_in_case) {
         : print "Arthur could't fit much else into the case while the pince-nez were in there, occupying the space so snugly." ;
         : done ;
         
      }
      
        : if (noun1_is "pince-nez") {
             : if (is_carried "pince_nez") {
          : print "Arthur put the pince-nez in the case." ;
            : destroy "pince_nez" ;
            : set_true "specs_in_case" ;
            : set_string var = "case_description"  text = "spectacles case (open, containing a pair of pince-nez)" ;
      }
}
: else_if (noun1_is "nail") {
   : if (is_carried "horseshoe_nail_1") {
      : print "Arthur thought that would be the perfect place to keep the horseshoe nail and its unearthly glow safely hidden. He put the nail in the case and snapped the lid shut." ;
      : destroy "horseshoe_nail_1" ;;
      : set_string var = "case_description"  text = "a spectacles case (closed)" ;
      
       : swap o1 = "spectacles_case"  o2 = "spectacles_case_1" ;
       : set_false "case1_open" ;
       
       : done ;
       
   }
   
}
: if (is_carried (s1())) {
: print {("Arthur didn't see the point in putting the "+original "noun1"+" in the case.")} ;
: done ;

}
}
      : else {
         : print "But the case was closed." ;
         : done ;
         
      }
      
 }
 : else_if (is_carried "spectacles_case_1") {
     : print "Arthur didn't think it would be wise to put anything else in there with the horseshoe nail." ;
            : done ;
 }
}
: if (noun2_is "piano") {
   : if (piano_open) {
      : print "Arthur considered putting something inside the piano, but thought better of it. It was bound to make it go even more out of tune than it already was." ;
      : done ;
      
   }
   : else {
      : print "But the lid of the piano was closed." ;
      : done ;
      
   }
   
}
: if (noun2_is "cavity") {
: if (is_present "cavity") {
   : if (noun1_is "casket") {
      : if (is_carried "casket") {
      : if (casket_open) {
      : print "Arthur closed the small wooden casket." ;
         : if (book_description=="a tattered book (in the small wooden casket)") {
            : destroy "remnant" ;
         }
         : destroy "bones" ;
        
         : set_false "casket_open" ;
      }
         : print "Arthur returned the small wooden casket to its place within the tomb." ;
         : set_string var = "box_description"  text = "a small wooden casket (within the cavity)" ;
   : drop "casket"quiet = "true"  ;
: done ;

      }
   
   }
   : else_if (!noun1_is "") {
      : print "Arthur thought it wouldn't be proper to put that in the cavity." ;
      : done ;
      
   }
   
}


   }
    : if (noun2_is "casket") {
    : if (!casket_open) {
       : print "But the casket was not open." ;
   : done ;
    }
   : if (noun1_is "book") {
       : if (is_carried "remnant") {
          : print "Arthur put the tattered remnant of the book back in the small wooden casket." ;
          : set_string var = "book_description"  text = "a tattered book (in the small wooden casket)" ;
 : drop "remnant" quiet = "true"  ;
     
       }
      : else {
         : print "Arthur didn't see the point in doing that." ;
      }
    }
 : else {
    : print "Arthur didn't think it would be proper to put that in the casket." ;
    : done ;
    
 }
   }
 : if (noun2_is "rack") {
    : if (noun1_is "keg") {
       : if (is_carried "keg") {
          : print "Having gone to the effort of disconnecting and removing it, Arthur didn't feel inclined to put the keg back where he had found it." ;
          :done;
       }
    }
    : else {
       : print "Arthur didn't see the point in that." ;
    }
 }
 : if (noun2_is "keg") {
 : if (is_present "keg") {
    : if (beer_keg_open) {
    : if (!has_read_ingredients) {
       : print "So many extraordinary things had happened to Arthur recently that he had begun to overlook his own eccentricities - but he still felt that he should have a more concrete reason than mere whim to toss things into the keg of ale." ;
: done ;

    }
    : else_if (noun1_is "mistletoe"||noun1_is "sprig") {
      : if (is_carried "mistletoe_sprig") {
         : print "Arthur, remembering what he had read in the ancient book, added the ingredient to the keg. " ;
         : destroy "mistletoe_sprig" ;
         : done ;
         
      }
    }
      : else_if (noun1_is "toadstool") {
      : if (is_carried "toadstool") {
         : print "Arthur, remembering what he had read in the ancient book, added the ingredient to the keg. " ;
         : destroy "toadstool" ;
          : done ;
      }
    }
      : else_if (noun1_is "blood") {
      : if (bleeding>0) {
      : if (!blood_in_keg) {
         : print "Arthur, remembering what he had read in the ancient book, held his bleeding digit over the keg and allowed a few drops to splash into the liquid within. " ;
         : set_true "blood_in_keg" ;
               : done ;
      }
: else {
   : print "Arthur had already contributed enough of that vital stuff to the mixture in the keg; he didn't need to add any more." ;
   : done ;
   
   
}
      
      }
    }
      : else_if (noun1_is "tittle-tattle") {
      : if (is_carried "witch_bottle") {
      : if (gossip_in_bottle) {
         : if (witch_bottle_open) {
         : if (!gossip_in_keg) {
            : print "Arthur shook the witch bottle over the keg and felt, rather than saw, something slip from the neck of the vessel. A moment later the liquid in the keg rippled as though something had fallen into it and Arthur was assailed with a foul smell and a sound as of a dozen voices whispering all at once. And then all was silent again.   " ;
            : set_true "gossip_in_keg" ;  
            : set_false "gossip_in_bottle" ;
             : done ;
         }
    : else {
       : print "Arthur had already added sufficient tittle-tattle to the mixture in the keg. Any more and he risked brewing a full on scandal!" ;
        : done ;
    }
    
            
         }
         : else {
            : print "But the bottle was not open." ;
            : done ;
            
         }
         
      }
      : else {
         : print "But Arthur didn't have any of that." ;
         : done ;
         
      }
      }
    }
: else {
   : print {("Arthur couldn't recall seeing "+original "noun1"+" amongst the ingredients for the banishing spell.")} ;
   : done ;
   
}

    }
    : else {
       : print "But the keg was not open." ;
       
    }
    
 }
 : else {
    : print "But the keg was not there." ;
    
 }
 
 }
     
    
    : if (noun2_is "pocket") {
          : print "Arthur didn't have the time to be messing around with pockets." ;

    }
    : if (noun2_is "envelope") {
       : if (is_present "envelope") {
          : if (envelope_open) {
          : if (letter_in_envelope) {
             : print "It seemed pointless to put anything in the envelope with the letter." ;
             : done ;
             
          }
          
             : print "Once the letter had been taken out of it, it seemed pointless to put anything back into the envelope." ;
             
          }
          : else {
          : print "But the envelope had not been opened." ;
             
          }
          
       }
       
    }
             : if (noun1_is "rope") {
      : if (rope_tied) {
         : if (is_carried "rope") {
         : if (noun2_is "hole"&&is_present "hole") {
            : print "Arthur dropped the free end of the rope down the hole." ;
      : set_true "rope_down_well" ;
      
            : set_string var = "rope_description"  text = "a piece of rope (one end tied to a fence post, the other end down the hole)" ;
            : create "rope" ;
            : press_any_key ;
            : redescribe;
         }
         
         }
  : else {
      : print "But Arthur was not holding the rope." ;
      : done ;
      
      }
      }
   }
   
        : if (noun2_is "water"){
                        : if (is_at "sweet_track_bridge") {
            : if (is_carried "broken_dagger") {
               : print "Arthur dropped the broken dagger over the side of the track and watched it sink and disappear into the black water. A moment passed before Arthur realised that he could hear and smell things from across the bridge that he hadn't been able to before. The way seemed to have been opened." ;
               : destroy "broken_dagger" ;
               : done ;
                }
            }
            : else_if (is_at "sweet_track_1"||is_at "sweet_track_2") {
               : print "Arthur didn't think it was a good idea to go dropping things into unknown waters. He might never get them back." ;
               : done ;
            }
            }

   : disambiguate_s1 "carried";
   : if (is_carried (s1())) {
   : if (is_present (s2())) {
      : print {("Arthur didn't see the point in putting the "+original "noun1"+" in the "+original "noun2"+".")} ;
      : done ;
      
   }
   : else_if (is_exists (s2())) {
      : print "But Arthur couldn't see that anywhere." ;
      : done ;
      
   }
   
      : else {
      : print "Arthur thought he had better things to do than try that." ;
      : done ;
      
   }
   }
   : else {
      : print {("But Arthur did not have the "+original "noun1"+".")} ;
      : done ;
      
   }
   
   }

#PUT end

#WEDGE start

: match "wedge chair"  {
  : if (traptor==4) {
     : if (preposition_is "under") {
       : if (noun2_is "door handle"||noun2_is "handle"||noun2_is "door") {
          : if (is_carried "chair_1"||is_carried "chair_2"||is_carried "chair_3") {
             : if (is_at "drawing_room") {
                : if (is_present "ottoline_elderfield") {
               : if (!is_present "chair_4") {
                          : print "Arthur wedged the chair under the door handle, effectively locking it against intrusion from the outside." ;
                  : create "chair_4" ;
                  : if (is_carried "chair_1") {
                     : destroy "chair_1" ;
                     : done ;
                  }
                   : if (is_carried "chair_2") {
                     : destroy "chair_2" ;
                     : done ;
                  }
                   : if (is_carried "chair_3") {
                     : destroy "chair_3" ;
                     : done ;
                     
                  }
                  
               }
               : else {
                  : print "But there was already a chair wedged underneath the door handle. Surely that would be sufficient to keep out a single housekeeper, even one as determined as Mrs Taplow." ;
                  
               }
               
           
               }
                 : else {
                   : print "But Arthur was expecting a guest and it hardly seemed polite to secure the door against them." ;
                   
                }
                   
                }
               : else {
                : print "Arthur didn't see the point of doing that here." ;
                
             }
                
             }
            : else {
             : print "But Arthur had no chair." ;
          }
             
          }
          
          
       }
       :else {
       : print "Arthur didn't see the point of putting the chair there." ;
       
       }
     }
     

  : else {
   : print "Arthur didn't see the point in that." ;
   : done ;
}
}
#WEDGE end

#POUR start

: match "pour _"  {
//checking if container to pour into is inside a closed container (also checks if S2 is present)

: if (noun1_is "flask"||noun1_is "bottle"||noun1_is "bucket"||noun1_is "dish") {
    : print "(If Arthur wanted to pour liquids then he should POUR [[liquid]] INTO [[container]] rather than POUR [[container]])." ;
    : done ;
    
}

: if (noun2_is "") {
   : print "Arthur wasn't sure what or where to pour that." ;
   :done;
}


: if (noun1_is "water") {
: if (!is_carried (parent_of "water_1")&&!is_carried (parent_of "water_2")&&!is_carried (parent_of "water_3")&&!is_carried (parent_of "water_4")) {
    : print "But Arthur was not carrying anything that contained water." ;
  : done ;
  
// }

  
}
}
: if (noun1_is "developer") {
: if (!is_carried (parent_of "developer")) {
   : print "Bur Arthur was not carrying anything that contained developer." ;
   : done ;
}
}
: if (noun1_is "fixer") {
: if (!is_carried (parent_of "fixer")) {
   : print "Bur Arthur was not carrying anything that contained fixer." ;
   : done ;
}
}



// : if (!is_carried (parent_of (s1())) {
//    : print {("But Arthur was not gholding the "+parent_of (s1())+".")} ;
//  : done ;
   
// }

: if (is_present (s2())) {

   : if (parent_of (s2())=="cupboard"&&!cupboardopen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
    
    : else_if (parent_of (s2())=="drawer"&&!draweropen) {
      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
   : else_if (parent_of (s2())=="drawer_1"&&!is_exists "drawer_1") {

      : print "Arthur couldn't see that anywhere." ;
      : done ;
   }
   


   
}


: else {
   : print "Arthur couldn't see that anywhere." ;
   :done;
}

: if (!noun2_is "dish"&&!noun2_is "bottle"&&!noun2_is "sink"&&!noun2_is "flask"&&!noun2_is "bucket") {
   : print "Arthur didn't see the point of pouring anything into that. " ;
   
}

//checking if the same liquid is already in target recepticle
 
: if (noun1_is "developer"&&parent_of "developer"==(s2())) {
   : print {("But the "+s2()+" already contained developer.")} ;
   : done ;
   
   }
   : else_if (noun1_is "fixer"&&parent_of "fixer"==(s2())) {
   : print {("But the "+s2()+" already contained fixer.")} ;
   }
: if (noun2_is "bucket"&&bucket_units==4) {
      : print "But the bucket was already full of water." ;
      :done;
   }
   
: if (noun1_is "water") {
   : if (parent_of "water_2"==s2()||parent_of "water_3"==s2()||parent_of "water_4"==s2()) {
   : print {("But the "+s2()+" was already full of water.")} ;
      : done ;
      
   }
   

}
//checking if another liquid is already in target recepticle

: if (noun1_is "developer") {
: if (parent_of "fixer"==s2()) {
   : print "It seemed pointless to mix the chemicals, so Arthur decided not to try it." ;
   :done;
}
: if (parent_of "water_1"==s2()||parent_of "water_2"==s2()||parent_of "water_3"==s2()||parent_of "water_4"==s2()) {
      : print "It seemed pointless to dilute the developer, so Arthur decided not to try it." ;
   :done;
}

}
: if (noun1_is "fixer") {
: if (parent_of "developer"==s2()) {
   : print "It seemed pointless to mix the chemicals, so Arthur decided not to try it." ;
   :done;
}
: if (parent_of "water_1"==s2()||parent_of "water_2"==s2()||parent_of "water_3"==s2()||parent_of "water_4"==s2()) {
      : print "It seemed pointless to dilute the fixer, so Arthur decided not to try it." ;
   :done;
}

}

: if (noun1_is "water") {
: if (parent_of "developer"==s2()) {
   : print "It seemed pointless dilute the developer, so Arthur decided not to try it." ;
   :done;
}
: if (parent_of "fixer"==s2()) {
   : print "It seemed pointless dilute the fixer, so Arthur decided not to try it." ;
   :done;
}


}

//checking if non-wettable things in target recepticle

 : if (noun1_is "water"||noun1_is "developer"||noun1_is "fixer" ){
                 : if (s2()=="dish"&&nonwettable_things_in_dish>0||s2()=="bucket"&&nonwettable_things_in_bucket>0||s2()=="bottle"&&nonwettable_things_in_bottle>0||s2()=="flask"&&nonwettable_things_in_flask>0||s2()=="sink"&&nonwettable_things_in_sink>0) {
                    : print "Arthur decided not to try it. Whatever was in there would not benefit from being wet." ;
                    : done ;
                    
                 }
                 
                 
              }


///checking order of film & sheet processing (disallow fixing before developing etc)


: if (parent_of "film"==s2()) {
   : if (noun1_is "developer") {
      : if (film_description=="a strip of film negatives (unfixed, washed)" ) { 
      : print "Arthur has just washed the developer off the film and saw no need to immerse it in the same fluid again." ;
      : done ;
   }
    : else_if (film_description=="a strip of film negatives (fixed, unwashed)") {
      : print "Having already developed the film, Arthur saw no need to immerse it in developing fluid again." ;
      : done ;
   }
   }
   : else_if (noun1_is "fixer") {
        : if (film_description=="a strip of undeveloped film" ) { 
      : print "Arthur knew that he needed to develop the film before fixing it, so there was no point in immersing it in the fixer now." ;
      : done ;
   }
   : else_if (film_description=="a strip of film negatives (unfixed, unwashed)") {
      : print "But the film was still soaked with developing fluid. Arthur thought that he should wash it off before proceeding." ;
      : done ;
      
   }
}



}

: if (parent_of "sheet"==s2()) {
   : if (noun1_is "developer") {
      : if (sheet_description=="a sheet of contact prints (unfixed, washed)" ) { 
      : print "Arthur has just washed the developer off the sheet and saw no need to immerse it in the same fluid again." ;
      : done ;
   }
    : else_if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
      : print "Having already developed the sheet, Arthur saw no need to immerse it in developing fluid again." ;
      : done ;
   }
   }
   : else_if (noun1_is "fixer") {
        : if (sheet_description=="a sheet of exposed, undeveloped photo paper" ) { 
      : print "Arthur knew that he needed to develop the sheet before fixing it, so there was no point in immersing it in the fixer now." ;
      : done ;
   }
   : else_if (sheet_description=="a sheet of contact prints (unfixed, unwashed)") {
      : print "But the sheet was still soaked with developing fluid. Arthur thought that he should wash it off before proceeding." ;
      : done ;
      
   }
   
   
}



}





 //specific fluids into containers below here
//POUR WATER
   : if (noun1_is "water") {
   
      //POUR WATER INTO DISH
   : if (noun2_is "dish") {
   : if (is_carried "water_1") {
         : print "Arthur poured water from the bucket into the dish." ;
      
          
         : if (parent_of "film"=="dish"||parent_of "sheet"=="dish") {
          : gosub "washing_off" ;
          
         }
         
         : decrement "bucket_units" ;
         : if (bucket_units==0) {
            : destroy "water_1" ;
         }
         : create "water_2" target = "dish" ;
      
   }
   : else_if (is_carried "water_3") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured water from the bottle into the dish." ;
             : if (parent_of "film"=="dish"||parent_of "sheet"=="dish") {
            : gosub "washing_off" ;
         }
         : destroy "water_3" ;
         : create "water_2" target = "dish" ;
      }
 
    }
      : else_if (is_carried "water_4") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured water from the flask into the dish." ;
             : if (parent_of "film"=="dish"||parent_of "sheet"=="dish") {
         : gosub "washing_off" ;
         }
         : destroy "water_4" ;
         : create "water_2" target = "dish" ;
      }
    }
      }
      
     
      //POUR WATER INTO BUCKET
         : else_if (noun2_is "bucket") {
   : if (is_carried "water_2") {
         : print "Arthur poured water from the dish into the bucket." ;
             : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
          : gosub "washing_off" ;
         }
         : increment "bucket_units" ;
         : destroy "water_2" ;
         : create "water_1" target = "bucket" ;
      
   }
   : else_if (is_carried "water_3") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
    
      : else {
         : print "Arthur poured water from the bottle into the bucket." ;
              : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
           : gosub "washing_off" ;
         }
         : increment "bucket_units" ;
         : destroy "water_3" ;
         : create "water_1" target = "bucket" ;
      }
 
    }
      : else_if (is_carried "water_4") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      
      : else {
         : print "Arthur poured water from the flask into the bucket." ;
              : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
          : gosub "washing_off" ;
         }
         : increment "bucket_units" ;
         : destroy "water_4" ;
         : create "water_1" target = "bucket" ;
      }
    }
    
      }
      //POUR WATER INTO BOTTLE
      : else_if (noun2_is "bottle") {
   : if (!bottle_open) {
      : print "But the bottle was not open." ;
      : done ;
   }
   : if (is_carried "water_1") {
         : print "Arthur poured water from the bucket into the bottle." ;
         : decrement "bucket_units" ;
         : if (bucket_units==0) {
            : destroy "water_1" ;
         }
         : create "water_3" target = "bottle" ;
      
   }
   : else_if (is_carried "water_2") {
         : print "Arthur poured water from the dish into the bottle." ;
         : increment "bucket_units" ;
         : destroy "water_2" ;
         : create "water_3" target = "bottle" ;
         
    }
      : else_if (is_carried "water_4") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured water from the flask into the bottle." ;
         : destroy "water_4" ;
         : create "water_3" target = "bottle" ;
      }
    }
      }
      //POUR WATER INTO FLASK
    : else_if (noun2_is "flask") {
   :if (!flask_open) {
      : print "But the flask was not open." ;
      : done ;
      
   }
   : if (is_carried "water_1") {
         : print "Arthur poured water from the bucket into the flask." ;
         : decrement "bucket_units" ;
         : if (bucket_units==0) {
            : destroy "water_1" ;
         }
         : create "water_4" target = "flask" ;
      
   }
   : else_if (is_carried "water_2") {
         : print "Arthur poured water from the dish into the flask." ;
         : destroy "water_2" ;
         : create "water_4" target = "flask" ;
         
    }
      : else_if (is_carried "water_3") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured water from the bottle into the flask." ;
         : destroy "water_3" ;
         : create "water_4" target = "flask" ;
      }
    }
    
      }
            //POUR WATER INTO SINK
      : else_if (noun2_is "sink" && is_present "sink") {
      : if (is_carried "water_1"||is_carried "water_2"||is_carried "water_3"||is_carried "water_4") {
         : if (is_carried "water_1") {
            : destroy "water_1" ;
            : set_integer var = "bucket_units"  value = "0" ;
            
            : print "Arthur poured water from the bucket into the sink." ;
         }
           : if (is_carried "water_2") {
            : destroy "water_2" ;
            : print "Arthur poured water from the dish into the sink." ;
         }
           : if (is_carried "water_3"&&bottle_open) {
            : destroy "water_3" ;
            : print "Arthur poured water from the bottle into the sink." ;
         }
           : if (is_carried "water_4"&&flask_open) {
            : destroy "water_4" ;
            : print "Arthur poured water from the flask into the sink." ;
         }
              : if (parent_of "film"=="sink"||parent_of "sheet"=="sink") {
           : gosub "washing_off" ;
         }
         : print "The water drained away." ;
      }
      
      
      }
    
      
      : else {
         : print "It didn't seem sensible to pour water there." ;
         
      }
      
      
      
   }
   //POUR DEVELOPER
   : if (noun1_is "developer") {
   
      //POUR DEVELOPER INTO DISH
   : if (noun2_is "dish") {
   : if (parent_of "developer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured developer from the bucket into the dish." ;
         : decrement "bucket_units" ;
         : create "developer"target = "dish" ;
         
   }
   : else_if (parent_of "developer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured developer from the bottle into the dish."; 
           : create "developer"target = "dish" ;
      }
 
    }
      : else_if (parent_of "developer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured developer from the flask into the dish." ;
               : create "developer"target = "dish" ;
      }
    }
      }
      //POUR DEVELOPER INTO BUCKET
         : if (noun2_is "bucket") {
         : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
: print "Arthur was a novice when it came to the art of photographic processing, but one thing he felt certain of was that attempting it in a rusty bucket was sure to yield disappointing results." ;
: done ;
         }
         
   : if (parent_of "developer" == "dish" &&is_carried "dish") {
         : print "Arthur poured developer from the dish into the bucket." ;
         : increment "bucket_units" ;
      : create "developer" target = "bucket" ;
      
   }
   : else_if (parent_of "developer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
    
      : else {
         : print "Arthur poured developer from the bottle into the bucket." ;
         : increment "bucket_units" ;
         : create "developer" target = "bucket" ;
      }
 
    }
      : else_if (parent_of "developer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      
      : else {
         : print "Arthur poured developer from the flask into the bucket." ;
         : increment "bucket_units" ;
         : create "developer" target = "bucket" ;
      }
    }
    
      }
      //POUR DEVELOPER INTO BOTTLE
      : if (noun2_is "bottle") {
   : if (!bottle_open) {
      : print "But the bottle was not open." ;
      : done ;
      }
   : if (parent_of "developer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured developer from the bucket into the bottle." ;
         : decrement "bucket_units" ;
         : create "developer" target = "bottle" ;
      
   }
   : else_if (parent_of "developer" == "dish" &&is_carried "dish") {
         : print "Arthur poured developer from the dish into the bottle." ;
         : create "developer" target = "bottle" ;
         
    }
      : else_if (parent_of "developer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured developer from the flask into the bottle." ;
         : create "developer" target = "bottle" ;
      }
    }
      }
      //POUR DEVELOPER INTO FLASK
    : if (noun2_is "flask") {
   :if (!flask_open) {
      : print "But the flask was not open." ;
      : done ;
   }
   : else_if (parent_of "developer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured developer from the bucket into the flask." ;
         : decrement "bucket_units" ;
      
         : create "developer" target = "flask" ;
      
   }
   : else_if (parent_of "developer" == "dish" &&is_carried "dish") {
         : print "Arthur poured developer from the dish into the flask." ;
         : create "developer" target = "flask" ;
         
    }
      : else_if (parent_of "developer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured developer from the bottle into the flask." ;
         : create "developer" target = "flask" ;
      }
    }
    
      }
            //POUR DEVELOPER INTO SINK
      : if (noun2_is "sink" && is_present "sink") {
      : if (is_carried "developer") {
         : print "Arthur decided not to do such an unnecessary wasteful thing." ;
         
      }
      
      }
      }
         //POUR FIXER
   : if (noun1_is "fixer") {
   
      //POUR FIXER INTO DISH
   : if (noun2_is "dish") {
   : if (parent_of "fixer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured fixer from the bucket into the dish." ;
         : decrement "bucket_units" ;
         : create "fixer"target = "dish" ;
         
   }
   : else_if (parent_of "fixer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured fixer from the bottle into the dish."; 
           : create "fixer"target = "dish" ;
      }
 
    }
      : else_if (parent_of "fixer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       :done;
      }
      : else {
         : print "Arthur poured fixer from the flask into the dish." ;
               : create "fixer"target = "dish" ;
      }
    }
      }
      //POUR FIXER INTO BUCKET
         : if (noun2_is "bucket") {
              : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
: print "Arthur was a novice when it came to the art of photographic processing, but one thing he felt certain of was that attempting it in a rusty bucket was sure to yield disappointing results." ;
: done ;
         }
   : if (parent_of "fixer" == "dish" &&is_carried "dish") {
         : print "Arthur poured fixer from the dish into the bucket." ;
         : increment "bucket_units" ;
      : create "fixer"target = "dish" ;
      
   }
   : else_if (parent_of "fixer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       :done;
      }
    
      : else {
         : print "Arthur poured fixer from the bottle into the bucket." ;
         : increment "bucket_units" ;
         : create "fixer" target = "bucket" ;
      }
 
    }
      : else_if (parent_of "fixer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      
      : else {
         : print "Arthur poured fixer from the flask into the bucket." ;
         : increment "bucket_units" ;
         : create "fixer" target = "bucket" ;
      }
    }
    
      }
      //POUR FIXER INTO BOTTLE
      : if (noun2_is "bottle") {
   : if (!bottle_open) {
      : print "But the bottle was not open." ;
      : done ;
      }
   : if (parent_of "fixer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured fixer from the bucket into the bottle." ;
         : decrement "bucket_units" ;
         : create "fixer" target = "bottle" ;
      
   }
   : else_if (parent_of "fixer" == "dish" &&is_carried "dish") {
         : print "Arthur poured fixer from the dish into the bottle." ;
         : create "fixer" target = "bottle" ;
         
    }
      : else_if (parent_of "fixer" == "flask" &&is_carried "flask") {
      : if (!flask_open) {
       : print "But the flask was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured fixer from the flask into the bottle." ;
         : create "fixer" target = "bottle" ;
      }
    }
      }
      //POUR FIXER INTO FLASK
    : if (noun2_is "flask") {
   :if (!flask_open) {
      : print "But the flask was not open." ;
      : done ;
   }
   : else_if (parent_of "fixer" == "bucket" &&is_carried "bucket") {
         : print "Arthur poured fixer from the bucket into the flask." ;
         : decrement "bucket_units" ;
      
         : create "fixer" target = "flask" ;
      
   }
   : else_if (parent_of "fixer" == "dish" &&is_carried "dish") {
         : print "Arthur poured fixer from the dish into the flask." ;
         : create "fixer" target = "flask" ;
         
    }
      : else_if (parent_of "fixer" == "bottle" &&is_carried "bottle") {
      : if (!bottle_open) {
       : print "But the bottle was not open." ;
       : done ;
       
      }
      : else {
         : print "Arthur poured fixer from the bottle into the flask." ;
         : create "fixer" target = "flask" ;
      }
    }
    
      }
            //POUR FIXER INTO SINK
      : if (noun2_is "sink" && is_present "sink") {
      : if (is_carried "fixer") {
         : print "Arthur decided not to do such an unnecessary wasteful thing." ;
         
      }
      
      
  
      
   }

      
   }

      }
   




#POUR end

#READ start
   : match "read _"  {
   #specific volumes below here, disambiguation further beneath
   
     : if (original "noun1" =="villages"||original "noun1" =="low"||original "noun1" =="weald") {
      : if (is_carried "villages") {
         : clear_screen;
         : print "Arthur read:\n'A sprawling settlement of around 300 souls, the village of Nether Haelstowne is the descendant of the original Haelstowne that once stood on higher ground to the north east of the present village. The earlier settlement was abandoned in the early part of the 15th century for reasons unknown; nothing now remains save The Vicarage. Without the nucleus of a church around which to grow, the development of the lower village was rather haphazard, resulting in the present diffuse arrangement of buildings. Most of the dwellings are constructed of the local sandstone, showing features typical of...'" ;
         : print "There followed much detailed architectural description, of little interest to Arthur. He skipped down the page and read the following:" ;
         : print "'The name 'Haelstowne' is a toponymic curiosity. Parish records show that before the 18th century, the village was named 'Haelstow' and, if one reaches still further back, 'Aelfstow' and 'Aelstown' are recorded in deeds of the 14th and 15th centuries. The etymological roots of the name are in the Old English 'aelf', meaning an elf or sprite, and 'stow', meaning a place or locality; thus the original meaning may be rendered as 'Elf Place'. The familiar processes of corruption and convergence over several centuries have produced the homonymic 'Haelstowne' by which the extant village is now known.'  ";
         : press_any_key ;
         : redescribe;
         
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
    : if (original "noun1" =="spirits"||original "noun1" =="andredesweald") {
      : if (is_carried "spirits") {
         : clear_screen;
          : print "The volume fell open at the page concerning Haelstowne and its locality which evidently had been most frequently consulted. Several of the pages had corners turned over, and there were pencil annotations throughout. Arthur read:\n'...of most remarkable tales concerning the abandoned village of Halestown in the South West of the county. According to local custom, the habitants thereof lived long amongst the fairies, being obliged to do so by a pact struck between themselves and the Devil. It was held that, every seven years, the Devil demanded a tithe of the fairies, which being paid he would grant them dominion over the village for a period of the same, until the tithe was again due. A human soul was the currency in which this diabolical payment was transacted, and the villagers lived their lives in miserable apprehension lest themselves or their children should be taken for their part in this unspeakable bargain. The spell was broken when a wise man discovered the secret by which their evil magic could be turned against them and banished them whence they came, by means of witchcraft. Thus was ended the pact. But in their leaving the fairies wrought a terrible revenge, destroying the village and transforming to wild beasts the people thereof.\nMany of the habitants of the nether village hold the story to be true, and indeed it is attested that the older village of Haelstowne was deserted in the 15th century. Furthermore...'   " ;
      : print "After that the text became rather dull, so Arthur stopped reading." ;
          : press_any_key ;
          : redescribe;
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
   : if (original "noun1" =="practical"||original "noun1" =="techniques"||original "noun1" =="photography") {
      : if (is_carried "practical") {
         : clear_screen;
          : print "Arthur opened the book and began to read from the top of the page.\n'...precautions are taken, cyanide is a perfectly harmless chemical that may be handled quite freely.\nSAFELIGHTING\nOn no account should undeveloped photosensitive materials be exposed to ordinary 'white' light, which would ruin them by uncontrolled exposure - a costly and irreparable mistake. However, black and white orthochromatic film is insensitive to red wavelengths and so a red light source can safely be used to process films and prints in the darkroom.\n \nPRINTING\nPrinting from photographic film negatives is a straightforward process by which even the amateur, with practice and industry, may produce high quality pictures. There are two main techniques: contact printing and enlargement printing.";
      : press_any_key ;
      : clear_screen;
      
      : print "CONTACT PRINTING\nThis technique has not only the virtues of being relatively simple and requiring no special equipment, but also of producing detailed prints from large-format negatives (120 or 'Brownie' film). The basic process is as follows:\n1. A sheet of photographic paper is placed on the worksurface. \n2. The negatives are cut up and placed face-downwards upon the photographic sheet. \n3. A sheet of glass is placed atop both, to hold the negatives in place. \n4. The arrangement is exposed to light for the requisite time (see Fig.31(b).\n The negatives may then be removed and the exposed sheet developed in the usual way.'" ;
          : press_any_key ;
          : redescribe;
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
     : if (original "noun1" =="tattered"||original "noun1" =="remnant") {
      : if (is_carried "remnant") {
        
        : print "Arthur peered at the crabbed handwriting in faded brown ink on the ancient parchment and struggled to make any sense of it." ;
      : done ;
      
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
    : if (original "noun1" =="paperback"||original "noun1" =="dean"||original "noun1"=="misslefell") {
      : if (is_carried "paperback") {
         : print "Arthur opened the book and read:\n'Damaris threw herself into the bedroom and slammed the door, her bosom heaving and her long, dark hair hanging loose. She pressed an ear against the flimsy wood and heard the unmistakable tread of footsteps along the landing. The Dean was coming for her! What had he meant by 'be one with the circle'? Why, he was perfectly mad!\nShe raced to the dressing table and wrenched open the drawer. The pistol had gone! Curse Oliver and his selfish heroics; on account of him, they would both be eaten alive. The floorboard outside the door creaked; with lighting speed Damaris picked up the chair and wedged it beneath the door handle. At least that would keep him out for a while, but oh! She gasped as she saw...'\nIt was terribly exciting. Arthur closed the book, fearing that he might become so absorbed as to forget his purpose altogether." ;
           : done ;
      
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
      : if (original "noun1" =="herbal"||original "noun1" =="ada"||original "noun1"=="elderfield's") {
      : if (is_carried "herbal") {
           : print "The pages were wrinkled and the ink had washed away in many places - but the material on parchment at the end of the herbal had been written in an indelible ink which had survived immersion. It had been written in a crabbed hand and in unfamiliar, archaic English. Arthur struggled to make any sense of it. " ;
        : done ;
      
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
       : if (original "noun1" =="grimoire") {
      : if (is_carried "grimoire") {
          : print "Arthur looked at the two volumes of the reconstructed grimoire. The pages at the end of the herbal seemed to comprise some sort of spell or incantation, whereas the first pages of the tattered remnant seemed to be a list of ingredients. Arthur wasn't sure which he should read, the incantation or the ingredients." ;
         : done ;
         
      
      }
      : else {
         : print "But Arthur was not holding that volume." ;
         : done ;
         
      }
      
   }
   
   
   
   
   : if (noun1_is "book"||noun1_is "books") {
   : if (is_at "bell_loft") {
      : if (coffer_open||is_present "hymn_books") {
         : print "Arthur idly picked up a copy of Larkspittle's Golden Treasury of Hymns and leafed through it, sparking hazy memories of Sunday School." ;
         : done ;
         
      }
      
   }
     
   : if (is_at "study") {
: if (!is_carried "books_t") {
         : print "There was a whole library of books here in the study, but Arthur would have to select a specific volume before he could commence reading. " ;
    : done ;
         

    }
    }

 
   
        : disambiguate_s1 "carried";
      : if (s1()== "villages") {
: if (is_carried "villages") {
: clear_screen;

         : print "Arthur read:\n'A sprawling settlement of around 300 souls, the village of Nether Haelstowne is the descendant of the original Haelstowne that once stood on higher ground to the north east of the present village. The earlier settlement was abandoned in the early part of the 15th century for reasons unknown; nothing now remains save The Vicarage. Without the nucleus of a church around which to grow, the development of the lower village was rather haphazard, resulting in the present diffuse arrangement of buildings. Most of the dwellings are constructed of the local sandstone, showing features typical of...'" ;
         : print "There followed much detailed architectural description, of little interest to Arthur. He skipped down the page and read the following:" ;
         : print "'The name 'Haelstowne' is a toponymic curiosity. Parish records show that before the 18th century, the village was named 'Haelstow' and, if one reaches still further back, 'Aelfstow' and 'Aelstown' are recorded in deeds of the 14th and 15th centuries. The etymological roots of the name are in the Old English 'aelf', meaning an elf or sprite, and 'stow', meaning a place or locality; thus the original meaning may be rendered as 'Elf Place'. The familiar processes of corruption and convergence over several centuries have produced the homonymic 'Haelstowne' by which the extant village is now known.'  ";
         : press_any_key ;
         : redescribe;
         
      }
      : else {
         : print "But Arthur wasn't holding that." ;
           : done ;
      }
      
      }
      
   : else_if (s1()== "spirits") {
   : if (is_carried "spirits") {
   : clear_screen;
      : print "The volume fell open at the page concerning Haelstowne and its locality which evidently had been most frequently consulted. Several of the pages had corners turned over, and there were pencil annotations throughout. Arthur read:\n'...of most remarkable tales concerning the abandoned village of Halestown in the South West of the county. According to local custom, the habitants thereof lived long amongst the fairies, being obliged to do so by a pact struck between themselves and the Devil. It was held that, every seven years, the Devil demanded a tithe of the fairies, which being paid he would grant them dominion over the village for a period of the same, until the tithe was again due. A human soul was the currency in which this diabolical payment was transacted, and the villagers lived their lives in miserable apprehension lest themselves or their children should be taken for their part in this unspeakable bargain. The spell was broken when a wise man discovered the secret by which their evil magic could be turned against them and banished them whence they came, by means of witchcraft. Thus was ended the pact. But in their leaving the fairies wrought a terrible revenge, destroying the village and transforming to wild beasts the people thereof.\nMany of the habitants of the nether village hold the story to be true, and indeed it is attested that the older village of Haelstowne was deserted in the 15th century. Furthermore...'   " ;
      : print "After that the text became rather dull, so Arthur stopped reading." ;
          : press_any_key ;
          : redescribe;
          
           
   }
     : else {
         : print "But Arthur wasn't holding that." ;
         : done ;
         
      }
   }
   : else_if (s1()==  "practical") {
   : if (is_carried "practical") {
   : clear_screen;
      : print "Arthur opened the book and began to read from the top of the page.\n'...precautions are taken, cyanide is a perfectly harmless chemical that may be handled quite freely.\nSAFELIGHTING\nOn no account should undeveloped photosensitive materials be exposed to ordinary 'white' light, which would ruin them by uncontrolled exposure - a costly and irreparable mistake. However, black and white orthochromatic film is insensitive to red wavelengths and so a red light source can safely be used to process films and prints in the darkroom.\n \nPRINTING\nPrinting from photographic film negatives is a straightforward process by which even the amateur, with practice and industry, may produce high quality pictures. There are two main techniques: contact printing and enlargement printing.";
      : press_any_key ;
      : clear_screen;
      
      : print "CONTACT PRINTING\nThis technique has not only the virtues of being relatively simple and requiring no special equipment, but also of producing detailed prints from large-format negatives (120 or 'Brownie' film). The basic process is as follows:\n1. A sheet of photographic paper is placed on the worksurface. \n2. The negatives are cut up and placed face-downwards upon the photographic sheet. \n3. A sheet of glass is placed atop both, to hold the negatives in place. \n4. The arrangement is exposed to light for the requisite time (see Fig.31(b).\n The negatives may then be removed and the exposed sheet developed in the usual way.'" ;
      : press_any_key ;
      
      : redescribe;
      
   }
   : else {
         : print "But Arthur wasn't holding that." ;
         : done ;
         
      }
   
   }
   
   : else_if (s1()== "remnant") {
   : if (is_carried "remnant") {
  
        : print "Arthur peered at the crabbed handwriting in faded brown ink on the ancient parchment and struggled to make any sense of it." ;
      : done ;
      
   }
     : else {
         : print "But Arthur wasn't holding that." ;
           : done ;
      }
   }
    : else_if (s1()==  "paperback") {
    : if (is_carried "paperback") {
   
      : print "Arthur opened the book and read:\n'Damaris threw herself into the bedroom and slammed the door, her bosom heaving and her long, dark hair hanging loose. She pressed an ear against the flimsy wood and heard the unmistakable tread of footsteps along the landing. The Dean was coming for her! What had he meant by 'be one with the circle'? Why, he was perfectly mad!\nShe raced to the dressing table and wrenched open the drawer. The pistol had gone! Curse Oliver and his selfish heroics; on account of him, they would both be eaten alive. The floorboard outside the door creaked; with lighting speed Damaris picked up the chair and wedged it beneath the door handle. At least that would keep him out for a while, but oh! She gasped as she saw...'\nIt was terribly exciting. Arthur closed the book, fearing that he might become so absorbed as to forget his purpose altogether." ;
           : done ;
}
   : else {
         : print "But Arthur wasn't holding that." ;
           : done ;
      }
      
   }
  
 
   
    : else_if (s1()== "herbal") {
   : if (is_carried "herbal") {
   : print "The pages were wrinkled and the ink had washed away in many places - but the material on parchment at the end of the herbal had been written in an indelible ink which had survived immersion. It had been written in a crabbed hand and in unfamiliar, archaic English. Arthur struggled to make any sense of it. " ;
        : done ;
      
   }
   : else {
         : print "But Arthur wasn't holding that." ;
           : done ;
      }
   }
   : else_if (s1()==  "grimoire") {
      : if (is_carried "grimoire") {
      : print "Arthur looked at the two volumes of the reconstructed grimoire. The pages at the end of the herbal seemed to comprise some sort of spell or incantation, whereas the first pages of the tattered remnant seemed to be a list of ingredients. Arthur wasn't sure which he should read, the incantation or the ingredients." ;
         : done ;
         
      }
     : else {
         : print "But Arthur wasn't holding that." ;
           : done ;
      }
   }
      
       }  
   : else_if (noun1_is "incantation") {
   : if (is_carried "grimoire") {
      : clear_screen;
      : if (!has_read_incantation) {
         : print "The pages were wrinkled and the ink had washed away in many places - but the material on parchment at the end of the herbal had been written in an indelible ink that had survived immersion. Nevertheless, Arthur struggled to read the crabbed writing in faint brown ink on the yellowed parchment pages. He made out:";
      : print "'Waren the trees threy by threyn, fulle dressen bee...'" ;
      
      :print "but could read no further. Defeated, he closed the book, wondering how he could extract meaning from the ancient scribbles. But immediately he felt a compulsion to try again and when he looked at the page once more he found the words were plain and the language clearer, if a little archaic. The words rang in his head as though they were being spoken aloud by a voice he did not recognise.";
      : set_true "has_read_incantation" ;
      : press_any_key ;
      : clear_screen;
      
      }
      
     :print "He read:\n'Where the trees three by three, full dressed be, to command the faeries, I banish thee.\nSPELL FOR BANISHING\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nMAKETH THE SIGN OF IT: [[Here there was a little sketch of a pair of hands with fingers splayed]]\nSTIRRETH THE DRAUGHT: [[here was a circle with an arrow to the right, pointing downwards]]\nRECITETH THE SPELL:\nBy the sun that drew thee\nBy the power that rules thee\nUnmeet spirit begone from this place and return to thine own\nArazak, Akas, Astaroth,\nReok, Reok, Rekalizel!\n++++\nMAKETH THE SIGN OF IT: [[Here was a sketch of a hand cupping the side of a sphere]]\nSTIRRETH THE DRAUGHT: [[here was a circle with an arrow to the right, pointing upwards]]\nRECITETH THE SPELL:\nBy the moon that knows thee\nBy the light that shows thee\nUnmeet spirit begone from this place and return, return to thine own\nDarakal, Dreazor, Dimnuik,\nReok, Reok, Rekalizel!\n++++\nMAKETH THE SIGN OF IT: [[Here was a sketch of hands with the fingers pressed together, forming a triangle]]\nSTIRRETH THE DRAUGHT: [[here was a circle with an arrow to the right, pointing downwards]]\nRECITETH THE SPELL:\nBy the eye that sees thee\nBy the knowing that fears thee\nUnmeet spirit begone from this place and return, return, return to thine own\nForas, Fitleas, Forakoval,\nReok, Reok, Rekalizel!\n++++\nMAKETH THE SIGN OF IT: [[Here was a sketch of hands pressed together at the palms, the ends of the fingers curved outwards]]\nSTIRRETH THE DRAUGHT: [[here was a circle with an arrow to the right, pointing upwards]]\nRECITETH THE SPELL:\nBy the breath that blows thee\nBy the wind that sows thee\nUnmeet spirit begone from this place, begone forever!\nSitri, Seogath, Sistlil,\nReok, Reok, Rekalizel!" ;
     : press_any_key ;
     
      : redescribe;
      
   }
      : else {
         : print "But Arthur didn't have it." ;
           : done ;
      }
      }
   : else_if (noun1_is "ingredients") {
      : if (is_carried "grimoire") {
    : clear_screen;
    : if (!has_read_ingredients) {
        : print "Arthur looked at the crabbed handwriting, written in faded brown ink on the age-curled parchment pages and struggled to read it. He made out:\n 'On Mydsomer Eyen waren the trees threy by threyn...'\n and found that he could read no further. But just as he was about to give up he felt an impulse to try again and when he looked once more he found the writing clear and the language plainer, if still rather archaic. As he read, he heard the words echo inside his head in a voice not his own.";
        : set_true "has_read_ingredients" ;
        
    }
   
      : print "He read:\n" ;
         : print "'On Midsummer Eve, where the trees three by three, I maketh this brew to banish thee." ;
         : print "++++" ;
         
         :print "TAKETH ONE GALLON OF ALE AND TO IT ADD:";
         :print "Mystletowe";
         : print "Tadstole" ;
         : print "Blood of thyne own" ;
         : print "Ill words, or that which is called tittle-tattle" ;
         : print "TAKETH A HAZEL TWIGGE TO STIRRETH THE PROPER WAYE AND SAYETH THE RYME" ;
          : print "++++" ;
         : set_true "has_read_ingredients" ;
         : press_any_key ;
         : redescribe;
         
         
      }
       : else {
         : print "But Arthur didn't have it." ;
           : done ;
      }
   }
 
 

   : else_if (noun1_is "instructions") {
      : if (is_carried "instructions") {
      : clear_screen;
         : print "Arthur read:\n\'Haresnape & Balls 'Economic' Patented Developing system. A most economical and convenient way to develop photographic films. Simple to use, for the amateur and professional photographer alike. \n INSTRUCTIONS FOR USE:\n1. Unreel the finished film from the spool. \n2. Fill the supplied developing dish with the recommended film developing fluid. \n3. Place the undeveloped film in the dish.\n4. Place the Haresnape & Balls 'Economic' Patented Developing Weight in the dish so that it sits on top of the film. The feet of the weight will engage with the depressions in the base of the tray. \n5. Holding the film at either end, run the strip back and forth through the developer for the recommended time. The weight will ensure that the film remains immersed in the fluid during the development process.\n6. Once development is complete, pour away the developing fluid via the spout. The developed film should be washed in clean water to remove traces of developing fluid.\n7. To fix the developed negatives, fill the dish with the recommended film fixing fluid and repeat the process above, remembering to wash the film afterwards to remove traces of fixing fluid. \n8. Allow the negatives to dry naturally on a drying rack or hanging line.\n Provided these instructions are followed carefully, the apparatus will provide many years of economical and trouble-free use.'";
        : press_any_key ;
        : redescribe;
        
         
      }
       : else {
      : print "But Arthur didn't have it." ;
        : done ;
   }
   }
   : if (noun1_is "annotations") {
      : if (is_carried "spirits") {
         : print "They were notes written in pencil in a very small, cramped hand and occupying most of the margins in this section of the book. Arthur thought it hardly worth the bother of trying to decipher the tiny scribbles." ;
          : done ;
      }
      
   }
   
  
   : if (noun1_is "letter"&&is_carried "letter") {
      : print "It was unmistakably from the chief, and written in his distinctive telegrammatic style.\n'Dear Arthur\nHope all goes well in Haelstowne and not letting the villagers run rings around you. Strange folk about those parts and no mistake\nEnclosed more case notes, could be useful? Doubt it though. Just get on and find missing vicar and get back here as soon as can do. Stathings needs you.\nIf more will post or telegram if urgent.\nYours\nM.C.'\nA couple of pages of notes were appended to the letter, which Arthur scanned through, but they were too vague to be of any real use. The communique seemed more intended to remind Arthur not to waste too much time on the case than to impart new information." ;
      : done ;
      
   }
   : if (noun1_is "board"||noun1_is "information") {
      : if (is_at "wetland") {
      : clear_screen;
      
         : print "Arthur read:";
         :print  "'HAELSTOWNE WETLAND: EVIDENCE OF PREHISTORIC SETTLEMENT";
         : print "The piece of boggy ground before you is a mere fragment of the waterlogged landscape that covered this part of the Low Weald several thousand years ago." ;
         : print "Rich in fish and wildfowl, this environment would have provided a veritable bounty for the hunter-gatherers who roamed the area in prehistoric times and, later, for the small farming community for which the excavations of 1908-12 provided abundant evidence." ;
         : print "The remarkable timber walkway crossing the wetland, know as 'The Drywell Track', is originally of Bronze Age date c.1500 BC, with many subsequent phases of rebuilding.\n Several large caches of deliberately broken metal objects, mainly knives and daggers, have been uncovered along the length of the walkway. Such ritual deposition in watery places is a well attested oblative activity known from many British and European sites. It is seen most frequently near crossing places in boggy environments; from historically recorded examples, it seems to be associated with a belief in 'magical barriers' and the traversing thereof.'" ;
      : print "Beneath the writing was depicted a reconstruction of the site in Bronze Age times, and at the bottom of the panel was the legend 'Erected by the generous benefactors of the Haelstowne Historical Society, in honour of their president, D.P. Drywell MA Aberd, MSc, PhD Oxon, FRA, MWHS'" ;
      : press_any_key ;
    : redescribe;
    
      
      }
      
   }
   : if (noun1_is "tombstone"||noun1_is "headstone") {
      : if (is_at "graveyard_1"||is_at "graveyard_2") {
: print "The gravestones were all heavily weathered and smothered with lichen. Arthur could hardly make out the inscriptions on any of them." ;
: done ;

      }
      
   }
   
   : if (noun1_is "notice") {
      : if (is_at "darkroom") {
         : print "The notice said:\n\'RED LIGHT ONLY'" ;
      : done ;
      }
      : else_if (is_at "porch") {
         : examine "notice_1" ;
         : done ;
         
      }
      
   }
   : if (noun1_is "envelope"&&is_carried "envelope") {
      : print "It was addressed to Arthur in a large and untidy hand that he recognised immediately." ;
      
   }
   
   
    : else {
         : print "But Arthur didn't have it." ;
           : done ;
      }

  } 
  
   #READ end
  : match "examine annotations"  {
     : if (is_carried "spirits") {
        : print "They were notes written in pencil in a very small, cramped hand and occupying most of the margins in this section of the book. Arthur thought it hardly worth the bother of trying to decipher these tiny scribbles." ;
          : done ;
     }
     }
      
#OPEN start
: match "open _"  {

   : if (noun1_is "brownie") {
      : if (is_carried "box_brownie") {
       : if (!cameraopen) {
         : if (!cameraloaded) {
      : print "Arthur opened the flap at the rear of the camera and saw that the chamber was empty.";
          : set_true "cameraopen" ;
      }
      : else_if (framenumber>0&&framenumber<9) {
: if (is_at "darkroom"&&safelight&&!light_on) {
   : print "In the safety of the red light, Arthur opened the camera and saw the strip of film positioned ready for the next frame to be exposed. Having checked that all was in order, he closed the camera again." ;
   
}
:else{
      : print "But the film had not ended and Arthur did not want to ruin it by exposing it to the light." ;
      }
}
      : else_if (framenumber==0) {
   : print "Arthur opened the flap at the rear of the camera and saw the backing paper that preceded the start of the film proper." ;
   : set_true "cameraopen" ;
   }
   : else_if (framenumber==9) {
       : print "Arthur opened the camera, revealing the reel onto which the exposed film was safely wound." ;
       : set_true "cameraopen" ;

       }
   }
       
       : else {
   : print "But the camera was already open." ;
   
}
}
  : else {
          : print "But Arthur was not carrying the Box Brownie." ;
      }
      }
      
    
      
   : else_if (noun1_is "window") {
      : if (is_at "top_stairs") {
  : print "Arthur couldn't reach the window from there." ;
         
      }
      : else_if (is_at "recess") {
      : if (traptor==1) {
         : if (!window_open) {
         : if (!drywell) {
         : print "Arthur, with the warning voice of Mrs Taplow ringing in his ears and compelled by he knew not what, struggled with the stiff iron handle and eventually succeeded in opening the window. No sooner had he done so than a gust of wind took the casement and began to toy with it, causing it to swing back and forth before slamming it with a great crash against the outside wall. Arthur winced and peered anxiously at the window. Miraculously, the glass appeared still intact.  " ;
      : set_true "window_open" ;
      : press_any_key ;
      : clear_screen;
      : print "Arthur felt a dread fear as he heard a door open somewhere below and the unmistakable sound of footsteps approaching.";
      :press_any_key;
      : print "He heard someone ascending the steps and a moment later, Mrs Taplow's fingertips appeared on the ledge, followed shortly by the rest of Mrs Taplow. The housekeeper swung herself up and into the recess with the agility of a schoolboy climbing an apple tree. Barely pausing for breath, she pushed past Arthur and, scowling, began the arduous task of trying to shut the window. He could only watch, red-faced, as she clung to the window frame with one hand and leaned out into empty air to try and catch the swinging casement." ;
      : create "edna_taplow" ;
      : press_any_key ;
           : set_integer var = "taplow_window_counter"  value = "1" ;
      : redescribe;
      

     ;
      }
      : else {
         : print "Arthur felt that he had had enough of meddling with a difficult window for one day." ;
         : done ;
         
      }
      
         }
         : else {
            : print "But the window was already open." ;
            
         }
         
         
      }
       : else {
       : if (!daytime) {
       
             : print "Arthur decided that it would be unwise to annoy Mrs Taplow any further by meddling with the window again - especially at this time of night." ;
             : done ;
             
       }
       : else {
           : print "Arthur decided that it would be unwise to annoy Mrs Taplow any further by meddling with the window again." ;
           : done ;
           
       }
       
          
       }
               
      }
      : else_if (is_at "zone_vicarage_window") {
         : print "The windows were ancient and temperamental. Each required a special knack to open and close, the arcane knowledge of which had been bequeathed to Mrs Taplow by her predecessors. Arthur, not daring to tread in those footsteps, decided to leave well alone." ;
      }
      
      : else_if (is_at "zone_window") {
      : if (is_at "car_1") {
      : print "Arthur wound down the window and then wound it up again, a little delighted at the mechanism as he always was." ;
       }
         : else {
            : print "Arthur felt he had more pressing things to do." ;
            
         }
         
     
      
        
      }
      : else {
         : print "But there was no window for Arthur to open." ;
      }
   }
   : if (noun1_is "packet"){
   :if (is_carried "packet") {
      : if (is_at "darkroom") {
      : if (is_present "safelight"&&!light_on&&!is_present "match_1") {
      : if (!packet_open) {
         : print "Arthur opened the packet of photographic paper. He saw sheets inside." ;
         : set_true "packet_open";
         }
         : else {
            : print "But the packet was already open." ;
         }
          }
          : else {
             : print "But Arthur did not want to ruin the sheets of photo-sensitive paper by exposing them to ordinary light." ;
             
          }
          
      }
      : else_if (is_at "cellar_passage"||is_at "cellar_room"||is_at "coal_cellar") {
            : print "Arthur didn't see the point in opening the packet of photographic paper down there. A darkroom was the only appropriate place." ;
      }
      
      : else {
         : print "A darkroom seemed the only appropriate place to open the packet of light-sensitive paper." ;
         
      }
      }
      : else {
   : print "But Arthur was not carrying that." ;
   
}
      
      
   }
   : if (noun1_is "wardrobe" ) {
   : if (is_present "wardrobe") {
      : if (!wardrobe_open) {
         : print "Arthur opened the wardrobe." ;
         : set_true "wardrobe_open" ;
         : create "corner" ;
         
         : set_string var = "wardrobe_description"  text = "a wardrobe (open)" ;
         : if (has_not_created "clothes") {
            : print "Arthur noticed some clothes in the wardrobe." ;
         }
         : create "clothes" ;
         : press_any_key ;
         : redescribe;
         
      }
      : else {
         : print "But the wardrobe was already open." ;
         
      }
        }
   
      
   }
   : if (noun1_is "frame"||noun1_is "lid") {
      : if (is_present "frame") {
         : if (!frame_open) {
                 :set_true "frame_open";
                 : set_string var = "cold_frame_description"  text = "a cold frame (open)" ;
                 
            : print "Arthur opened the cold frame." ;
            : if (gardening_gauntlets_description=="a pair of gardening gauntlets (inside the cold frame)") {
            
          : if (has_not_created "gardening_gauntlets") {
             : create "gardening_gauntlets";
             : print "There was a pair of gardening gauntlets inside." ;
          }
            }
            
            : else {
               : print "There was nothing inside." ;
            }
    : press_any_key ;
    : redescribe;
         }
         : else {
            : print "But the cold frame was already open." ;
         }
      }
   }
   : if (noun1_is "matchbox") {
      : if (is_carried "matchbox") {
       : if (!matchboxopen) {
          : print "Arthur opened the matchbox. " ;
         
                : append "It contained some matches." ;
   
              : set_string var = "matchbox_description"  text = "an open matchbox (containing some matches)" ;
          
          :set_true "matchboxopen";
       }
         : else {
            : print "But the matchbox was already open." ;
            
         }
         
      }
      
   }
: if (noun1_is "coffer") {
: if (is_at "bell_loft") {
   : if (!coffer_open) {
      : print "Arthur opened the coffer." ;
      : set_string var = "coffer_description"  text = "a coffer (open)" ;
      
      : if (hymn_books_in_coffer) {
         : print "Some hymn books were inside." ;
         : create "hymn_books" ;
      }
         : set_true "coffer_open" ;
          : press_any_key ;
          : redescribe;
          
   }
   : else {
      : print "But the coffer was already open." ;
      
   }
   }
}
: if (noun1_is "cupboard") {
: if (is_present "cupboard_1") {
   : if (!panel_cupboard_open) {
      : print "Arthur opened the concealed cupboard." ;
      : set_string var = "cupboard1_description"  text = "a concealed cupboard (open)" ;
         : print "Some tools were inside." ;
         : create "tools" ;
         : if (key_in_cupboard) {
            : print "There was a key inside." ;
            : create "iron_key" ;
         }
         : set_true "panel_cupboard_open" ;
          : press_any_key ;
          : redescribe;
   }
   : else {
      : print "But the cupboard was already open." ;
      
   }
     
}

}
: if (noun1_is "trunk") {
   : if (is_present "trunk") {
      : if (trunk_open) {
         : print "But the trunk was already open." ;
      }
      : else_if (trunk_locked) {
         : print "Arthur tried to open the trunk, but it was securely locked." ;
         : done ;
         
      }
      : else {
         : print "Arthur opened the trunk." ;
         : set_true "trunk_open" ;
         
         : if (nail_description=="a horseshoe nail (in the trunk)") {
            : print "There was a lot of clutter and a horseshoe nail inside." ;
: create "horseshoe_nail" ;
            }
         : else {
            : print "There was a lot of clutter inside." ;
         }
         : create "clutter" ;
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   
}
: if (noun1_is "door") {
   : if (is_at "garden_path") {
      : if (is_present "ottoline_elderfield") {
         : print "The door was already open and what was more, Ottoline Elderfield was standing in the open doorway." ;
         : done ;
         
      }
      :else {
      : print "Arthur was not in the habit of opening the doorways of private residences without invitation." ;
      : done ;
      
      }
   }
   : else_if (is_at "outside_poachers"||is_at "garden_path"||is_at "outside_Thurgoods") {
       : print "Arthur was not in the habit of opening the doorways of private residences without invitation." ;
       : done ;
       
   }
   : else_if (traptor==4&&tea_counter==6) {
      : if (is_at "hallway_3") {
       : print "Arthur did not want to usurp Mrs Taplow's authority as keeper of the house by presuming to open the door to visitors. She resented his presence enough as things stood." ;
       : done ;
       
   }
   : else_if (is_at "hallway_2") {
      : print "Arthur thought about admitting the visitor at the back door, but then realised that the knock had come from the front." ;
      : done ;
      
   }
   }
   
   
   :else {
   : print "In the ordinary course of things, if a door was not locked then Arthur would automatically open and close it without giving it a second thought." ;
   : done ;
   
   }
}
: if (noun1_is "cage"&&is_present "crow"&&crow_description=="a huge black crow (in a cage)") {
: print "Arthur's curiosity overcame his caution for just a moment, as he made to open the door of the cage...but then the deafening screeching and the flapping of wings, not to mention the flashing of a sharp beak and talons, persuaded Arthur that discretion was the better part of valour and he withdrew rapidly." ;
: done ;

}
: if (noun1_is "case") {
   : if (is_carried "spectacles_case"&&case_open||is_carried "spectacles_case_1"&&case1_open) {
         : print "But the spectacles case was already open." ;
         : done ;
         
         }
    : if (is_carried "spectacles_case") {
         : print "Arthur opened the spectacles case." ;
         : set_true "case_open" ;
         : set_string var = "case_description"  text = "a spectacles case (open)" ;
         
         : if (specs_in_case) {
            : print "It contained a pair of pince-nez." ;
            : set_string var = "case_description"  text = "a spectacles case (open, containing a pair of pince-nez)" ;
         }
         : else {
            : print "It was empty." ;
            
         }
         
          }
          
            : else_if (is_carried "spectacles_case_1") {
      : if (!is_at "zone_dark"&&!is_at "chapel") {
       : if (endgame) {
       : if (is_at "DMV_2") {
       : if (has_not_created "jeremiah_peldash") {
          : if (countdown_horses==0) {
           : print "Arthur opened the spectacles case..." ;
          : press_any_key ;
          : clear_screen;
          : set_true "case1_open" ;
          
          : print "Immediately an impossibly bright, white light flooded out and lit up the entire square." ;
         
          : print "The horses screamed and reared, the riders threw their arms across their eyes and battled to control their mounts, and the Faery Queen shrieked a terrible oath as Peldash was thrown from his milk-white steed onto the ground. " ;
          : print "" ;
          
          : create "jeremiah_peldash" ;
          : set_false "ottoline_follow" ;
          
          : set_integer var = "countdown_horses"  value = "-1" ;
          
          : press_any_key ;
          : redescribe;
          }
          : else {
             : print "Arthur heard a quiet voice close by him say,\"The time must be right.\" But when he turned, there was nobody there. " ;
          }
        }
        : else {
          : print "Arthur opened the spectacles case and the area immediately around him was flooded with an intense, cold light." ;
            : set_true "case1_open" ;
            : set_string var = "case_description"  text = "a spectacles case (open, containing a horseshoe nail (glowing with an unearthly light))" ;
         : press_any_key ;
         : redescribe;
           
        }
        
          }
          
                : else {
          : print "Arthur heard a quiet voice close by him say,\"The place must be right.\" But when he turned, there was nobody there.";
       }
         }
       : else {
      : print "Arthur didn't think it would be wise to open the case here. The horseshoe nail was glowing so brightly that it would be bound to attract attention, of what sort Arthur didn't care to think about too closely." ;
            : done ;
       }
           }
         : else {
            : print "Arthur opened the spectacles case and the area immediately around him was flooded with an intense, cold light." ;
            : set_true "case1_open" ;
            : set_string var = "case_description"  text = "a spectacles case (open, containing a horseshoe nail (glowing with an unearthly light))" ;
         : press_any_key ;
         : redescribe;
         
            
         }
      
               
     
       
   }
 : else {
    : print "But Arthur did not have that." ;
    
 }
 
   
}
: if (noun1_is "box") {
   : if (is_present "cardboard_box") {
      : print "Arthur had no wish to disturb the injured rabbit before he could get it to the vet's." ;
   }
}
         
     : if (noun1_is "casket") {
   : if (is_present "casket") {
      : if (casket_open) {
         : print "But the casket was already open." ;
      }
      : else {
         : print "Arthur opened the small wooden casket." ;
         : set_true "casket_open" ;
: if (book_description=="a tattered book (in the small wooden casket)") {
       : create "remnant" ;
       : create "bones" ;
       : print "Inside he found some bones and a tattered portion of a book." ;
       : press_any_key ;
: redescribe;
}
         : create "bones" ;
                  : print "Inside he found some bones." ;

: press_any_key ;
: redescribe;

      }
      
   
   }
}
: if (noun1_is "piano"||noun1_is "lid") {
   : if (is_present "piano") {
      : if (piano_open) {
         : print "But the piano was already open." ;
      }
      : else {
         : print "Arthur opened the lid of the piano." ;
         : set_true "piano_open" ;
         : if (has_not_created "tuning_hammer") {
         : create "tuning_hammer" ;
                  : print "He peered inside and spotted a tuning hammer, which he removed from the dusty depths." ;
      : pocket "tuning_hammer" ;
         }
         }

      }
      
   }
: if (noun1_is "bottle") {
 : if (is_present "witch_bottle") {
    : if (!witch_bottle_open) {
      : print "Arthur pulled the bung out of the witch bottle." ;
      : if (!witch_bottle_empty) {
         : print "A noxious smell emerged from within.";
      }
               : create "bung" target = "inventory" ;
               : set_true "witch_bottle_open" ;
               
    }
   :else {
   :print "But the witch bottle was already open.";
      }
 }
   
}
: if (noun1_is "keg") {
   : if (is_present "keg") {
      : if (!beer_keg_open) {
      : print "Arthur fiddled around with the keg and eventually found a way to open it by applying force to one of the hoops and pushing the edge of the wooden lid that sealed one end. The lid popped up and a powerful, yeasty smell of ale wafted from inside. Arthur removed the lid altogether and found himself the proud possessor of an open beer keg about one quarter full of ale." ;
         : set_true "beer_keg_open" ;
         : set_string var = "keg_description"  text = "an open beer keg" ;
         : pocket "lid" ;
         : press_any_key ;
         : redescribe;
         
      }
   
   : else {
   : print "But the beer keg had already been opened." ;
   
   }
   
   }
   
}
: if (noun1_is "range"&&is_at "kitchen") {
 : print "Arthur knew better than to start meddling with the kitchen range." ;
   
}
: if (noun1_is "gate") {
   : if (is_at "drive"||is_at "lane_1") {
      : print "Arthur didn't think it was worth tackling the heavy and rusty old gates when there was a gap at the side of the gate post by which one could pass between the driveway and the lane." ;
      
   }
   
}
: if (noun1_is "envelope"||noun1_is "letter") {
   : if (is_carried "envelope") {
      : if (envelope_open) {
         : print "But the envelope had already been opened." ;
         : done ;
      }
      : if (is_carried "dagger") {
         : print "Arthur slit the envelope with the dagger, thinking as he did so that the makers of the ancient artefact must surely have intended a higher purpose for it that the mundane opening of letters.\n There was a letter inside." ;
         : set_true "envelope_open" ;
      }
      : else {
         : print "Arthur was the fastidious sort who preferred to slice open envelopes with a suitable blade." ;
         
      }
      
   }
    : else {
       : print "But Arthur didn't have it." ;
       
    }
}
: if (noun1_is "barrel") {
   : if (is_present "barrels") {
      : print "Arthur looked at the heavy old barrels and concluded that they were most definitely the sorts of things that were not designed to be easily opened." ;
      
   }
   
}


   
   
  
   
}
# OPEN end

#CLOSE start
: match "close _"  {

: if (noun1_is "camera") {
: if (cameraopen) {
   : print "Arthur closed the flap at the back of the camera." ;
  : set_false "cameraopen" ;
}
: else {
   : print "But the camera was already closed." ;
}
}
: if (noun1_is "packet") {
: if (is_carried "packet") {
   : if (packet_open) {
      : print "Arthur closed the packet." ;
      : set_false "packet_open" ;
      
   }
   :else {
   : print "But the packet was already closed.";
}
}
: else {
   : print "But Arthur was not carrying that." ;
   
}

}
: if (noun1_is "window") {
   : if (is_at "top_stairs"&&window_open) {
      : print "But Arthur could not reach the window from there." ;
      
   }
   : else_if (is_at "recess") {
      : if (window_open) {
         : print "Arthur looked at Mrs Taplow leaning out of the window above the ground several sickening feet below and decided it would be best not to disturb her equilibrium by attempting to shut the window." ;
      
      }
      : else {
         : print "But the window was already closed." ;
         
      }
      
      
   }
       
      : else_if (is_at "zone_window") {
      : if (!is_at "car_1") {
          : print "The windows were ancient and temperamental. Each required a special knack to open and close, the arcane knowledge of which had been bequeathed to Mrs Taplow by her predecessors. Arthur, not daring to tread in those footsteps, decided to leave well alone." ;
      }
      : else {
         : print "Arthur wound down the window and then wound it up again, a little delighted at the mechanism as he always was." ;
         
      }
      
        
      }
      : else {
         : print "But there was no window for Arthur to close." ;
   }
   
}
   : if (noun1_is "wardrobe" ) {
      : if (wardrobe_open) {
         : print "Arthur closed the wardrobe." ;
         : set_false "wardrobe_open" ;
         : destroy "corner" ;
         
         : set_string var = "wardrobe_description"  text = "a wardrobe (closed)" ;
         : destroy "clothes" ;
        : press_any_key ;
        : redescribe;
        
         
      }
      : else {
         : print "But the wardrobe was already closed." ;
         
      }
      
      
   }

     : if (noun1_is "frame"||noun1_is "lid") {
      : if (is_present "frame") {
         : if (frame_open) {
            : print "Arthur closed the cold frame." ;
            : set_string var = "cold_frame_description"  text = "a cold frame (closed)" ;
            
      : set_false "frame_open" ;
      : press_any_key ;
      : redescribe;
      
    
      
         }
         : else {
            : print "But the cold frame was already closed." ;
            : done ;
            
         }
         
         
      }
      
   }
    : if (noun1_is "matchbox") {
      : if (is_carried "matchbox") {
       : if (matchboxopen) {
          : print "Arthur closed the matchbox." ;
             : set_string var = "matchbox_description"  text = "a matchbox" ;
          :set_false "matchboxopen";
       }
       : else {
          : print "But the matchbox was already closed." ;
          
       }
         
      }
      
   }
   : if (noun1_is "coffer") {
   : if (is_at "bell_loft") {
   : if (coffer_open) {
      : print "Arthur closed the coffer";
       : set_string var = "coffer_description"  text = "a coffer (closed)" ;
      : if (hymn_books_in_coffer) {
      : destroy "hymn_books" ;
      }
      : set_false "coffer_open" ;
      
      : press_any_key ;
      : redescribe;
      
   }
   : else {
      : print "But the coffer was already closed." ;
   }
     }
}
: if (noun1_is "cupboard") {
: if (is_present "cupboard_1") {
: if (panel_cupboard_open) {
      : print "Arthur closed the cupboard";
       : set_string var = "cupboard1_description"  text = "a concealed cupboard (closed)" ;
       : destroy "tools" ;
       
      : if (key_in_cupboard) {
      : destroy "iron_key" ;
      }
      : set_false "panel_cupboard_open" ;
      : press_any_key ;
      : redescribe;
      }
         : else {
      : print "But the cupboard was already closed." ;
    : done ;
}
      }
      }
   : if (noun1_is "trunk") {
      : if (is_present "trunk") {
         : if (trunk_open) {
            : print "Arthur closed the trunk." ;
            : if (nail_description =="a horseshoe nail (in the trunk)") {
               : destroy "horseshoe_nail" ;
            }
            : destroy "clutter" ;
         : set_false "trunk_open" ;
            : press_any_key ;
            : redescribe;
            
         }
         : else {
            : print "But the trunk was already closed." ;
             : done ;
             
         }
         
      }
      
   }
   : if (noun1_is "case") {
   : if (is_carried "spectacles_case"&&!case_open||is_carried "spectacles_case_1"&&!case1_open) {
         : print "But the spectacles case was already closed." ;
  :done;
  }
      : if (is_carried "spectacles_case") {
         : print "Arthur closed the spectacles case." ;
         : if (specs_in_case) {
            : destroy "pince_nez" ;
         }
          : set_false "case_open" ;
            : set_string var = "case_description"  text = "a spectacles case (closed)" ;
      }
      : else_if (is_carried "spectacles_case_1") {
         : print "Arthur closed the spectacles case, shutting off the blinding light." ;
         : set_false "case1_open" ;
         : set_string var = "case_description"  text = "a spectacles case (closed)" ;
         
         : press_any_key ;
         : redescribe;
         
      }
      
   }
   : if (noun1_is "piano"||noun1_is "lid") {
   : if (is_present "piano") {
      : if (!piano_open) {
         : print "But the piano was already closed." ;
      }
      : else {
         : print "Arthur closed the lid of the piano." ;
         : set_false "piano_open" ;
         
         }

      }
      
   }
    : if (noun1_is "casket") {
   : if (is_present "casket") {
      : if (!casket_open) {
         : print "But the casket was already closed." ;
      }
      : else {
         : print "Arthur closed the small wooden casket." ;
         : if (book_description=="a tattered book (in the small wooden casket)") {
            : destroy "remnant" ;
         }
         : destroy "bones" ;
        
         : set_false "casket_open" ;
         : press_any_key ;
         : redescribe;
         
         }

      }
      
   }
 : if (noun1_is "bottle") {
    : if (is_present "witch_bottle") {
       : if (witch_bottle_open) {
          : if (is_carried "bung") {
             : print "Arthur closed the witch bottle with the bung." ;
             : set_false "witch_bottle_open" ;
             : destroy "bung" ;
             
          }
          : else {
             : print "But Arthur wasn't carrying anything that he could use to close the bottle." ;
             
          }
          
       }
       : else {
          : print "But the witch bottle was already closed." ;
          
       }
       
    }
    
 }
 : if (noun1_is "keg") {
    : if (beer_keg_open) {
       : print "Arthur looked doubtfully at the opened end of the keg and concluded that it was the sort of thing that was easier opened than closed, unless one happened to be a cooper." ;
       
    }
    : else {
       : print "But the keg was already closed." ;
       
    }
    
 }
 : if (noun1_is "gate") {
 : if (is_at "drive"||is_at "lane_1") {
     : print "Arthur didn't think it was worth tackling the heavy and rusty old gates when there was a gap at the side of the gate post by which one could pass between the driveway and the lane." ;
         
 }
 }
 : if (noun1_is "door") {
 : if (is_at "outside_Thurgoods"||is_at "garden_path"||is_at "outside_poachers"||is_at "garden_path") {
      : print "Arthur wasn't in the habit of attempting to open people's front doors, especially the doors of those he hardly knew. He would have preferred to knock and wait for an answer." ;
      : done ;
      
 }
 
    : print "In the ordinary course of things, Arthur would automatically open and close doors without giving it a second thought.";
 }
 : if (noun1_is "envelope") {
    : if (is_carried "envelope") {
       : if (envelope_open) {
         : print "The envelope had been slit open and was no longer closeable." ;
          
       }
       : else {
          : print "But the letter was already closed." ;
          
       }
       
    }
    : else {
       : print "But Arthur didn't have it." ;
       : done ;
       
    }
    
 }
 
}
#CLOSE end

#LIGHT start

: match "light _"  {
   
:if (noun1_is "match") {
: if (is_carried "match_1") {
   : print "But Arthur was already holding a burning match. He didn't need another." ;
   : done ;
}
: if (!is_carried "match") {
   : if (is_carried "matchbox") {
   : if (!matchboxopen) {
      : print "Arthur opened the matchbox." ;
      : set_true "matchboxopen" ;
      
   }
      : print "Arthur took a match from the box." ;
      : pocket "match" ;
   }
   : else {
      : print "But Arthur did not have a match." ;
      : done ;
      
   }
}

   : if (is_at "darkroom") {
     : gosub "photosensitive" ;  
   }
   : if (is_carried "matchbox") {
      : print "Arthur struck the match against the box and it flared immediately." ;
      : if (is_dark) {
         : print "The place was lit up; shadows danced wildly in the guttering light of the match flame. " ;
         : if (is_at "darkroom") {
          
         }
         
  
    
         
      }
      
      
   }
   : else {
      : print "Lacking anything to strike the match against, Arthur simply flicked it with his thumbnail and it burst into flame." ;
   }
   
   : swap o1 = "match"  o2 = "match_1" ;
   
      : set_true "matchlit" ; 
      : press_any_key ;
      : redescribe;
      

 
   
   }
   : else_if (noun1_is "candles"||noun1_is "candle") {
     : if (is_present "holder_1") {
            : print "But the candle was already lit." ;
            : done ;
      }
   : if (is_present "holder"&&candleinholder) {
      : if (is_carried "match_1") {
            : if (vase_on_candle) {
               : print "Arthur lifted the vase off the holder." ;
               : set_string var = "vase1_description"  text = "a broken vase" ;
               : set_string var = "vase_description"  text = "a vase" ;
               
               : set_false "vase_on_candle" ;
            }
            : print "Arthur lit the candle." ;
          : swap o1 = "holder"  o2 = "holder_1" ;
          : done ;
          
            }
              : else {
      : print "But Arthur had nothing to light it with." ;
      : done ;
         }
   }
         : if (is_present "candle") {
         :if (is_present "holder"){
             : print "Arthur felt that it would be sensible to put the candle in the holder before he lit it." ;
               : done ;
         }
   : else {
      : print "But the stub of candle was unstable and obstinately refused to stay upright. Arthur thought it unwise to light it unless he could find some way to fix it in place." ;
            : done ;
   }
              
   }
 
       : if (is_at "chapel") {
           : if (!is_worn "robes") {
                  : print "Arthur tried to approach the altar, but he was prevented from doing so. It was as though something emanating from the altar was negating his will to move. Under its influence, he found that he couldn't take another step towards it however much he wanted to." ;
                  : done ;
                  
               }
               : else {
                  : print "Arthur had an intuition that it would be best to leave them alone." ;
                  
               }
       
    }
 
    : else {
       : print "But Arthur couldn't see that anywhere." ;
       
    }
    

    }
    
    : else_if (noun1_is "fire") {
:if (is_at "study"||is_at "dining_room"||is_at "bedroom_1"||is_at "peldash_room"||is_at "drawing_room"||is_at "pub"||is_at "nevernear_cottage"||is_at "poachers_house")
{

: print "Arthur felt it would be rather presumptuous to start lighting a fire in someone else's fireplace." ;
: done ;

    }
    }
    
   }


# LIGHT end

#BREAK start
: match "break_"  {
   : if (noun1_is "vase") {
: if (is_carried "vase") {
: if (has_not_created "base") {
   : print "The wanton damage of another's property was not a thing that Arthur would ordinarily countenance, but on this occasion it did seem, somehow, necessary. He rapped the base of the vase sharply with his knuckles and it promptly detached from the body and clattered to the floor." ;
   : swap o1 = "vase"  o2 = "vase_1" ;
   : create "base" ;
   : if (vase_description=="a vase (containing a bouquet of dried flowers)") {
      : print "The bunch of dried flowers fell from the broken vase, scattering crisp petals across the floor." ;
      : create "bouquet_flowers" ;
      
   }
   
}
}
: else_if (is_carried "vase_1"){
      : print "Arthur looked at the broken object and considered that he had already caused enough damage." ;
      
   }


   }
   : else_if (noun1_is "dagger") {
      : print "Arthur broke the dagger in two across his knee and immediately felt terrible at committing such a blatant act of vandalism." ;
   : swap o1 = "dagger"  o2 = "broken_dagger" ;
   
   }

   : else_if (noun1_is "window") {
      : if (is_at "zone_window"||is_at "zone_vicarage_window") {
         : print "Arthur had not so far taken leave of his senses as to start wantonly breaking windows." ;
         
      }
      : else {
         : print "But there was no window to break." ;
         
      }
      
      
   }
   : else {
      : print "The arbitrary breaking of things was hardly fitting behaviour for a police officer." ;
      
   }
   
   
}
#BREAK end

#REPAIR start
: match "repair _"  {
: if (noun1_is "vase") {
   : if (is_carried "vase_1") {
   : print "Arthur had no idea how to repair the damage that he had wrought." ;
   
   }
   : else {
      : print "But Arthur was not carrying a broken vase." ;
         
}

   }
   : if (noun1_is "car") {
      : if (is_present "car") {
      : if (tried_engine) {
         : print "Arthur knew his limitations. He hadn't the faintest idea about how to repair the Austin and precisely because he loved it so much, he wouldn't dare to try. Topping up the oil and the occasional emergency wheel change was really the extent of his abilities in that regard. " ;
         
      }
      
      }
      
   }
   : if (noun1_is "bicycle") {
      : if (is_present "bicycle"||hasbike) {
         : if (!bikefixed) {
            : print "Arthur knew his limitations. He wasn't at all confident that by attempting to repair the bicycle himself he might not render it even more broken that it was already." ;
            : done ;
            
         }
         : else {
            : print "But Mr Thurgood had already done a splendid job of fixing the bicycle. It was now in fine working order." ;
            
         }
      }
      : else {
         : print "But Arthur had no bicycle." ;
         : done ;
         
      }
      
   }
   
   
}
#REPAIR end

#ASK start



: match "ask _"  {

: if (is_at "on_steps"||is_at "on_chair"||is_at "on_the_table"||is_at "on_monument") {
   : print "Arthur would have felt a bit silly talking to anyone while he was up there." ;
   : done ;
   
}
: if (preposition_is "about") {
   : print "(Arthur didn't need to ASK [[characters]] ABOUT anything but instead could simply ASK [[CHARACTER]] and they would respond according to the place and time.)" ;
   : done ;
   
}
: if (preposition_is "for") {
    : print "(Arthur didn't need to ASK [[characters]] FOR anything but instead could simply ASK [[CHARACTER]] and they would respond according to the place and time.)" ;
   : done ;
}


   : if (noun1_is "sidney") {
   : if (is_present "thurgood") {
  
     
      : if (!thurgood_bike) {
      : if (is_present "bicycle"||hasbike) {
         : print "Arthur showed the dilapidated bicycle to Mr Thurgood.\n\"I wonder, Mr Thurgood, if you would happen to know anything about bicycles? I found this one in the graveyard, beneath some ivy - goodness know how long it's been there - and, well, mechanical things are not completely, ah...\" he tailed off limply, rather embarrassed at admitting to a lack of competence. Thurgood, embarrased in turn, squatted down and peered at the bicycle.\n\"Nothing there that can't be easily mended, Mr Mapple,\" he mumbled from beneath his cap. \"A new chain and that there wheel straightened out and she'll be right as ninepence.\"\n He stood, a little unsteadily, and without another word took the bicycle and disappeared in the direction of the cottage." ;
         : create "thurgood" target = "outbuilding" ;
         : destroy "bicycle" ;
         : set_false "hasbike" ;
         : set_integer var = "handy_counter"  value = "1" ;
      : set_true "thurgood_bike" ;
      : done ;
      }
       }
       : if (tried_engine) {
         : if (!thurgood_car) {
         : if (is_present "lawnmower") {
            : print "\"Mr Thurgood!\" cried Arthur, rather desperately, \"My car! Do you known what's happened to it?\"\nMr Thurgood scratched his scalp through his cap. \"I reckon as you'd better tell me, Mr Mapple\"\n\"It's been, well - interfered with. It won't start at all! Do you know anything about motor vehicles?\" Arthur looked doubtfully at the disassembled pieces of the petrol mower and Mr Thurgood's oily hands and hoped the man might be as adept at putting things back together as he was at taking them apart.\n\"I don't know as I do, Mr Mapple. But I can have a look at it when I've finished with the potting.\"\nArthur felt a distinct sinking feeling and wondered if he'd ever see the Austin Seven on the road again. " ;
         }
         : else_if (has_visited "garden") {
            : print "\"Mr Thurgood!\" cried Arthur, rather desperately, \"My car! Do you known what's happened to it?\"\nMr Thurgood scratched his scalp through his cap. \"I reckon as you'd better tell me, Mr Mapple\"\n\"It's been, well - interfered with. It won't start at all! Do you know anything about motor vehicles?\" Arthur remembered the disassembled pieces of the petrol mower and looked at Mr Thurgood's oily hands, hoping the man might be as adept at putting things back together as he was at taking them apart.\n\"I don't know as I do, Mr Mapple. But I can have a look at it when I've finished with the potting.\"\nArthur felt a distinct sinking feeling and wondered if he'd ever see the Austin Seven on the road again. " ;
         }
         : else {
            : print "\"Mr Thurgood!\" cried Arthur, rather desperately, \"My car! Do you known what's happened to it?\"\nMr Thurgood scratched his scalp through his cap. \"I reckon as you'd better tell me, Mr Mapple\"\n\"It's been, well - interfered with. It won't start at all! Do you know anything about motor vehicles?\" Arthur looked at Mr Thurgood's oily hands and hoped they were evidence of a knack with mechanical things.\n\"I don't know as I do, Mr Mapple. But I can have a look at it when I've finished with the potting.\"\nArthur felt a distinct sinking feeling and wondered if he'd ever see the Austin Seven on the road again. " ;
         }
         
       
       : set_true "thurgood_car" ;
       : done ;
         }
      }
       : if (thurgood_ask_counter==0) {
       : clear_screen;
       
      : print "\"Mr Thurgood, could you tell me where you were the night that Reverend Peldash disappeared?\" asked Arthur." ;
   : press_any_key ;
   : print "\"I would have been at the Settle, Mr Mapple. Lighting the Beltane fire.\" He meant the mound a few miles to the south of the village, known as The Devil's Settle.\n\"That's an old custom around these parts, I believe.\"\n\"That it is, Mr Mapple.\" He didn't seem minded to elaborate, so Arthur pushed on." ;
   : press_any_key ;
     : print "\"And afterwards? Were you there all evening?\"\n\"No, Mr Mapple. After we'd done with the lighting we went back to The Myrour for a few. There's always a celebration on Beltane night.\"\n\"I see. And what time did you come back here?\"" ;
   : press_any_key ;
     : print "\"T'would have been after midnight by the time I'd cycled back from the village. Terrible storm there was brewing, I remember that. Came out of nowhere and broke just as I came inside. Thunder I've never heard the like of, like the sky was cracking clean across. I...\" Mr Thurgood's face became distant for a moment, before adopting its usual, closed expression.\n\"Yes?\" prompted Arthur, encouragingly. He felt as though the gardener had more to say." ;
   : press_any_key ;
     : print "\"Nothing else, Mr Mapple. I went to bed and didn't wake till morn. I'd...well, I'd had quite a few to drink you see, it being a special occasion and all...\" He looked rather embarrassed to admit it, so Arthur didn't pursue.\n\"Thank you, Mr Thurgood. That is most helpful.\"" ;
   : press_any_key ;
         : increment "thurgood_ask_counter" ;
   : redescribe;
   
      
      }
      : if (is_at "garden_4") {
         : print "Arthur greeted Mr Thurgood, who avoided his gaze.\n\"Is anything wrong?\" Asked Arthur.\n\"Not that I knows about, Mr Mapple,\" the gardener mumbled from beneath his cap. Arthur wondered whether Thurgood had been hearing silly rumours about him as well. Perhaps he had stopped off at the pump on his way back from the pub? He seemed to spend a lot of time in the Myrour.\n\"Things is getting out of control.\" Arthur heard Mr Thurgood say under his breath.\n\"What's that, Mr Thurgood?\" enquired Arthur. But the gardener would say no more. He finished what he was doing, nodded a brief farewell to Arthur, and moved away." ;
         : destroy "thurgood" ;
         : press_any_key ;
         : redescribe;
         
      }
      
       : cycle key = "thurgood_events" predictable_order = "false" skip_interval = "0" max_loops = "1" {
            : print "\"Did Reverend Peldash have a motor car?\" asked Arthur. He hadn't seen any sign of one since he'd been there.\n\"No.\" replied Mr Thurgood.\n\"Well, how does one normally get to the village then? It's a fair way.\"\n\"We walks, Mr Mapple, or goes by bicycle. And Marjorie Drywell comes along most days to give Edna a lift.\"" ;
            : print "\"Have you been gardener here for a long time, Mr Thurgood?\" asked Arthur,  by way of making conversation.\n\"Since I was a lad, alongside my father. And my father alongside his, in his time. There's always been a Thurgood at The Vicarage, same as there's always been a Taplow.\"\n\"Always?\" echoed Arthur.\n\"As near as folks can tell.\"" ;
            : print "\"Was there anything unusual about the Reverend Peldash,\" enquired Arthur.\n\"How do you mean?\" asked Thurgood. Arthur realised that he wasn't quite sure what he meant.\n\"Well...different. Out of the ordinary. Anything at all that might account for his disappearance.\"\n\"I can't say as there was,\" said Mr Thurgood." ;
            : print "\"I hope someone has been taking care of the church since Reverend Peldash disappeared\" said Arthur conversationally.\n\"Ernest Snapeshuttle will be seeing to that Mr Mapple.\"\n\"Snapeshuttle?\"\n\"The verger. He'll be keeping an eye on things right enough.\"" ;
 

            on_exhausted {
               : print "Arthur asked a question but Mr Thurgood just mumbled something inaudible from under his flat cap.";
          
            }
         }
      
   }
   : else {
      : print "But Mr Thurgood was not there." ;
      
   }
   }
   : else_if (noun1_is "edna") {
 : if (is_present "edna_taplow") {
 : if (traptor==3&&is_at "scullery") {
    : print "Arthur attempted to engage Mrs Taplow in conversation, but received nothing but a few mumbled pleasantries. She seemed preoccupied with whatever it was that she was doing with the bottle." ;
: done ;

 }
 : if (traptor==4) {
 : if (parent_of "ottoline_elderfield"=="drawing_room") {
    : print "\"I'll leave you and Miss Elderfield alone to your business, Mr Mapple,\" sad Mrs Taplow, a little tartly. \"I'm not one to interfere in other people's affairs.\"" ;
    : done ;
    
 }
 : else {
    : print "Mrs Taplow was rather curt when Arthur tried to engage her in conversation. The imminent arrival of Ms Elderfield seemed to have annoyed her immensely." ;
    : done ;
    
 }
 
    
 }
 
 
 : if (is_at "recess") {
    : print "Mrs Taplow muttered to herself beneath her breath. The words were indistinct but the tone was unmistakable. Arthur's more prudent self counselled that now was not the time to engage the housekeeper in conversation." ;
    : done ;
    
 }
 
    : if (taplow_ask_counter==0) {
    : clear_screen;
       : print "\"Perhaps, Mrs Taplow, you might be able to tell me about the night Reverend Peldash disappeared?\" said Arthur in business-like fashion.";
       : press_any_key ;
       : print "The old housekeeper stiffened.\n\"I don't know as I've any more to say than I told the other gentleman, Mr Mapple,\" she said, busying herself conspicuously.\n\"Yes, I've read your statement,\" said Arthur, \"but I should still like to hear it for myself.\"" ;
       : press_any_key ;
       : print "\"Very well Mr Mapple - if you insist.\" She sighed. \"It was the first of May, Beltane as it's still known around these parts. I'd been down in the village, watching the fire being lit away on The Settle...\"\n\"The Settle?\" repeated Arthur. \"You mean the Devil's Settle?\" Arthur had done a little homework; it was the mound to the south of the village." ;
       : press_any_key ;  
          : print "\"That's right Mr Mapple. There's always a fire lit at sunset on May Day. An old tradition. There's a celebration in the village; you can see the fire from there.\"\n\"And was Reverend Peldash there also?\" asked Arthur.\n\"No,\" she said. \"The Reverend always said as how he didn't hold with such rites. Anyway, I was back here at The Vicarage by 10 o'clock, Marjorie Drywell having drove me back. I looked in the drawing room and the study and found Reverend Peldash wasn't there.\"" ;
       : press_any_key ; 
       : clear_screen;
       
          : print "\"Did you look anywhere else?\" asked Arthur. \"Could he perhaps have gone to bed?\"\n\"I keep the Reverend's house, Mr Mapple, not his person,\" replied Mrs Taplow tartly. \"But I was sure he wouldn't have gone to bed. He always kept late hours. So, I locked the door, expecting he'd come back in his own good time and knowing he had his own key, and I went to my bed.\"" ;
          : press_any_key ;

       :print "\"I see. And the following morning you found he hadn't returned?\"\n\"That's not quite all, Mr Mapple.\" She hesitated for a moment. \"You see, I was woken in the night by a great clap of thunder. Terrible, it was - like an earthquake. Scared me dreadful it did.\"" ;
       : press_any_key ;
       : print "\"How extraordinary,\" said Arthur.\n\"Just a storm, Mr Mapple. There's often strange weather around that time of year. Foretells of a hot summer, more often than not. Anyway, being awake I heard more noise below. I got up and went downstairs to check that all was in order, and I heard someone in the study. 'Reverend Peldash,' I called, and he answered.\"" ;
       : press_any_key ;
       : print "\"You heard his voice?\" said Arthur.\n\"Indeed I did, Mr Mapple,\" replied Mrs Taplow. \"From the study. 'Is all well in there, Reverend?' says I, as there was something in his voice, I can't say what it was, that made me think all might not be. 'Yes,' he replies, 'quite alright, thank you Mrs Taplow. You may go back to bed.'. 'Very well Reverend,' I says, and so I did and, it being late, went straight off to sleep. Only I was woke again a little while later by someone leaving the house. The Reverend again, it must have been.\"" ;
       : press_any_key ;
       : clear_screen;
       
       : print "\"He went out again?\" asked Arthur. It seemed most puzzling. \"Do you know why?\"\n\"I do not, Mr Mapple, and it's hardly my place to wonder. I keep house, and that is all. Anyway, that was the last I heard of him for when I came down in the morning the Reverend was nowhere to be seen and I haven't set eyes on him since.\"" ;
       : press_any_key ;
       : print "\"I see,\" said Arthur thoughtfully. \"Thank you Mrs Taplow. I think that will be all for the present.\"" ;
       : press_any_key ;
       : increment "taplow_ask_counter" ;
       : clear_screen;
       : redescribe;
           }
          
        : if (has_visited "road_2") {
        : if (!taplow_ottoline) {
                : print "\"Mrs Taplow, do you know anything about Ms Elderfield?\" enquired Arthur.\"\nMrs Taplow's mouth hardened a little. \"Ada's niece? Yes, I believe I have seen her. She took over the cottage when Ada passed on.\"\n\"But you haven't talked to her?\n\"Not especially, Mr Mapple.\"\n\"Is there any particular reason why not?\"\nMrs Taplow tutted. She seemed keen to end the conversation.\"She's an incomer. Londoner, I believe. They have different ways.\" " ;
                : set_true "taplow_ottoline" ;
                : done ;
                
        }
    }
            : if (has_visited "pump") {
        : if (!taplow_rumour) {
                : print "\"Mrs Taplow, there seem to be all sorts of rumours around the village. I can only think I must have stirred things up by coming here. It's important for people to know that I'm only here to help find Reverend Peldash.\"\nMrs Taplow shook her head. \"I wouldn't bother too much about what folks say around the village Mr Mapple. It's always thick with it down there. I've never heard such talk as what you get around the pump most days. You mark my words and take no notice.\"" ;
                : set_true "taplow_rumour" ;
                                : done ;

        }
    }
     : if (has_visited "garden") {
      : if (!taplow_thurgood) {
          : print "\"Mr Thurgood seems a handy sort of fellow,\" said Arthur, conversationally. \"Tell me, have you known him for a long time?\"";
       
      : print "\"Sidney? Why I've known him since he was a babe. He's reliable enough, Mr Mapple, though not quite the man his father was.\" There was something almost wistful in Mrs Taplow's tone." ;
            : print "\"Oh?\" Arthur promoted. Mrs Taplow's expression closed and she carried on with her work rather hurriedly. \"A bit too fond of the bottle, Mr Mapple. Like most of the men in the village. Seems to have got worse, mind, since the Reverend disappeared. But there now: I'm not one to tell tales.\" " ;
          : set_true "taplow_thurgood" ;
                          : done ;

      }
    }
    : cycle predictable_order = "false"  key = "taplow_cycle"  max_loops = "1" {
       : print "Arthur asked Mrs Taplow about the mound to the south of the village that he'd seen on his drive up.\n\"The Devil's Settle you must mean, Mr Mapple. It's where they light the beacon at Beltane. You can see that fire for miles around.\"\n\"And have you ever been there yourself, Mrs Taplow?\"\n\"Not since I was a girl. There's no reason, it being such a lonely old place.\"\nArthur pondered for a few moments. \"It's an unusual name. Do you know what it means?\"\n\"Why, the Devil's Seat of course,\" she replied, \"but I wouldn't go taking too much notice of names, Mr Mapple. There's a lot of foolishness talked about such things in these parts. Superstitions and the like. Best to take no notice of it.\"" ;
             : print "\"I suppose you must have know many of Reverend Peldash's predecessors,\"said Arthur.\n\"Indeed, Mr Mapple. They've come and gone, and I've kept house for them all.\"\n\"And how does Reverend Peldash compare? To the previous incumbents, I mean.\"\nMrs Taplow hesitated for just a second. \"Oh, no better and no worse, Mr Mapple. That's all.\"";
             : print "\"Mrs Taplow, do you know anything about faeries?\"\n\"Faeries?\", she repeated a little sharply, \"Whatever do you mean Mr Mapple?\"\n\"Oh nothing,\" he replied, \"Just something I heard.\"" ;
             on_exhausted {
                
                : print "Arthur felt that he had exhausted the conversational potential of Mrs Taplow." ;
             }
    }
 }
 : else {
    : print "But Mrs Taplow was not there." ;
     : done ;
 }
 }

 : else_if (noun1_is "henry") {
    : if (is_present "mr_salter") {
     : if (parent_of "frank_farthing"=="square") {
       : if (has_not_created "bandage") {
          : print "\"Mr Salter, there is an injured man in the square outside. Could you hand me one of those bandages please?\"\nMr Salter looked as though he was brewing a quip, so Arthur cut him short. \"Quickly please, Mr Salter!\"\nThe chemist took a bandage from a shelf and put it on the counter.\n\"There you are Mr Mapple. Perhaps when the chap has finished bleeding he can come by and pay for it!\" Mr Salter laughed hugely, although Arthur failed to see what was so funny. He thought to himself what an irritating shop keeper Mr Salter was.";
          : create "bandage" ;
          :done;
    : if (salter_ask_counter==0) {
       : print "\"Mr Salter, I presume?\" asked Arthur, by way of greeting. \"I'm Arthur Mapple.\"\n\"Mr Mapple? The detective? Why very pleased to meet you Mr Mapple, very pleased indeed!\" The chemist laughed heartily as nothing in particular, which Arthur found somewhat perturbing." ;
       : increment "salter_ask_counter" ;
       : done ;
        
    }
   }
          : else {
             : print "Arthur was too preoccupied at the moment to ask Mr Salter anything else." ;
          }
          
    }
    
       : else_if (need_paper) {
          : print "\"Mr Salter, I wonder if you could provide me with some photo paper? You know, for making prints?\"\n\"Certainly, Mr Mapple. Bromide, choloro-bromide, silverchloride or collodion?\"\n\"Well...\" Arthur hesitated a little. \"It's for Brownie prints. 120 film?\"\n\"Oh yes, Mr Mapple. Been snapping away, have you, in between all your detecting?\" The chemist seemed to find that tremendously amusing, for some reason. \"It'll be the Bromotone you'll be wanting.\" \nHe took a packet off the shelf behind him and put it on the counter in front of Arthur. \"That'll be a shilling please, Mr Mapple.\"\n Arthur took out his wallet and paid the grinning shopkeeper. " ;
          : create "packet" ;
           
          : set_false "need_paper" ;
          : set_true "negs_dry" ;
           
       }
       : else {
       : cycle predictable_order = "false"  key = "salter_cycle" max_loops = "1"  {
          : print "\"Are you acquainted with Reverend Peldash, Mr Salter?\" asked Arthur.\n\"Of course!\" He bellowed with laughter, although Arthur failed to see what was so amusing. \"Of course Mr Mapple. As we all are in the village. A very decent gentleman. Very decent.\"" ;
          : print "\"Isn't it an odd thing that the church is so far away from the village, Mr Salter?\"\n\"Well yes, I suppose it is Mr Mapple. Outside folks often comment on it, but us in the village - well, we've never known any different, have we?\" He chuckled merrily as though at a joke that Arthur had missed.\n\"It's quite a journey to make on a Sunday morning,\" observed Arthur.\n\"It's no journey for those of us that wants to make it,\" replied Mr Salter. \"Separates the wheat from the chaff and no mistake. There's chaff enough in this village, Mr Mapple. Chaff enough!\" He wheezed and rocked from side to side, consumed with unaccountable mirth." ;
        on_exhausted {
           
           : print "Arthur had had quite enough of Mr Salter for the moment." ;
           
        }
          
       }
   
        
    } 
    
    }
    : else {
       : print "But Mr Salter was not there." ;
        
    }
     
 }
 : else_if (noun1_is "daisy"||adjective1_is "mrs"&&noun1_is "farthing") {
 : if (is_present "daisy_farthing") {
    : if (mrsfarthing_ask_counter==0) {
       : print "\"Mrs Farthing, I, um...\" began Arthur, uncertainly.\n\"I'm ever so sorry, Mr Mapple, really I am!\" said Daisy Farthing, wringing her hands, \"Whatever must you think of us! And you an officer of the law and all.\"\n\"But, how did you know that?\" asked Arthur.\n\"Begging your pardon, Mr Mapple, but it's all over the village that you're here to find out what happened to Reverend Peldash. And now you're having to waste your precious time over the likes of Frank.\" She looked at him fearfully. \"It's not anything else, is it Mr Mapple? You're not here 'cos of his poaching again, are you? 'Cos he promised me the last time...\"\n\"Mrs Farthing,\" Arthur interrupted her, \"I'm not here because of anything like that. I simply came across your husband in his current...predicament and helped him as best I could. Mind you...\" he continued, feeling he couldn't let the matter pass by entirely, \"poaching is a criminal offence.\"\nMrs Farthing, whiter than ever, crossed to the doorway and bellowed in a startlingly loud voice, \"Frank! Frank Farthing come in here at once!\"\nImmediately the sound of splashing water ceased, there was a shuffling sound and after a few moments Frank Farthing appeared in the doorway, dishevelled but a little more sober seeming than before." ;
       : increment "mrsfarthing_ask_counter" ;
        
       : create "frank_farthing" ;
       : press_any_key ;
       : redescribe;
        
    }
    : else {
       : print "Arthur exchanged a few pleasantries with Mrs Farthing, but she was too timid to properly engage her in conversation." ;
           : done ;
    }
     
     
 }
 : else {
    : print "But Mrs Farthing was not there." ;
        : done ;
 }
  
 }
 : else_if (noun1_is "frank") {
    : if (is_present "frank_farthing") {
       : if (farthing_ask_counter==0) {
             : print "Arthur attempted to engage Mr Farthing in conversation, but received nothing comprehensible in return. It seemed as though he was too insensible to give a clear reply." ;
             : done ;
             
             }
          : else_if (farthing_ask_counter==1) {
          : if (is_at "poachers_house") {
             : print "\"Now Frank,\" said Daisy Farthing fiercely to her sheepish-looking husband, before Arthur could get a word in, \"you tell me and Mr Mapple here exactly what you've been up to in that wood. And I don't want to hear no lies this time, mind. Mr Mapple here's a policeman and he won't take kindly if you try to pull the wool over him like you try to me. Mark me, Frank Farthing.\"\n\"Thank you, Mrs Farthing,\" said Arthur, attempting to seize the initiative. \"Mr Farthing, perhaps you could start by telling me about the wood?\"\nFrank Farthing sat forward in a chair and looked at his boots. \"Ain't nothing much to tell Mr Mapple, and that's the truth. Just a bit of a wood, it is. I goes up there sometimes.\"\n\"You're a poacher, Mr Farthing?\" Arthur decided to try the direct approach.\nFrank shrugged. \"Just a rabbit or two, here and there. Aint nothing nobody would miss.\"\n\"I see.\" Arthur considered for a moment. He felt his intuition tingling. \"Mr Farthing, have you ever seen anything unusual in that wood?\"\n\"How do you mean?\" replied Frank suspiciously.\n\"Out of the ordinary. Different. Around the time of Reverend Peldash's disappearance in particular.\"\nThere was a long moment of silence, broken at last by Daisy Farthing.\n\"For goodness sake, Frank, tell him!\"\n\"I could tell you, Mr Mapple, what I saw in that wood,\" said Frank slowly.\"But I reckon as how you'd never believe me.\"" ;
             : increment "farthing_ask_counter" ;
          }
          : else_if (is_at "poachers_scullery") {
             : print "Arthur tried to question Frank as he sloshed water over his bloodied face, but got very little sense out of him." ;
              
          }
           
              
          }
          : else_if (farthing_ask_counter==2) {
             : print "\"Please, Mr Farthing - just tell me what you saw,\" said Arthur.\nFrank sighed and then began: \"It was that very night the Reverend disappeared - 1st of May it was. Beltane. I was in the wood, checking on my snares. It was near midnight. Everything quiet, as it should be at that time. All alone, I was. And then suddenly...this great noise. Screaming, like the gates of hell opening and all those tormented souls crying out. Like nothing I ever heard before. And a wind, a wind that knocked me clean off my feet. And I see a shadow pass over me, and look up and...\" He stopped.\n\"Go on, please Mr Farthing,\" urged Arthur.\n\"And then I seen him. The Devil himself, as tall as the sky, striding down out of the wood and across the fields.\"\n \"The Devil?\" Arthur, astonished, made a few scribbled notes in his notebook while wondering what to make of all this. \"And, what happened next?\"\n\"I ran, Mr Mapple,\" said Frank. Arthur could see the fear in his eyes as he relived the moment, \"I ran and ran, back towards the village. And that was when I saw him. Peldash.\"\n\"You saw Peldash?\" Arthur's mind raced.\n\"Running he was. Running away. And then I saw it come up behind him, the rider. It just picked him up out of the road, slung him over its horse and disappeared. Took him back to the wood, I reckon. Only when it was gone, I found something it left behind.\"";
             : press_any_key ;
             : clear_screen;
             
             :print "\"What was it, Mr Farthing?\" Arthur was on tenterhooks.\n\"It was a nail, Mr Mapple. A horseshoe nail. Strange thing. I picked it up and brought it back here. Then Daisy found it and wanted it out of the house. Evil, she said it was. So a few days later I went back to the wood and I locked that nail away in my hut up there, thinking it must be important like. It's a relief to tell someone about it, Mr Mapple, really it is.\"\n\"I expect it is,\" said Arthur. \"Well Mr Farthing - this nail. I should like to take a look at it. Perhaps it may lead me to Reverend Peldash, if what you tell me is true.\"\n\"I swear, Mr Mapple,\" said Frank, as sober now as Arthur had ever seen him, \"I saw what I saw. Here.\" He handed Arthur a key. \"That's the key to the trunk. I wrapped it up and hid it in there, in my hut up at the wood. You can help yourself. I just hope it's some to use to you, Mr Mapple.\"\n\"I hope so too,\" said Arthur. He thanked both of them, said his farewells and, leaving a contrite Frank Farthing to the tender ministrations of his wife, went on his way.\n" ;
             : increment "farthing_ask_counter" ;
             : create "trunk_key"target = "inventory"  ;
             : destroy "frank_farthing" ;
             : goto "outside_poachers" ;
              
             : press_any_key ;
             : redescribe;
              
           
          }
          :else {
          :print "Arthur couldn't think of anything to ask Frank at present.";
           
          }
        
          
          //other traptors beyond 1 here
    }
    : else {
       : print "But Frank Farthing was not there." ;
        
    }
     
 }
  : else_if (noun1_is "joseph") {
 : if (is_present "joseph_jarbell") {
    : if (jarbell_ask_counter==0) {
       : print "\"Good day, \"Arthur greeted the rather ruddy, slightly surprised looking gentleman drying beer mugs at the end of the bar. \"I'm looking for the publican, Mr Jarbell.\" Arthur had noted the name from the licensee's plaque above the entrance.\n\"You're speaking to him sir,\" replied Mr Jarbell, placing a grubby tankard back on the rack. \"And who might you be?\"\n\"Arthur Mapple\", said Arthur.\n\"Oh yes. The detective chap isn't it? I thought you might drop by.\"\nEveryone here seemed to know Arthur's business but that, he supposed, was village life.\n\"It's a fine establishment you have here, Mr Jarbell,\" said Arthur, looking round at the gloomy, gas-lit interior, the sawdust-strewn floor and the dubious clientele. \"Do you get much trouble from the regulars?\"\n\"Not so much, Mr Mapple,\" replied Mr Jarbell.\"The odd bit of bother, but most know better than to try it. Only...\"\n\"Yes? Do carry on.\"\nThe publican lowered his voice and glanced a little fearfully to where his barmaid was serving drinks. \"Well, just recently, there's been a bit more. Incomers, you see. And...\"\nHe fell silent. Arthur glanced at the bar and saw the barmaid looking fixedly at Mr Jarbell before turning her attention back to the customers." ;
       : if (traptor==1) {
          : increment "jarbell_ask_counter" ; 
       }
       : else {
          : set_integer var = "jarbell_ask_counter"  value = "2" ;
          
       }
       
    }
    : else_if (jarbell_ask_counter==1) {
       : print "Arthur tried to engage Mr Jarbell in conversation, but it seemed he didn't want to talk." ;
       
    }
    
    : else_if (jarbell_ask_counter==2){
    : clear_screen;
    
       : print "\"Mr Jarbell, I wonder if I might ask you one or two questions?\"" ;
       : press_any_key ;
       : print "Mr Jarbell seemed distracted for a moment by Molly, the barmaid, who gave him a look that he acknowledged with a nod and cheerful grin. He turned to Arthur and the grin remained fixed; there were beads of sweat on his forehead and a rather desperate look in his eyes. Arthur realised that the man was quite frightened." ;
        : press_any_key ;
       : print "\"Mr Jarbell,\" he said quietly, \"perhaps if we could go somewhere and...\"\n\"Listen!\" The landlord hissed, \"There's not much time. Please, Mr Mapple - they took my Ash away. Find my Ash, I beg of you.\"\n\"Your Ash?\" repeated Arthur, \"I don't understand.\"" ;
        : press_any_key ;
       : print "\"My Ash, my child,\" said Jarbell. He glanced quicky at Molly, who seemed occupied with customers for the moment. \"They started coming they did, all of a sudden. We didn't know who they was at first, but then we realised. It was them.\"\n\"Them?\" whispered Arthur.\n\"The faery folk. One or two at first, drinking, playing cards, starting a fight now and then. No different from the regular folk. But then more and more of them come. Asking for all sorts of things, and we've got no choice but to give it them. They're here right now.\"" ;
        : press_any_key ;
        : clear_screen;
        
       : print "\"Where?\" said Arthur, a little more loudly than intended. He spotted saw a few peculiar looking characters in old-fashioned clothes drinking about the place and when he looked closely noticed a strange, insubstantial quality to them.\n\"Shhh!\" hissed Jarbell. \"They'll hear! They came one day when Ash was here, working the bar as always. And the next I know: vanished. That creature in her place.\" He indicated Molly with a jerk of his thumb." ;
        : press_any_key ;
       : print "\"Took Ash to the faery land, I reckon. Over the water. I tried to follow but they won't let me leave. You've got to go there Mr Mapple. Please, find my Ash. Bring my child back to me, please Mr Mapple...\"" ;
        : press_any_key ;
       : print "\"Mr Jarbell,\" said a sharp voice from the other end of the bar. The landlord stiffened. \"I'll need the barrel changing, if you would be so kind.\" Molly smiled sweetly, but her eyes flashed malice that struck a chill through Arthur. Mr Jarbell disappeared into the cellar and when he returned a few minutes later, he avoided Arthur's eye." ;
       : increment "jarbell_ask_counter" ;
       : press_any_key ;
       : redescribe;
        
    }
    : else_if (jarbell_ask_counter==3) {
       : print "Arthur tried to ask Mr Jarbell a question, but the landlord was too distracted.\n\"Have you found my Ash, Mr Mapple? Oh, please say you've found my Ash.\"" ;
       
       }
    : else_if (jarbell_ask_counter==4) {
       : print "Arthur exchanged a few pleasantries with Mr Jarbell, but the landlord was rather distracted by the return of his child." ;
       : increment "jarbell_ask_counter" ;
       
    }
    
    : else {
       : print "Arthur couldn't think of anything to ask Mr Jarbell at present." ;
        
    }
     
     
 }
 : else {
    : print "But Mr Jarbell was not there." ;
     
 }
  
 }
    : else_if (noun1_is "molly") {
 : if (is_present "molly") {
 : if (has_not_created "pint") {
    : print "Arthur talked to Molly. \"A pint of beer, is it Mr Mapple?\" She said rhetorically, for she was already filling a pint mug for him. Arthur was not a great drinker, and barely ever indulged in the daytime." ;
    //pinky
    : create "pint" ;
    
 }
   : else {
   : cycle predictable_order = "false"  key = "molly_conversation_cycle" max_loops = "1"  {
      : print "\"Have you worked here long?\" enquired Arthur of Molly.\n\"Oh no, not for very long.\" said Molly, \"But seeing as how Mr Jarbell has been so good to me, I think I'll be staying for a while.\" She smiled faintly in the direction of the landlord. It was a look without any warmth in it." ;
           : print "\"Were you acquainted with Reverend Peldash at all?\" asked Arthur.\n\"The vicar that's gone missing?\" answered Molly. \"Can't say as I ever was. We're not church-going folk and I never saw him in here. P'raps he was teetotal?\"" ;
                : print "\"This place has been here a long time I expect,\" said Arthur, gesturing vaguely at his surroundings.\n\"I expect so, Mr Mapple,\" replied Molly. \"They say it's been here since the village was built and never changed much.\"\n\"And how long would that be?\"\nMolly laughed a little. \"I'm sure I've no idea.\"" ;
                     : print "\"What do you think happened to Reverend Peldash?\" Asked Arthur.\n\"I sure I've no idea, Mr Mapple. Perhaps he just wandered off? I daresay he'll turn up again, one day.\" She smiled faintly and Arthur had a sense that she knew more than she was telling." ;
                       on_exhausted {
                 : print "Arthur couldn't think of anything else to ask Molly." ;
        
              }
   }
   }
 }
 : else {
    : print "But Molly was not there." ;
     
 }
  
 }
  : else_if (noun1_is "ash") {
     : if (is_present "ash") {
     : if (ash_touched) {
     : if (is_at "pub") {
        : print "Ash seemed too overwhelmed by recent experiences to reply." ;
     }
     : else {
         : print "Arthur tried to ask Ash a question, but there was no reply. It seems that the experience in the other place over the bridge had been traumatic." ;
     }
     }
         
     : else {
        : print "Arthur tried to speak to Ash but it was as though they couldn't hear him at all." ;
        
     }
     
      
        
     }
    : else {
       : print "But Ash was not there." ;
       
    }
     
  }
  #ASK OTTOLINE start
  : else_if (noun1_is "ottoline") {
     : if (is_present "ottoline_elderfield") {
  
     
        : if (ottoline_ask_counter==0) {
           : print "\"I wonder, Ms Ottoline, if I might ask you one or two questions?\" ventured Arthur.\nMs Elderfield sighed audibly.\n\"Really, Mr Mapple? I'm sure I can't be of much help with your enquiries about Peldash. I barely knew the man. And I am terribly busy.\" She seemed on the verge of shutting the door.\n\"Please, Ms Elderfield,\" said Arthur a little more firmly, \"This is a criminal matter and I am here on official business. I'm afraid I must insist.\"" ;
          : increment "ottoline_ask_counter" ;
          : done ;
          
        }
        
        : if (ottoline_ask_counter==1) {
           : cycle predictable_order = "false"  key = "ottoline_first_encounters" max_loops = "1"  {
              : print "\"I wonder if you could tell me what you remember about the night of Reverend Peldash's disappearance?\"\n\"Oh great heavens, not that again!\" said Ottoline. It was evident that she didn't want to talk about the subject." ;
              : if (true) {
                  : print "\"What a charming cottage,\" said Arthur, in a feeble attempt to initiate conversation, \"so pretty and so well proportioned.\"\n\"I don't imagine you've come all this way just to compliment me on the architectural virtues of my house, Mr Mapple.\"" ;
                            
              }
                  : if (true) {
                       : print "\"How do you manage being all alone up here, so far away from the village?\" asked Arthur, nosily.\n\"Well enough Mr Mapple,\" said Ottoline, evidently impatient to end the conversation. \"I'm not a great one for nosy neighbours. Or unexpected visitors.\"" ;
                  }
        
             

              : print "\"Don't you think there's been some rather odd things going on around here, Ms Elderfield?\" asked Arthur.\n\"What on earth are you talking about Mr Mapple?\" replied Ms Elderfield, shortly.\n\"Well, I haven't been here for very long but I've seen some things that I really can't account for,\" said Arthur, truthfully.\n\"Really, Mr Mapple, whatever are you talking about? I wouldn't have thought you were the type to see faeries at the bottom of the garden.\"\n\"I beg your pardon, Ms Elderfield?\"\n She fell silent and Arthur had the impression that she'd said more than she intended." ;
              on_exhausted {
                 : print "Arthur struggled to think of anything else to ask Ms Elderfield and eventually gave up. Having exhausted all conversational avenues, he simply stood there by the front door and fidgeted awkwardly beneath her cool gaze, waiting for an excuse to leave." ;
        
              }
           }
           : done ;
                
        }
  
           : else_if (ottoline_ask_counter==2) {
           : if (has_not_created "mirror") {
           : if (chit_chat) {
                 : print "\"What a marvellous place you have here, Ms Elderfield,\" said Arthur. \"It seems so wonderfully calm. Cut off. Almost as though the outside world didn't exist. I suppose it must be the thickness of the walls.\"\nMs Elderfield smiled mysteriously. \"I'm glad you noticed. Yes, it does have a certain...quality. you won't find it anywhere else.\"\n\"Except at The Vicarage,\" said Arthur suddenly. \"It's the same there.\"\n\"Really?\" She seemed surprised. \"How curious. Well, since you're here, Mr Mapple, you may as well have a look around.\"\n" ;
              : done ;
              : set_true "chit_chat" ;
           }
           : else {
              : print "Ottoline waved her cigarette about vaguely. \"Feel free to have a look at things, Mr Mapple.\"" ;
              : done ;
              
              
           }
           
           
              
           }
      : clear_screen;
      
               : cycle predictable_order = "true"  key = "ottoline_inside" max_loops = "1"  {
               : if (true) {
                   : print "\"When you said 'seen them', what exactly did you mean?\" Arthur thought they should be certain what they were talking about. A part of him feared making a complete fool of himself. " ;
                   : press_any_key ;
                       : print "Ottoline sighed. \"The faeries. I thought you would have, but I rather wished you hadn’t. Things are difficult enough already without anyone else becoming involved.\"\nArthur had a familiar sinking feeling, as of consistently failing to grasp a rapidly receding initiative. \"Ms Elderfield, if you could perhaps…\"\n" ;
                   : press_any_key ;
                       : print "Ottoline carried on, \"You see, Mr Mapple I’m an outsider here too. I've only been here a few months. I inherited this place from my Aunt Ada. She died, you see.\"\n\"I’m sorry,\" replied Arthur, reflexively." ;
                   : press_any_key ;
                       : print "\"Oh no, need to be,\" said Ottoline. \"She was a dear old thing but I hadn’t seen her for years. And in fact the timing couldn’t have been better. I urgently needed a place to get away and dear Aunt Ada chose just the right moment to expire. When the dust has settled I really ought to thank her.\"\n\"Well, yes of course...\" mumbled Arthur in response to this peculiar statement." ;
                   : press_any_key ;
                   : clear_screen;
                   
                       : print "\"If you don’t mind me asking, Ms Elderfield…\"\n\"Oh goodness: Ottoline please. I thought we weren’t standing on ceremony?\"\n\"If you don’t mind me asking, Ottoline. What were you getting away from?\"\nShe paused. \"A difficult professional situation, Mr Mapple. And personal. It's always dangerous when the two become entangled.\"" ;
                   : press_any_key ;
                    : print "Arthur sipped his tea before venturing, \"And what is your profession?\"\n\"Oh, I’m a medium,\" she answered casually. \"A rather exclusive one. I only take clients by recommendation. They're the usual sorts of society people from the usual families: the Brookhavens, the Arringtons. The Morgans.\" She paused for a moment and her eyes became distant. \"Anyway,\" she continued, \"the fact is, I fell in love.\"\nArthur began reflexively to say \"I’m sorry\" but managed to stop himself by sipping his tea." ;
                   : press_any_key ;
                       : print "\"It was silly of me. We were blissfully happy for a time, but of course it couldn't last. They were married, you see, and the other party became involved. There was a terrible fuss - a scandal, really - and we both agreed it would be better for me to simply disappear until it all blew over.\" " ;
                    
                   : press_any_key ;
                      
                       : print "Ottoline drew deeply on her cigarette and exhaled slowly. \"God, I miss her,\" she said quietly.\n\"Her?\" Arthur was so deeply surprised that he reached for a biscuit without first asking." ;
                   
                   : press_any_key ;
                   : redescribe;
                   
               }
               : if (true) {
           : print "\"I suppose you're here to find out what's happened to that damned fool Peldash, Mr...what did you say your name was?\"\n\"Arthur,\" he told her, for the first time. \"Yes. A disappearance like this is a serious matter.\"\n\"More serious than you think,\" she replied quietly. \"The faeries are here.\"" ;
           : press_any_key ;
              : print "\"Those things,\" spluttered Arthur, \"faeries?\" It seemed so incredible.\n\"Little folk,\" said Ottoline impatiently. \"And bigger folk. Some that you can see, some you can't. Oh, they've always been here. You'd see them now and again, in the twilight at the bottom of the lane or in the churchyard. Not here - this cottage is protected by some sort of magic that I've never understood - but all around. But this is different. An invasion almost. They're here in force and Peldash is in some way responsible, of that I'm sure.\"" ;
              : press_any_key ;
              
              : clear_screen;

              : print "\"But how can you be sure?\" asked Arthur, eating biscuits readily.\n\"I never trusted that man. Met him a few times after I'd taken over the cottage. Rather too interested in the place, I thought. And then there was the herbal...\"" ;
           : press_any_key ;
              : print "\"Herbal?\" Arthur was confused.\n\"It was a sort of book,\" explained Ottoline, \"full of remedies and recipes and old sayings. I remember being fascinated by it when I was a little girl. Aunt Ada was a sort of healer, you see. People would come to her from miles around expecting her to cure all sorts of ailments. And she would. They trusted her, far more than any doctor. And the book was where it was all written down, what she knew and what others had know for generations past. It must have been terribly old.\"" ;
           : press_any_key ;
              : print "\"And where is the book now?\" enquired Arthur.\n\"That's just it\", she replied. \"It's gone. It was the first thing that I looked for when I arrived. Her life's work and her ancestors'. Vanished.\"" ;
              : press_any_key ;
              : clear_screen;
              
              : print "\n\"You don't suppose,\" said Arthur \"that it could simply have been misplaced?\"" ;
              : press_any_key ;
       
              : print "Ottoline laughed and tapped the ash from her cigarette. \"Oh no, I don't think so. Peldash came here shortly after I arrived on a 'pastoral visit'. I mentioned the herbal to him, and then I just knew. He had something to do with it all right. I wouldn't be surprised if he came here after she'd gone and helped himself to it.\"" ;
           : press_any_key ;
           
              : print "\"That,\" began Arthur, \"is a rather serious accusation...\n\"In my line of work, one learns to trust one's intuitions,\" she said abruptly. \"He was responsible for it alright. And for everything else that has happened since, in some way that I don't quite understand.\"" ;
           : press_any_key ;
            : redescribe;
            }
              : if (true) {
                : print "\"I have to confess,\" said Arthur, staring at the tea leaves in a new light, \"that I don't quite know what to make of any of this.\" He put down his cup and attempted to sound decisive. \"But I do know that a man has gone missing, and it's my job to find out what has happened to him.\"" ;
                : press_any_key ;
                : print "Ottoline closed her eyes and was silent for an uncomfortably long moment. He was just starting to wonder if she had actually fallen asleep when her eyes snapped open."; 
                  : press_any_key ;
                : print "\"Calderhall!\"\nShe stubbed her cigarette into her saucer, grabbed the shawl from the back of her chair and made ready to leave.\n\"What?\" replied a startled Arthur.\n\"Calderhall. The wood, six miles up the road. Haunted, naturally. Most of the locals won't go anywhere near it. But I'm sure that's where we need to go. I'm sure he was there.\"" ;
                  : press_any_key ;
                : print "\"Who? Peldash?\"\n\"Who else. That's were we'll find the answer, I just know it.\"\n\"Intuition?\" ventured Arthur.\n\"If you like.\" " ;
                  : press_any_key ;
                  : clear_screen;
                  
                : print "She turned to the cage and opened the door. Arthur took an involuntary step back as the huge black crow hopped out and onto Ottoline's outstretched arm with a loud \'Craaak!\'." ;
                  : press_any_key ;
                : print "\"We'll take Crackers with us. He knows the way. Come on, Arthur - there's no time to lose!\"\nShe opened the front door and hurried out of the cottage, leaving Arthur to follow her." ;
                  : press_any_key ;
              
                
                : goto "lane_7" ;
                : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
                : set_string var = "crow_description"  text = "a huge black crow (perching on the handlebars of Ottoline's bicycle)" ;
                
                
                : create "ottoline_elderfield" ;
                : create "crow" ;
                : set_true "ottoline_follow" ;
                : increment "ottoline_ask_counter" ;
                : press_any_key ;
                : redescribe;
              }
           }
      : done ;
           }
           : if (traptor==4) {
            : if (ottoline_ask_counter==5) {
              : print "\"Ottoline, would you mind awfully helping me to move this table\" asked Arthur politely.\n\"Very well Arthur,\" she replied, \"although if I'd know that this was what you had in mind for this evening, I may have dressed a little differently!\"" ;
              : increment "ottoline_ask_counter" ;
              :done;
         }
         // :if (sitting&&ottoline_description=="Ottoline Elderfield (sitting on a chair)"&&holding_hands&&is_beside "holder_1"&&round_table_description=="a round table (in the middle of the room)"&&!housespellbroken&&!light_on) {
         // : print "Something here in this room is blocking us from making contact with the other side Arthur. We must find it and get rid of it to have any chance of succeeding.\"" ;
         // : done ;
         
         //    }
            : else_if (sitting&&ottoline_description=="Ottoline Elderfield (sitting on a chair)"&&holding_hands&&is_beside "holder_1"&&round_table_description=="a round table (in the middle of the room)"&&housespellbroken&&!light_on) {
               :print "Arthur didn't wish to break Ottoline's concentration at this critical stage in the proceedings. To do so could be dangerous.";
               :done;
            }
            
                 : print "\"Is there anything else that we need to do?\" asked Arthur." ;
         : gosub "seance_check" ;
         : done ;
         
           
    }
         : if (ottoline_ask_counter==9&&is_at "church_1"&&rail_description=="an iron rail (inserted into the stone fox's ear)") {
 
      
              : print "\"Ottoline, perhaps you can help,\" said Arthur. \"I can feel this wants to shift but it needs a little more weight behind it.\"" ;
              : increment "ottoline_ask_counter" ;
         
            
         }
         : else_if (traptor==6) {
            : if (spell<12) {
               : cycle predictable_order = "false"  key = "pre-spell chat" max_loops = "1"  {
                  : print "Arthur engaged Ottoline in conversation. \"I do hope that we're not too late to help Peldash,\" she said. \"Damned fool that he is, I wouldn't want him to end up where the faeries are planning to send him.\"" ;
                  : print "Arthur spoke to Ottoline. \"The faeries are abroad Arthur. We must be careful!\"" ;
                  : print "Arthur asked Ottoline what she was thinking about that made her smile so. \"You'll have a fine time explaining all of this when you get back home Arthur!\" she said." ;
                on_exhausted {
                   
                   : print "Ottoline seemed a little tired of talking at the moment." ;
                   
                }
               }
               
            }
            : else_if (spell>12) {
               : if (!endgame) {
                 : cycle predictable_order = "true"  key = "post-spell pre-endgame chat"max_loops = "1"   {
                  : print "\"Have they really gone?\" asked Arthur. \"Not until the way is closed,\" replied Ottoline.\n\"But how do we close it?\"\n\"I honestly don't know. But I do know we must find Peldash before it's too late.\"" ;
                  : print "Arthur exhanged a few anxious words with Ottoline." ;
                  on_exhausted {
                     
                     : print "The time for talking seemed to be over, for now." ;
                     
                  }
               }
                  
               }
               : else_if (is_present "jeremiah_peldash") {
               : if (spell==17) {
               : clear_screen;
               
                  : print "\"Ottoline,\" cried Arthur, \"you're closer! For pity's sake, grab hold of Peldash and drag him free! But be careful!\"" ;
                  : press_any_key ;
                  : print "Ottoline edged a little nearer to the heaving confusion of horse and faery at the centre of the square and managed to grab hold of the semi-conscious Peldash's outflung arm and drag him out of the fray. Seeing this, the Faery Queen screamed with rage and flung out her arms towards Peldash. She spoke an unfamiliar word and cold fire leapt from her long, slender fingers and engulfed Peldash. Ottoline screamed." ;
                  : press_any_key ;
               : print "\"Hold him!\" shouted Arthur, \"You must not let him go or all will be lost!\"" ;
               : press_any_key ;
               : print "Ottoline held Peldash tightly and felt him writhe and twist in her arms as he began to change form..." ;
                  : increment "spell" ;
                  : press_any_key ;
                  : redescribe;
                  
               }
               : else {
                 : cycle predictable_order = "false"  key = "very_end"  {
                    : print "Arthur called to Ottoline as she struggled desperately with a transforming Peldash. \"Do something Arthur!\"" ;
                       : print "\"Arthur called to Ottoline. \"I can't hold him much longer!,\" she replied. \"You must,\" said Arthur, \"You must!\"" ;
                     : print "\"Can you hold him?\" shouted Arthur to Ottoline.\n\"I don't know...\" she replied. \"Not for much longer! Hurry, Arthur, hurry!\"" ;
                 }
                 
                  
               }
               
               }
               
               : else {
               : if (countdown_horses==0) {
                  : print "Arthur asked Ottoline what he should do. \"Something, Arthur!\" she said desperately.\"Anything to stop those horses!\"" ;
                  : done ;
                  
               }
               //teezle
                 : cycle predictable_order = "false"  key = "endgame chat" max_loops = "1"  {
                  : print "\"Is there a way out of here?\" asked Arthur, a little desperately. \"I think not,\" Ottoline replied. \"Not until events have run their course.\"" ;
                  : print "\"Have we gone back in time?\" asked Arthur. \"I'm not sure,\" said Ottoline. \"It's more like past has come into the present.\"" ;
                  : print "\"Is this really Old Haelstowne\" asked Arthur. \"The original village?\"\n\"I think it must be,\" Ottoline replied.\n\"But how can we be here?\" Ottoline shrugged. \"I really don't know Arthur. But we are.\"" ;
               on_exhausted {
                  
                  : print "Arthur felt to anxious for idle chatter. He felt momentous events were afoot." ;
                  
               }
               }  
               }
               
            }
            
         }
         
           : else {
              : cycle predictable_order = "false"  key = "ottoline_general_chat" max_loops = "1"  {
                 : print "\"How long have you been a medium?\" asked Arthur politely.\nOttoline laughed. \"How long? One doesn't become a medium, Arthur - one just is. All my life, of course.\"" ;
                 : print "\"What exactly are these 'faeries'?\" asked Arthur. \n\"Nobody really knows,\" replied Ottoline. \"Visitors from another place, another world. I expect the scientist would have an explanation for it. But whatever they are, when they come in force, they're dangerous.\"" ;
                 : print "\"What do those things want here?\" asked Arthur.\n\"To play. To make mischief. People seem to fascinate them - particularly their darker side.\"\n\"Darker side?\"\n\"Oh you know: cruelty, anger, drunkeness, dishonesty. The lust for blood. They seem to feed off those impulses. When they get a foothold things degenerate pretty quickly. Old Haelstowne's reputation as an evil place was well deserved.\"" ;
                 : print "\"Do you know the village very well?\" asked Arthur.\n\"Not particularly. It was a strange sort of place even before the faeries appeared. Rather insular. I always feel as though I'm the subject of gossip whenever I visit, which I probably am. One gets used to such things, in my situation.\"" ;
                on_exhausted {
                   
                   : print "Arthur could think of nothing more to ask Ottoline at present." ;
                   
                }
              }
              
           }
     
          }
      : else {
         : print "But Ottoline Elderfield was not there." ;
         
      }
      
  }
   : else_if (noun1_is "drywell") {
 : if (is_present "marjorie_drywell") {
 : if (drywell_ask_counter==0) {
   : print "Arthur considered interrupting Miss Drywell once more, but decided against it. She really did seem to be most terriby busy." ;
   
 }
 
 : else_if (drywell_ask_counter==1) {
 : clear_screen;
    : print "\"Have you lived here a long time, Miss Drywell?\" asked Arthur.\n\"All my life,\" she replied, swabbing down the table with a cloth soaked in surgical spirit. \"The Drywells are one of the oldest families in the village. Related to the Molyneux family who, you may know, were the original benefactors of Haelstowne. None of them still about, but we're all of the same line. My father - he was an archaeologist, and a historian - wrote a fascinating monograph about it...\"\n\"Really?\" replied Arthur, feigning an interest in Miss Drywell's family history.\n\"Yes - you see, he was an expert in heraldry, amongst other things. And I expect you've heard our rather colourful local legends about Old Haelstowne. You see, before the abandonment of the old village in 1428, the fox was never a part of the Molyneux family crest. But afterwards, it became so. And Richard Travais - I expect you've heard about him - well, it seems that he was known in his time as 'The Fox'...\"\n\"The fox?\" In spite of himself, Arthur was becoming intrigued.\n\"Yes, probably because he was one of the 'cunning folk' - a sort of folk magician and healer you understand - and so he was like a fox, cunning.\"";
    : press_any_key ;
    : clear_screen;
    
    :print "\"What an interesting idea,\" said Arthur, sensing a significance to all this that he couldn't quite put his finger on.\nMiss Drywell continued, \"My father had a theory that Richard Travais was somehow connected with the Molyneuxs, despite their being high born and him of peasant stock. He may have been an illegitimate son of one of them. You know how the nobility tended to sow their oats rather far and wide in those days. There's nothing in the way of hard evidence, of course, but my father's account of it is quite convincing.\"\n\"I daresay,\" said Arthur.\n\"Anyway, if you're interested in the Molyneux family, Mr Mapple, then St Wilfrid's church is the place to look. That's where they're all buried. There's a rather fine monument to them inside. I'm afraid it might not help you find your missing vicar, but it may prove an interesting diversion.\"\n\"Thank you,\" said Arthur. \"I'm sure it will\".\nAnd, with his intuition prickling, he took his leave of Miss Drywell and left the surgery." ;
    : increment "drywell_ask_counter" ;
    : goto "outside_vet" ;
    : press_any_key ;
    : redescribe;
    
 }
  : else {
    : print "Now that they seemed on better terms, Arthur succeeded in exchanging a few pleasantries with Miss Drywell, but failed to extract much else from her." ;
    
 }
 
 
 
 
 }
: else {
    : print "But Miss Drywell was not there." ;
     
 }
  }

  
  : else_if (noun1_is "villagers") {
     : if (is_at "zone_dmv") {
        : if (spell>11&&!endgame) {
           : print "Arthur tried to speak to the ghostly villager but although they seemed to acknowledge him, they did not reply." ;
        }
        : else {
           : print "Arthur spoke to the villagers, but they either glanced away fearfully or pretended not to see him." ;
           
        }
        
     }
     : else_if (is_at "pump") {
        : print "They were too busy talking about other people's business to pay any attention to Arthur." ;
        
     }
     
  }
  : else_if (noun1_is "peldash") {
     : if (is_present "jeremiah_peldash") {
        : if (peldash_description=="The Reverend Jeremiah Peldash (on the ground)") {
       : print "Peldash was barely conscious and sprawled on the ground. It really didn't seem like a proper time to be asking him anything." ;
       
        }
        : else {
           : print "The transforming Reverend Peldash was rather too preoccupied with other matters for Arthur to ask him anything. " ;
           
        }
        
     }
     : else {
      : print "But The Reverend Jeremiah Peldash was not there." ;
        
     }
     
  }
  : if (noun1_is "customers"&&is_at "pub") {
     : print "Considering the general level of inebriation, Arthur wasn't confident that he would get any sense out of them." ;
     
  }
  : if (noun1_is "crow"&&is_present "crow"&&crow_description!="a huge black crow (soaring directly above)") {
    : print "Arthur said a few words to the crow. It cocked its shiny black head and observed him with inscrutable black eyes, giving an uncanny impression that it understood every word he was saying. But it said nothing in reply. " ;
    
  }
  
   
 
  

  }
   

 #ASK end
 
 #LIST start
 

 
 #LIST end
 
   : match "get all"    { 
   : do_all "current_location_objects"; }
   : match "drop all"   { : do_all "inventory_notworn"; }
   : match "wear all"   { : do_all "inventory_notworn"; }
   : match "remove all" { : do_all "inventory_worn"; }
   
   #WIND start

: match "wind camera; wind film; turn winder"  {
   : if (is_carried "box_brownie") {
      : if (cameraloaded) {
      : if (!cameraopen) {
         : if (!filmended) {
         : if (framenumber<8) {
            : if (framenumber>0) {
               : if (!exposure) {
                  :print "Arthur didn't want to waste valuable film by winding it forward before taking a picture.";
                  : done ;
               }
                 
      }
      : increment "framenumber" ;
                 : set_false "exposure" ;
            : print {("Arthur turned the winding key until the number "+framenumber+" appeared in the indicator window.")} ;
      
       }
           : else {
           : if (exposure) {
              : print "There were no more exposures, so Arthur turned the winder several times until he felt the tension slacken, indicating that the exposed film was now wound safely around the receiving reel. " ;
              : set_true "filmended" ;
              : increment "framenumber" ;
}
: else {
    :print "Arthur didn't want to waste valuable film by winding it forward before taking a picture.";
}

           }
            
         }
         : else {
         : print "Arthur had no further need to wind the camera, now that the film was finished and safely wound onto the receiving reel." ;
         }
      }
      : else {
         : print "Arthur would need to close the camera before winding the film." ;
         
      }
      
      
   }
   : else {
   : print "There was no point in winding the empty camera." ;
   
}
    }
     : else {
   : print "But Arthur had nothing to wind." ;
   
}
}
   #WIND end
   
   #ENTER start
   
   : match "enter _; in _;go _"  {
         : if (is_present "car") {
          : if (hasbike) {
       : print "Arthur put down the bicycle." ;
       : set_false "hasbike" ;
       : create "bicycle" ;
    }
            : print "Arthur swung open the door and clambered into the Austin." ;
            : press_any_key ;
            : goto "car_1" ;
            : redescribe;
            
         }
      : else_if (is_present "motor_tricycle") {
       : print "Arthur would have dearly loved to get into Miss Drywell's three-wheeler and take it for a spin, but to do so without her permission hardly seemed fitting behaviour for a police officer." ;
         : done ;
         
      }
      
        : if (is_at "top_rockery") {
       : print "Arthur, feeling a little foolish, forced his way through the foliage and between the trunks of the rhododendron trees, catching himself on a twig and tearing his jacket as he did so." ;
       : press_any_key ;
       : goto "in_trees" ;
       : redescribe;
    }
      : if (noun1_is "foliage") {
         : if (is_at "garden_5") {
            : print "Arthur tried to force his way into the prickly foliage but found it impossible." ;
               : done ;
         }
            : done ;
      }
      : if (noun1_is "wardrobe") {
         : if (is_present "wardrobe"&&wardrobe_open) {
            : print "Arthur was taken with a sudden whimsical notion that if he pushed through the clothes and stepped to the back of the wardrobe he might find himself emerging into a magical, snow-clad land. He dismissed the fanciful notion but determined to remember it for future reference. It might make a good story one day." ;
               : done ;
         }
         
      }
      : if (is_at "outside_Thurgoods"&&noun1_is "cottage") {
       : print "Arthur was not in the habit of boldly walking into people's houses unless invited, or in possession of a warrant." ;
         : done ;
         
      }
      : else_if (noun1_is "sink"&&is_present "sink") {
         : print "As Arthur gazed at the great porcelain bowl a memory surfaced of him stripping down to his underclothes and splashing around in the sink when he was a very small child. He amused himself with the idea of what Mrs Taplow might do if she discovered a fully grown man doing the same in her scullery, but decided on reflection not to try it." ;
         : done ;
         
      }
      : else_if (noun1_is "bed") {
         : if (is_at "bedroom_1"||is_at "peldash_room") {
            : print "Arthur thought about crawling into bed and hiding under the covers but dismissed the notion. Appealing though the idea was, it was hardly becoming of his position as an officer of the law." ;
            : done ;
            
         }
         
      }
      
      : if (is_present (s1())) {
              : print {("Arthur tried and failed to enter the "+original "noun1"+".")} ;
      }
  
   }
   
   #ENTER end
   
   #LEAVE start
    
    : match "leave _; exit _; out _"  {
      
      : if (is_at "car_1") {
         : print "Arthur opened the door and, reluctant as ever to leave the seat of his beloved Austin, stepped out onto the driveway." ;
         : press_any_key ;
         : goto "path_8" ;
         : redescribe;
         }
      
    : if (is_at "in_trees") {
    : if (is_present "tiny_man"&&!is_present "little_people") {
       : print "Arthur's discomfort in crouching awkwardly between the branches of the rhododendron trees overcame his curiosity at the spectacle before him. He moved from his hiding place and immediately the little man fled. A moment later he was out of the trees and standing on the stony summit of the rockery." ;
       : destroy "tiny_man" ;
       
       
    }
    : else_if (is_present "little_people") {
       : print "Arthur's discomfort in crouching awkwardly between the branches of the rhododendron trees overcame his curiosity at the spectacle before him. He moved from his hiding place and immediately the little people fled. A moment later, he was out of the trees and standing on the stony summit of the rockery." ;
       : destroy "tiny_man" ;
       : destroy "little_people" ;
       
    }
    
    : else {
       : print "With some relief, Arthur left the dark and cramped space beneath the rhododendron trees. Tiny things seemed to flit and scamper away from him as he emerged onto the top of the rockery." ;
       }
       : if (faerycounter>0){
       : set_integer var = "faerycounter"  value = "0" ;
       }
       : press_any_key ;
       : goto "top_rockery" ;
       : redescribe;
        
    
    }
   }
   
   #LEAVE end
  #START start

: match "start car"  {
   : if (is_at "car_1") {
   : if (!controls_set) {
       : print "Arthur pulled out the fuel supply knob and turned the engine switch to the 'on' position. Now all he needed to do to start the engine was to pop outside and turn the starting handle beneath the front grille." ;
       : set_true "controls_set" ;
       
   }
   : else {
      : print "Arthur had already set the controls for starting. He simply needed to pop outside and turn the starting handle to bring the engine to life." ;
   }
   }
}
  #START end
  
  
  #TURN start
  
  : match "turn handle; start car; drive car"  {
     : if (is_present "car") {
   
       : if (!controls_set) {
       : print "Arthur leaned inside the car and set the controls to the starting position." ;
          }
       : set_true "controls_set" ;
       : if (!tried_engine) {
          : print "Arthur grasped the starting handle and turned it smartly, expecting the engine to fire at once. He was surprised that it didn't, and tried to again. Surprise turned to dismay when, on a third attempt, the car still showed no sign of starting. Perplexed, he abandoned the handle and released the bonnet catch, sliding the metal panel up to reveal the engine. In truth, Arthur understood little about the workings of motor cars, but he knew enough to know that the engine had been tampered with. Several bolts appeared to have been loosened, wires had been disconnected and the cap was off the oil reservoir. As he reeled with a terrible sense of personal injury, he sensed rather than saw something brush past him and thought he heard quiet laughter. But when he swung around, there was nobody there." ;
          : set_true "tried_engine" ;
          
          }
          : else {
             : print "Arthur had already tried to start the car. Evidently, whatever had been done to the engine would need to be undone for his beloved Seven to come back to life but Arthur lacked the skills to accomplish that." ;
             
          }
          
    
       
       
     }
    
     
  }
  
  : match "drive tricycle"  {
     : if (is_present "motor_tricycle") {
       : print "Arthur would have dearly loved to borrow Miss Drywell's three-wheeler and take it for a spin, but to do so without her permission hardly seemed fitting behaviour for a police officer." ;
        
     } 
  }
  
  : match "turn handle"  {
     : if (is_at "scullery") {
        : print "Arthur knew better than to interfere with the mangle." ;
        
     }
     
  }
  
  : match "turn light"  {
    : if (preposition_is "on") {
  : if (is_at "darkroom") {
  : if (!has_not_created "lightswitch") {
   
           : if (!light_on) {
            : if (negs_on_sheet&&glass_on_sheet&&sheet_description=="a sheet of new, unexposed photo paper") {
             : print "Arthur put his finger to the light switch, crossed fingers on the other hand and hoped for the best.\n" ;
             : press_any_key ;
             : print "The light snapped on, illuminating the room with a harsh glare. Arthur counted to ten and turned the light off, hoping that had been long enough for a successful exposure." ;
             
             : set_string var = "sheet_description"  text = "a sheet of exposed, undeveloped photo paper" ;
             : add_trait subject="sheet" trait="wettable_t";
             
             : done ;
          }
          : gosub "photosensitive" ;
     
              : set_true "light_on" ;
              : print "Arthur switched on the light." ;
              : press_any_key ;
              : redescribe;
           }
: else {
   : print "But the light was already on." ;
   
}
}
    : else {
        : print "Arthur fumbled about but failed to find a light switch." ;
        
     }
   }
     : else_if (is_at "drawing_room") {
        : if (traptor==4) {
        : if (!light_on) {
        : if (sitting) {
           : print "Arthur stood up." ;
           : set_false "sitting" ;
           :set_false "holding_hands";
           : gosub "chair_creation" ;
           
        }
        
           : print "Arthur flicked the light switch, filling the room with the glare of electric light." ;
           : if (is_present "holder_1") {
              : if (is_present "ottoline_elderfield") {
                 : print "Ottoline tutted impatiently. \"Really Mr Mapple,\" she said, \"for there to be any chance of this working at all, we need the lights to be off!" ;
              }
          
           }
           : set_true "light_on" ;
           
           : press_any_key ;
           : redescribe;
           
        }
        : else {
           : print "But the light was already on." ;
           
        }
        
        }
          : else {
        : print "Arthur didn't see the point in that." ;
        
     }
     }
   
       }
        : else_if (preposition_is "off") {
        : if (is_at "darkroom") {
         : if (light_on) {
              //if conditions to do with developing here
                            : set_false "light_on" ;
              : print "Arthur switched off the light." ;
              : press_any_key ;
              : redescribe;
     }
     : else {
        : print "But the light was already off." ;
        
     }
     
  
     }
 
  
  : else_if (is_at "drawing_room"&&traptor==4) {
:if (light_on) {
: if (sitting) {
           : print "Arthur stood up." ;
           : set_false "sitting" ;
           : set_false "holding_hands" ;
           
           : gosub "chair_creation" ;
           
        }
: if (!is_present "holder_1") {
   : print "Arthur turned off the light, plunging the drawing room into darkness." ;
   : if (is_present "ottoline_elderfield") {
      : print "\"Very good,\" said Ottoline, \"but we will need a candle to light our way. It's too dangerous to reach beyond the veil in total darkness; the flame is the thread that binds us to this life." ;
      
   }
   
}
: else {
   : print "Arthur turned off the light." ;
   
}
: set_false "light_on" ;
: press_any_key ;
: redescribe;


}
: else {
   : print "But the light was already turned off." ;
   
}

  }
        }

     
     }
     
     : match "turn tap"  {
     : if (is_present "tap") {
     : if (nonwettable_things_in_sink>0) {
     : print "Arthur decided not to try it. Whatever was in there would not benefit from being wet." ;
     : done ;
     
      }
        : print "Arthur turned the great brass handle and saw water tumble from the spout and explode against the porcelain of the sink. He watched, mesmerised, for a few moments before turning the tap off again. He told himself he had better things to do than to fiddle with scullery taps all day." ;
        : if (parent_of "film"=="sink") {
          : if (film_description=="a strip of film negatives (fixed, unwashed)") {
                : print "The water washed the fixer off the film." ;
               : set_string var = "film_description"  text = "a strip of film negatives (processed, wet)" ;                   : remove_trait subject="film" trait="wettable_t";
               : increment "nonwettable_things_in_sink" ;
               
            }
            
        }
             : if (parent_of "sheet"=="sink") {
            : if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
                : print "The water washed the fixer off the sheet." ;
               : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, wet)" ;
                 : remove_trait subject="sheet" trait="wettable_t";
                   : increment "nonwettable_things_in_sink" ;
            }
           
        }
     }
     : if (is_present "keg_1") {
     : if (preposition_is "off") {
        : if (beer_tap_on) {
           : print "Arthur turned the tap on the beer keg off." ;
           : set_false "beer_tap_on" ;
            : create "joseph_jarbell" target = "pub_cellar_passage" ;
        }
           : else {
              : print "But the beer tap was already off." ;
              : done ;
              
           }
             
     }
     : else_if (preposition_is "on") {
        : if (!beer_tap_on) {
            : if (beer_keg_description=="a beer keg (attached to the hose)") {
           : print "Arthur turned the tap on the beer keg on." ;
           : set_true "beer_tap_on" ;
           : create "joseph_jarbell"target = "pub"  ;
     }
     : else {
         : print "Arthur decided not to. It would have been a terrible waste of beer, never mind the mess it would make." ;
     }
     
        }
        : else {
           : print "But the beer tap was already on." ;
           
        }
     
        }
        : else {
           : print "Arthur wasn't sure whether to turn it on or off." ;
        }
        
     }
     : else_if (is_present "keg") {
     : if (preposition_is "on") {
          : print "Arthur decided not to. It would have been a terrible waste of beer, never mind the mess it would make." ;
          : done ;
          
     }
     : else_if (preposition_is "off") {
        : print "But the beer tap was already off." ;
        
     }
        : else {
           : print "Arthur wasn't sure whether to turn it on or off." ;
        }
      
        
     }
     
       
  }
  
  #TURN end
  
 
  
 
  
  #WAIT start
  
  : match "wait-"  {

  
     : if (is_at "in_trees") {
     : if (faerycounter==0) {
     : if (faerytreesinstance==0) {
        : print "Arthur waited. To be crouching amongst the closely spaced, spiky branches of the rhododendron trees was proving to be rather uncomfortable, and Arthur was about to leave his confines when a small creature landed nearby. He looked and found that he could not see it quite clearly, though it was quite near to him. He looked harder, and suddenly his vision cleared. He caught his breath and felt a sudden rush to the head: the effect, no doubt, of seeing something that simply could not be. For there before him, quite plainly, was the tiny yet perfectly formed figure of a man. " ;
      : set_true "seen_faeries" ;
       : increment "faerytreesinstance" ;
        
      
        }
         : else_if (faerytreesinstance==1) {
           : print "Arthur waited amongst the prickly rhododendrons, half hoping that the little man might appear to him again and half hoping that it wouldn't, so he might be assured of his sanity. Perhaps, he though, it has been only an hallucination caused by the heat and a little indigestion? No sooner had he convinced himself, the little man appeared once more. ";
        
      : increment "faerytreesinstance" ;
       
        }
        : else_if (faerytreesinstance==2) {
            : print "Once again, Arthur waited. Eventually, after what seemed an eternity in the prickly dark beneath the rhododendron bushes, his patience was rewarded. The tiny man appeared once more. " ;
        
             : increment "faerytreesinstance" ;
        }
        : else_if (faerytreesinstance==3) {
          : print "A small voice somewhere inside Arthur begged to know what he was doing, squatting again within the prickly foliage of the rhododendron trees.\n He ignored it and waited for a time until self-doubt won him over and he made to leave his hiding place - but in that instant, the miniature man appeared once more. " ;
           : set_integer var = "faerytreesinstance"  value = "1" ;
           
        }
        
        : create "tiny_man" ;
        
         : increment "faerycounter" ;
   
         
        }
        : else {
          : print "Arthur waited for a few moments." ;
          
     }
     }
     : else {
          : print "Arthur waited for a few moments." ;
          
  
     }
     
     
  }
  
  #WAIT end
  
  #LIGHTSWITCH start
  
  : match "press lightswitch;press switch;flip lightswitch;flip switch;use lightswitch;use switch; press light; flip light"  {
  : if (is_present "lightswitch"||is_present "lightswitch_1") {
         : print "(If Arthur wanted to operate the light switch then he should TURN [[on/off]] LIGHT or TURN LIGHT [[on/off]].)" ;
        : done ;
  }
  
 
  }
  
  #LIGHTSWITCH end
  
  #PRESS start

  : match "press _"  {
  : if (noun1_is "button") {
  : if (is_beside "box_brownie") {
     : print "But Arthur would need to be carrying the camera to do that." ;
   : done ;
     
  }
  
     : if (is_carried "box_brownie") {
     : if (is_at "poachers_house"||is_at "poachers_scullery"||is_at "vet"||is_at "chemist"||is_at "pub") {
        : print "Arthur didn't feel it would be quite proper to take a photograph there." ;
        : done ;
     }
     : if (exposure) {
     : if (framenumber>0&&framenumber<9) {
        : print "Arthur was rather conservative when it came to picture-taking and did not appreciate the magic of the double exposure. He would need to wind the camera before taking another snap." ;
          : done ;
        }  
     }
     : if (is_present "thurgood") {
        : print "Mr Thurgood grumbled, pulled his cap down over his eyes and turned away as he saw Arthur preparing to use the camera." ;
     }
         : if (is_present "edna_taplow") {
        : print "Mrs Taplow saw Arthur prepare to take a photograph and seemed torn between objecting to the effrontery and making herself look presentable for the camera. " ;
     }
     : if (is_present "frank_farthing") {
        : print "It seemed unfair to use the camera here, with Frank Farthing in his current condition." ;
        : done ;
        
        
     }
     : if (framenumber==8&&!exposure) {
     : if (faerycounter<1&&!photographed_faeries) {
     : print "Arthur hesitated as his finger hovered over the button. He only had one exposure left on the film and he feared that his efforts so far would result in a rather mundane set of photographs. He thought he had better save his final shot for something really special. " ;
          : done ;
     }
     }
     
      :print "Arthur pushed the button and the camera clicked." ;
      
      : if (is_at "in_trees") {
       : if (is_present "tiny_man"&&!is_present "little_people") {
          : print "The tiny man's head snapped round at the sound of the camera shutter and it shot a look of malice towards the trees that turned Arthur cold inside. It flew high into the air, hovered above the rockery for an instant and the next moment was gone." ;
          : if (cameraloaded&&framenumber>0) {
              : set_integer var = "faerycounter"  value = "-1";
              : set_true "photographed_faeries" ;
              : set_true "tiny_man_photo" ;
              
            : set_true "exposure" ;
               
          }
             : destroy "tiny_man" ;
             
               : done ;
     
          
       }
       : else_if (is_present "little_people") {
          : print "At the sound of the camera shutter, the little people froze and several tiny heads snapped towards the trees where Arthur was hiding. He saw their faces full of malice and turned cold inside. The whole company suddenly flew up into the air, hovered above the rockery for an instant and the next moment were gone." ;
       : if (cameraloaded&&framenumber>0) {
               : set_integer var = "faerycounter"  value = "-1" ;
               : set_true "photographed_faeries" ;
               
                : set_true "exposure" ;
          }
             : destroy "tiny_man" ;
               : destroy "little_people" ;
               
               : done ;
       }
       
   
    }
      : if (cameraloaded&&framenumber>0&&framenumber<9) {
        : set_true "exposure" ; 
         : if (is_at "zone_inside_vicarage"&&!is_present "edna_taplow") {
           : set_true "photo_inside_vicarage" ; ;
           
        }
        : if (is_at "zone_outside_vicarage"&&!is_present "thurgood") {
           : set_true "photo_outside_vicarage" ;
           
        }
       
        : if (is_at "zone_lanes") {
           : set_true "photo_lanes" ;
           
        }
      
        : if (is_at "zone_dmv") {
           : set_true "photo_dmv" ;
          
        }
        : if (is_at "zone_church_outside") {
           : set_true "photo_outside_church" ;
           
        }
        : if (is_at "church"||is_at "church_1") {
           : set_true "photo_inside_church" ;
           
        }
        
        
        : if (is_at "chapel") {
           :set_true "photo_chapel_outside";
        }
        
        : if (is_at "zone_road_to_village") {
           : set_true "photo_road_village" ;
           
        }
        : if (is_at "zone_village_outside"&&!is_present "edna_taplow") {
           : set_true "photo_around_village" ;
           
        }
        : if (is_at "wetland") {
           : set_true "photo_wetland" ;
           
        }
        : if (is_at "zone_garden"&&!is_present "thurgood") {
           : set_true "photo_garden" ;
           
        }
        : if (is_at "zone_rockery") {
           : set_true "photo_rockery" ;
           
        }
   : if (is_present "edna_taplow") {
      : set_true "photo_taplow" ;
   }
   : if (is_present "thurgood") {
      : set_true "photo_thurgood" ;
      
   }
   
    
    
    
     }
    
     : done ;
     
      }
    
: print "But Arthur saw no button to press." ;
: done ;

     }
     : if (noun1_is "panel") {
        : if (is_present "wardrobe") {
           :print "Arthur pushed the panel and nothing happened.";
           : done ;
           
        }
        
     }

     : if (is_present "wardrobe"&&wardrobe_open) {
          : if (noun1_is "corner") {
           : if (is_exists "drawer_1") {
              : print "Arthur pushed the corner hard, but nothing else out of the ordinary occurred." ;
           }
           : else {
              : print "Arthur pushed down hard on the corner of the wardrobe and heard a distinct click accompanied by a sharp pain as something hard banged against his shins. He looked down and saw that a hidden drawer in the base of the wardrobe had sprung open." ;
              : create "drawer_1" ;
              : done ;
              
           }
        }
        : else_if (noun1_is "base") {
           : print "Arthur pressed down on the base of the wardrobe, but nothing out of the ordinary occurred. Perhaps, he thought, a more directed approach might be more effective." ;
           : done ;
           
        }
        
     }
 
  }
  
  #PRESS end
  
   : match "roll keg;move keg;push keg;pull keg"  {
      : if (!is_beside "keg_1") {
      : print "Arthur rolled a keg from the top level of the rack down the shallow slope to the bottom level, where it nestled securely in the depression designed for it." ;
      : create "keg_1" ;
      : set_false "tap_on" ;
      : done ;
   }
      : else {
         : print "Arthur thought about rolling a keg off the upper rack but, with a keg already occupying the lower rack, there was nowhere it could be rolled to." ;
         : done ;
            
      }
     }
     
      : match "roll barrel"  {
      : if (is_at "pub_cellar") {
            : print "Arthur tried to, but the barrels were just too heavy." ;
         }
 }
     
#MOVE start

: match "move _; push _; pull _"  {
: if (noun1_is "corner"&&is_present "corner") {
   : print "Arthur fiddled with the corner of the wardrobe base for a while, to little effect - although he did feel it give a little under his fingers." ;
   : done ;
}
: if (noun1_is "base"&&is_at "peldash_room"&&wardrobe_open) {
   : print "Arthur fiddled with the base of the wardrobe, but nothing out of the ordinary occurred. Perhaps, he thought, a more directed approach might be more effective. " ;
   
}
: if (noun1_is "hose"&&is_at "pub_cellar") {
   : print "Arthur fiddled with the hose for a while, to little effect." ;
   : done ;
   
}

: if (!noun1_is "rope"&&!noun1_is "rail"&&!noun1_is "taplow"&&!noun1_is "tail"&&!noun1_is "ribbon"&&!noun1_is "sally") {
   : if (noun1_is "tapestry"&&is_at "study") {
      : if (!moved_tapestry) {
         : print "Arthur moved the tapestry to reveal a door behind." ;
       : set_true "moved_tapestry" ;
      : press_any_key ;
      : redescribe;
      
      }
      : else {
         : print "Arthur felt no further need to fiddle with the tapestry." ;
         
      }
      
      
   }
   : if (noun1_is "panel"&&is_present "wardrobe") {
      : print "Arthur tried to move the panel and found that it was firmly fixed in place." ;
      : done ;
      
   }
   : if (noun1_is "coffer") {
   : if (is_at "bell_loft") {
   : if (!moved_coffer) {
      : if (hymn_books_in_coffer) {
         : print "Arthur tried to move the coffer but the huge old thing was simply to heavy too budge." ;
         : done ;
         
      }
      : else {
         : print "With a great deal of exertion, Arthur succeeded in moving the massive and heavy coffer a few inches along the wall, exposing a portion of the oak panelling behind. He felt like one of the ancients must have done when they succeeded in moving one of the monoliths a fraction of an inch nearer to the site of Stonehenge." ;
         : set_true "moved_coffer" ;
       : swap o1 = "panelling"  o2 = "panelling_1" ;
       
         : press_any_key ;
         : redescribe;
           }
           }
          : else {
             : print "Considering its extreme reluctance to move in the first place, Arthur decided not to try his luck by attempting to move it any further." ;
             : done ;
             
          }
           
      }
      
   }

   : if (noun1_is "table") {
 : if (is_at "drawing_room") {
 : if (traptor==4) {
     : if (ottoline_ask_counter==4) {
     : print "Arthur tried to move the table but it was just too enormously heavy for one person to manage. It was certainly a two person job." ;
     : increment "ottoline_ask_counter" ;
   : done ;
        }
        : if (ottoline_ask_counter==6) {
 : if (is_present "ottoline_elderfield") {
 : if (ottoline_description=="Ottoline Elderfield (sitting on a chair)") {
    : print "Ottoline stood up." ;
     : set_string var = "ottoline_description"  text = "Ottoline Elderfield" ;
   : gosub "chair_creation" ;
    
 }
 : if (sitting) {
  : print "Arthur stood." ;
    : gosub "chair_creation" ;
    : set_false "sitting" ;
     : set_false "holding_hands" ;
  
    
 }
 
       : print "Together, Arthur and Ottoline succeeded in moving the table." ;
       : if (round_table_description=="a round table (by the window)") {
   : print "They moved it back into the middle of the room." ;
   : set_string var = "round_table_description"  text = "a round table (in the middle of the room)" ;
   : press_any_key ;
   : redescribe;
   
}
: else {
   : print "They moved it over to the window." ;
   : set_string var = "round_table_description"  text = "a round table (by the window)" ;
   : press_any_key ;
   : redescribe;
   
}
}
        }
        : else_if (ottoline_ask_counter>6) {
           : print "\"No Arthur,\" said Ottoline firmly, \"for this to work, the table must be in the centre of the room." ;
           : done ;
           
        }
        
        : else {
    : print "Arthur tried to move the table but the wretched thing was just too heavy. It was definitely a two-person job." ;
    : done ;
    
 }
 }
 : else {
  : print "Arthur tried to move the table but the wretched thing was just too heavy." ;
   }
    
 }
 : else_if (is_at "dining_room") {
    : print "Arthur thought about moving the dining table but then couldn't see any point in actually doing it." ;
    : done ;
    
 }
 : else_if (is_at "kitchen") {
    : print "Nothing seemed more calculated to annoy Mrs Taplow than moving her kitchen table." ;
    
 }
 
  
   }
   : if (noun1_is "barrel") {
      : if (is_present "barrels") {
      : if (has_not_created "stone_wall") {
         : print "The barrels were very large and very heavy, but with considerable effort, Arthur managed to move one aside sufficiently to reveal the stone wall behind." ;
       : create "stone_wall" ;
       : press_any_key ;
       : redescribe;
       
      }
      : else {
      : print "Arthur didn't think it was worth the effort of moving them again." ;
      : done ;
      
      }
      }
        
   }
   : if (noun1_is "sacking") {
: if (is_at "hut") {
   : if (has_not_created "trunk") {
      : create "trunk" ;
      : print "Arthur moved the heap of old sacking, revealing a metal trunk beneath." ;
      : create "trunk" ;
      : press_any_key ;
      : redescribe;
   }
}
}
: if (noun1_is "cover") {
   : if (is_at "DMV_5") {
      : if (traptor==6) {
   : print "But there was no cover over the mouth of the well in the medieval village of Haelstowne." ;
}
     : else_if (cover_on) {
            : print "Arthur grasped the iron ring in the middle of the cover and pulled with all his might. At first it wouldn't budge but eventually, he succeeded in lifting it and inching it aside. Beneath was a gaping black hole that stared back at Arthur like a single, unblinking eye." ;
          
            : set_false "cover_on" ;
            : if (is_present "ottoline_elderfield") {
               : if (has_not_created "hole") {
                  : print "\"Goodness,\" said Ottoline, \"I wonder whatever can be down there?\"" ;
               }
            
            }
                 : create "hole" ;
         }
         : else {
         : if (rope_down_well) {
          : print "Arthur retrieved the rope before grasping the ring once more and slowly dragged the wooden cover back across the hole." ;
               : set_false "rope_down_well" ;
      : destroy "rope" ;
         }
         :else {
            : print "Arthur grasped the ring once more and slowly dragged the wooden cover back across the hole." ;
            }
            : set_true "cover_on" ;
            : destroy "hole" ;
            
         }
         : press_any_key ;
         : redescribe;

   }
   
}
 
         
         : if (noun1_is "handle"&&is_at "pump") {
            : print "Arthur didn't see the necessity of meddling with the village pump." ;
            : done ;
            
         }
            : if (noun1_is "barrel") {
      : if (is_present "barrels") {
      : if (has_not_created "stone_wall") {

         : print "The barrels were very large and very heavy, but with considerable effort, Arthur managed to move one aside sufficiently to reveal the stone wall behind." ;
       : create "stone_wall" ;
       : press_any_key ;
       : redescribe;
                
      }
      : else {
      : print "Arthur didn't think it was worth the effort of moving them again." ;
      : done ;
      
      }
      
      
      }
        : done ;
   }

: if (noun1_is "rug") {
   : if (is_at "landing"||is_at "landing_2"||is_at "top_stairs") {
      : print "Arthur saw little to be gained from moving the rug around." ;
      : done ;
      
   }
   
}

//

   : if (is_present (s1())&&s1()!="wooden_cover") {
      : print {("Moving the "+original "noun1"+" seemed a rather pointless pursuit.")} ;
      : done ;
      
   }
   
}
}


#MOVE end

  #PULL start
  
  : match "pull _"  {

  
 
     : if (noun1_is "rope"||noun1_is "tail"||noun1_is "ribbon") {
     : if (is_at "church") {
        : if (holding_rope) {
           : if (bell_ringing==0) {
           : if (is_present "ottoline_elderfield") {
              : print "Ottoline rolled her eyes as she watched Arthur interfering with the bell rope." ;
              
           }
           
              : print "Arthur tugged hard on the tail rope and watched as the sally descended past him and towards the floor." ;
              : print "Arthur heard the ringing of the bell."; : set_integer var = "bell_ringing"  value = "2" ;
              :stop_tick;
              : done ;
              
            
           }
           : else {
              : print "Arthur, imagining that he was now fully versed in the art of bell ringing, was confident that he could be relied upon to pull the rope at the right time to keep the bell ringing, without being told to do so." ;
              : done ;
              
           }
           
        }
        : else {
           : print "But Arthur was not holding the rope." ;
           : done ;
           
        }
        
     }
     : else_if (is_at "bell_loft"||is_present "rope") {
        : print "Arthur didn't see the point in that." ;
        : done ;
        
     }
     
         }
         : if (noun1_is "sally") {
     : if (is_at "church") {
        : if (holding_rope) {
           : if (bell_ringing==0) {
        : print "But the sally was up above and out of reach." ;
        : done ;
        
         }
         : else {
            : print "Arthur imagined he knew all about bell-ringing and fancied that he could be relied upon to pull that part of the rope when the time came.\nHe recalled Mr Snapeshuttle's dire warning about grabbing the sally at the wrong time and dismissed it lightly. What could possibly go wrong?" ;
            : done ;
            
         }
         
         }
         }
         }
         
         : if (noun1_is "rail") {
         : if (is_present "rail") {
            : if (rail_description=="an iron rail (inserted into the stone fox's ear)") {
            : if (is_present "cavity") {
             : print "Arthur pulled on the rail once more, as Ottoline watched with a quizzical expression. The stone fox having swung over to its full extent, nothing else happened." ;
               : done ;
            }
            : if (!is_present "ottoline_elderfield"||is_present "ottoline_elderfield"&&ottoline_ask_counter<10) {
                  : print "Arthur pulled on the rail as hard as he could. He sensed a fractional movement at the end of his improvised lever, but strain as he might, nothing else happened." ;
                  : done ;
                  
            }
            : else {
                : print "Arthur and Ottoline pulled together and the stone fox swung around on its base with a grinding sound, revealing a cavity beneath.";
              
                : if (!has_not_created "casket") {
                : if (box_description=="a small wooden casket (within the cavity)") {
                   : create "casket" ;
                   : if (casket_open) {
                      : create "bones" ;
                      : if (book_description=="a tattered book (in the small wooden casket)") {
                         : create "remnant" ;
                         
                      }
                      
                   }
                   
                }
                 }
                        : create "cavity" ;
                        : press_any_key ;
                        : redescribe;
           : done ;
           
                }
           
            
            
            }
         }
         }

   : if (is_present (s1())) {
                : print {("Pulling the "+original "noun1"+" seemed a rather pointless pursuit.")} ;
                : done ;
   }
  }
  #PULL end

#PUSH start

: match "push _"  {
 : if (noun1_is "rail") {
         : if (is_present "rail") {
            : if (rail_description=="an iron rail (inserted into the stone fox's ear)") {
            : if (is_present "cavity") {
            : if (is_present "ottoline_elderfield") {
               : print "Together, Arthur and Ottoline pushed against the rail and with a grinding sound, the stone fox swung back into place. The secret cavity was hidden once more." ;
               : destroy "cavity" ;
: if (box_description=="a small wooden casket (within the cavity)") {
   : destroy "casket" ;
   : destroy "bones" ;
   : if (book_description=="a tattered book (in the small wooden casket)") {
      : destroy "remnant" ;
      : press_any_key ;
      : redescribe;
      
   }
   
}

            }
            }
               : else {
                : print "Arthur pushed on the rail as hard as he could, but nothing happened." ;
               :done;
            }
         }
         }
            }

   : else_if (noun1_is "taplow"&&is_present "edna_taplow") {
      : if (is_at "recess"&&window_open) {
      : print "Some wicked part of Arthur suggested pushing Mrs Taplow out of the open window, but he quickly suppressed the urge." ;
      : done ;
      
      }
      
   }
   : if (is_present (s1())) {
            : print {("Pushing the "+original "noun1"+" seemed a rather pointless pursuit.")} ;
            : done ;
            
   }

}
#PUSH end

  #CLIMB start

: match "climb _"  {

: if (noun1_is "steps") {
: if (is_present "steps") {
   : if (is_carried "steps") {
   : print "Arthur dropped the steps." ;
   : drop "steps"quiet = "true"  ;
     }
: if (is_at "top_stairs") {
: print "Arthur climbed the steps rather anxiously, stationed as they were at the very top of the stairs. With every creaking footfall he imagined himself toppling over and falling into the jagged wooden throat of the staircase below. He breathed a sigh of relief when he reached the top without incident, and noted that the sill of the window recess was now quite near to him." ;
: press_any_key ;

    : set_true "recess_way_clear" ;
}
: goto "on_steps" ;
: redescribe;
: done ;

}
}
: if (noun1_is "rope") {
   : if (is_at "church") {
      : print "Arthur wouldn't have like to try to climb the bell rope. It was a long way up!" ;
      : done ;
      
   }
}
: if (noun1_is "monument") {
   : if (is_at "church_1") {
      : print "Looking round to check that nobody was looking, Arthur grabbed the end of a marble scroll, found a foothold atop a carved skull, and began to climb up the funerary monument. In a few moments he had succeeded in scrambling his way to the top." ;
      : goto "on_monument" ;
      : create "triptych" ;
      : press_any_key ;  
   : redescribe;
   
   }
   
}
: if (preposition_is "down") {
   : if (is_at "on_monument") {
      : goto "church_1" ;
      : redescribe;
      
   }
   
}

: if (noun1_is "steeple") {
   : if (is_at "church"||is_at "graveyard_1"||is_at "graveyard_2") {
      : print "Arthur had no head for heights and besides, he was hardly equiped to climb a church steeple!" ;
      : done ;
      
   }
   
}

: print "Arthur avoided climbing as a rule, citing an old ankle injury as a reason to avoid it. In truth, he was rather ungainly and tended to scrabble rather than climb, much to the amusement of those who witnessed it." ;

}


#CLIMB end



#FILL start

: match "fill _"  {
: if (is_at "scullery") {
   //checking if water is already in target recepticle

: if (noun1_is "sink") {
   : print "Arthur felt a sudden urge to fill the sink with water - but then realised that there was no plug, so abandoned the idea. Perhaps, he thought, Mrs Taplow kept the plug secreted about her person as a precaution against such mischief. " ;
   : done ;
   
   
}
: if (noun1_is "chalice"&&is_carried "chalice") {
   : print "Arthur poured some water into the chalice and then, unsure of why he should want to walk around with a chalice full of water, poured it away again." ;
    : done ;
}
: if (noun1_is "keg"&&is_carried "keg") {
  : print "Arthur couldn't see any reason to do that, so he ignored the compulsion." ;
    : done ;
}

: if (is_carried (s1())) {
: if (s1()=="bucket"&&bucket_units==4) {
   : print "But the bucket was already full of water." ;
   : done ;
}
    : else_if (parent_of "water_2"==s1()||parent_of "water_3"==s1()||parent_of "water_4"==s1()) {
   : print {("But the "+original "noun1"+" was already full of water.")} ;
      : done ;
}
//checking if other liquid  is already in the target recepticle
: else_if (parent_of "developer"==s1()) {
     : print "It seemed pointless dilute the developer, so Arthur decided not to try it." ;
   :done;
}
: else_if (parent_of "fixer"==s1()) {
: print "It seemed pointless dilute the fixer, so Arthur decided not to try it." ;
   :done;
   }
//checking if non-wettable things in target recepticle

                 : else_if (s1()=="dish"&&nonwettable_things_in_dish>0||s1()=="bucket"&&nonwettable_things_in_bucket>0||s1()=="bottle"&&nonwettable_things_in_bottle>0||s1()=="flask"&&nonwettable_things_in_flask>0) {
                    : print "Arthur decided not to try it. Whatever was in there would not benefit from being wet." ;
                    : done ;
                    
                 }
: else_if (s1()=="bucket") {
   : print "Arthur put the bucket in the sink, turned on the tap and watched it fill with water. He then removed it from the sink and turned the tap off." ;
   : if (parent_of "film"=="bucket"||parent_of "sheet"=="bucket") {
   : gosub "washing_off" ;
   
   }
   
   : set_integer var = "bucket_units"  value = "4" ;
   : create "water_1" target = "bucket"  ;
   
}
: else_if (s1()=="bottle") {
: if (bottle_open) {
   : print "Arthur put the bottle in the sink, turned on the tap and watched it fill with water. He then removed it from the sink and turned the tap off." ;
   : create "water_3" target = "bottle"  ;
   }
   : else {
      : print "But the bottle was not open." ;
      
   }
   
}
: else_if (s1()=="dish") {
   : print "Arthur put the dish in the sink, turned on the tap and watched it fill with water. He then removed it from the sink and turned the tap off." ;
      : if (parent_of "film"=="dish"||parent_of "sheet"=="dish") {
   : gosub "washing_off" ;
   
   }
   : create "water_2" target = "dish"  ;
}
: else_if (s1()=="flask") {
: if (flask_open) {
   : print "Arthur put the flask in the sink, turned on the tap and watched it fill with water. He then removed it from the sink and turned the tap off." ;
   : create "water_4" target = "flask"  ;
   }
   : else {
      : print "But the flask was not open." ;
      
   }
   
}
: else_if (noun1_is "bottle"&&is_carried "witch_bottle") {
 
   }
   


: else {
   : print "Arthur didn't understand how he could fill that." ;
   
}

}
: else {
   : print "But Arthur needed to be carrying it before he could fill it." ;
   
}
}
: else {
   : print {("Arthur looked around but he couldn't see a place to fill anything (if he wanted to decant fluid from one vessel into another then he should POUR it INTO the vessel).")} ;
   
}
   }
#FILL end

#EMPTY start

: match "empty _"  {
  : if (noun1_is "bottle") {
     : if (is_carried "witch_bottle") {
        : if (!witch_bottle_empty) {
           : if (is_at "scullery") {
              : if (witch_bottle_open) {
                 : print "Arthur emptied the contents of the witch bottle into the sink. It had been filled with noxious smelling yellow liquid in which were suspended a number of small iron nails and what appeared to be tufts of hair. Feeling rather nauseous, Arthur decided not to investigate too closely but instead turned on the tap and washed it all down the plughole before rinsing out the bottle itself." ;
                 : set_true "witch_bottle_empty" ;
                 : done ;
                 
              }
              : else {
                 : print "But the witch bottle was closed." ;
                    : done ;
              }
              
           }
           : else {
              : print "But there was nowhere to empty it here." ;
              : done ;
              
           }
           
        }
        : else {
           : print "But the witch bottle was empty." ;
           : done ;
           
        }
        
     }
     
  }
  : if (noun1_is "keg") {
     : if (!beer_keg_open) {
       : print "But the keg was sealed." ;
       : done ;
       
     }
     : else {
   : if ( count("keg_objects")==1) {
  : print "Arthur saw no reason to pour away good ale." ;
  : done ;
  
}
     : else {
        : print "Arthur felt that he shouldn't throw away the contents of the beer keg. It might be important." ;
        : done ;
        
     }
     
       
     }
     
  }
  
 : if (is_carried (s1())) {
   :if (!is_carried "water_1"&&!is_carried "water_2"&&!is_carried "water_3"&&!is_carried "water_4"&&!is_carried "developer"&&!is_carried "fixer"){
          : print "But Arthur was not carrying anything that needed to be emptied." ;
          : done ;
          }
    : if (is_at "scullery") {
   : set_string var = "emptying_description" {("Arthur emptied the "+original "noun1"+" into the sink and watched the liquid drain away.")}
   
          : if (nonwettable_things_in_sink>0) {
             : print "Arthur decided not to. Whatever was in the sink did not need liquid poured onto it." ;
             :done;
          }
          }
          : else_if (is_at "zone_inside_vicarage")
          {
         : print {("Arthur didn't think it wise to empty a "+original "noun1"+" in here.")} ;
         : done ;
         
          }
          : else {
  : set_string var = "emptying_description" {("Arthur emptied the "+original "noun1"+" onto the ground and watched the liquid drain away.")}
             
          }
          
          
          
          //EMPTYING WATER
          
          : if (parent_of "water_1" == (s1()) ) {
             : destroy "water_1";
             : print {(emptying_description)} ;
              ;
              
              : set_integer var = "bucket_units"  value = "0" ;
              
              : if (parent_of "film"=="sink"||parent_of "sheet"=="sink") {
              : gosub "washing_off" ;
                 
              }
              
             }
             : else_if (parent_of "water_2" == (s1()) ) {
             : destroy "water_2";
            : print {(emptying_description)}
              : if (parent_of "film"=="sink"||parent_of "sheet"=="sink") {
                : gosub "washing_off" ;
                 
              }
             }
               : else_if (parent_of "water_3" == (s1()) ) {
               : if (bottle_open) {
             : destroy "water_3";
: print {(emptying_description)}
: if (parent_of "film"=="sink"||parent_of "sheet"=="sink") {
                  : gosub "washing_off" ;
                 
              }
}
: else {
   : print "But the bottle was closed." ;
}
             }
             : else_if (parent_of "water_4" == (s1()) ) {
             : if (flask_open) {
             : destroy "water_4";
           : print {(emptying_description)}
            : if (parent_of "film"=="sink"||parent_of "sheet"=="sink") {
                    : gosub "washing_off" ;
                 
              }
             }
             : else {
                : print "But the flask was closed" ;
             }
                 }
             : else_if (parent_of "developer" == (s1()) ) {
              :print {("Arthur decided not to empty the "+parent_of "developer"+" and needlessly waste the developing fluid.")}
             }
               : else_if (parent_of "fixer" == (s1()) ) {
              :print {("Arthur decided not to empty the "+parent_of "fixer"+" and needlessly waste the fixing fluid.")}
             }
             
             
             
             
             
             : else {
                : print "But that did not need to be emptied." ;
                
             }



  }
  : else_if (noun1_is "coffer") {
   : if (hymn_books_in_coffer) {
      : print "Arthur rolled up his sleeves and began to the arduous task of taking the dozens and dozens of hymn books out of the coffer and piling them up on the floor. After 15 minutes, he had an empty coffer and a great pile of hymn books littering the floor of the bell loft." ;
   : set_false "hymn_books_in_coffer" ;
   : set_string var = "hymn_books_description"  text = "some hymn books" ;
   
   }
     
  }

  
  : else {
     : print "But Arthur wasn't carrying that." ;
     
  }
  
  }


 


#EMPTY end

#PRISE start

: match "prise _"  {
: if (!noun2_is "") {
   : print "(Just PRISE [[target]] would be sufficient instruction without specifying the object to be used; if Arthur has something suitable then he would use it.)" ;
   
}

   : if (noun1_is "cupboard"||noun1_is "door") {
      : if (is_at "darkroom") {
         : if (cupboard_stuck) {
            : if (is_carried "knife") {
               : print "The fish knife had been made for better things, but nevertheless Arthur jammed it between the door and the frame of the cupboard, and succeeded in levering it open." ;
            : set_false "cupboard_stuck" ;
            : set_true "cupboardopen" ;
            : press_any_key ;
            
            : redescribe;
   }
      : if (is_carried "screwdriver") {
         : print "Arthur tried to prise the cupboard door with the screwdriver but the blade was too small to be effectual.";
         : done ;
         
      }
     
      : print "But Arthur had nothing suitable for such a task." ;
      : done ;
      
}
: else {
: print "Arthur had no need to do that now that the cupboard door was unstuck." ;
}
}
}
: else_if (noun1_is "fragment") {
   : if (is_present "fragment_2") {
    : if (is_carried "knife"||is_carried "screwdriver") {
      : if (is_carried "knife") {
         : print "Arthur managed to work the blade of the fish knife under the edge of the glass fragment and gently levered it loose." ;
        
      }
      : else_if (is_carried "screwdriver") {
         : print "Arthur managed to work the blade of the screwdriver under the edge of the glass fragment and gently levered it loose." ;
      }
     : swap o1 = "fragment_2"  o2 = "fragment_5" ;
     
      
      }
    
    : else {
       : print "But Arthur had nothing to prise it with." ;
       
    }
    
   
   
      }
}

}

#PRISE end

#UNSPOOL start

: match "unspool film;unroll film;unwind film; unreel film"  {
: if (is_carried "film") {
   : if (is_at "darkroom") {
   : if (film_description=="a roll of exposed film") {
         : if (!light_on&&!is_present "holder_1"&&!is_carried "match_1") {
            : print "In the safety of the red light, Arthur unspooled the exposed film from the reel.";
          : set_string var = "film_description"  text = "a strip of undeveloped film" ;
            : add_trait subject="film" trait="wettable_t";
            : pocket "reel" ;
            : press_any_key ;
            : redescribe;
            
         }
          : else {
           : print "But Arthur could not expose the film to ordinary light without ruining it." ;
      }
      }
       : else_if (!has_not_created "reel") {
      : print "But Arthur had already unwound the film." ;
      
   
 }
    : else {
        : print "Unreeling an unused film seemed to Arthur to be pointlessly destructive." ;
   }
   }
   : else_if (is_at "cellar_passage"||is_at "cellar_room") {
      : print "It seemed pointless to do such a thing anywhere other than in a proper darkroom." ;
      
   }
   : else {
      : print "Arthur's knowledge of photography was rudimentary, but he did know that such things should only be attempted in a darkroom." ;
      
   }
   
   }
   
   
}
#UNSPOOL end
#WASH start

: match "wash _"  {
: if (is_at "bedroom_1"||is_at "peldash_room") {
   : print "Arthur splashed some water on his face and felt a little refreshed." ;
   : done ;
   
}

: if (is_present "bucket") {
: if (parent_of "water_1"=="bucket") {
: if (!is_carried (s1())) {
   : print "But Arthur was not carrying that." ;
   
}
   : else_if (noun1_is "film" ) {
   : if (film_description=="a strip of film negatives (unfixed, unwashed)" ) {
   : print "Arthur washed the film thoroughly in the bucket of water, halting the development process." ;
 : set_string var = "film_description"  text = "a strip of film negatives (unfixed, washed)" ;
   }
   : else_if (film_description=="a strip of film negatives (fixed, unwashed)") {
      : print "Arthur washed the film thoroughly in the bucket of water, halting the fixing process." ;
      : set_string var = "film_description"  text = "a strip of film negatives (processed, wet)" ;                   : remove_trait subject="film" trait="wettable_t"; 
   }
   : else {
      : print "There was no need for Arthur to wash the film." ;
      
   }
      }
       : else_if (noun1_is "sheet" ) {
   : if (sheet_description=="a sheet of contact prints (unfixed, unwashed)" ) {
   : print "Arthur washed the sheet thoroughly in the bucket of water, halting the development process." ;
 : set_string var = "sheet_description"  text = "a sheet of contact prints (unfixed, washed)" ;
   }
   : else_if (sheet_description=="a sheet of contact prints (fixed, unwashed)") {
      : print "Arthur washed the sheet thoroughly in the bucket of water, halting the fixing process." ;
      : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, wet)" ; 
       : remove_trait subject="sheet" trait="wettable_t";
   }
   : else {
      : print "There was no need for Arthur to wash the sheet." ;
      
   }
      }
      
   : else {
      : print "Arthur didn't think it was necessary to wash that." ;
      
   }
   
   }
   : else {
      : print "The bucket seemed like an ideal place to wash things, but unfortunately there was no water in it." ;
      : done ;
      
   }
   
   }
 
   
}
#WASH end

#CUT start
:match "cut _"{
 : if (noun1_is "me"||noun1_is "Arthur"||noun1_is "hand"||noun1_is "thumb"||noun1_is "finger") {
 : if (blood_in_keg) {
    : print "Arthur had already added his blood to the mixture in the keg. There was no need to inflict further injuries on himself." ;
    : done ;
    
 }
 
    : if (is_carried "athame") {
       : if (has_read_ingredients) {
          : print "Arthur, remembering what he had read in the ancient book and realising that he needed blood, thought that the only person it would be acceptable to take it from was himself.\nHe held the athame and examined the blade closely: razor sharp, it glinted expectantly at him. Arthur swallowed nervously, extended his hand and nicked the tip of one finger with the blade. A moment passed before a dark pearl of blood welled from the tiny wound. " ;
          : set_integer var = "bleeding"  value = "1" ;
              : done ;
       }
       : else {
          : print "Arthur couldn't think of a reason why he would want to do that." ;
              : done ;
       }
       
       
    }
    : else {
       : print "But Arthur wasn't carrying anything suitable for that purpose." ;
           : done ;
    }
    
 }
: if (noun1_is "film") {
: if (is_carried "scissors") {
   : if (is_exists "film") {
      : if (film_description=="a strip of film negatives (processed, dry)") {
         : print "Using the scissors, Arthur snipped the film into its separate frames." ;
      : set_string var = "film_description"  text = "a set of film negatives (cut from a strip)" ;
            ;
            
            : done ;
            
      }
      : else_if (film_description=="a strip of film negatives (processed, wet)") {
         :print "Arthur really needed to let the negatives dry before he attempted to cut them.";
             : done ;
      }
       : else_if (film_description=="a strip of film negatives (processed, hanging on the drying line)") {
         :print "But Arthur couldn't cut the film while it was hanging on the line.";
             : done ;
      }
      : else {
         : print "Arthur saw no need to cut the film in its present state." ;
             : done ;
      }
 }
   }
   : else {
: print "But Arthur didn't have anything to cut the film with." ;
      : done ;
      
}
   
   }
   : else_if (is_at "garden_5") {
    : if (noun1_is "foliage") {
      : if (is_carried "shears") {
            : print "Arthur tried clipping away at the mass of foliage with the shears, but it was too dense and he soon gave up the attempt." ;
        : done ;
   }
    : else {
   : print "But Arthur wasn't carrying anything that he could cut through foliage with." ;
       : done ;
   }
         }
               : else {
      : print "Arthur saw no need to cut that." ;
          : done ;
 }
         
            }
            : else_if (is_at "zone_wood") {
               : if (!is_carried "shears") {
                    : print "But Arthur wasn't carrying anything that he could through foliage with." ;
               :done;
               }
               
         
      : else_if (is_at "wood_entrance") {
            : if (noun1_is "northwest") {
            : if (clipper_1) {
               : print "But Arthur had already clipped a path through the foliage in that direction." ;
               : done ;
            }
               : else_if (crow_directions==1) {
                   : print "Arthur clipped to the northwest." ;
                  : set_true "clipper_1" ;
                  : create "crow" target = "wood_path_1" ;
                  : press_any_key ;
                  : redescribe;
                   }
                : else {
                  : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                  : done ;
                  
               }
                    }
                      : else {
                  : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                  : done ;
                  
               }
                    }
                      : else_if (is_at "wood_path_1") {
                   
                          : if (noun1_is "west") {
                          : if (clipper_2) {
                             : print "But Arthur had already clipped a path through the foliage in that direction." ;
                             :done;
                          }
               : if (crow_directions==2) {
               : if (!clipper_2) {
                 : print "Arthur clipped to the west." ;
                  : set_true "clipper_2" ;
                  : create "crow" target = "wood_path_2" ;
                  : press_any_key ;
                  : redescribe;
               }
            
              
     }
               : else {
                  : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                  : done ;
                  
               }
               
                      }
                       : else_if (noun1_is "se") {
                          : print "But Arthur had already clipped a path through the foliage in that direction." ;
                              : done ;
                      }
                      : else {
                           : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                           : done ;
                           
                      }
                     
                      }
                      : else_if (is_at "wood_path_2") {
                       
                          : if (noun1_is "north") {
               : if (crow_directions==3) {
               : if (!clipper_3) {
                 : print "Arthur clipped to the north." ;
                  : set_true "clipper_3" ;
                  : create "crow" target = "wood_path_3" ;
                  
                  : press_any_key ;
                  : redescribe;
               }
                : else {
                  : print "But Arthur had already clipped a path through the foliage in that direction." ;
                      : done ;
               }
        
               }
               : else {
                  : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                  : done ;
                  
               
               }
                      }
                      : else_if (noun1_is "east") {
                          : print "But Arthur had already clipped a path through the foliage in that direction." ;
                              : done ;
                      }
                      : else {
                         : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. ";
                         : done ;
                         
                      }
                      
         
            
         }
         : else_if (is_at "wood_path_3") {
         
                          : if (noun1_is "south") {
                : print "But Arthur had already clipped a path through the foliage in that direction." ;
                    : done ;
               }
                :else_if (noun1_is "bush"||noun1_is "brambles"){
                : if (is_worn "gardening_gauntlets") {
      :if (has_not_created "knife_1"){
      : print "Arthur clipped away at the enormous bramble bush, scattering greenery in all directions. The acrid stench of bleeding vegetation filled the air and the enormous bramble bush seemed to writhe benenath the onslaught, as though in agony.\n Arthur stopped suddenly as he spotted something glinting within the depths of the bush. He clipped away a little more of the thorny stems, reached within and withdrew his treasure.\n He found himself holding an unusual knife." ;
      : create "knife_1" target = "inventory" ;
          : done ;
   }
   : else {
      : print "Arthur didn't fancy tackling the bramble bush again." ;
          : done ;
      
   }
   
      }
      : else {
      : print "Arthur made to cut away at the spiky bush but the fleshy green tendrils seemed to lash out at him with their vicious thorns and he withdrew rapidly, his hands bleeding. It seemed hopeless to tackle the thing without some sort of protection." ;
          : done ;
      
      }
      
      }
               : else {
                  : print "Arthur rolled up his sleeves and clipped ineffectually at the dense foliage whilst Ottoline stood by and casually smoked a cigarette, watching him tolerantly. After several minutes he stood back and saw, with dismay, how little progress he had made. The trouble was, he thought, that without any good reason to clip in one direction rather than another, the whole activity seemed rather futile.";
                      : done ;
               
               }
                       }
                       : else_if (is_at "zone_wood") {
                          : print "Arthur clipped away at the foliage for a moment, while Ottoline stood by and watched him tolerantly." ;
                              : done ;
                       }
                       
                      
   }

 : else {
    : print "Arthur felt compelled for a moment to do so but on reflection decided that it would be a foolish thing to do." ;
        : done ;
 }
 
         
     
    
}

#CUT end

#DRINK start
:match "drink _"{
: if (noun1_is "pint"||noun1_is "ale"||noun1_is "beer") {
: if (is_present "pint") {
: if (!is_carried "pint") {
   : print "Arthur picked up the pint jug.";
}
   : print "Given the colour of the ale and its unique bouquet, tentative sipping would have seemed the most sensible approach, but Arthur, wishing to appear at ease amongst the evident distrust of the locals, decided against it. He braced his tastebuds, imagined the smell of roses, and took a great swig of the ale." ;
   : print "The stuff was an assault on all his senses and, once he had started, it seemed that the only sensible thing to do was to carry on - and so he did. In a few seconds he had consumed the whole frothy, yeasty mouthful. Wiping his mouth on the back of his hand, he considered that once it was down, the stuff wasn't quite so bad after all." ;
   : swap o1 = "pint"  o2 = "pint_jug" ;
   
}
: else_if (is_present "keg"&&beer_keg_open) {
   : print "Arthur thought that he should face whatever perils lay ahead with a clear head." ;
   
}

}


: else_if (noun1_is "coffee"&&is_present "breakfast_things") {
      : print "Having had two cups already, Arthur was wide awake and raring to go - any more and he would start having palpitations. " ; 
}
: else_if (noun1_is "mixture"||noun1_is "potion"||noun1_is "concoction"||noun1_is "brew") {
: if (is_present "keg") {
   : if (blood_in_keg||gossip_in_keg||!has_not_created "toadstool"&&!is_exists "toadstool"||!has_not_created "mistletoe_sprig"&&!is_exists "mistletoe_sprig") {
   : print "Arthur looked at the mixture in the keg and hoped that would not be necessary." ;
      
   }
   : else {
      : print "Arthur felt that he should keep a clear head for whatever perils lay ahead." ;
      
   }
   
   }
}

: else_if (is_present (s1())) {
   : print "Arthur decided not to try that." ;
}
: else {
   : print "Arthur wasn't particularly thirsty." ;
   
}

}
#DRINK end


#HANG start

: match "hang _;peg _;attach _"  {
: if (is_at "darkroom") {
   : if (noun1_is "film") {
      : if (is_carried "film") {
        :if (film_description=="a strip of film negatives (processed, wet)"){
        : if (is_carried "peg") {
           : print "Arthur used the clothes pegs to hang the wet negatives on the drying line." ;
           : set_true "negs_hung" ;
            : set_string var = "film_description"  text = 
            "a strip of film negatives (processed, hanging on the drying line)" ;
            
            : drop "film" quiet = "true" ;
            : destroy "peg" ;
               : if (!need_paper) {
      : print "Arthur looked with pride at the strip of processed negatives drying on the line. Now all he needed to produce a set of finished photographs was to find a way of making prints." ;
      : set_true "need_paper" ;
   }
   
        }
        : else {
                  : print "But Arthur had no way of attaching the negatives to the drying line." ; 
        }
        }
       : else {
          : print "But Arthur saw no need to hang the film in its current state.";
       }
      
      }
      : else_if (negs_hung) {
         : print "But the negatives were already pegged to the drying line." ;
         
      }
        : else {
          : print "But Arthur wasn't carrying the film." ;
       
      }
      
      
   }
   : else_if (noun1_is "sheet") {
       : if (is_carried "sheet") {
        :if (sheet_description=="a sheet of contact prints (processed, wet)"){
        : if (is_carried "peg") {
           : print "Arthur used the clothes pegs to hang the wet sheet on the drying line." ;
           : press_any_key ;
           :clear_screen;
           : gosub "end_of_traptor_1" ;
           
         //  : set_true "prints_hung" ;
         //  : set_string var = "sheet_description"  text = "a sheet of contact prints (processed, hanging on the drying line)" ;
         //  : drop "sheet"quiet = "true"  ;
         //  : destroy "peg" ;
        }
        :else{
        : print "But Arthur had no way of attaching the sheet to the drying line." ;
        }
   
        }
       : else {
          : print "But Arthur saw no need to hang the sheet in its current state." ;
       }
      }
      : else_if (prints_hung) {
         : print "But the sheet was already pegged to the drying line." ;
      }
      : else {
          : print "But Arthur wasn't carrying the sheet." ;
      }
   }
   : else {
      : print "Arthur didn't see the point in hanging that on the line." ;
      : done ;
      
   }
   
}
: else_if (is_at "kitchen") {
    : if (noun1_is "goggles") {
      : if (is_carried "goggles") {
         : print "Arthur hung the goggles on the hook." ;
         : set_true "goggles_on_hook" ;
         : set_string var = "goggles_description"  text = "a pair of goggles (hanging from the hook)" ;
          : create "goggles" ;
         
         : done ;
         
      }
 
   }
      : if (noun1_is "keys"||noun1_is "bunch") {
: if (is_carried "bunch_keys") {
      : if (is_at "kitchen") {
         : if (!is_present "edna_taplow") {
            : print "Arthur hung the bunch of keys on the hook." ;
            : set_true "key_on_hook" ;
            : create "bunch_keys" ;
            : set_string var = "keys_description"  text = "a bunch of keys (hanging from the hook)" ;
            : done ;
            
         }
         : else {
            : print "Arthur didn't want to prove his guilt to Mrs Taplow by returning the purloined keys to their rightful place before her very eyes." ;
         }
      }
      
     } 
 
}
   
   
   
   }
    : if (noun1_is "overcoat") {
    : if (noun2_is "wardrobe") {
       : if (coat_on_hook) {
          : print "But the coat was already hanging in the wardrobe." ;
       }
       : else {
          : print "Arthur hung the coat back in the wardrobe." ;
          : set_true "coat_on_hook" ;
         : set_string var = "coat_description"  text = "a heavy woollen overcoat (hanging in the wardrobe)" ;
          : create "overcoat" ;
   : press_any_key ;
          : redescribe;
          
       }
       
    }
    
 }


}
#HANG end

#SMELL start
: match "smell _"  {
: if (baking_smell) {
   : if (is_at "kitchen") {
      : print "It was the unmistakable and mouthwatering smell of home baking: a warm, spicy, fluffy smell that induced in Arthur Proustian pangs of nostalgia for the cosy kitchen of his boyhood. The odours that emanated from the dank basement kitchen of his current lodgings in Stathings were of a quite different nature." ;
       : done ;
       
   }
   
}
: if (is_at "well") {
   : print "Arthur smelled an odour of clammy stonework and stagnant water, and things that had not seen the cleansing light of day for many centuries." ;
   : done ;
   
}
: if (is_at "garden_3") {
 : print "The air was fragrant with the scent of herbs." ;
   
}
: if (is_at "vet") {
   : print "Arthur smelt the distinctive aroma of unwashed furry bodies and disinfectant." ;
   
}
: if (is_at "zone_dmv"&&endgame) {
   : print "Arthur inhaled the heady scent of dung and woodsmoke that was the bouquet of the medieval village of Haelstowne." ;
   : done ;
   
}


   : if (is_present "bouquet_flowers"||is_present "vase"&&vase_description=="a vase (containing a bouquet of dried flowers)") {
      : print "Arthur sniffed the flowers. They smelled of must and age and, somewhere far beneath, the memory of long-ago summer days." ;
      : done ;
      
   }


      : print "Arthur sniffed but detected nothing unexpected." ;

   
}

#SMELL end

#BLOW start
: match "extinguish _;blow _; snuff _; douse _"  {
   : if (noun1_is "candle") {
      : if (is_present "holder_1") {
         : print "Arthur licked his fingers and pinched the flame out of the candle wick." ;
         : swap o1 = "holder_1"  o2 = "holder" ;
         : press_any_key ;
         : redescribe;
      }
      : else_if (is_present "holder"&&candleinholder||is_present "candle") {
         : print "But the candle was not lit." ;
         
      }
       : else_if (is_present "safelight") {
          : print "Arthur blew into the top of the glass cylinder, extinguishing the candle flame." ;
          : create "vase_1" ;
          : create "holder" ;
         : destroy "safelight" ;
         : press_any_key ;
         : redescribe;
         
       }
       
      
      
   }
   
}

#BLOW end

#UNLOCK start

: match "unlock _"  {
   : if (noun1_is "door") {
      : if (is_at "landing_2") {
      : if (!peldash_door_unlocked) {
         : if (is_carried "bunch_keys") {
            : print "Arthur tried several of the keys in the lock before finding the correct one and unlocking and opening the door." ;
        : set_true "peldash_door_unlocked" ;
        
         }
   : else {
      : print "But Arthur had no key." ;
      
   }
   
            }
            : else {
               : print "But the door was not locked." ;
               
            }
        
      }
      : if (is_at "study"&&traptor>1) {
         : if (is_carried "bunch_keys") {
         : print "Arthur tried each of the keys in turn but none of them fitted the lock of the darkroom door. It seemed there must be a separate key; probably it was guarded closely by Mrs Taplow. Arthur thought it might not be a bad thing - his recent experiences of amateur photography had quite put him off it." ;
         
         }
         
         
      }
      
          : if (is_at "scullery") {
      : if (!cellar_door_unlocked) {
         : if (is_carried "bunch_keys") {
            : print "Arthur tried several of the keys in the lock before finding the correct one and unlocking and opening the door." ;
        : set_true "cellar_door_unlocked" ;
        
         }
   : else {
      : print "But Arthur had no key." ;
      
   }
   
            }
            : else {
               : print "But the door was not locked." ;
               
            }
            
      }  
            : if (is_at "chapel_lane_1") {
      : if (chapel_door_locked) {
         : if (is_carried "iron_key") {
            : print "Arthur pushed the enormous iron key into the rusty old keyhole and turned it hopefully. The movement was heavy, but smooth and, with a series of dull internal clunks, the door unlocked." ;
        : set_false "chapel_door_locked" ;
        
         }
   : else {
      : print "But Arthur did not have the correct key." ;
      
   }
   
            }
            : else {
               : print "But the door was not locked." ;
               
            }
            
      }
    : else_if (is_at "porch") {
      : if (traptor==2||traptor==6) {
         : print "Arthur didn't have a key to the church door." ;
         
      }
      
    }
    
      
   }
     : if (noun1_is "trunk") {
      : if (is_present "trunk") {
         : if (is_carried "trunk_key") {
         : if (trunk_locked) {
            : print "Arthur unlocked the trunk with the key that he had been given by Frank Farthing." ;
            : set_false "trunk_locked" ;
         }
         : else {
            : print "But the trunk was already unlocked." ;
            
         }
         }
         :else {
         : print "Arthur tried to, but he wasn't carrying the correct key." ;
             
      }
      
         }
      }
   
}

#UNLOCK end

#LOCK start

: match "lock _"  {
   : if (noun1_is "door") {
      : if (is_at "landing_2") {
      : if (peldash_door_unlocked) {
         : if (is_carried "bunch_keys") {
            : print "Arthur closed and locked the door." ;
        : set_false "peldash_door_unlocked" ;
        
         }
   : else {
      : print "But Arthur had no key." ;
      
   }
   
            }
            : else {
               : print "But the door was already locked." ;
               
            }
            
      }
         : if (is_at "scullery") {
      : if (cellar_door_unlocked) {
         : if (is_carried "bunch_keys") {
            : print "Arthur closed and locked the door." ;
        : set_false "cellar_door_unlocked" ;
        
         }
   : else {
      : print "But Arthur had no key." ;
      
   }
   
            }
            : else {
               : print "But the door was already locked." ;
               
            }
            
      }
      : if (is_at "chapel_lane_1") {
      : if (!chapel_door_locked) {
         : if (is_carried "iron_key") {
            : print "Arthur closed and locked the door." ;
        : set_true "chapel_door_locked" ;
        
         }
   : else {
      : print "But Arthur did not have the correct key." ;
      
   }
        }
      : else {
               : print "But the door was already locked." ;
               
            
            }
            }
   }
      : if (noun1_is "trunk") {
         : if (is_carried "trunk_key") {
         : if (!trunk_locked) {
            : if (trunk_open) {
               : print "Arthur couldn't lock it without closing it first." ;
               : done ;
               
            }
            
            : print "Arthur locked the trunk with the key that he had been given by Frank Farthing." ;
            : set_true "trunk_locked" ;
         }
         : else {
            : print "But the trunk was already locked." ;
            
         }
         
            
         }
         :else {
         : print "Arthur tried to, but he wasn't carrying the correct key." ;
         
         }
         
      }
   
   
}

#LOCK end

#PLAY start

: match "play _"  {
   : if (is_at "pub") {
      : if (noun1_is "piano") {
         : print "Arthur was a passable pianist but not a natural performer: confronted with an audience, all the music he knew seemed to go out of his head except for the old music hall tunes his uncle taught him when he was a boy. " ;
         : execute_one_at_random {
            : print "Arthur played a tinkling version of 'Where Did You Get That Hat?' on the out-of-tune piano." ;
             : print "Arthur played a wistful version of 'Daisy, Daisy' on the out-of-tune piano." ;
              : print "Arthur played an interesting take on 'Waiting At The Church' on the out of-tune piano." ;
               : print "Arthur played a robust rendition of 'Alfie's Worth a Tanner' on the out-of-tune piano." ;
                : print "Arthur played a tear-jerking version of 'My Sparrow's Lost Her Feathers' on the out-of-tune piano. There was barely a dry eye in the house after that one." ;
         }
         
 : done ;
  
   }
      : if (pub_brawl_counter<7) {
      //pardon
         : if (noun1_is ""||noun1_is "game") {
            : print "Arthur wasn't sure which of the games he should attempt to join." ;
         }
         : else_if (noun1_is "nancy") { 
         : if (nancy) {
            : print "Arthur had already tried that game." ;
            
         }
         : else {
         : set_true "nancy" ;
           : print "Arthur approached the group playing Nancy's Attic. \"Good morning gentlemen,\" he offered, immediately indentifying himself as an outsider and worthy of the suspicion of all present, \"is there room for an extra hand?\"" ;
         :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) > 3 ){
                 : increment "pub_brawl_counter" ;
   : print "There followed a pause of such length that Arthur was beginning to think that none of the group had heard him, before one of them mumbled into his pint jug. \"Reckon you might, if you have to.\" It was not the most enthusiastic welcome, but Arthur was well versed in the ways of country folk and took this reply as the warmest of invitations.\n\"Here,\" said another, thrusting a half-full pint jug of warm and cloudy ale into his hand. Arthur looked doubtfully at the scum floating on top of the liquid and the greasy lip marks around the rim, but etiquette demanded he drink it. He girded his stomach and chugged the ale. \nArthur struggled to control his emetic instincts but managed the stuff down. The second mouthful was easier than the first and in no time at all he had finished the half pint and had started another, whilst hopping Nancy about the rafters to the frustration of his opponents. Arthur realised all of a sudden that he was quite tipsy." ;
}
: else {
   : print "One of the men, his back to Arthur, replied without bothering to turn around. \n\"Sod off!\"\n There was a murmur of agreement from the others and then they continued playing as if Arthur simply did not exist. A little affronted, Arthur decided to leave them to their game. " ;
}
  }
         }
         : else_if (noun1_is "pardon") {
          : if (parson) {
            : print "Arthur had already tried that game." ;
         }
         : else {
            
      
         
           : set_true "parson" ;
           : print "Arthur strode over to the window, where a round of 'Pardon the Parson' was in full flow: the 'Parson' had committed a noxious indiscretion and the 'jury' was debating the case with an enthusiasm that stopped just short of physical violence. Arthur steeled himself and leapt into the fray with a loud cry of \"guilty!\"" ;
           
          :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) > 3 ){
          : increment "pub_brawl_counter" ;
          
;
   
   : print "There was a sudden silence as each player looked from one to another and then at the incomer. Arthur was about to conclude that he had made a terrible mistake when a lanky youth returning from the bar with a jug of foaming ale in each hand blundered straight into him, spilling beer all over his blazer and shouting \"pardon!\" at excessive volume. \nArthur barley had time to recover himself before a beer mug was thrust into his hand by way of amends, and the cry was taken up by several others.\n A little while later, the alcohol had taken effect and Arthur was deeply involved in the game with barely a thought to the beer soaking through his pockets and into his trousers. " ;
   
      }
            : else {
   : print "The sudden silence resounded like a crack of thunder. Arthur looked from one booze-addled face to another and found himself unable to meet anyone's eye. The 'Parson' looked into his ale, the 'jurors' looked at their feet and Arthur distinctly heard the word 'police' being whispered amongst them. Suspicion thickened the already noxious atmosphere and recognising defeat, Arthur withdrew. He couldn't help but feel a little affronted that the badinage resumed the moment he turned way. " ;
 
}
         }
            }
         : else_if (noun1_is "foursquare") {
          : if (foursquare) {
            : print "Arthur had already tried that game." ;
         }
         : else {
         : print "Arthur approached the huddle of elderly men surrounding the foursquare board, seeing backs stiffen as he did so. He coughed politely but was ignored.\n\"I say,\" he began, but was hurriedly shushed by an ancient, wrinkled fellow crouched over the board." ;
         
           : set_true "foursquare";
           
         :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) > 3 ){
                 : increment "pub_brawl_counter" ;
   : print "\"Oh, I do apologise,\" said Arthur quickly. \"It's just that, I couldn't help noticing your Hawk is in treacle?\"\n\"You're right lad,\" said a gruff fellow with a yellow beard and an excessively red and lumpy nose. \"In treacle it is! Thanner's no help now.\"\n\"Oh, I don't know\" said Arthur, with measured casualness. He'd had reason to play the game during the course of duty in the drinking establishments of Stathings. \"I think you'd be allowed to play your edge if... may I?\"\nThe wrinkled fellow protested but moved aside. Arthur leant over the board and moved one of the counters. The crowd was dumbstruck.\n\"He's right, you know!\" one of them suddenly bellowed. \"He's only bloody well right!\" The group cheered and suddenly Arthur found that he was a hero. Someone thrust a mug of ale into his hand and urged him to drink; buoyed up by his sudden fame, he threw caution to the wind and did so. Before long he was drinking another and presently he discovered he was quite tipsy." ;
      }
            : else {
   : print "\"Oh, I do apologise,\" Arthur said quietly, \"I only meant to ask...\"\n\"Shut it, young fella,\" said another player, rudely. \"Can't you see the Hawk's in treacle?\"\nArthur looked and saw that it was true. With a treacled Hawk in play, there was no hope of gaining their attention. Disconsolate, Arthur slunk away." ;
 
}
}
         }
         : else_if (noun1_is "thraplington") {
          : if (thraplington) {
            : print "Arthur had already tried that game." ;
         }
         : else {
  
          : print "Arthur approached the rowdy crowd playing 'Thraplington Scrofield'. It was such a noisy and violent game that direct intervention seemed the only hope of gaining their attention. He steeled himself and launched into the fray with both elbows." ;
         : set_true "thraplington" ;
            :if (( (nancy ? 1 : 0) + (parson ? 1 : 0) +(foursquare ? 1 : 0) +(thraplington ? 1 : 0)) > 3 ){
           
            
                    : increment "pub_brawl_counter" ;
   : print "The effect was immediate and dramatic. The players froze on the spot and glanced at one another nervously. Arthur heard furtive whispering and the word 'law' exchanged in undertones amongst the players. Arthur swallowed nervously.\n\"I was only going to say...\"\nHe got no further before he was knocked clean off his feet by a drunken youth. Arthur had barely regained his senses when he felt beer rain down on him from above. He yelled, jumped to his feet and grabbed the beer mug from his assailant. There was a moment of shocked silence before someone yelled \"Knuckle In The Ale!\"\nArthur glanced down and saw that it was true. In the awkward way he had grabbed the mug there was not one but two knuckles in the ale. Someone gave him a congratulatory slap on the back and urged him to drink and Arthur, not wishing to throw away his advantage, did so. Immediately he emptied the beer mug, a fresh one was thrust into his and before long Arthur realised that he was quite tipsy.\n" ;
      }
            : else {
   : print "The effect was immediate and dramatic. The players froze on the spot and glanced at one another nervously. Arthur heard furtive whispering and the word 'law' exchanged in undertones amongst the players. He smiled nervously.\n\"I'm sorry, I just thought...ah.\"\nThe rest continued to stare and nobody move or spoke. Defeated, Arthur turned his back and slunk away." ;
   
            }
         }
      }
: else {
            : print "Arthur couldn't see anyone playing that game, and it was no fun to play on his own." ;
                : done ;
            
         }
         }
         : else {
            : print "Arthur saw no opportunity for playing games at the moment." ;
                : done ;
         }
         
   
   }
    : else {
      : print "Arthur saw no opportunity to play games there." ;
      : done ;
      
      
   }
   

   
}
#PLAY end

#BUY start

: match "buy _"  {
   : print "(If Arthur wanted to buy something then he should simply ASK [[vendor]])" ;
   
}


#BUY end

#HELP start

: match "help frank;staunch blood;use bandage;bandage wound;stop bleeding;heal frank;cure frank; put bandage; dress wound; bandage frank"  {
   : if (is_at "square") {
      : if (is_present "frank_farthing") {
      : if (is_carried "bandage") {
   : print "Arthur staunched the blood with the bandage and presently the flow stopped altogether. He was relieved to see that Frank's injuries were not as bad as they looked. After a little time, Farthing seemed to come around. He got to his feet and staggered off out of the square.\n Arthur wondered where he was going.";
    : create "frank_farthing"target = "pump"  ;
   : destroy "bandage" ;
   : press_any_key ;
   : redescribe;
         : done ;
      }
      : else {
         : print "Arthur didn't know how to help Frank Farthing at the moment. He should have tried to staunch the blood, but what could he have used to do it?" ;
      }
      }
      
   }
}

#HELP start
:match "help me; help-" {
:print "- Type HINT for a clue;";
: print "- Type STUCK for explicit help - but beware spoilers!;" ;

: print "- MOVEMENT: Use compass directions (N, E, S, W, NE, SE, SW, NW) UP, DOWN, ENTER,   EXIT;" ;
: print "- LOOK to view the current location;" ;
: print "- EXAMINE or X [[object]] to look at things closely;" ;
: print "- GET [[object]] to pick something up and DROP [[object]] to discard it;" ;
: print "- INVENTORY or I to see what you are carrying;" ;

:print "- ASK [[character]] to interact with other people;";
: print "- SAVE to save game position;" ;
: print "- LOAD to load game position." ;

}


#HELP end

#KNOCK start

: match "knock thing; poke thing; push thing"  {
: if (traptor==4&&is_present "something") {
   : print "Arthur wasn't sure that would be a good idea. Even if he managed to dislodge the thing from the pelmet it would probably fall and might break. For all he knew it could be fragile." ;
   : done ;
   }
}

: match "knock _"  {
   : if (noun2_is "door"||noun2_is "") {
   : if (is_at "outside_poachers") {
      : if (is_present "frank_farthing") {
         : print "Arthur knocked on the door of number 23 with one hand while holding onto Frank Farthing with the other, in an attempt to keep the drunkard upright. After a short time the door was opened by a young woman and Farthing, who had been leaning against it, fell backwards at her feet.\n\"Oh my lord, Frank!\" she cried. \"What on earth have you been about this time? I knew I never should have listened the last time you said...\" She stopped herself, becoming aware of the stranger standing awkwardly on the doorstep. She noticed his smart dress, polite smile and evident sobriety, and feared the worst.\n\"Oh, I'm so very sorry Mr...\"\n\"Mapple. Arthur Mapple,\" said Arthur, embarrassed in several ways. \"Detective Constable.\" \nAt this, more colour drained from her face.\n\"I'm Daisy Farthing. Frank's wife.\" She paused, and then gathered herself as though determined to put a brave face on things. \"Well, Mr Farthing - I think you'd better come inside.\"\nShe opened the door wide and together they managed to get Frank Farthing onto his feet and inside, closing the door hurriedly behind them." ;
         : increment "farthing_ask_counter" ;
         : if (onbike||hasbike) {
             : create "bicycle" ;
   : set_false "hasbike" ;
   : set_false "onbike" ;
         }
         
: goto "poachers_house" ;
: create "frank_farthing" target = "poachers_scullery";
: press_any_key ;
: redescribe;

      }
       : else_if (has_not_created "frank_farthing") {
            : print "Arthur saw no need to disturb the residents of Nether Haelstowne in their own homes without just cause or reason." ;
            
         }
         : else_if (parent_of "frank_farthing"=="poachers_scullery"||parent_of "frank_farthing"=="poachers_house") {
            : print "Mrs Farthing answered the door and looked a little frightened to see Arthur once more upon her doorstep. \"Nothing to worry about, Mrs Farthing,\" he said in his most reassuring policeman's manner. \"I've just remembered a few more questions that I'd like to ask your husband if I may?\"\nMrs Farthing stood aside and Arthur entered the house." ;
            : goto "poachers_house" ;
            : press_any_key ;
            : redescribe;
            
         }
      : else {
         : print "Arthur saw no need to disturb the domestic tranquility of Mr and Mrs Farthing any further." ;
         
      }
      
      
      
   }
   : else_if (is_at "garden_path") {
   : if (is_present "ottoline_elderfield") {
              : print "Arthur was not so eccentric as to knock on the door of a house when the door was open and the householder there in front of him." ;
              : done ;
   }
      : if (parent_of "ottoline_elderfield"=="lane_7") {
         : print "Arthur foolishly knocked on the door of the empty cottage, when he knew full well that Ottoline was waiting for him in the lane outside." ;
         : done ;
      }

      : if (traptor==3){
      : if (ottoline_ask_counter==3) {
      : if (has_visited "wood_entrance") {
         : print "Ottoline opened the door. \"Oh Hello Arthur,\" she said. \"I thought you might be back. It's Calderhall, isn't it? Shall we go back to the wood?\"" ;
         
      }
      : else {
             : print "Ottoline opened the door. \"Oh Hello Arthur,\" she said. \"I thought you might be back. It's Calderhall, isn't it? Shall we go to the wood after all?\"" ;
      }
      
      
     
         : goto "lane_7" ;
         
         :set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
         : if (!crow_flown) {
             : set_string var = "crow_description"  text = "a huge black crow (perching on the handlebars of Ottoline's bicycle)" ;
             : create "crow" ;
         }
                : create "ottoline_elderfield" ;
                
                : set_true "ottoline_follow" ;
                : press_any_key ;
                : redescribe;
                
      }
      
      : if (!has_not_created "ottoline_elderfield") {
         : print "Once more Arthur knocked on the door of Nevernear cottage. After a little while, Ottoline Elderfield appeared on the threshold, appearing quite visibly displeased to see Arthur on her doorstep once more.\n\"Mr Mapple. I thought you finished with me?\" She raised an eyebrow questioningly.\n\"My apologies, Ms Elderfield. I remembered that I had a few other things to ask you. May I have a moment of your time?\"\n\"Another one, Mr Mapple? Well, I don't suppose I can very well refuse you since you have the law on your side. But I would thank you to be brief.\"\nFrom somewhere inside came the sound of a bird squawking." ;
}
      : else {
             
              : print "Arthur knocked on the door a little tentatively. There was rather a long pause before Ms Elderfield opened it.\n\"Why, Mr Mapple!\" she cried, evidently surprised and not particularly pleased to find him on her doorstep. \"I certainly didn't expect to see you this morning. However did you find me?\"\n\"Good morning Ms Elderfield,\" he said politely, always one to remember his manners. \"The cottage was a little difficult to find, as you said. But I am a trained detective - it's my job to uncover things that are well hidden.\" Arthur was rather pleased with that; the hedgehog hardly seemed worth mentioning." ;
      }
         : create "ottoline_elderfield" ;
         : press_any_key ;
         : redescribe;
           }
         
   : if (traptor==5) {
   : if (parent_of "ottoline_elderfield" == "DMV_3") {
      : print "Arthur knocked, feeling like a fool - for he knew that Ottoline was waiting for him down at the site of the old village.." ;
      : done ;
   }
   : else_if (parent_of "ottoline_elderfield"=="poachers_scullery") {
      : print "Arthur knocked on the door and waited for a minute or two, but it seemed that Ottoline was not at home." ;
      : done ;
      
   }
   
   : if (ottoline_ask_counter==7) {
     : print "The door opened and Ottoline appeared, looking a little flustered. \"Oh Arthur - it's you. Look, I am just on the telephone. A client of mine. She...well, never mind about that. Anyway, be a dear and call a little later, would you? Life goes on, in spite of this faeries business.\" She gave him an apologetic look and closed the door." ;
     : increment "ottoline_ask_counter" ;
     : press_any_key ;
     : redescribe;
     
     :done;

   }
      : if (has_not_created "cardboard_box") {
  
      : execute_one_at_random {
         : print "Arthur knocked and Ottolne answered the door. \"Arthur! What is it now?\" Ottoline appeared a little cross. \"Didn't I tell you I was busy?\"" ;
         : print "Arthur knocked and, after a little while, Ottoline opened the door. \"I really am sorry, Arthur, but I'm just too busy to talk to you at the moment.\"" ;
         : print "Arthur knocked on the door and presently, Ottoline answered. \"Arthur? I thought I told you I was busy?\"" ;
         : print "Arthur knocked on the door and Ottoline answered. \"Oh, Arthur. It's you again.\" She sounded a little annoyed. \"I am rather busy, you know.\"" ;
      }
: create "ottoline_elderfield" ;
      : press_any_key ;
      : redescribe;
      
      }
      : else_if (!has_not_created "cardboard_box") {
         : print "Arthur knocked on the door and Ottoline answered a moment later. \"Arthur! It will do no good knocking on my door. You need to take that poor creature to the vet's as soon as possible!\"\nOttoline closed the door." ;
            }
      }
      : else_if (traptor==6) {
         : if (parent_of "ottoline_elderfield"== "nevernear_cottage") {
            : if (spell>12) {
             : print "Arthur knocked on the door and after a moment Ottoline answered, dressed as though ready to leave.\n  \"Arthur!\" she said, \"I'd begun to think that you weren't coming for me. Wherever have you been?\"\n\"To the wood,\" said Arthur, a little sheepishly. \"I though it wasn't necessary to expose you to more danger than I have already, so, well - I went alone.\"\n\"Arthur! I suppose that's thoughtful of you, but I can't help feeling I may have missed out. And as for the danger, well - it seems a little late for that. But anyway, now you've come - shall we go? To old village, I think.\" \nTogether, they left the cottage." ;
            }
            : else {
               : print "Arthur knocked on the door and it was opened almost immediately, revealing Ottoline Elderfield dressed in her outdoor clothes and ready to leave.\n\"Arthur! I was beginning to think you wouldn't come.\"\n\"I'm sorry to have kept you waiting,\" said Arthur. \"Shall we go?\"\n\"To the wood?\"\n\"Yes,\" said Arthur. \"Calderhall. I'm sure that's where we need to be.\"" ;
            }//pinky
            : set_true "ottoline_follow" ;
            : set_string var = "ottoline_description"  text = "Ottoline Elderfield (with her bicycle)" ;
            : goto "lane_7" ;
            : press_any_key ;
         : redescribe;
         
         }
         
      }
      
      

   }
       : if (is_at "outside_vet") {
       : if (drywell_ask_counter==3) {
          :print "Arthur knocked on the door, but there was no answer. It seemed that surgery hours had finished for the day.";
          : done ;
          
       }
            : print "The veterinary surgery was the sort of place that one was supposed to stride into confidently and state one's business." ;
      }
      : if (is_at "outside_Thurgoods") {
      : if (daytime) {
         : print "Arthur knocked on the door of Gardener's Cottage, but there was no answer. It seemed that Mr Thurgood was not at home." ;
      }
      : else {
         : print "Arthur didn't think it appropriate to knock on the door of Mr Thurgood's house at this hour of the night." ;
         
      }
      
         
         
      }
      
   }
   : else {
   : print "Arthur didn't feel the need to knock on anything at present.";
   }
   
   

   
}

#KNOCK end

#DIG start

: match "dig _"  {
: if (traptor==2) {
   : if (!snow_dug) {
            : if (is_at "lane_4") {
      : if (is_carried "shovel") {
         : if (is_worn "gloves") {
            : print "Arthur took a firm hold of the shovel and, in the dead of night and in a howling snowstorm, began to shovel a way through the snow." ;
      
              : print "Presently he had cleared a path through the main bulk of the snowdrift to where it began to peter out further along the lane." ;
             
                : print "Arthur stopped and leant on the shovel to catch his breath. His exertions had left him roasting hot beneath his clothes whilst his exterior was freezing cold, like a baked Alaska in reverse. " ;
                : set_true "snow_dug" ;
                : press_any_key ;
                : redescribe;
         }
         : else {
                 : print "Arthur tried his best with the shovel for a few minutes but very quickly his hands became so cold that they could barely grip the handle and he was forced to abandon the effort." ;
         }
        }
         : else_if (is_carried "garden_fork") {
         : print "Arthur stabbed at the snow ineffectually for a few moments with the garden fork but failed make much impact." ;
      }
       : else {
         : print "But Arthur didn't have anything to dig with, and it would have taken forever to claw his way through the snowdrift with his bare hands." ;
         
      }
      }
     : else_if (is_at "lane_1") {
        : print "Arthur wouldn't have fancied the idea of digging his way through all of that snow even if he'd had a pressing reason to go down the road to Nether Haelstowne in the middle of the night." ;
     }
     : else {
        : print "Arthur didn't see the point in attempting to dig there." ;
     }
   }
   }

   
       : else {
        : print "Arthur didn't see the point in attempting to dig there." ;
   }
   
}


#DIG end

#GOUGE start

: match "gouge _"  {
   : if (is_present "date_stone") {
   : if (noun1_is "stone"||noun1_is "mortar"||noun1_is "") {
      : if (is_carried "knife"||is_carried "screwdriver") {
         : if ( has_trait {subject="date_stone" trait="_immovable"} ) {
         : print "Arthur gouged and scraped away at at the loose mortar around the stone until it seemed ready to come loose." ;
            : remove_trait subject="date_stone" trait="_immovable";
            : set_string var = "date_stone_description"  text = "a date stone (in the stone wall)" ;
        
         }
      }
      : else {
         : print "But Arthur didn't have anything that he could use to do that." ;
         }
      }
     } 
   }
#GOUGE end

#TIE start

: match "tie _"  {
: if (noun1_is "rope") {
   : if (is_carried "rope"||is_present "fence_post"&&post_description=="a fence post (with a piece of rope tied around it)") {
      : if (is_present "fence_post") {
      : if (!rope_tied) {
         : print "Arthur tied the rope around the fence post, using one of the special knots that only policemen knew how to tie." ;
         : set_true "rope_tied" ;
         
         : if (fence_post_fixed) {
         : set_string var = "post_description"  text = "a fence post (stuck in the ground, with a piece of rope tied around it)" ;
    
         
            
         }
         : else {
          : set_string var = "post_description" text = "a fence post (with a piece of rope tied around it)" ;
         }
 : destroy "rope" ;
 : done ;
 
      }
      : else {
         : print "But the rope was already tied." ;
         : done ;
         
      }
      
   }
   : else {
      : print "But there wasn't anything there to tie it to." ;
      
      : done ;
      
   }
   
        }
        : else_if (holding_rope) {
           : print "The ropes were for ringing the bells, not tying in knots." ;
           
        }
        
   
         : else {
            : print "But Arthur didn't have it." ;
         }
}
: else {
  : print "Arthur thought that was pointless." ;
}
        }
     

#TIE end

#UNTIE start

: match "untie rope"  {
   : if (is_present "fence_post") {
      : if (rope_tied) {
      : if (!rope_down_well) {
         : print "Arthur untied the rope from the fence post." ;
         : set_false "rope_tied" ;
         : set_string var = "rope_description"  text = "a piece of rope" ;
         : create "rope" ;
         : if (fence_post_fixed) {
                    : set_string var = "post_description"  text = "a fence post (stuck in the ground)" ;
         }
         : else {
                    : set_string var = "post_description"  text = "a fence post" ;
         }
         
 
        : press_any_key ;
        : redescribe;
         
      }
      : else {
         : print "Arthur decided not to untie the rope from the fence post while the other end was down the hole. He might lose it forever!" ;
         
      }
      
   }
   }
}

#UNTIE end

#HAMMER start

: match "hammer _"  {
   : if (noun1_is "post") {
      : if (is_carried "lump_hammer") {
         : if (is_carried "fence_post") {
         : if (is_at "zone_dmv"||is_at "wetland") {
         : if (!fence_post_fixed) {
             : print "Arthur held the post upright with one hand, lifted the great heavy hammer with the other, and steadily whacked the timber into the ground where it stuck fast." ;
         : set_true "fence_post_fixed" ;
         : if (rope_tied) {
                 : set_string var = "post_description"  text = "a fence post (stuck in the ground, with piece of rope tied around it)" ;
         }
         : else {
            : set_string var = "post_description"  text = "a fence post (stuck in the ground)" ;
         }
         
         
         : drop "fence_post" quiet = "true"  ;
         
         }
         : else {
            : print "But the fence post was already quite fixed enough in the ground. Arthur didn't see the point of hammering it in any further." ;
         }
         }
         : else {
              : print "Arthur didn't think it was appropriate to try and drive the fence post into the ground right here." ;
         }
         
         }
                  : else {
            : print "But Arthur was not holding the fence post." ;
         }
      }
      : else {
         : print "But Arthur had nothing to hammer the post with." ;
         
      }
      
   }
   : if (noun1_is "glass"||noun1_is "disc"||noun1_is "window") {
  : if (is_at "church_1") {
     : print "Arthur was much too far away from the triptych window to do anything to the stained glass." ;
     : done ;
   }
   : if (is_at "on_monument") {
      : if (is_carried "tuning_hammer") {
      : if (has_not_created "fragment_3") {
         : print "Arthur aimed the tuning hammer carefully, and tapped nervously at the ancient and priceless medieval stained glass window, hoping that nobody would at that precise moment arrive to witness his act of vandalism. One tap was all it took: the mirror fragment came loose from its setting and Arthur pocketed it carefully." ;
         : create "fragment_3" target = "inventory" ;
      }
      : else {
         : print "Arthur felt that he had already caused enough damage to the ancient triptych window." ;
         
      }
      
            }
      : else {
         : print "But Arthur wasn't carrying anything that he would dare to strike such a delicate thing as the window with." ;
      }

       }
   }
}

#HAMMER end

#JUMP start

: match "jump _"  {
: if (is_at "well") {
   : print "A thousand childhood nightmares seemed to crowd in upon Arthur as he imagined jumping into that unfathomable black water." ;
   : done ;
   
 
   
}
: if (noun1_is "hole") {
  : if (is_present "hole") {
   : print "Arthur hadn't so taken leave of his senses as to do that." ;
   : done ;
   
   
} 
}
: if (noun1_is "bed") {
   : if (is_at "bedroom_1"||is_at "peldash_room") {
      : print "Arthur considered jumping up and down on the bed like an excited toddler, but decided that it would be unbecoming of a man in his position." ;
      : done ;
      
   }
   
}

  : print "Arthur jumped in the air, thumbing his nose at gravity for a split second before coming back down to earth." ;
}

#JUMP end

#TOUCH start

: match "touch _"  {
   : if (noun1_is "ash") {
      : if (!ash_touched) {
         : print "Arthur touched Ash with the tips of his fingers and the landlord's child suddenly seemed to gain substance. Ash looked around as though having awoken from a dream." ;
         : set_true "ash_follow" ;
         : set_true "ash_touched" ;
         
      }
      : else {
         : print "Arthur didn't think it was necessary to touch Ash again." ;
         
      }
      
   }
   : else_if (noun1_is "jarbell"&&is_present "joseph_jarbell"||noun1_is "taplow"&&is_present "edna_taplow"||noun1_is "salter"&&is_present "mr_salter"||noun1_is "molly"&&is_present "molly"||noun1_is "ottoline"&&is_present "ottoline_elderfield"||noun1_is "thurgood"&&is_present "thurgood"||noun1_is "snapeshuttle"&&is_present "ernest_snapeshuttle"||noun1_is "drywell"&&is_present "marjorie_drywell") {
   : print "Arthur stiffled a sudden urge to touch them." ;
   
   }
   : else_if (noun1_is "arthur") {
      : print "Arthur touched himself tentatively, as though to check that he was still there. Reassuringly, he found that he was." ;
      
   }
   
   
   : else {
      : print "Arthur touched it tentatively, as though he expected something extraordinary to happen - but nothing did." ;
      
   }
   
}


#TOUCH end

#SHOW start

: match "show _; give _"  {
: if (noun1_is "ottoline"||noun1_is "taplow"||noun1_is "thurgoood"||noun1_is "frank"||noun1_is "daisy"||noun1_is "jarbell"||noun1_is "salter"||noun1_is "ash"||noun1_is "drywell"||noun1_is "molly"||noun1_is "peldash") {
   : print "(If Arthur wanted to give or show something to someone then he should GIVE or SHOW [[object]].)" ;
   : done ;
   
}

// : disambiguate_s1 category = "carried";
// : if (!is_carried (s1())) {
//     :print "But Arthur wasn't carrying that.";
//     : done ;
     
// }
   : if (noun1_is "contact"||noun1_is "prints"||noun1_is "sheet"||noun1_is "photos"||noun1_is "photographs") {
   : if (is_at "garden_path") {
: if (is_present "ottoline_elderfield") {

         : if (is_carried "sheet") {
         : print "Arthur wasn't sure why this strange and aloof woman should seem the correct person to show his extraordinary pictures to, but nevertheless he was sure she was. Something about her shrewd gaze and assured manner told him that she would take them seriously if nobody else would, and he simply had to show them to somebody if only to prove that he wasn't going mad.\n\"Ms Elderfield, I wonder...what do you make of these photographs?\" He handed them to her.\n\"Photographs? What on earth are these? Really, Mr Mapple, I do think it rather extraordinary that you assume...\"She tailed off as she looked more closely at the sheet of contact prints, and grew suddenly quite pale. \nShe glanced at Arthur quickly, rummaged in her clothing for something and then in an instant and before Arthur could tell what was happening she had produced a cigarette lighter and set fire to the corner of the prints. In a second, the sheet was engulfed in flame.\n\"Ms Elderfield!\" cried Arthur, as she tossed the flaming paper past him and onto the lawn where it curled and blackened into oblivion.\n\"Mr Mapple,\" she said, a little shakily, \"I really think you ought to come in.\"\nShe stood aside and beckoned Arthur through the door of Nevernear Cottage." ;
        
         : destroy "sheet" ;
         : set_integer var = "ottoline_ask_counter"  value = "2" ;
         
         : press_any_key ;
         : goto "nevernear_cottage" ;
         : redescribe;
         
         }
         
      }
      : else_if (is_present "edna_taplow") {
         : print "Arthur showed the sheet of contact prints to Mrs Taplow. She glanced at it and he saw her eyes grow wide and fear flicker across her face. \"Very good Mr Mapple,\" she said. \"I'd have thought you'd have better things to do than make trick photographs.\" She turned away and carried on with her work." ;
         : done ;
         
      }

      : else_if (is_present "thurgood") {
         : print "Arthur showed the sheet of contact prints to Mr Thurgood. He looked at them for a second and swore under his breath. \"So you've seen the,,\" he said, so quietly that Arthur had to ask him to repeat himself. But Mr Thurgood fell silent."  ;
          : done ;
      }
      : else_if (is_present "molly") {
         : print "Arthur showed the photographs to Molly, who just smiled knowingly and made no comment." ;
          : done ;
      }
       : else_if (is_present "mr_salter") {
         : print "\"Oh, very good Mr Mapple, very good,\" wheezed Mr Salter in his jolly fashion. \"All done with paper cut-outs, I expect.\" There was something in his look that suggested he didn't believe what he was saying. " ;
          : done ;
      }
       : else_if (is_present "joseph_jarbell") {
         : print "Arthur showed the photographs to Mr Jarbell, who seemed frightened and shook his head quickly before looking away." ;
          : done ;
      }
       : else_if (is_present "marjorie_drywell") {
         : print "Arthur showed the photographs to Miss Drywell, who nodded and gave Arthur a penetrating glance. \"I see,\" was all she said." ;
          : done ;
      }
           }
       }
      : if (is_present "ottoline_elderfield") {

: if (noun1_is "knife") {
   : if (is_carried "knife_1") {
      : if (traptor==3) {
         : print "\"I wonder how this knife got there. It's quite unusual,\" said Arthur, handing his find to Ottoline. Hey eyes widened as she took it.\n" ;
         : press_any_key ;
         : clear_screen;
         : gosub "end_of_traptor_3" ;

      }
      

}

   }
   : else_if (noun1_is "rabbit"&&is_carried "injured_rabbit") {
   : clear_screen;
   
      : print "\"My goodness Arthur, what on earth have you got there?\" Ottoline looked at the poor, bloodied creature that Arthur was carrying. \"Attacked by a dog or a fox, I suppose?\"\n\"No, I...well, I'm not sure,\" said Arthur.\n\"Well, whatever has happened to it, I should think you'll need to take it to the vet's, Arthur. There's one in the village. Hang on a moment and I can give you a box...\" She disappeared into the cottage and reappeared a moment later with a cardboard box. \n\"This will do,\" she said, \"I've put a few air holes in it. Put poor Mr Rabbit in there and then take him down to the vet's as quickly as you can.\"\n With great care, Arthur placed the injured rabbit in the box and closed the lid. Ottoline gave him an encouraging smile and went back inside the cottage. " ;
      : destroy "injured_rabbit" ;
      : create "cardboard_box" ;
      : increment "ottoline_ask_counter" ;
      : destroy "ottoline_elderfield" ;
      
      : press_any_key ;
      : redescribe;
      
   }
    :else_if (noun1_is "nail"){
:if (is_carried "horseshoe_nail"){
      : print "Arthur showed Ottoline the horseshoe nail. \"I'm no expert, but it looks like quite an ordinary horseshoe nail to me Arthur.\" She didn't seem particularly interested.";
      
   }
   : else_if (is_carried "horseshoe_nail_1") {
      : print "Arthur showed the horseshoe nail to Ottoline. \"The energy coming from it is incredible! I think you'd better shut it somewhere safely away from prying eyes - don't you?" ;
      
   }
    }
    : if (original "noun1" =="book") {
          : disambiguate_s1 "carried";
    }
    
   : if (original "noun1"== "remnant"||original "noun1"== "tattered"||original "noun1" =="book"&&s1()=="remnant") {
      : if (is_carried "remnant") {
      : if (is_carried "herbal") {
         : print "Arthur showed the tattered remnant to Ottoline. \"Oh yes,\" she noted, \"our ancient find. I wonder if it's worth anything? Only...hold on. Let me see it alongside the herbal, would you?\"\n Arthur handed it to Ottoline, who compared the final pages of one with the first pages of the other. Her eyes widened. \"Oh my goodness, Arthur!\" she said excitedly, \"These pages from Aunt Ada's herbal and these from the book - they're the same! The same parchment and ink, same writing. Look!\"\nArthur looked and saw that it was so. \"But... what does it mean?\"\n\"Well,\" said Ottoline practically, \"I suppose it means that the original book must have been torn apart somehow and one half of it put into that casket. And the other pages, or at least some of them, found their way into the herbal. You can see it is a bit of a collage of different books, and very old. Now,\" she leaned over the books,\"just what does it say...Oh heavens, I think it might be a grimoire!\n\"A grimoire? Whatever's that?\"\n\"A book of magical incantations. Spells, if you like. These end pages of the herbal must be the half of the banishing spell that Peldash tried to use. But it was incomplete. The rest of it is here, at the start of the other book.\"\nShe screwed up her eyes and peered at it closely. \"No. No, it's no good. I simply can't make out what it says. Can you read it Arthur?\"";
         : destroy "remnant" ;
         : destroy "herbal" ;
         : create "grimoire" target = "inventory" ;

      }
      : else {
      : if (shown_remnant) {
         : print "Arthur again showed the tattered remnant of book to Ottoline, who smiled at him indulgently.\n\"Yes Arthur - it looks very old and very fragile. I'm sure if we even tried to turn the pages they would crumble to dust.\"" ;
         
      }
       : else {
          
     
      : print "Arthur showed Ottoline the tattered remnant of the book. \"How marvellous,\" she said, \"an ancient book hidden in a dusty old tomb! It's like something from a novel.\" She glanced at a few of the pages before handing it back. \"I'm almost afraid to read it in case it turns to dust. It looks so old. Older than the tomb, perhaps.\" " ;
      : set_true "shown_remnant" ;
      
      }
      }
   }
         }
         : else_if (original "noun1" == "herbal"||original "noun1" =="book"&&s1()=="herbal") {
         : if (is_carried "herbal") {
      : if (is_carried "remnant") {
      : if (shown_herbal) {
         : print "Arthur showed the soggy book to Ottoline once more and saw anger flash in her eyes. Taking it from him, she leafed through the waterlogged pages.\n\"That man...\" she muttered quietly, \"how could he do such a thing? I mean, how could he?\"";
     
         
      }
      : else {
     : print "Arthur showed the soggy book to Ottoline, who gasped and took it from him, leafing through the waterlogged pages. \"Aunt Ada's herbal!\" she cried. \"Whatever has that stupid, selfish little man done. I shall never forgive him for this. Never!.\"";
         
      }
      
           : print "She paused as though struck by an idea. \"Hold on...let me see it alongside the book we found in the monument, would you?\"\n Arthur handed it to Ottoline, who compared the final pages of one with the first pages of the other. Her eyes widened. \"Oh my goodness, Arthur!\" she said excitedly, \"These pages from Aunt Ada's herbal and these from the book - they're the same! The same parchment and ink, same writing. Look!.\"\nArthur looked and saw that it was so. \"But... what does it mean?\"\n\"Well,\" said Ottoline practically, \"I suppose it means that the original book must have been torn apart somehow and one half of it put into that casket. And the other pages, or at least some of them, found their way into the herbal. You can see it is a bit of a collage of different books, and very old. Now,\" she leaned over the books,\"just what does it say...Oh heavens, I think it might be a grimoire!\n\"A grimoire? Whatever's that?\"\n\"A book of magical incantations. Spells, if you like. These end pages of the herbal must be the half of the banishing spell that Peldash tried to use. But it was incomplete. The rest of it is here, at the start of this book.\"\nShe screwed up her eyes and peered at it closely. \"No. No, it's no good. I simply can't make out what it says. Can you read it Arthur?\"";
         : destroy "remnant" ;
         : destroy "herbal" ;
         : create "grimoire" target = "inventory" ;

      }
      : else_if (shown_herbal) {
         : print "Arthur showed the water damaged to Ottoline once more and saw anger flash in her eyes. \"That man...\" she muttered quietly, \"how could he do such a thing? I mean, how could he?\"" ;
        
         
      }
      
       : else {
      : print "Arthur showed the soggy book to Ottoline, who gasped and took it from him, leafing through the waterlogged pages. \"Aunt Ada's herbal!\" she cried. \"Whatever has that stupid, selfish little man done? I shall never forgive give him for this. Never.\"" ;
       : set_true "shown_herbal" ;
      
      }
        
   }
      : else_if (is_carried "grimoire") {
         : print "Arthur showed the grimoire to Ottoline, who looked at it closely. \"The part we found in the tomb looks like it all belongs together,\" said Ottoline, \"and the other part looks like it got mixed up with a lot of other pages. I suppose someone must have discovered the part that became Aunt Ada's herbal and not really known what it was.\"" ;
         
      }

         
   }
   : else_if (noun1_is "ashtray"&&is_present "ashtray") {
         : print "Arthur showed Ottoline the ashtray. \"Yes, it is rather unusual, isn't it? And so useful, whatever it is. An ashtray is simply the best use for it. It's been in the cottage for as long as I remember.\"" ;
   }
   : else_if (noun1_is "mirror"&&is_present "mirror") {
            : print "Arthur showed Ottoline the mirror.\n\"I have a feeling that you were meant to find it. Keep it safe, Arthur.\"" ;
   }
   : else_if (noun1_is "bottle"&&is_carried "witch_bottle") {
      : print "\n\"What do you make of this?\" asked Arthur, showing the large glass bottle to Ottoline.\n\"Oh my goodness, a witch bottle!\" she laughed. \"I haven't seen one of these since I was a girl.\"\n \"A witch bottle?\" said Arthur. \"What on earth is that?\"\n\"Well, it's a sort of magical protection. Or a lure. One fills the bottle with certain things: generally iron, some sort of hair and...well, a very particular sort of animal product. And then one places it above the entrances to a room - the doors or windows, or the chimney - and it keeps the ghosts and ghoulies away. It's rather effective.\"\n\"But you said it was also a lure?\"\n\"Oh yes, well that's the other use. It attracts a certain sort of entity. One would need to empty it first of course. Then if one left it open and lying around for long enough, things would be likely to find their way inside.\"\n\"What sort of things?\" Arthur was intrigued. \n\"Nebulous malevolences I suppose you might call them. Bad dreams, wicked rumours. Things of that sort. It's possible to catch them inside something like this. When I was a child I kept one by my bed and never had a nightmare. But as one grows older, one realises it's generally better to face such things than to avoid them\"." ;
      
   }
   
   
   : else {
   : if (is_carried (s1())) {
        : print "But Ottoline didn't want that." ;
   }


   }
      }      
 

   : else_if (is_present "marjorie_drywell") {
   : if (noun1_is "rabbit"||noun1_is "injured"||noun1_is "box") {
: if (is_carried "cardboard_box") {
   : if (is_present "marjorie_drywell") {
   : clear_screen;
      : print "\"Miss Drywell,\" said Arthur, holding out the cardboard box, \"perhaps you will know what to do with this poor creature?\"\nMiss Drywell opened the box and peered inside. \"Ah. I see. And where did you find it?\" Professional interest seemed to have supplanted irritability, for the moment.";
      : press_any_key ;
      : print "\"In the lane, near Ms Elderfield's cottage,\" replied Arthur. \"It was being set upon when I found it.\"\n\"Set upon?\" Miss Drywell's eyebrows rose. \"By whom, may I ask?\"\n\"I don't know who they were,\" said Arthur. \"They...well, they vanished when I approached. But I intend to find them and punish them to the fullest extent of the law. Meanwhile...is there anything that can be done for it, Miss Drywell?\"\n\"Yes,\" she answered brusquely, taking the box away. \"There is always something that can be done.\" " ;
        : press_any_key ;
        : print "She disappeared through a doorway.\n Arthur waited and she returned a few minutes later, empty handed.\n\"Did you help the poor thing?\" asked Arthur, naively." ;
        : press_any_key ;
        : print "\"In the only way that I could, Mr Mapple.\" She began unpacking a bag of equipment onto the surgery table, before pausing to look directly at Arthur. \"When one has worked with animals for as long as I have one knows when the end has come. Only a creature as cruel as a human being would attempt to postpone the moment any longer, as we do with our own kind.\"" ;
        : press_any_key ;
      : clear_screen;
      
      :print "\nMiss Drywell turned to him holding something in her hand and he realised, with a shock, that she was pointing a pistol at him.\n\"Turn around,\" she snapped, irritable once more. Arthur immediately complied. \"Now, open that cupboard in front of you please.\"" ;
      : press_any_key ;
        : print "Perplexed, he did as instructed and found himself looking into a gun cupboard. Miss Drywell tutt-tutted and pushed him out of the way so that she could return the pistol to its place on the rack.";
        : press_any_key ;
        : print "\"Mr Carter's mare,\" she said, a little absently. \"This morning. Rather upsetting. I saved the foal but I couldn't save her.\" She shook herself and turned to him. \"Life is a circle, Mr Mapple. One must never forget.\" She shut and locked the gun cupboard and put the key away. " ;
        : press_any_key ;
        : print "Glancing at Arthur, her attitude softened a little. \"You look like you've had a bit of a shock Mr Mapple. I can quite understand. But I think I could spare you a few moments of my time now, if you still want them?\"" ;
   : destroy "cardboard_box" ;
    : increment "drywell_ask_counter" ;
      : press_any_key ;
      : redescribe;
      
     
}
    }
   }
      : else {
      : print "But Miss Drywell didn't want that." ;
   }
}
: else_if (is_present "edna_taplow") {
   : if (noun1_is "scone") {
      : print "Shamefully, Arthur was rather reluctant to come clean and offer up the stolen scone to Mrs Taplow." ;
   }
   : if (noun1_is "crumbs") {
      : print "Arthur showed the crumbs to Mrs Taplow, who pursed her lips but said nothing." ;
      
   }
   
}

     : else {
       : print "Arthur couldn't find anybody who wanted that." ;
    }
    
}


#SHOW end

#INSERT start

: match "insert _"  {
   : if (noun1_is "rail") {
     : if (is_carried "rail") {
          : if (is_present "stone_fox") {
          : press_any_key ;
          
             : print "Arthur inserted the iron rail into the hole in the fox's ear and found, remarkably, that it fitted exactly." ;
       : set_string var = "rail_description"  text = "an iron rail (inserted into the stone fox's ear)" ;
       : drop "rail" quiet = "true" ;
       : done ;
       }
       : else {
          : print "Arthur couldn't see anywhere to insert that." ;
          
       }
       
     }
  : else_if (is_beside "rail"&&rail_description=="an iron rail (inserted into the stone fox's ear)") {
  : print "But that had already been done." ;
  
  }
  : else {
     : print "But Arthur didn't have it." ;
     
  }
  
      : done ;
   }

   
   
   : if (noun1_is "stone"&&is_carried "date_stone") {
      : if (is_at "pub_cellar") {
         : print "Arthur put the date stone back in its place in the stone wall." ;
         : set_string var = "date_stone_description"  text = "a date stone (in the stone wall)" ;
   : create "date_stone" ;
     : destroy "hole_wall" ;
         : done ;
         
      }
      
   }
   
   : if (is_at "darkroom") {
   : if (noun1_is "screwdriver"&&is_carried "screwdriver"||noun1_is "knife"&&is_carried "knife" ) {
   : print "Arthur wasn't sure where to insert it. If the aim was to prise or lever something then he would be better off trying that instead." ;
     : done ;
   }
     : done ;
   }

   : if (is_carried (s1())) {
         : print "Arthur didn't see the point in that." ;
   }
   : else {
      : print "But Arthur didn't have that." ;
      
   }
   

   
}
#INSERT end
#DISCONNECT HOSE start

: match "disconnect hose; remove hose; disconnect keg"  {
 : if (is_present "keg_1") {
    : if (beer_keg_description=="a beer keg (attached to the hose)") {
       : print "Arthur struggled with the hose for a few moments before successfully disconnecting it from the beer keg." ;
       : if (beer_tap_on) {
    : print "No sooner had he done so that beer began to gush from the tap and flow across the cellar floor. Somewhat alarmed, Arthur reconnected the hose and the flood of beer ceased." ;
    : press_any_key ;
    : redescribe;
    }
    : else {
       : set_string var = "beer_keg_description"  text = "a beer keg (on the lower rack)" ;
       : set_string var = "hose_description"  text = "a beer hose (disconnected)" ;
       
          : create "joseph_jarbell" target = "pub_cellar_passage" ;
       : press_any_key ;
       : redescribe;
       
    }
        }
        : else {
           : print "But the keg had already been disconnected from the beer hose." ;
           
        }
        
 }
  : else {
           : print "But there was nothing connected to the beer hose." ;
           
        }
    

   
}

#DISCONNECT end

#CONNECT start
: match "connect _"  {
 : if (noun1_is "hose"||noun1_is "keg") {
 : if (is_present "keg_1") {
    : if (beer_keg_description=="a beer keg (on the lower rack)") {
       : print "Arthur struggled with the hose for a few moments before successfully connecting it to the beer keg." ;
          : create "joseph_jarbell" target = "pub"  ;
       : set_string var = "beer_keg_description"  text = "a beer keg (attached to the hose)" ;
       : set_string var = "hose_description"  text = "a beer hose (connected to a keg)" ;
       
       : press_any_key ;
       : redescribe;
        }
: else {
   : print "But the hose was already connected to the keg." ;
}
   }
   : else {
      : print "But there was no keg in the lower rack." ;
      
   }
   
   }
}
#CONNECT end


#EAT start

: match "eat _"  {
   : if (noun1_is "scone") {
      : if (is_carried "scone") {
         : if (is_present "edna_taplow") {
            : print "Arthur didn't think it would be wise to eat the stolen scone in front of Mrs Taplow's very eyes." ;
            : done ;
            
         }
         : else {
            : print "Arthur greedily ate the scone, consuming the evidence of his guilt. The only trace left of his misdemeanour was a few crumbs." ;
            : swap o1 = "scone"  o2 = "crumbs" ;
        : done ;
         }
         
      }
      : else_if (is_present "scones") {
         : print "Arthur would have to get one first." ;
             : done ;
      }
      
   }
   : else_if (noun1_is "crumbs") {
      : if (is_present "crumbs") {
         : print "Having gobbled down the stolen scone, Arthur felt sated for the moment. Besides, he felt a strange compulsion to leave the evidence intact: like many reluctant criminals, he harboured a secret desire to be caught." ;
             : done ;
      }
      
   }
   : else_if (noun1_is "kipper"||noun1_is "boiled"||noun1_is "egg"||noun1_is "toast"||noun1_is "marmalade"||noun1_is "breakfast"||noun1_is "things") {
   : if (is_present "breakfast_things") {
      : print "Arthur had already had sufficient breakfast and saw no need to gorge himself further. Besides, overeating made him lethargic and there was much to do." ;
          : done ;
   }

      }
       : else_if (noun1_is "toadstool"&&is_present "toadstool") {
    : print "Amongst the more useful life lessons that Arthur had learned as a boy scout was to never eat strange fungi." ;
        : done ;
 }
   : if (noun1_is "snowflake"||noun1_is "snow") {
      :if (snowfall) {
: if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
: print "Arthur was thankful that, extraordinary though the weather outside may have been, at least it wasn't snowing in there." ;
    : done ;
}
: else {
   : print "Arthur opened his mouth and caught a snowflake on his tongue. It tasted of nothing but light and air, like a food not meant for mortals." ;
       : done ;
}

}
   }
     : else {
        : print "Arthur wasn't particulary hungry." ;
        
     }
     
      
}

#EAT end

#MAKE start

: match "make snowman; make snowball; throw snowball; play snow"  {
        : if (snowfall) {
    : if (is_at "zone_inside_vicarage"||is_at "chemist"||is_at "outbuilding"||is_at "pub"||is_at "poachers_house"||is_at "poachers_scullery"||is_at"church"||is_at"church_1"||is_at "chemist"||is_at "potting_shed"||is_at "car_1" ) {
    : print "That didn't seem like something that Arthur could do at the present time." ;
     : done ;
 }
 : else {
    : print "Nothing would have delighted Arthur more than to play in the snow, but his sterner self forbade him from behaving so childishly. Such was the tragedy of adulthood." ;
    : done ;
        
     }
   
     }
     : else {
        : print "That didn't seem like something that Arthur could do at the present time." ;
     : done ;
     }
     

     
      }
: match "make_"  {
   : if (noun1_is "sign"&&noun2_is "sun"||noun1_is "sun"&&noun2_is "sign") {
   : if (sign_of_sun) {
      : print "Arthur made the sign of the sun, holding his hands together at the wrists and splaying his fingers as he had seen illustrated on the sundial." ;
      : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
       : if (spell==0) {
   : gosub "positive_spell_development" ;
    
       }
: else {
: gosub "negative_spell_development" ;
}
   }
   }
    : else {
      : print "But Arthur didn't know how to make that sign." ;
   }
      }
    : else_if (noun1_is "sign"&&noun2_is "moon"||noun1_is "moon"&&noun2_is "sign") {
    : if (sign_of_moon) {
      : print "Arthur made the sign of the moon, cupping a hand vertically as though he was holding a large ball, as he had seen in the picture in The Vicarage hallway." ;
      : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
       : if (spell==3) {
    : gosub "positive_spell_development" ;
       }
 
: else {
: gosub "negative_spell_development" ;
}
            }
   }
    : else {
      : print "But Arthur didn't know how to make that sign." ;
   }
          
    }
    
    : else_if (noun1_is "sign"&&noun2_is "eye"||noun1_is "eye"&&noun2_is "sign") {
   : if (sign_of_eye) {
      : print "Arthur made the sign of the eye, pressing the tips of fingers and thumb together to make a triangle which he then looked through, as he had seen depicted on the altar cloth in the chapel." ;
      : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
       : if (spell==6) {
    : gosub "positive_spell_development" ;
       }
: else {
: gosub "negative_spell_development" ;
   }

      }
   }
   : else {
      : print "But Arthur didn't know how to make that sign." ;
   }
   }
    : else_if (noun1_is "sign"&&noun2_is "wind"||noun1_is "wind"&&noun2_is "sign") {
   : if (sign_of_wind) {
      : print "Arthur made the sign of the wind, pressing his palms together and curving the ends of his fingers before blowing along them, as he had seen depicted on the weather vane atop the church spire." ;
      : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
       : if (spell==9) {
      : gosub "positive_spell_development" ;
       }
: else {
: gosub "negative_spell_development" ;
}
      }
   }
   : else {
      : print "But Arthur didn't know how to make that sign." ;
   }
      }
    : else {

        : print "Arthur had never heard of that sign." ;
    }

      

   
}

#MAKE end

#STIR start

: match "stir _"  {
   : if (noun1_is "keg"||noun1_is "potion"||noun1_is "brew"||noun1_is "mixture"||noun1_is "liquid") {
   : if (is_present "keg") {
  : if (is_carried "twig") {
   : if (is_carried "keg") {
   : drop "keg" ;
      }
      : if (is_beside "keg") {
      : if (beer_keg_open) {
    : if (adverb_is "clockwise") {
       : print "Arthur stirred the liquid in the keg clockwise, with the hazel twig." ;
            : if (traptor==6&&is_at "grove"&&is_worn"robes") {
       : if (spell==1) {
       : set_integer var = "reading"  value = "0" ;
       
   : gosub "positive_spell_development" ;
      }
      : else_if (spell==7) {
           : gosub "positive_spell_development" ;
      }
      
      : else {
         : gosub "negative_spell_development" ;
      }
   }
   }
   : else_if (adverb_is "anticlockwise") {
       : print "Arthur stirred the liquid in the keg anticlockwise, with the hazel twig." ;
            : if (traptor==6&&is_at "grove"&&is_worn"robes") {
       : if (spell==4||spell==10) {
   : gosub "positive_spell_development" ;
      }
      : else {
         : gosub "negative_spell_development" ;
         
      }
      

   }
  
   
   }
         : else {
      : print "Arthur wasn't sure which direction he should stir in." ;
      
   }    
      }
        : else {
         : print "But the keg was not open." ;
         
      }

}
  : else {
      : print "But Arthur couldn't see anything that seemed to need stirring." ;
      
   }


}

: else {
   : print "But Arthur didn't have anything suitable to use as a stirrer." ;
}
      }
   : else {
      : print "But the keg was not there." ;
      
   }
   
     
   }
     : else {
   : print "Arthur didn't see the point in stirring that." ;
}
   
}

#STIR end

#RECITE start

: match "recite _"  {
   : if (noun1_is "spell") {
      : if (is_carried "remnant"||is_carried "grimoire") {
      : if (reading==0) {
           : print "Arthur recited\nBy the sun that drew thee\nBy the power that rules thee\nUnmeet spirit begone from this place and return to thine own\nArazak, Akas, Astaroth, Amon\nReok, Reok, Rekalizel!" ;
           : increment "reading" ;
           
                : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
:if (spell==2) {
     : gosub "positive_spell_development" ;
                   
                }
               : else {
                  : gosub "negative_spell_development" ;
               }
                }
                : done ;
                
      }
      : if (reading==1) {
           : print "Arthur recited\nBy the moon that knows thee\nBy the light that shows thee\nUnmeet spirit begone from this place and return, return to thine own\nDarakal, Dreazor, Dimnuik,\nReok, Reok, Rekalizel!" ;
                      : increment "reading" ;
                : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
:if (spell==5) {
     : gosub "positive_spell_development" ;
                   
                }
               : else {
                  : gosub "negative_spell_development" ;
               }
                }
                    : done ;
      }
         : if (reading==2) {
           : print "Arthur recited the spell\nBy the eye that sees thee\nBy the knowing that fears thee\nUnmeet spirit begone from this place and return, return, return to thine own\nForas, Fitleas, Forakoval,\nReok, Reok, Rekalizel!" ;
                      : increment "reading" ;
                : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
:if (spell==8) {
     : gosub "positive_spell_development" ;
                   
                }
               : else {
                  : gosub "negative_spell_development" ;
               }
                }
                    : done ;
      }
             : if (reading==3) {
           : print "Arthur recited the spell\nBy the breath that blows thee\nBy the wind that sows thee\nUnmeet spirit begone from this place, begone forever!\nSitri, Seogath, Sistlil,\nReok, Reok, Rekalizel!" ;
                     : set_integer var = "reading"  value = "0" ;
                     
                : if (traptor==6&&is_at "grove"&&is_present "keg"&&is_worn"robes") {
:if (spell==11) {
     : gosub "positive_spell_development" ;
                   
                }
               : else {
                  : gosub "negative_spell_development" ;
               }
                }
                    : done ;
      }
      }
       : else {
          : print "But Arthur didn't know any of those off the top of his head." ;
          
       }
       
   }
   : else {
      : print "Arthur said something inconsequential to himself." ;
      
   }
   
   
}


#RECITE end

#WAVE start

: match "wave _"  {
   : if (noun1_is "twig"||noun1_is "wand") {
      : if (is_carried "twig") {
         : print "Arthur waved the twig around hopefully, but nothing whatsoever happened." ;
         
      }
      
   }
   : else_if (is_carried (s1())) {
      : print "Arthur waved it around as though he expected something to happen and was a little crestfallen when nothing did." ;
   }
   : else {
      : print "Arthur waved his hands around ineffectually." ;
      
   }
   : if (is_present "ottoline_elderfield") {
      : print "Ottoline raised an eyebrow but otherwise offered no comment on Arthur's behaviour." ;
      
   }
   
}

#WAVE end

#SLEEP start

: match "sleep _"  {
   : print "Arthur was currently awake and therefore on duty. To fall asleep now would be gross dereliction." ;
   
}

#SLEEP end

#XYZZY start

: match "xyzzy-"  {
   : print "The word was quite outside of Arthur's cultural lexicon. And yet, somehow, he felt obliged to respond." ;
   
}

#XYZZY end

#SEARCH start

: match "search _"  {
   : print "Arthur generally found that simply examining things was sufficient and besides, he couldn't conduct a search without a warrant." ;
   
}

#SEARCH end

#RING start

: match "ring bell"  {
   : if (is_at "church") {
      : if (traptor==3||traptor==5) {
         : print "If Arthur wanted the ring the bell then he should have pulled the rope." ;
         
      }
      : else {
         : print "Arthur couldn't think of a way of doing that at the moment." ;
         
      }
      
   }
   
}

#RING end

#SWIM start

: match "swim-"  {

: if (is_at "sweet_track_1"||is_at "sweet_track_2"||is_at "sweet_track_bridge") {
   : print "The unfathomable, peaty waters of the wetland didn't seem meant to be swum in." ;
      
}
: else_if (is_at "well") {
   : print "Arthur was gripped by terror at the thought of splashing around in that dark, dank water." ;
   
}

}

#SWIM end

#KILL start

: match "kill _"  {
   : print "Arthur had always believed that he was constitutionally incapable of killing anything. He hoped that he would never have to put it to the test." ;
   
}

#KILL end



#KISS start

: match "kiss _"  {
   : print "Arthur decided he had better not, much though he might have enjoyed it." ;
   
}

#KISS end

#SHOUT start

: match "shout _"  {
   : print "Arthur suppressed the urge to shout at the top of his voice and thereby make a spectacle of himself." ;
   
}

#SHOUT end

#SING start

: match "sing -"  {
   : print "Arthur 'tra-la-laaad' cheerfully to himself." ;
   
}

#SING end

#THROW start

: match "throw _"  {
: if (traptor==4) {
   : if (is_at "drawing_room"||is_at "on_the_table") {
      : if (is_present "something") {
         : if (noun2_is "thing") {
            : print "Of all Arthur's many failings, his lack of competence as a cricketer was the one of which he was most ashamed. As a batsman he was quite hopeless and as a bowler he was invariably wide of the mark. He couldn't be sure of not missing the thing on top of the pelmet and smashing the window if he tried to dislodge it like that." ;
            : done ;
            
         }
         
      }
      
   }
   
}


 : if (noun1_is "dagger") {
                     : if (noun2_is "water"){
                        : if (is_at "sweet_track_bridge") {
            : if (is_carried "broken_dagger") {
               : print "Arthur dropped the broken dagger over the side of the track and watched it sink and disappear into the black water. A moment passed before Arthur realised that he could hear and smell things from across the bridge that he hadn't been able to before. The way seemed to have been opened." ;
               : destroy "broken_dagger" ;
               : done ;
                }
            }
            : else_if (is_at "sweet_track_1"||is_at "sweet_track_2") {
               : print "Arthur didn't think it was a good idea to go dropping things into unknown waters. He might never get them back." ;
               : done ;
            }
            }
            }
            
             : if (noun1_is "rope") {
      : if (rope_tied) {
         : if (is_carried "rope") {
         : if (noun2_is "hole"&&is_present "hole") {
            : print "Arthur dropped the free end of the rope down the hole." ;
      : set_true "rope_down_well" ;
      
            : set_string var = "rope_description"  text = "a piece of rope (one end tied to a fence post, the other end down the hole)" ;
            : create "rope" ;
            : press_any_key ;
            : redescribe;
         }
         
         }
  : else {
      : print "But Arthur was not holding the rope." ;
      : done ;
      
      }
      }
   }
            
    : print "Arthur wasn't quite petulant enough to do that." ;
}

#THROW end
#LIE start

: match "lie _"  {


: if (preposition_is "down") {
   : if (is_at "peldash_room"||is_at "bedroom_1") {
      : print "Arthur would secretly have loved to have a little lie down, but to do so would have been to admit that things were getting on top of him." ;
      
   }
   : else {
      : print "Arthur considered lying down flat, but this seemed neither the proper place nor time to do so." ;
      
   }
   
}

   
   
}

#LIE end

#GRAB start

: match "grab sally; get sally"  {
   : if (is_at "church") {
   : if (bell_ringing==0) {
      : print "But the sally was out of reach." ;
      : done ;
      
   }
   : if (bell_ringing>0&&bell_ringing!=5) {
      : print "Arthur felt so confident that he knew what to do that he imagined he would grab the sally automatically at the correct time, to keep the bells ringing.";
      : print "Mr Snapeshuttle's dire warning about grabbing the sally at the wrong moment flashed briefly into his mind, but he dismissed it lightly. What could possibly go wrong?" ;
      
   }
   
     : if (bell_ringing==5) {
   : clear_screen;
   
      : print "Arthur grabbed the sally and before he knew what was happening, he was hoisted off the floor of the church and sent shooting upwards like a cork out of a bottle. He yelled and clung to the rope for dear life. The stone floor of the church receded at dizzying speed and he expected at any moment to be dashed against the wooden roof, but the rope hole was just wide enough to accommodate him. He passed through and into the dark space beyond where he let go of the rope and landed on the timber floor of the bell-loft." ;
      : if (is_present "ottoline_elderfield") {
         : print "\"Arthur!\" shouted Ottoline in alarm as she watched him being transported aloft, \"For heaven's sake, don't let go!\" " ;
         : set_false "ottoline_follow" ;
         
      }
      
      : set_integer var = "bell_ringing"  value = "0" ;
      : goto "bell_loft" ;
      : if (is_first_entered ()) {
      : create "ernest_snapeshuttle" target = "porch" ;
      }
    
      
      : set_false "holding_rope" ;
      : press_any_key ;
      : redescribe;
            
   }
   

   }
 
   
}

#GRAB end

#DRY start

: match "dry _"  {
   : if (noun1_is "film"||noun1_is "negatives") {
   : if (film_description=="a strip of film negatives (processed, wet)"||film_description=="a strip of film negatives (processed, hanging on the drying line)"&&has_not_created "packet" ) {
   
      : print "Only time would do that." ;
      : done ;
      
   }
: print "Arthur saw no need to do that at the moment." ;
: done ;

   }
      : if (noun1_is "sheet"||noun1_is "prints") {
   : if (sheet_description=="a sheet of contact prints (processed, wet)") {
   
      : print "Only time would do that." ;
      : done ;
      
   }
: print "Arthur saw no need to do that at the moment." ;
: done ;

   }
}

#DRY end

#LISTEN start

: match "listen _"  {
: if (is_at "garden_5"&&has_not_created "hedgehog"&&traptor==2) {
      : print "Arthur listened carefully and hear a distinct rustling sound coming from within the foliage nearby."; 
      : done ;
      
}

   : if (is_at "zone_lanes"||is_at "zone_road_to_village"||is_at "zone_lanes"||is_at "footpath_2") {
   : if (daytime) {
      : print "Arthur listened to the melliflous sounds of an English summer, distilled in the liquid trill of birdsong from the trees and hedgerows all around." ;
   }
   : else {
      : print "Arthur heard the quiet rustlings of nocturnal creatures going about their business." ;
    
   }
   
   : done ;
   
}
: if (is_at "zone_wetland") {
   : print "Arthur heard the churr and warble of reed-dwelling birds and occasionally, the low boom of a bittern. " ;
   : done ;
   
   
}
: if (is_present "little_people") {
   : print "Arthur strained to hear but could detect no sound from the tiny people." ;
   : done ;
   
}



: else {
   : print "Arthur listened but didn't hear anything out of the ordinary." ;
}




}

#LISTEN end

#WRAP start

: match "wrap _"  {
   : if (noun1_is "nail") {
      : if (is_carried "horseshoe_nail_1") {
         :print "Arthur thought to wrap the nail up to conceal its bright and unearthly light but nothing he had seemed up to the task. He felt it might be more effective to conceal it within something.";
         : done ;
   }
   : else_if (is_carried "horseshoe_nail") {
         : print "Arthur didn't see the point in wrapping up the nail." ;
   }
   
   : else {
   : print "But Arthur didn't have it." ;
   }
   }
  :else {
  : print "Arthur didn't see the point in wrapping that up." ;
  : done ;
  
  }
}

#WRAP end

#FEED start

: match "feed _"  {
   : if (noun1_is "bird"||noun1_is "birds") {
      : if (is_at "footpath_1") {
         : if (daytime) {
            : if (is_carried "crumbs") {
             : print "Dropping the crumbs was the best way to do that." ;
            :done;
            }
            : else {
               : print "But Arthur didn't have anything suitable to feed the birds with." ;
               
            }
            
         }
         : else {
            : print "But there were no birds to be seen at that time of evening." ;
            : done ;
            
         }
         
      }
      : else {
         : print "Arthur felt that he had more pressing things to do at the present time." ;
         : done ;
         
      }
      
   }
   : else {
      : print "Arthur didn't see the point in feeding that." ;
      : done ;
      
   }
   
}

#FEED end

#TUNE start

: match "tune piano"  {
   : if (is_at "pub") {
      : print "Arthur expected that, like all pub pianos, this one had a unique and characterful voice developed through years of service in the smoky, beery environment of the village pub. It would have been a shame to try and make it anything other than it was." ;
      : done ;
      
   }
   
}

#TUNE end

#VIOLENCE start

: match "hit _;kick _;punch _; smack _; pulverise _; assault _"  {
   : print "If Arthur's formative years had taught him nothing else they had taught him that, in the end, violence was never the answer." ;
   : done ;
}

#VIOLENCE end

#SWEARING start

: match "fuck _; shit _; cunt _; arsehole _; wanker _; bastard _; asshole_; bitch _"  {
   : print "Arthur had heard worse in the drinking establishments of Stathings." ;
   : done ;
   
}

#SWEARING end

#DEVELOP start

: match "develop film"  {
   : if (is_present "film") {
      : print "\"If only it was so easy!\" thought Arthur, knowing that such things had to be done step by step." ;
      : done ;
      
   }
   
}

#DEVELOP end

#Z start

: match "z-"  {
   : print "Arthur waited for a few moments." ;
   
}

#Z end
}

######################################
#  Vocabulary                        #
######################################

vocabulary {
 
 : noun {
 
    aliases = [oven, range]
    
 }
 
: noun {

   aliases = [pipes, hoses]
   
}
: noun {

   aliases = [blanket, silk]
   
}
: noun {

   aliases = [spider, spiders]
   
}


: noun {

   aliases = [pub, inn, myrour]
   
}

: noun {

   aliases = [dwellings, huts]
   
}


: noun {

   aliases = [ernest, snapeshuttle]
   
}

: noun {

   aliases = [plinth, pedestal]
   
}

: noun {

   aliases = [sheet, paper, prints]
   
}

: noun {

   aliases = [tombstone, gravestone, headstone]
   
}

: noun {

   aliases = [twine, lines]
   
}

: noun {

   aliases = [candle, stub]
   
}

: noun {

   aliases = [flowers, bouquet]
   
}


: noun {

   aliases = [knick, knacks, knick-knacks ]
   
}

: noun {

   aliases = [mangle, rollers, frame, struts, handle]
   
}

: noun {

   aliases = [painting, paintings]
   
}

: noun {

   aliases = [tricycle, trike]
   
}

: verb {

   aliases = [smell, sniff]
   
}


// : noun {

//    aliases = [noticeboard, board]
   
// }

: noun {

   aliases = [coal, heap]
   
}

: noun {

   aliases = [information, board, sign]
   
}
: noun {

   aliases = [lawnmower, mower]
   
}
: adjective {

   aliases = [mrs]
   
}

: verb {

   aliases = [undo, rewind]
   
}
: verb {

   aliases = [put, add]
   
}
: noun {

   aliases = [villages, book, spirits, grimoire, herbal, remnant, practical, techniques, paperback]

}





: noun {

   aliases = [foursquare, hare]
   
}

: noun {

   aliases = [monument, tombs]
   
}

: noun {

   aliases = [hole]
   
}

: noun {

   aliases = [glass, pane]
   
}
: noun {

   aliases = [cap, screwcap]
   
}

: verb {

   aliases = [dig, shovel]
   
}

: noun {

   aliases = [pots, pans, utensils]
   
}
: noun {

   aliases = [earth, pile]
   
}

: verb {

   aliases = [get, hold]
   
}


   : noun {
   
      aliases = [edna, taplow]
      
   }
   : noun {
   
      aliases = [sidney, thurgood]
      
   }
   
   : noun {
   
      aliases = [joseph, jarbell]
      
   }
   
   : noun {
   
      aliases = [henry, salter]
      
   }
   
  : noun {
  
     aliases = [ottoline, elderfield]
     
  }
  
   
   : noun {
   
      aliases = [vase]
      
   }
   
   : noun {
   
      aliases = [film, negatives]
      
   }
   
: noun {

   aliases = [paper, sheet]
   
}

: verb {

   aliases = [light, strike]
   
}
: noun {

   aliases = [switch, light]
   
}


: noun {

   aliases = [flask]
   
}

   
   : noun {
   
      aliases = [enlarger, bellows]
      
   }
   : noun {
   
      aliases = [lenses, fittings]
      
   }
   : verb {
   
      aliases = [turn, switch]
      
   }
   
   
   : noun {
   
      aliases = [brownie, camera]
      
   }
   
 
   : noun {
   
      aliases = [crate,crates]
      
   }
   
   : noun {
   
      aliases = [breakfast, kipper, egg]
      
   }
   
   : noun {
   
      aliases = [lamp, ruby]
      
   }
   
: noun {

   aliases = [matchbox, box]
   
}
: noun {

   aliases = [match]
   
}

   : verb {
   
      aliases = [break, smash, crack]
      
   }
   : verb {
   
      aliases = [repair, mend, fix]
      
   }
   : noun {
   
      aliases = [taplow, housekeeper]
      
   }
   : noun {
   
      aliases = [thurgood, gardener]
      
   }
   : noun {
   
      aliases = [bicycle, bike]
      
   }
   : noun {
   
      aliases = [paper, sheets]
      
   }
   : verb {
   
      aliases = [prise, lever, pry]
      
   }

   : preposition {
   
      aliases = [off]
      
   }
   : preposition {
   
      aliases = [on]
      
   }
   : noun {
   
      aliases = [film]
      
   }
   : preposition {
   
      aliases = [about]
      
   }
   : noun {
   
      aliases = [arthur, me]
      
   }
   
   : noun {
   
      aliases = [nancy, nancys, attic]
      
   }
   : noun {
   
      aliases = [pardon, parson]
      
   }
   : noun {
   
      aliases = [thraplington, scrofield]
      
   }
   
   : verb {
   
      aliases = [push, press]
      
   }
   : noun {
   
      aliases = [frank, farthing, poacher]
      
   }
   : noun {
   
      aliases = [frame, cold]
      
   }
   : noun {
   
      aliases = [overcoat, coat]
      
   }
   

  : noun {
  
     aliases = [pint, beer]
     
  }
  : preposition {
  
     aliases = [up]
     
  }
  : noun {
  
     aliases = [marjorie, drywell]
     
  }
  
  : verb {
  
     aliases = [put, stick]
     
  }
  : noun {
  
     aliases = [ground, earth, soil]
     
  }
  : noun {
  
     aliases = [hole, well]
     
  }
  : noun {
  
     aliases = [sheet, prints]
     
  }
  : adjective {
  
     aliases = [ottoline's]
     
  }
  : noun {
  
     aliases = [branches, vegetation, foliage, bushes, shrubs]
     
  }
  : verb {
  
     aliases = [cut, clip]
     
  }
 : noun {
  
    aliases = [north, n]
     
 }
 : noun {
  
    aliases = [east, e]
     
 }
 : noun {
  
    aliases = [south, s]
     
 }
  : noun {
  
    aliases = [west, w]
     
 }
  : noun {
  
    aliases = [northeast, ne]
     
 }
  : noun {
  
    aliases = [southeast, se]
     
 }
  : noun {
  
    aliases = [northwest, nw]
     
 }
  : noun {
  
    aliases = [southwest, sw]
     
 }
  : noun {
  
     aliases = [move, push]
     
  }
  : noun {
  
     aliases = [thing, something, object, item, thingy]
     
  }
  : noun {
  
     aliases = [pince-nez, pince, nez, specs, spectacles, glasses]
     
  }
  : noun {
  
     aliases = [earth, soil, dirt]
     
  }

  : noun {
  
     aliases = [nail]
     
  }
  : noun {
  
     aliases = [carvings, carving]
  }
  : verb {
  
     aliases = [hammer, knock, tap]
     
  }
  : noun {
  
     aliases = [barrel, barrels]
     
  }
  : verb {
  
     aliases = [dig]
     
  }
  : verb {
  
     aliases = [gouge, chisel, scrape]
     
  }
  : noun {
  
     aliases = [hedge, hedgerow]
     
  }
  : noun {
  
     aliases = [prattle, gossip, tittle-tattle, tittle, tattle, rumour]
     
  }
  : noun {
  
     aliases = [vane, weather]
     
  }
  : preposition {
  
     aliases = [through]
     
  }
  : adverb {
  aliases  = [clockwise, deosil]
  }
  
   : adverb {
  aliases  = [anticlockwise, widdershins, counterclockwise]
  }
  : noun {
  
     aliases = [twig, stick]
     
  }
  : noun {
  
     aliases = [weight, paperweight]
     
  }
  : noun {
  
     aliases = [book, books]
     
  }

: verb {

   aliases = [recite, say, chant]
   
}

: noun {

   aliases = [spell, incantation]
   
}
: noun {

   aliases = [list, ingredients]
   
}

: noun {

   aliases = [ashtray, mirror]
   
}
: noun {

   aliases = [photo, photograph, snap]
   
}

}

######################################
#  Themes                            #
######################################

themes {
    
   blackonyellow : theme {

          lister_inventory {
         list_type = verbose 
    experimental_auto_group_singular_objects = true
         
      }
      
      lister_objects {
         experimental_auto_group_singular_objects = true
      
      }
      lister_exits {
exit_list_style = verbose
 
      }
      theme_settings {
      
         layout = SB G LOCK D O
         font =serif
          header_capitalization = original
         theme_tags  = [ blackonyellow ]
      }
     
       screen {
         status_bar_padding_horz = 0
         
      }
      status_bar {
         
         : header_text;
         : dynamic_text "date_description" ;
         
      }
colors {
         // 15 == white (#fff)
         status_bar_pen   = 0
         // 9 = Blue (#00f)
         status_bar_paper = #FF9
       //#efe
         pen = #000
         paper = #FF9
         
      }
      
   system_messages {
   
      all_treasures_found_win_game                   = Congratulations, you found all the treasures. You have won!
      already_in_container                           = ${entity} is already inside the ${entity2}.
      ask_new_game                                   = Would you like to start a new game?
      ask_quit                                       = Do you wish to quit the game?
      be_more_specific                               = But which was it to be?
      cannot_carry_any_more                          = Arthur could not carry any more items.
      cannot_carry_any_more_weight                   = Arthur was too weighed down already to manage anything else.
      cant_see_one_of_those                          =Arthur couldn't see one of those.
      cant_take                                      = Arthur didn't see the point in carting that around with him. 
      dont_have_one_of_those                         = But Arthur didn't have that.
      exit_list_additional_exits_are_located_verbose = Additional exits are located\s
      exit_list_end_text                             = 
      exit_list_end_text_verbose                     = .
      exit_list_from_here_you_can_go_verbose         = Arthur could go\s
      exit_list_header_concise                       = Exits :
      exit_list_last_sep_verbose                     = \sor\s
      exit_list_sep_verbose                          = ,\s
      exit_list_there_are_no_obvious_exits           = There are no obvious exits.
      exit_list_to_the_verbose                       = 
      exit_list_you_can_also_go_verbose              = You can also go\s
      gamebook_question                              = Select An Option ...
      i_cant_do_that                                 = That didn't seem like something that Arthur could do at the present time.
      invalid_choice                                 = Invalid choice.
      inventory_list_empty                           = Nothing
      inventory_list_end_text                        = .
      inventory_list_final_separator                 = \sand\s
      inventory_list_header                          = Arthur was carrying:\s
      inventory_list_header_verbose                  = Arthur was carrying\s
      inventory_list_separator                       = ,\s
      it_is_dark                                     = It was completely dark. Arthur could see nothing.
      must_remove_first                              = Arthur would have needed to take ${entity} off first.
      not_carried                                    = You can't ${verb} something you are not carrying.
      not_present                                    = But ${entity} was not there.
      nothing_here                                   = There was nothing there.
      nothing_to_get                                 = Arthur couldn't find that.
      object_list_empty                              = Nothing
      object_list_end_text                           = .
      object_list_final_separator                    = \sand\s
      object_list_header                             = Arthur saw :\s
      object_list_header_verbose                     = Arthur saw\s
      object_list_separator                          = ,\s
      ok                                             = OK
      on_drop                                        = Arthur put down ${entity}.
      on_get                                         = Arthur took ${entity}.
      on_put                                         = Arthur put ${entity} in  ${entity2}.
      on_put_non_container                           = Arthur couldn't (or wouldn't) do that.
      on_put_non_surface                             = ${entity} is not a surface.
      on_remove                                      = Arthur took off ${entity}.
      on_wear                                        = Arthur wore ${entity}.
      post_quit                                      = You have quit the game.
      prior_prompt                                   = What Now?
      prompt                                         = >>
      question_prompt_char                           = ?
      there_is_nothing_you_can                       = But there was nothing that Arthur could ${verb}.
      treasure_message                               = 
      treasure_suffix                                = 
      unknown_noun                                   = Arthur wasn't quite sure how to do that.
      unknown_verb                                   = Arthur wasn't quite sure how to do that.
      worn_suffix                                    = \s(worn)
      you_already_wear                               = Arthur was already wearing that.
      you_are_already_carrying                       = Arthur already had it.
      you_are_not_holding                            = You are not holding ${entity}.
      you_cant_go_that_direction                     = Arthur couldn't go that way.
      you_cant_wear                                  = Arthur tried but failed to wear ${entity}.
      you_cant_wear_anything_else                    = You can't wear anything else without removing something first.
      you_dont_wear                                  = But Arthur wasn't wearing that.
      you_see_nothing_special                        = Arthur saw nothing particularly noteworthy.
       you_see_nothing_special_2                        = Arthur saw nothing particularly noteworthy.
       
   }
   
   }

blackonwhite : theme {
       extends = blackonyellow
   theme_settings {
   theme_tags  = [ blackonwhite ]
     
   }
      colors {
         // 15 == white (#fff)
         status_bar_pen   = 000
         // 9 = Blue (#00f)
         status_bar_paper = 15
       //#efe
         pen = 000
         paper = 15
         

   }
   
}
whiteonblack : theme {
       extends = blackonyellow
   theme_settings {
   
     theme_tags = [whiteonblack]
   }
      colors {
         // 15 == white (#fff)
         status_bar_pen   = 15
         // 9 = Blue (#00f)
         status_bar_paper = 0
       //#efe
         pen = 15
         paper = 0
         

   }
   
}
//treezle
blackonblue : theme {
       extends = blackonyellow
   theme_settings {
   
     theme_tags  = [ blackonblue ]
   }
      colors {
         // 15 == white (#fff)
         status_bar_pen   = 000
         // 9 = Blue (#00f)
         status_bar_paper = 5
       //#efe
         pen = 000
         paper = 5
         

   }
   
}
yellowonblack : theme {
       extends = blackonyellow
   theme_settings {
   
     theme_tags  = [ yellowonblack ]
   }
      colors {
         // 15 == white (#fff)
         status_bar_pen   = 6
         // 9 = Blue (#00f)
         status_bar_paper = 0
       //#efe
         pen = 6
         paper = 0
   }
}
   greenonblack : theme {
       extends = blackonyellow
   theme_settings {
   
   theme_tags = [greenonblack]
   }
      colors {
         // 15 == white (#fff)
         status_bar_pen   = 12
         // 9 = Blue (#00f)
         status_bar_paper = 0
       //#efe
         pen = 12
         paper = 0
   }
}
}

######################################
 #  Assets                            #
 ######################################
 
 assets {
 

 
   graphics {

  default_location_graphic : dynamic_graphic {(
         has_theme_tag "blackonyellow" ? "fox_divider_blackonyellow" : 
         has_theme_tag "blackonwhite" ? "fox_divider_black_on_white" :
        has_theme_tag "blackonblue" ? "fox_divider_black_on_blue" : has_theme_tag "yellowonblack"
? "fox_divider_yellow_on_black" : has_theme_tag "whiteonblack" ? "fox_divider_white_on_black" : "fox_divider_green_on_black"     )}
    loading_screen_png : png "loading screen.png";
      fox_divider_blackonyellow : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAIAAADjtCcPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AACFzSURBVHhe7Z0HXFNX+8eBTJJAIAzZQgHBgULdVpyoVH1daJ0VtXVXcdVRtVpH3dsiYl9HtcN/tVVaWzda2gqiKCoiSxCZCZAQMsj+Pzf3NkUEBJz4Pt9PCGfde8/NPeN3zj3D3GDYb4YgCIIgCII0QSyo/wiCIAiCIEhTA5UcgiAIgiBIUwXfriIIgrx0DAaDubk5ZXkKc/PplIkIiWUygiANAPvkEARBXi51yDjQcKSM02r3paSsIh0RBEHqDyo5BEHeHNjU/7eLp2UcKeBIDWcw7NfrowoLywsKyklfBEGQ+oNvVxEEaQCk+Fi8uP+mTWGky3Ny927+hx8eTE7OI60PH6738rInzW8l5A8IVCt7hw2LPH06GQtkBEEaCvbJIQhSL5KTH9vZzb90ifhs3nweFMmjR6WUX2O5dOnB8OH7QMYlJCzNz9/k5mYTHn6I8nsbMXXCVVNsBoPht9/uURYEQZCGgEoOQZB6oVRqZDKVtTW7Tx//nJwv27Z1bdFi5bRpRynvhvPddwkhITuyskQy2e5OnbxcXGxu314ZF5dJeb9dNGu2yCTjSJeqFBVJNRodZUEQBGkIqOQQBKkvarVOLleDoXlzu+Tkz7dvH3XgwJ9dumw0GAxkAECl0uj1etJcWalRKtXwqRqAZOLEQxMnHp48uRsoGy6XRbm+pdy7ly8UVjzdFWfizz8J/Vpaup20IgiC1B9UcgiC1BcLC/OMDCFlMTObPbv32bNzExKyR4zYp9HozI1D+NnsT3i8uWz2bAZjprV1hK3tfAeHhRYWM8ALQkIwsVgeErLj2LGEzZtHHDwYTp3LiJfXZ5TpLUIiUQQErKlNw5Fcv54N3wIBl7QiCILUH1RyCILUC6VSw+OxYmPTKLuR7t19xozpcOpUMpM5KywsaMuWMJAsYvEO+KhUX6nVkZWVX8lke/773w8h8Lp1Z1q0WBkUtO7SpQcTJnRasKAfeRITFRWqiIg+lOVtAbQsZaqd6Og4yoQgCNJAUMkhSBNDo9ELhQqyA8z0KS1VgjsV4qXB51uePn1bIlGAGb4nTjzo7b38ypX0rl3fMTc34/HYixb1By8Wi2FpybSw+Ld4mTKlOyi8X375ZNSodx89KgOXmJg7gYFr4+MfkgGAiopK+F69eihpfZtQKPZQppo4efKmVFp56dKzBd8LR6vVSySqrCxx1bRUXCx/BWkJQZAXBa5CgiBNA4PBLC2tpGXL5aR1545wO3uOTqsvLVUIi2VCoczcwtC2rWvfEN8WLeyYzBffSNPp9D4+K/LyxEuWDFi3bhhU+a1bu0RHT+jWzRt858z5fu/eK+vWDV2+fCAZ/mlABY4YEdW7t9/Fi/PLyxUrV8ZERf3x/vutd+0a7elpT6fP6NTJ6++/l1Ch3woePhR5e68QCrc6OFhRTk/RvPkyCwvz7OwvKfvLB4Ta/fvCwMB/FyLetTOcb8M2NzevkKo+mUNMH96xIzw01M/Pz672nSkQBHkjQCWHIE2AykqdpeUsMFy8sKRdoLO1NZNOt4Dq30BgptcbZBXqtPSSixczkm4+bt3aefKUTl5efPLYF0hiYs7YsQcePSqLj18qElX079+qasdbjx5b4uOzT52aOXBgAOVUBYinre08NpuembmOx6NWAJZKlXPm/MBg0OLiMuC0RUVbbGw4pNfbQd++25OT80pKap3KsHv35Xnzjv/++9wBA1pTTi+Zx48rvjmcuOLz42BOiF/Vws+Ox2NAWiIVGzwmnc5QUaGys5tH2AnZF0Wno5pDkDcXVHII0gQwN5++aNGwKVM6+fjYMhi19reVl6vOnk0/EP23r6/D6i9CmzV78aooJaWwY8f1HA7z3LkINpsBIkwg4NrZcUEIFBaW+/gs53BYxcVbqio8ksGD9545c/f8+Yh+/VoJhdIrV9LVap2Pj4OzM3/8+P/+/XcWaIj09DW+vs2oA54bELkFBZK0tOKMDGFWlignp/TxYxCLUoVCzWLRrazYEH8QxBAMYqLR6MAA7k5O/LNnU3bvHt22rVtQkLu1tSV1uoZz9uw9uOvIyPHTpgVTTk9y40ZOly4be/f2u3DhFb1aLSpSbNsau3VbDJjLy/dAk4B0fxqtVp+TU+7ru/TOnfUBAW/zWs0I0iSAAgqKWfKbcvqHWpWcKXSNhyEI8ioBJbf2i3FTPm7v7ExoJsrVCAggqHThm3yjmp0tjoy89nfcw8VL+w8d1oIM82K5fj17wIBder3h9OlZIIzCww/B1ceM6ThpUtf4+IfLl5/++usPP/qoOxXaSFZWmb//8tDQ1hs2DP/++8RDh/4SiWTDhwfu2jX6ww8PXb78ICoK5E4PuE3qAELlfNa6tQuILcr+LFQqTXZ2aVpa0bBh+yinf1i4sJ+vr+P06T0oe+3odHoazQJusHPnjZTTPyiVe+sfGblctX//H8uW/TxgQOuYmNmU65PcupXbvftmd3fBgwdrKKeXz8mT90aOJAbtPXy4ycvLBgxqtR4eJYtFq1bMQ8lfVqayt49ISlobFORIuSII8lqBjAnf1WqBmpVc1aA1HoYgSCOQSBTwycuTyGSVoIHEYspaWanJyxNLJEqw5udLyst3czh0U6aDLAjVLZs988cfI7p0cXd05JCvVsEL6mCFQmdlNVuhiLS0pIFLdrYkal/81dj0iPl9xoxt07iMC7leo9az2MT7XK02ysKiegkA8ezSZWNWlmjnzg/69WsFkff3d3J25guFFS1brgIxJBJto4IaGTYsMiYm+ebN5YGB7saFSBQCAVcqVfbqtS01tejIkUnjx3emghp5/LjMw2MZZWk4J09Oh/j4+DgymXTK6TnIySnx8qKGJwJ6fVTd5WFRUXlIyI6CgvKwsHejoyc8HRik01dfXfn005MBAa6XLs2vT7cfPBF41jqdAZ47DURX456rmdmB6Php0w8tXxb20dROpJJTKLRc7mypdC+XC6mKOC1cS6s1FBfJ3T0WgVWpjGSziaRlQqHQQExoNBrdmEiNHypG5BkQBHmBQJaEDEZ+m6ykFwmh5LRa3d69sd9+ez0zUwhl3/jxnT75pDedTmXdp49BEKQaUNlXVmqhCheJKioqVCDO5HKV0SqTyVQgzkC6gcqxtmZDte3kZMNmMRybWfF4lmB1cAAD09GRb23N4XKZRYWypJuPR48JDHrXueqLVKg7c3IkPj5LKXsVTDJOLtf8cTVn964/WCzaF2sHtmvXsK4UuIRSCZqyvGXLFaTLw4ebPT35UAw8XQjodPpp045+8028VqsXi3eYxretWfPrF1/8Wly83d7+33e7ZGdb1Xbjnj2Xly79icdjnz49q0uXdyjXmoAiqKxMbmfHo+w1oVZrX4hoqxvQoJcvPwgN3W00R5oKSRMgQA8c+HPt2jOurjZRUeMHD25LeVQhP188ZEjk7duPFywI2bJlJOX6LEDG0WgzSPOxo9OD3nVzc+NzuQwQzaRjPbl5s7BDh9Vg+PmneSH9fHg8Bvy8KpWeHIVZjQcPvvTxEYBwpOzGqRJJSYVduqyBBwdJFxKFq6stuHMsWXwbsJq7uQnoNAt4FpC8IfXa2XH5fEtoeHh52UEwPp9tb88zqT2UfQjyTKpqsNrUmjmUR/367bxyJZ0MR9K3r//vv89hMF56yYggbzIgv0pKZPABNZadXaJUElqNtD7KKVVWaoqLpaWlMrlc7eTE53CYDg7W1laWVtZsJydrFovu7m7HZrP4fJanp70lm+nuITA3M9DoZlCxkR8arXpfF2RakVBx4sS9mFN33+vhNfqDwOaefAaDVrXOI/tmDAaiIjSdAXSVUCi/fCnr+A+39Xrdx9O6DRrkV8eIuqqAQJFIVBkZori4zMuXU8+fvwuOW7aM/eijrra2LBBqdXQCJSbmdOq0AQzr1w+dM6ePlRW7oEDi6rpk9OgOP/wwlQxz6tSt4cOjQLENGdIOfsCNG89+8801mUw9YkRgdPSHzzMQ7XVRUVFpbR1x+/YKiUQJ4hueSGmpfODAf5caUasj4alRln9QKtWLFp04dOjv5s3tTp2a6efnRHnUA7VaB1dRqXSHDyfMm/ctNAZatnTp3btlr16+fn6Otrbspy9XIyDFzp/PGDyYmIFx+ND0/gNaODpySDkISUqnI1IXPGp44lWTHHhBBDIzxG0CCIm/Z/ek4B7Nra0ZkA7z8sTgQnYnQ7DcXIlGo4X2QGFhOSRRkOCyCpWB0LilYJVKleRaM/b2VpBBoAaCnAJJC2S6lRULruvlZQ/fPB4LBB+4OzvzLS3pUBO5uRHdh9BaeMsmxCBI3RAF/T8vRUHGPa3WQkJArc0137Fj1Pz5P0J2KiqSkh6ennY5OaXbt4N7COlSDWNFoidPrVJBptUar4UgTZuqg/ShKnJ3X8Rk0mxtuVwuC+oSeztbtiXb0ZHXrBmXy2E2c+Lz+ZYuLtYCARdqF9BMRP1nYQ5ZAerFp4b7N4zKSt2tpIIN68/L5Eq/Fk4h/VsGB3s5/FPjmvbCMta10BjT5edL/4zLvnQhLeuh0NvbYdqM9zp0cIP4QMVvMOgtLRm16TCpVHUjMffCxfvx8VnZ2UKFQkW6790bPnx4W7gp+AW4XGJaAOleI1CXf/rpyR9+SCStoG+mTj1aUiJPSVllaUkMqB85MurXX+/OmtXz8uW0x4/F7u624eFdp07tbprB2oRISSlo0+YLyvIUNb54hbI4NvbBmjVnrl17CLJ1w4bhH3/8xCDCZwLlbUWFCqQPmMVi1cWL6fv2xV6/ngkpgcNheXjYd+niHRrapn17D2g2kIdUA+IgFlfCGUAYQXGdmJg3ZAg1nXbTxvE9er7j4WFjPD/xDpd0JxMxHJiXJ028/jgxMffA1+dC+rafNu29Tp3dOBxiyKCxmiHumKwC/jEQXQgmAxnM9LOQ5rw8iUatrVQRbSEIKRLJQOHBbULy0GoNcjm0oOQqFdxshU6nU6vVUqkCUjsIQciYcJKSkl3k2QBTdkCQtwljXzgxgBVKUcg9kGt27rxYo1oDFWfeoUPzGzceka5VgcZQbfOtoLF16dID8tTQEpXJVJA5Waz6jgVGkFePqSKB+onJrJ5WjRUS5ByaUkl0GABQqajVGqjV4MNgMMyICsvMwtyCwaQZg7+KyoPQYXq9czOi54bBoBFvD/+pF8k/iA+46KGu0+lBzykrVRVymV6vA/llPAHR6IJmHMjQf+6+OlotHKiFwym7ETqdxmTQLYzv1OC6x45NGTiwDelVB3FxGceOJZw6dVsorCBdFIo9UAZB7RsQsEYmq2zVymXkyHdBwzXRbhWVSrN9+8XVq39Rq3WFhZvbtVubmro6JaWwR4+tZIDjx6fa2/PYbOJ9pVyuBo2SlJR7+nSyWKwATRwY6L50aWjPni0a+j4UniD8gBkZQihjyX4yeKxqtRbcyQAkxoRNr01zQ3KB9AxP1nR1uAsLCxqXwyktK3unuQccaGGsOnQgjEBswZWoRGMAyQWBwVQkIjZqg9RVW3KqDbi66ZCqZhLIj3AvEDFSRMKVwWoOadtgDrcJ6Ry0Gtwd6DnwgmCQnk13wWazTEqOx+FqtFq1htgXGIBcAWmbNJMZHEGaClDawHfz5oLhw4NMTfHo6DhQX0b/J4AmnLmNjaVEoqQcEOTtAtI/A8QX7d8XTxxLS2iDyJXELgUkUBOo1dAaoaxvICwWy0FgR7OggZqssU4Cp4qKCom0hkz+nHC5zJiY2X36+FP2Z5GTU/Lbb/dA0qWnF+fnbwLxUVRU7uy82NvbIStL5OPjcP36MlvbJrm76Pvv7756Nf3o0SlhYe/GxqaNHh2dlrbGdC9VZ91W48qVhd26edfz7WeN1HHy58eKx7Ox5puaOiSEFTSUOfwRbRhRaalS+eZWExBZOp1BZnOIOYdtCXEGoKkjU8gJkzGbq1RUlzOCvE3w+Zb16pODysOUz8EsEskfPZKQVhODBr1LmRCkSUG08ulPDAmFyqu4qOwxMZlUXlxcrtNaMJlW5uZMPt+Ky7V0bEZzasaAGsMC6g+GhU5HSCsqe5hqwxrkVsPQaHV//JF260Y+y5Lh5GjdNsilXVsPhnHoqlqjgWqJyWCQ77/EYvmdO/kpd/PLxHKD3tDCzymkvz+Hw4AwQqE0O1vo7+9ia0tNF9Bq9MVCMZvF4Ntw6XRadrbo6tXUtLQCuVxJ3ghUh61bu7//fjsPD2KIOotFe//9Fi4u1saj6w/T3Hzy0qWh0Ka0sDCfPv3byMhxM2f2BEVia8vZvXv0hAldqIBNhOnTjx05cu3XXz8JCWkJVlCl7dqt+fvvJW3bupEBXirwKEtK5AUFFdeuPQYlLyyWnTt353piOriDL/zCXC7bx8epZ8+Wvr5OWq2uqEgMLlY8DqRP8gyQktPTC11dbJs52cBzLyuTEe/iM0uYTJqNDce/lXNgO3c7e57eQHRFE+eE5M5kQjpWKlXpGcW3buQVFZenZ+b0DA7sG+IHNQd52sbzZE4hs4tOS0xqVirVckWlSFRZVFhZLq2Qy+WVysrKSiXEjQij0ysUquj9003KU63R/vtKGEHeCs6cSQLR5eHBd3D4d9mp2vrkQMVR4+SgrZyZKSJd/f2dHjwoAvd586hxclWVHIL8jwCyw86Oy+Ox6XQLV1cbqEEFAh4xZMHM4OYuUKv1LBaTx2OCEHR2BtFj4PNZ0P7RaAxeXgIQQOSoJhaLGD9HvqqCP9JQN1qtPitLvHd3XOoDYUiI/4iwADc3Hpyt6hTCqkD2BBEmEVfGx+d+/11Selpxj14+M2cF+/gQg8Trzrzgq1LpQCL89dfDc+dSEhMfPn5cClXp2LFdly55P6CtY6Mzvr//52lpxaQZ7los3kHObDh16tbo0QdWrhy0YsUg0rdJ4Ou7gsNhJid/TtnNzPz8VsJDiYqiNit7qRj7k3RsNpGiUlNLdu26fOJEIggaV1fbLp19Bg1u262bl5MTj8msK3mZUsLDh5KDBxPWr/9p7OheH4wO6vaeh0DArmNSC8gkuHpeXsW5s6lz5h5ZuGDopMkd67MjHGQZOBaSU2GhFNobEonSuOCOFtoPkE3y8sQymVJcJi8TKxQKNTSZ4BAnJz6Xw7Kz59rZ8SDrubvbwl27u9uA2dHRysGBmBjh7i4AMUpeAkHebiDbwjeZN8lxcjWqtVrnrp49O5fMLVVPhCD/UxQVlVdWakBakRP0yFmrJmt5uVIsJt7S5uSUQjYBq3H6nll+vkSnA51Hd3S0BnfjND0GWO3traFis7Gx5PFYDDrNxdXW3NwANRafz6HTiSERIAptbTliser775JdXfkjwlo5OHBABhFRMVLjW7aKiq8sLWlQE8PJc3Ik3x67FRNzt2tXz08X93F3r3Wvz2pAPDUafWmp8sGD4j59NpOOZ84s7NfPp54TYKuRkVHcogWhe+CODh+eNGRIO9Id+OWX5AkTDk6e3G3r1pFNpUq2t18weHDA4cOTKbtxuHDnzhtEItmFCxHdu/tSri8NeEDQeLh4MWPw4B1gXb58SO/efgEBzjY2bONsm/qWz7m5Fdu2xO7ee2bV56M+nNje05MPqc6ot3Q83hMrGOfnb4PkV/XpQ7DS0kpHR2IXr7/+Wm5rw4IEX1IqKyqSwuE5OSJQaUJhRXm5AvKCSFShUmkKCyVw/qr6zMqK7eZmAy0i+CbnqBr1GdvDw5bsckYQpCqQ98kMrq1j7mqN68nNnt3LlKngLPCNSg5BGgS5ggkYiGl6Gi1UcuS6DEZ1SAxXz8+TQNaCCg/UoUajKyiQgK9pmQaNZl/V0evgZWFByLizZz/183MQCIieQsiXULvb2s7Jzd1hb88CPafTGe6niHbt/DP1fsG8BX1GjmrViIwLMlQqVQsEEWA2ridHrBNBejUUuFmovJ8eInbuXMrgwXvDw7t+/fVEyumVoNfrQWSoVFqptFKp1IBK9vZ24HBq3bHKBCi53r1b/PgjtaIbSVmZPCwsKjExZ+jQwCNHJr1UVQoqilxPLjn5Cw8P0EDExrukVz0xFuRmx47dnDgxetrHoZ/M6dYmgOhzNfb2UYvJKRR7IRhoehubuaQLoNfvr/r8wZfJnEnpMy5LIODagz6zZrm62lpaMtzdbY36zMrBgejPNuozoruPOhhBkMYChYBOp/vqqyvHjiVkZop8fausJ1fbbl0mTHoQQZDXxf37pa1bf3bz5ppWreyrLbgP2buyUgeqDpQc5NRHj8r3RyWcP5vy0bRuM2Z0blzeBYGoUGhBIz6zfGg0J07cHD/+4NCh7UADkYuVVANELWis55RHCoX6woX7R48m3L6dW1QkVat1ICzgF4OCDb6hZIPfp3NnrxUrBvbs6VfHpARHx4VyuUou30vZq3D69O2ZM78rKalo1859xoweI0YEvaQpHcYIP1ejGoT+/v3xs2cfXrZkxNTpnck9HuQyLc9q9tPb5GvU+gdppW3brsjO3gJqnnJFEOQ1UUcJ8AwlhzIOQd4Ezp9/OGDApoyMjVD71jZgDgAFdj0hL7jH+tB+HdZ9+Z/2HRqw9mxVoMiQlmvZlhbVVOOLBVqWU6YcGTeu0+HDkyinKuj1ehptJhiSkpYHBXmQjvVHKJSOH//fhIQcOE+rVs59+7bs1s27eXMBFGgeHgJyzL5MVhkbm75u3Zm0tGILC/NJk7ouXjzAyYlPnqEqV6+m9+q1beHCkK1bR1FOVYBLJCXlrlr1y61buVJpJZfL8vFx7NDBIySkZe/efm/Usnnx8Xldu64Fw5XYZd2Dm5Mv5cFa9SU+CbiTvYC//74kNLSuTTgQBHkF1PGC9Nl9cgiCvHYKCuTbt13Ztj0mL2+rs/O/+x2ZgEwul2sS4vNC+m0K6dN+xszuQ4e1rNbL0iA0Gh2d3oABWI3jxIkb48cftLHhbNo0PCysvZXVE6IH4rBt2/lly06BuW9ffxBGEyZ0cnMTkL41IpEozpy5Gx0d99dfmaDJ1q0bGh7e9Zl3ceHC/a1bL9y7l19WJo+I6Pvll8PIecEm4Od1d19SUCD19BRcvrzA09Oe8niS3NyymzcfwSc1tSglpaCgQKJQaLhcpoOD1X/+03bz5hGvfSiYSqU7c+ZBWNjuCeN6h0/q2KWrO5dbw8LROp2eTidk9ORJvSDa9g41LziMIMibACo5BGkaiETKI4dvfrr46P79H/n7Ozg5WbON02PVGp1QKE9NKY6Pf/T1wfOrPh89fESbNm0c6ui6e6OIjLyydu2ZkhIZCK/+/Vtu2zbSxuaJt5N6vT4zU+jnt6pzZ8+EhBy4cdBSLVs6U95GyLkg77xjLxYTmwH4+TmtXTuk/svgkQiFUojJgQN/Ojpa3b69UiB4Ihqfffbz7t2X4brp6cUBAa6RkePqswRJaaksLi7z9OnkU6duyWSqjh0916wZQi5l8rrQ6QypqaKAgJWkdV/kR20CnJo5csnZ1qCeC4ukwcHEDmwb1o+d/FGnZs1wgywEeaNBJYcgTQYDsa+Rolmz+ZT9KYqKtleb7tok6Np1o4+Po4sL/8iR+OJiaWCg26xZvUaP7vD0lqwKhTo8/FBMTDKHwwoLC/z66/AZM47t3x8XFOSelyf29LQbNar9uHGdyG3dGwdEoHXr1XZ2vLS0NZSTkQsX7vfvv2v16v98/PF706cfu3o1Ay43f37IpEldq3Xg1caVK2mLFp24eze/SxevM2fmvN63rnpiIqoyLU0UHPwl5fQkJSU7BQJij3wEQd5wUMkhCPKaCQuLAh2WkLAMzKmpBZ9+evLPP7OkUqW7uyAgwDUkxH/MmI5Vh68JhdLPPjt1/PgNNptRUiI7fz5CIOC2aePyovYMvHMnLyho3Z49Y0BQUk5mZvfu5QcErFm1ajCIObCKRBVLlvxE7jYbGOg+aFBA795+zZsLICYQK3Ni41GDUqlRq4kNo8AFPsRZjNuaDRsWCYbY2IWvZmFhBEHeblDJIQjyOrlxI6dr103z5vXdsmUk6ZKTU+LltTwiog+dTktKyk1NLSwtldvYWKrVuj59/MaO7RgQ4Obv76RSaRYtOrF/fxyXy9y0Kay2faIbR5s2q1ks+s2bKyi7cY7qsGH79u8fP21aD8qJmGKi/fnn2z/+eCM5Oa+8XKnR6FQqYh9bg3FrXNBzdLoF3AWbTSwuCJGPiOjr7e0gkci7d99aUCC5dGl+IyZzIAiCVAWVHIIgrweFQhUR8X8//XTrnXfs4uIWk71WFy7cDw8/VFgorVo0lZbKTpxIOnLk2p07eUqlBjSWn1+zDRuGh4a2AT03efIR8AWX48entmrlQh3zfAwatCcjQ5ieTkzzJAkO3nL9evadO5/7+dUwIxgkXXGxtKxMDhqO3AKLz2ezWAxQn2KxPC2t+Lff7v7+ewqcMyjIPTZ2IY1m3qbNF6D5EhM/s7Oj9lJDEARpBKjkEAR56YCOGTSo+mJszs78ykrNihUD583ra2Fh8ehR6cSJh5KSco1LJUfWtpJcYaEkKuqP5OS8c+dSAgJco6MnBAZ63L79eNiwSLFYce3a0latnpgM0Tg6dFhPo1mQL3yBUaP2nzp1e82aIUuXhj7PfN6CAgnEU6PRXbgwH+7d13fFpEndIiPHPc85EQT5HweVHIIgL55r17K6daN2/SKZM6f37t1jwCCXq5RKzV9/ZbZr52YwmIGAu3bt4cmTSUlJjzt39vzmmym+vo7kIXWTmlo4d+5xuFCfPv4HD4ZzuUw/v8/Val1R0RYqRGOByISHHwoNbX3ixAyhUBocvDUnp+T776eOGBFEhXg+Nm8+l5CQffLkjFmzvvvuu+sSyU7KA0EQpOGgkkMQ5EUiFssFggVgSEhY2qFDc9O8zvnz/+/cuRSRSEaOJNNodGZmBgaDbmnJsLa2DAx0W7lyUCMGjT14UDR48B6BgHf9+rLY2LTQ0F1S6a7nmfowduzXv/56Z8qUbmvXDs3NLQsO3mJnx4uNXeDuXtc6dg1Cr9f7+6+CCKenFw8evFco3EZ5IAiCNBxUcgiCvDBUKg2b/UlGxlofH8fMTKGv78oBA1pZWbFPnEgC32nTgkeObO/tbW9rywH1RqM1bOfQ2hAKpQEBaxYsCBk1qn2rVqvLy3c2QsmJRBVHj8YvXHgCzKBBvb0dliz56eTJpM6dvWJiZjOZL3hF3w8+iI6MHMfjsebO/SE6+kPKFUEQpOGgkkMQ5EWi0egYDBo50xOsr6CEkctVwcFb+vTxpxF7tZtv3DiC8qgH5AxTcmFhICZmlpMTv1MnYl1cOOHYsR0nTOhsWkDkBQJXJH8ZkwFBEKRxoJJDEKRp88svyUOGRC5ePGDz5nN6fRToMsqj3oAWLC9XurgQO8oDFRWVSqWax2NzODVs7f9iIaUkZUEQBGk4qOQQBEEQBEGaKi9mnAqCIAiCIAjy6kElhyAIgiAI0lRBJYcgCIIgCNI0MTP7f6F9fpenh4gpAAAAAElFTkSuQmCC";
      
   
     
      fox_divider_black_on_white : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAMAAABbCEBqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABCUExURf///wAAABISEvz8/CYmJhcXFw8PCRYWFDAwHBsbFi0tKSAgEi4uKhcXECkpKR8fGh0dGfr6+ioqKSwsHyoqKCwsLFsAzSUAAAAJcEhZcwAADr8AAA6/ATgFUyQAAAQVSURBVHhe7duJbtw6DAXQON33/f9/tSJ5tVOyp1bSxLkH740liuIYAoUUQXtHRERERERPyna/hf8wIaIbbZtcH/0guoZZO1vDLxQKakXeIbqQyT2Rjl/Z7KkarxBdh3Tz6KJoeF27569ZV5Pov7N2dpsawVUNX9RZVZLoCSgvivzJTeVQ8TypLMPfytGFFDcFFyixhUV3qKpyvGTxHkRPk39Vll+hqszBkvISBgGiR3S495DUpaf5mgauih96sfxK8U2IHo+2HyA0ogmxV+XTWED+L4InVLUPlax3rHkLooNSyx25ROGmIOVVkWujENjbrl+RINgrl/ZfKWiSjmwhWqVuv92O1QS7ACnVfsEgA2XBii24kFEpolWCn93HR3lEy+TmPdp+Ka6D/IGnjl/3v61r2AZATCBiynm91KUConEtZY3yiW4lveSwJc0IbOA3XcwWaRQH3bxnCx4kFBnl39JudzapEWK6KnSWpzVbpEo+F55QR9umYytNAqb6qORVEyfVjjrlRvnbhQ6DYpgNgngoHcdEC7U0gyL5ByY4wnv+S5PWrGPqJitCtbiWIYIt+uFtvIW8gUFAIxjWvHAfG75Q9SUk9Ej0UPLoJcMpRIj6ulUv362hlXUlf5xg71pUqWcNb6HLfoOnT+tniL5Q+lNIjwHPOKfVcOKgJ148T5DaWuK1ToP+64RE6eG8vXuLET0QdHKEkLNyIyuDIeishTVarf85hBN/oXAMEaK+9s87bvq4hDX/7rfs0d2oodV2ynnrfWxexL4nQfSlyqeQR5TMjsRpPCd1cqJaPCxPUnZh7/gtG25iLqKKUC9lUBJ+8uBnTzgb/l6uoR3TwYpmxBSM9VGJa47ZtoPi1sm3ZPKeTlp6iwjTOljSBErykfBwfNo2vWYRM31U8urQoYPXOgoBkSfNgmOUgWhRyT5dmkF0Uu6l3FT29Htsv/fKdTdXSlRSHIOYgolntNjG43ynHNEKo/Zr7TZjkeB0rnRzGSzn5YLGBeYH1fm37iY6pe63E+3XXQWMbdLVzbF2UVb6/Lliy817ic6pWu5U+23bO4wCbWqpZgO3box6GYMtQ1bDIET0WNB1K9rv/QcMhJab1cQS0trEycYBLXLzLqLzrPcEAv/qYyjx6XNRZ6eiLSOp+/rz70P0aEK7LujX7YsU+SqjVG9eV1dzimyLbK5hootD02/bN5l9t763iA507rMMGwe2Kfqxs5noCtDuJsy//2xuhD5t7pClwbJtnuwlev70khRd/uv3n6blbXV0EXR1fEtsr42JrihdH7lIwmY1uwjekm3wdxlZmywTPXPW/aO7k+hF6FNs33yzZmBMdE3TK2DsqmCSxBs03a85GBNd0/wOqJAyyjqwm4iIiIiIiOih3d39BQYsDG//O/hGAAAAAElFTkSuQmCC";
      
      
      fox_divider_black_on_blue : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAMAAABbCEBqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABUUExURQDMzAAsLApeXgA9PQxCQgAiIgAlJQAuLgAbGwAmJg42NgBERAAICAAgIAAAAABFRQAkJABOTgBJSQAqKgAQEA4nJxAcHAAWFgxlZQAREQ8PCRBIQ843qj0AAAAJcEhZcwAADr8AAA6/ATgFUyQAAAWESURBVHhe7ZuLdqM2EIahVA5sbMK22bTZvv97VnPRFSFwjLMb/H/nBIOQZSDza0Yj0QAAAAAAAAB+K9o/uu5PowcAgCsxpye77Xs5AuAAmIpLMP3O/qLtBm5RtgAcgm5odW9GO/TLJz9A25EPsjzt2SoAvxTTWYvuyibdksXvZ+5eQTae0x0Avj4yMCkKhSW0X9ilzREYDYEDoebMIjK9IKJxNr+TwUcSar5BQ+A4OIVYET0PqqGhO/U9p8+IffyQGXSH2N6klTWyD+D3xnuZwQ6MPKY/u/KdxkOnSAobh0NWP5cL/UFF4BfAYdkW21MNPXdDmoHrTuOL7PD2Vj7ghiarH65oLhMXAPB5GOq/pRdfM1fKyzXPLJfY44xus5MbigdV29zQFAlnig8AuD+Ti34oGlq1vpfmu+5FemENNeO46oZcHoJZFmysoU1uKFMNNAQ+k9T8Vrvw9i+7mS4kNi+YUQua8e8FX6baEYfneKVNUSHRcCjxbEuLJMxFdxSMicDdsTatZrbV/Lz5ctaZj5yHoBIuGFv2ZYlQGFeUts3CKghJ1sgJaXBoXsuaU7/l9B971mJ9AK5F3YDnNPT9IJ190JBYYBxGBUz/6o2xleyBLdSRivNHzt7zX6saMldOkmnmRzjIx1cmrerQm6C8ArWmWjJym1wWqFzLAxOWOu6+6PHrQzZKtpTAT4nzA97wnOWVTfSSPNhn9RPSgE6HLi0B2oRLptmrPYUBkCktvyvm3TQEFfXq91tpKFc0i6pwkw+NeRvP8kzs3hueTkpXsZgXNlE1MqlUGg/50Mija9lEQ7y9SUEEK5nE7n/LqKecUbzGWVm80iGB7te5TsCY8ziKiMLeI5P2u3VjmZ3NR0dEqUxUxB09z+WIGj/ONP1DVxumhYyLNUsUNDT3n//qZxnqWgIPbjPW9xDnvulJQuP4ps/lUZGn4DhraZl3/fScC/VdWWZotp/nsZPdPD1L0UehCR3WheTILU+nkl277oHzEBmzK5/dW8I1T+nwuIfxs/mpe3ggEfWHkdtZSULeYnOjbrt31tC5v/HdBI7DxLfIIrxhITBUDdWEHoCGtjPzQ4/umPW5CPVYLo93imFbKXISOIyzGiqN8q+Av62xGF/9yn+wlPaYl61Esfx0HA9uMhgP1anlFPLMsbqEjFKZQm+u0rClUmUVnXgyIXleZz0vJ/frU/A5VAk5hZSQjbMiQl4ugyxmIbftMsdiefLgiiIqdfyCm0y4QURuQmrTWtFN80POL3Zym1LmQW67BOaH1sjtKJpj9Zanhlc20XR+qMAmEfnLiBsLk7r2QlZ+ZeM6Bb0JzLGCO2KtWW0pdP/yGUw6Jl6nUCYWUXFZG7kQNWOr1yCXqDJXqf1OsWFLPo5zHUG4TQDuxpL55SyZrycSUSEsy12ZFWVJRSQj9otrv5aRusEbIksArie1txvML/7qFMdlFMLN3RipRfeyk1R/rsI6JDxtZdPACoD9SN5Yu6kHnyY/R8oSERnJG34zCRHO513i2E659kU6KzyJFfEyOPh8NO9GVnhrDz5GKrIN2nYrST0XR9IHSW6mIt3ZDDmwsloBuC/sKujvVvsb34duHCMXsqIDOa1pjFkMhne6wRfC9uA79N/tf9QIuSI7HtL26jrgWsEBsSMRuAwiAo+Bs/wTB3KjzNxaryJjnKoO2AWFCpGGJLSDiMDhsVYvQ3kLLaAZVUKEG+NUhEDnF07bAHP5JADHgH1NCAJpxW+2Ak/GOEtC4AHPsko45QANgQMTjXkEOUrhUlcxoa4vgh2R7gNwPMT6l7TjISEUFhBJqDbLxSXQ16AhcGxWVwCJEOZ+iH2Y6GgZah0aAsdmg4ZslSVPteHbAAAAAAAAAADAvWma/wHyRWPr81WQ3gAAAABJRU5ErkJggg==";
      
      fox_divider_yellow_on_black : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAMAAABbCEBqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC6UExURQAAAAgIABsbACIiAMzMAD09ABERAEVFACAgACQkACUlAA0NACwsAE1NAC4uAGBgABYWAF9fADo6AFNTACEhACYmAFVVADY2ACoqADIyAVpaAEhIACsrABAQAEREAAYGABQUANLSIRoaAAwMABwcAM3NQ9PTSBMTADk5AB8fAAoKAM3NP87OIdTULtnZQtXVMQ4OAM/PHx4eAMzMGikpAB0dAM7OIDMzACEhBExMAM3NHmNjAMzMFNLSIgaapYYAAAAJcEhZcwAADr8AAA6/ATgFUyQAAAc8SURBVHhe7ZsLd9NGEIVjWW6dYAq0DqVAsHDaEuiTtmlLH///b/XOndmHpFViO0po7PnOIZJW+9LqXs1qLY4cx3Ecx3HGZVKRiR06jrMVk2pak8oSHOe+g7AwGBIkZIwaL9RBU/nrHnL2hQqaHvDJhIIfz0QWg6YTqdg95OwHk2rGwFAyCi00nolCDKpooRGt6TgfE0ShGaXdlzSVLrofR+4a1GjWK0Kf49w3IOeKAQKitgUzIAK3YCGbMaZd6kh1jjTKHce5/6icKfBP8MfAhCsGoHEEb45UNq+StvaQ5fyfMTmLxD81A0Wo+ZHiENqJFtqwSvEPcoqj3UXOnWPTsuu1Fzw0P4aJTrSUSfd4LsVz8e9OyzabVSlFAiP0wHG2If6OKXOyq+VHDz1YPNTsIe/ks0dy/PCBKHkMAW8fhsxCuALZ8VDk3Cn5EzzTbhGIe/b4CeySXoCEz2ucOqq/WJ5eo/e0DkGG2qJVjY3CkFyDPQH0iXC96xxnLGgh0Z9FoysFK78PPa2ffPmsqk6/ikqdPK+PKuzX9QtM6UrWCN7RJiJsttBe5qFWGEI1xd7RQvGMuOh62znOjaCmKTN9guuuirwsvyBfyPvpY/yp69OgVFQB+yDh5QvZmDVadLzTomckRpJgz1aHJCaVXGSxamLnou/SZTrOzaCWcqhpytHkx0wiwyTfnCRrilrWtacTFGUStich9Zi2GCa3F7JHMmtIC7FPbIi7AlpqZQ1YTyqrXirAsb3n9RzdK+5QITbkPkJdaJ9crTkQmnhIskgm1aEaI8fEqOki69nJKcbZsiJhOplUp/TR2UBrQcj53Wl3jVaRJElR37DdzEJqr3YSkYtAGjaG+Mwy92FfulUcNhwrvQNp+B0j6aoFdITBmunHaAE4Qg67HrIsYWD5zZyJVLLSSmozzUJvdBi8KZqZhW0b6smrDCB3PxHJSERavBY5zwO9zBLdizxo0h1Oe4dMR8HyjSi11EZEJueg/igyG8Lu+AUxpmRLwWROi+iX1ZJiGbbm7DibBNKfJv7+zaS1SjaXvqSrY2zSy+zAeuWCcnbu+T7Au8dBOYp7Ni6HSRiFwKsZiD+Htpgfy1jNj405C8umhaRpYhSahYi5iBlanYfItCNaHZF7J8LXhE6dZgftdhv50bedOO1fiaLXy/oTB62ZOPq6NuTcItnTn7KHEOkhbDErtDPbQ8PQFwhp2V3tuXJgXuqMhnvotmnNoDRU0ENwwJml7gJnXXObFwZgpp4r3UO3TfKQB+YMzlyGZjWdoULZftY0KWqLmqGI/2MI9N9bNmXV8HcmMVIyUXliyLkcpmL9O2xTufa0dOCqT2Ry+0rbiRy0ZOweYhTS+9DO93Mf6LxDm8TtKIIhii/n6U1cJNwbPYaJ4pBGxZeKbUpTv5ayEmPERKErZXBa2uw2Zv1OYQwHqJATzM54hBGZ2ZGxa+/3Axu4NITdAT5sBuY/MJWMloxVVJ4NYXf8eB75C8Nqpzb939qrJrKyJPFQ3WBzRSsJZio0pUEsv1b5xYoLHWaZHr62naOjL8Oa9pwAH8MDOpKxytbERFcyhF15DSkXSO1h5NN5eCV5JIDENesh6+gj81DoyJU2okkKQRHp0unwnYLUhOOBx4dmGm7kIAk3Mt9zcsrzGYpRhKbK2/A7hTItE8EW646JVrmBjDVdhLlcpXYyr1p3SvcRnStOKyUdyZ3v5ZIr25RqdpwtoamoJZMf00SGKr8u8d1pkNxE8FAWaDiFUwdJomLHyLFq0AW1HHpF1ZMU1hLIUEi1xsMVsa9aOl2m49wakF/2aM+d0GZIvhHVMfOEoAPLrFIE4lHAUumd3HKievNRMeIMII2ziBUvX4Pj3AqIAipXk+/O8qOOLVZF4zQr2ynM7iSPvAqdf205zGOMHls6wUxkuIWcu0TfGvAEVxXeQH7Q/vSbb5s3Cw0/tNHFW/zhFK5jIcHem2SjTst8pjOyzUPRjgHMccYgf4bf6An+bvkdqvi+/qH+UVxz3jQX9U+LRVWwD5EYBdvAQ41ZrpJyxs/09jb9YQDzFyDnI5AtYO2iP1kzIBf1e8ScX359K8sEDD9vf0Mc4tJ1ETFRQw/JQdNUr6Wcsb680W+3jnOn8Am+q390Hib8fjb94837eolkS1xXSwlKQ5GIIWgd53A4zPnz8pmbyNlrbAKW+HD5vP6rvniXn1tWce26C51W4V+IVDGiAZa+RCS6ckndce4zccltuVD+rv+p/30Tg47ZaH2OvwUTaaxaLgccxtNrvBS5h5x9hRZaV/BOXJP4cPny3M4qagQxUfelyBy0GLIQ4NtS5R5y9hZZksZbFJzAVTihYAYawVYNMjSGSRAatJC+LbmHnP0FU7UVP3YbXDEgMEL+ymPI6sGay3DDFnIPOQdAP8D0QJZF3ymyegAHxm8TiohLw3ekjrOfiMptdwhkOR/ItUFpx3Ecx3Ecx3E24OjoP2phf8izPsSXAAAAAElFTkSuQmCC";
      
      
      fox_divider_white_on_black : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAMAAABbCEBqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURQAAAP///+3t7QMDA9nZ2ejo6PHx8erq6tLS0uXl5dPT0+Hh4enp6dbW1uPj4wUFBdXV1dtBACcAAAAJcEhZcwAADr8AAA6/ATgFUyQAAAQVSURBVHhe7duLUtwwDAVQllJKaaH8/9fWkq7fspNtDIXsPdNubFlWMhl5lmHaOyIiIiIi+lQu95fwBxMiutLlIsdHP4jOYdbO1vALhYJakWeITmRyTqTjVzZ7qsYjROch3Tw6KBpe1+75NutqEv131s5uUyO4quGLOqtKEn0C5UGRn9xUDhXXg8oy/K0cnUhxUnCAEltYdIaqKvtLFs9B9Dn5R2X5EarK7CwpD2EQIPpAu3sPSV16mq9p4Kr4rgfLjxSfhOjjaPsBQiOaEHtVPo0F5G8RPKCqvatkvWPNUxDtlFpuzyEKJwUp34pcG4XA1na9RYJgr1zafqSgSdqzhWiVuv02O1YT7ACkVPsFgwyUBSu24EJGpYhWCX52Hx/lES2Tm3dv+6W4DvIHrjp+6H9b17ANgJhAxJTzeqlLBUTjWsoa5RNdS3rJYUuaEdjAb7qYLdIoDrp5zxY8SCgyyn+l3e5sUiPEdFXoLE9rtkiV/F74hjraNh1baRIw1Uslr5o4qXbUKVfKdxc6DIphNgjionQcEy3U0gyK5D+Y4BXe83+atGYdUzdZEarFtQwRbNEPb+M15AkMAhrBsOaF+9jwgaqbkNBXoi8lj24Z3kKEqK9b9fLdGlpZV/LHAfasRZV61vAWuuzvuPq0fobojdJvIX0NuMY5rYY3DvrGi+sBUltLPOg06G8nJErv5/HuESN6J+jkCCFn5UpWBkPQWQtrtFr/PYQ3fqPwGiJEfe3PO276uIQ1/+Zdtuhu1NBqG+W89T42L2L3SRC9Vfkt5BEls1fiNJ6TOnmjWjwsT1I2Ye/4KRtuYi6iilAvZVASvnnw3RPeDX8v19CO6WBFM2IKxnqpxDXHbNtOcevkLpk8p5OWniLCtA6WNIGS/Er4cnzaNr1mETO9VPLq0K4Xr3UUAiJPmgXHKAPRopJ9ujSD6KDcS7mp7Or32HbvleturpSopDgGMQUTz2ixjcf5RjmiFUbt19psxiLB6Vzp5jJYzssFjQvMd6rzr91NdEjdbwfarzsKGNukq5tj7aKs9PlzxZar9xIdU7Xcofa7XH5gFGhTSzUbuHVj1MsYbBmyGgYhoo+CrlvRfk8/MRBablYTS0hrEycbB7TI1buIjrPeEwj8q+dQ4tdTUWejoi0jqbv98ech+jChXRf06+W3FHmRUao3r6urOUW2RTbXMNHJoenDV5DMXq3vLaIDnfssw8aBbYr+bGwmOgO0uwnz17fmROjV5g5ZGizb5sleoq9PD0nR5W8vz03L2+roIOjq+JTYXhsTnVE6PnKQhM1qdhC8Jdvg7zKyNlkm+uKs+0dnJ9GD0KfYvvlmzcCY6JymR8DYUcEkiSdoul9zMCY6p/kZUCFllLVjNxEREREREdF7u7v7Cz5kDEh8YqosAAAAAElFTkSuQmCC";
      
      
      fox_divider_green_on_black : base64_png "iVBORw0KGgoAAAANSUhEUgAAA0MAAAAtCAMAAABbCEBqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACrUExURQAAAAAIAAAaAAAPAAAhAAD/ACz7LEn/SRz8HAAiACn/KQ79DgA0AAAeAAAjAABMAAApAABTAAAxAE//TwBAAAA/AAA5AAEtATT/NAA6ADb/NgAXAELyQhn8GSz5LAv+C0b4RkzuTEj2SAAZAAA3AEDxQCn5KQBVACT7JCT3JEj/SCX5JQAYAEn1SQQoBAAqACL6IjT0NB74HgBiAAAQAAArAAAuAAAOAC3/LS+XZBEAAAAJcEhZcwAADr8AAA6/ATgFUyQAAAc8SURBVHhe7Z0Jd9s2EITNA1XlSLTi9MrRpG1632eS///LujO7IEEQ1GU5raX98p5FgiAAgjNcgCKVK8dxHMdxnNNS1U1dVXVlq47jHERVt+GDsPgw1JbgOA+dqp4PCbLttPECDgphWS+De8g5G+oQ2hmfVBD83MYjUAdJiSjYPeScBxVCQmiL0YYWOp2J1EGtRDYUfEJrOs5/SR2ul5T2VNJUOnR/GrlrUKNZt4Q+x3loiJxrBggRNWY/CgRuwQIfpxh2qSPVOaiUC47z8FE5U+CN/DFkwNUHoNMI3hypNI/2LZK29pDl/J8xh0DiKzNQDzV/ojgk9fQW2rNI+EdywtHuIue9Y8Oy3dqLHlp34Xq11L1Mut0au6fiP56RbfYrErtETtACxzkEu4eMK/guH6mHmhvNHvNWm8dYv2mg5FMI+PAwZBaSI8CChyLnvZJewRPtFoGHmtsn4WaYAIFbJNyEj243O/Q+3Icgc3WpVZW9whCOwa4AekXY7TrHORW0EPRn0WirYKt6ubgJH3+yqevu016p1eYzSdg8fRYey5CuZI3oHa2ih9UW6ks8NApDUkyxdbRQvwUu2m07x7kT1DRlpldwXVSRl+UX5Svyfvxc/sgEKCpViuANhtrGeGqNEZl3RkyNlPhm7A7EpJKLLFbFJ1P7/YfDdJy7QS2lUNOUo8mPmSDDQb4pHCCpLLGgypZdmSSf+OK1beoXoaMt5kntJfv0JNao6sXQJlbERSA1jbJGrCW1FY+CZd3meRNHT3Z3qBDrcu+hHNonVWuKCA0eQhZkUh2qMVJMjJousl7Uy0762bJKQlvJIE/i0qJuZmqLQk7PzrhptAqS2vD5QvOx3sRCtFTMmoKDkDT5MOAzyzyFbcmLuGzYV3oG+iUnMuhqhOioDddLfRgtIo7Aau4hyxI7ls/MmUiRlVZSm5nLoNGM2ZOimXni7DOWo0WOT6fkniZKsiRKWn8s2M4VHmaR/CAvGumrR9In2oWP5F/ewRdGpuDlNRQTw0APRKavFPTCiyrM+y+KcUi2FBnM6S7yF1YtDLL2pemSQSD9aeKfnkxaq2RztGU4OsYmPcwMliuXjxFHt/wc4PkE7VW/ZP1ymcReiGxWQqYYY92hr9adsebO+BiBNE3shWYhYg0xi1Zl4+IuDtLiCM4dhK8JWZlmB232GEnLEpcvZ456iQ7ZsPyBi9aMRiFwZZ9x3Tk1ydWfshfd0kPyKaNC23I4NIz64kUXz6owcSWCnXOPvLp6ZUvOPTEaQWmooIfEAY2lHgNHXWsO2waXiKMmrnQP3RfTOHThgXnMlrHccvVyvAGxJR/KSWJMG4uaoYhvDAnTecu+YFqmEypMaKz15YEhx3Iy9KTDRthQbjwsnR4K8bHchKiZZD509Pk8B7I59LZ7CtJhCC3DTBwSnvQew0SxS3vFl3bbF7zWJ/sixsBEsSllZDPqzCuzdsf2cEUK5AAz6w8TjN9TSJGOs7tx7MKLvy+XMTP+EVNFMfbKsy7M+4/bJX+hW23Tvm9rJ3IeMksDaeT5WgaYqVAVbC5pybHyG6vreJgF8jt7l432Prp1WHIi1O2MjtBXyT0x6ApdmMtrTrkCSo89P2yX1GleSUyagcCoecxDsSFbbUSTFIKilRGfU0BJsp5YagQzzVdykcQTmS45KeiXESZX6SsITZW353MKZUYmkjJyw6VWjagZMJbTk2ZeteZkBRAUXNpgFWbPyw2uHFMq2XEOhKailga97/e83BypiaRMKtdWURnVnMjZ1lEjH3tgVsmo6SAWliIZCqlWuZRqpfRNGQ7Tce4NkV9yaU+dMGZOvj3JrjHoiKyTwSLXIjFGICW13OC3tFk7QeXcxXYvH4Pj3AuqYNGcyfdo+UHHX8TlaAQ+4k3ycqU62YTY1nSWw0zD6IHdDmhKXw1xCznvE5W7XMFVhXeQn2i/+fKr+vXXr8UMapFwg1eKGB4K5do4Eh+TytmsA0KRXQFYyv57Oc5JSK/hd7qCN7ffSBHfhmdhAdc0eD88fLfC1z9FULFUKB6qzXLptzb88a2D2sMAtmvM6Tj3QJycHKk/ky4c870U0v7Q8heFUd7m6e2PW3wAE/FpIQzppBj9QthoO77Z545wHgS0wbH+oQHJT8/rn1e/iCP6+VBbb30glSFo+PUDWU35tdu4iZyzRgw0+Af8tlr/Hp7QMf22TYcXI4pGoNMQbOJdc1rZ4N5dstFxzo5+HsXHWsEf4c/w19+2OdqIP7xQMJHGqs1cqNGbCjIpcg855wot1OIp6H9gJCBx6M1b20x6I0ycYA7CA9RzozXOlmr3kHO2ILrUz3HvmnfhQMEMZoTcCRrDEIRmLaSzJfeQc77IUK16+w6/cDprAiBGSKc8hqRKDMNtuHkLuYecC+BNeLfrDVYxwmrqFNw94DxpmwHhUv8fwZ3z5u14+lNCjNDMhCp4xBYdx3Ecx3Ecx7kDV1f/AuMOZIV80ro8AAAAAElFTkSuQmCC";
   }
     
   
     }
 
 